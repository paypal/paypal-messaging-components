{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/core-js-pure/internals/fails.js","webpack:///./node_modules/core-js-pure/internals/function-uncurry-this.js","webpack:///./node_modules/core-js-pure/internals/is-callable.js","webpack:///./node_modules/core-js-pure/internals/well-known-symbol.js","webpack:///./node_modules/core-js-pure/internals/descriptors.js","webpack:///./node_modules/core-js-pure/internals/export.js","webpack:///./node_modules/core-js-pure/internals/global.js","webpack:///./node_modules/core-js-pure/stable/array/includes.js","webpack:///./node_modules/core-js-pure/internals/is-object.js","webpack:///./node_modules/core-js-pure/internals/function-call.js","webpack:///./node_modules/core-js-pure/internals/has-own-property.js","webpack:///./node_modules/core-js-pure/stable/string/starts-with.js","webpack:///./node_modules/core-js-pure/internals/object-define-property.js","webpack:///./node_modules/core-js-pure/internals/an-object.js","webpack:///./node_modules/core-js-pure/internals/path.js","webpack:///./node_modules/core-js-pure/stable/array/find.js","webpack:///./node_modules/core-js-pure/internals/to-indexed-object.js","webpack:///./node_modules/core-js-pure/internals/classof-raw.js","webpack:///./node_modules/core-js-pure/internals/create-non-enumerable-property.js","webpack:///./node_modules/core-js-pure/internals/to-object.js","webpack:///./node_modules/core-js-pure/internals/length-of-array-like.js","webpack:///./node_modules/core-js-pure/stable/object/entries.js","webpack:///./node_modules/core-js-pure/internals/iterators.js","webpack:///./node_modules/core-js-pure/internals/function-bind-context.js","webpack:///./node_modules/core-js-pure/internals/require-object-coercible.js","webpack:///./node_modules/core-js-pure/internals/get-built-in.js","webpack:///./node_modules/core-js-pure/internals/a-callable.js","webpack:///./node_modules/core-js-pure/internals/is-pure.js","webpack:///./node_modules/core-js-pure/internals/classof.js","webpack:///./node_modules/core-js-pure/internals/entry-unbind.js","webpack:///./node_modules/core-js-pure/stable/string/includes.js","webpack:///./node_modules/core-js-pure/internals/function-bind-native.js","webpack:///./node_modules/core-js-pure/internals/is-null-or-undefined.js","webpack:///./node_modules/core-js-pure/internals/add-to-unscopables.js","webpack:///./node_modules/core-js-pure/internals/internal-state.js","webpack:///./node_modules/core-js-pure/internals/create-property-descriptor.js","webpack:///./node_modules/core-js-pure/internals/hidden-keys.js","webpack:///./node_modules/core-js-pure/internals/object-keys.js","webpack:///./node_modules/core-js-pure/internals/to-string.js","webpack:///./node_modules/core-js-pure/stable/object/assign.js","webpack:///./node_modules/core-js-pure/stable/object/keys.js","webpack:///./node_modules/core-js-pure/stable/array/from.js","webpack:///./node_modules/core-js-pure/internals/indexed-object.js","webpack:///./node_modules/core-js-pure/internals/to-property-key.js","webpack:///./node_modules/core-js-pure/internals/object-is-prototype-of.js","webpack:///./node_modules/core-js-pure/internals/get-method.js","webpack:///./node_modules/core-js-pure/internals/try-to-string.js","webpack:///./node_modules/core-js-pure/internals/shared-store.js","webpack:///./node_modules/core-js-pure/internals/uid.js","webpack:///./node_modules/core-js-pure/internals/shared-key.js","webpack:///./node_modules/core-js-pure/internals/iterator-define.js","webpack:///./node_modules/core-js-pure/internals/function-uncurry-this-clause.js","webpack:///./node_modules/core-js-pure/internals/object-property-is-enumerable.js","webpack:///./node_modules/core-js-pure/internals/object-create.js","webpack:///./node_modules/core-js-pure/internals/to-integer-or-infinity.js","webpack:///./node_modules/core-js-pure/internals/enum-bug-keys.js","webpack:///./node_modules/core-js-pure/internals/object-get-prototype-of.js","webpack:///./node_modules/core-js-pure/internals/define-built-in.js","webpack:///./node_modules/core-js-pure/internals/set-to-string-tag.js","webpack:///./node_modules/core-js-pure/internals/to-string-tag-support.js","webpack:///./node_modules/core-js-pure/internals/create-iter-result-object.js","webpack:///./node_modules/core-js-pure/internals/get-iterator-method.js","webpack:///./node_modules/core-js-pure/modules/es.array.iterator.js","webpack:///./node_modules/core-js-pure/internals/document-all.js","webpack:///./node_modules/core-js-pure/internals/ie8-dom-define.js","webpack:///./node_modules/core-js-pure/internals/document-create-element.js","webpack:///./node_modules/core-js-pure/internals/v8-prototype-define-bug.js","webpack:///./node_modules/core-js-pure/internals/is-symbol.js","webpack:///./node_modules/core-js-pure/internals/use-symbol-as-uid.js","webpack:///./node_modules/core-js-pure/internals/symbol-constructor-detection.js","webpack:///./node_modules/core-js-pure/internals/shared.js","webpack:///./node_modules/core-js-pure/internals/object-get-own-property-descriptor.js","webpack:///./node_modules/core-js-pure/internals/iterators-core.js","webpack:///./node_modules/core-js-pure/internals/object-keys-internal.js","webpack:///./node_modules/core-js-pure/internals/array-includes.js","webpack:///./node_modules/core-js-pure/internals/to-absolute-index.js","webpack:///./node_modules/core-js-pure/internals/to-length.js","webpack:///./node_modules/core-js-pure/internals/internal-metadata.js","webpack:///./node_modules/core-js-pure/internals/object-get-own-property-names.js","webpack:///./node_modules/core-js-pure/internals/create-property.js","webpack:///./node_modules/core-js-pure/internals/iterate.js","webpack:///./node_modules/core-js-pure/internals/is-array-iterator-method.js","webpack:///./node_modules/core-js-pure/internals/get-iterator.js","webpack:///./node_modules/core-js-pure/internals/iterator-close.js","webpack:///./node_modules/core-js-pure/internals/an-instance.js","webpack:///./node_modules/core-js-pure/internals/array-iteration.js","webpack:///./node_modules/core-js-pure/internals/array-species-create.js","webpack:///./node_modules/core-js-pure/internals/is-array.js","webpack:///./node_modules/core-js-pure/internals/is-constructor.js","webpack:///./node_modules/core-js-pure/internals/define-built-in-accessor.js","webpack:///./node_modules/core-js-pure/modules/es.string.iterator.js","webpack:///./node_modules/core-js-pure/internals/not-a-regexp.js","webpack:///./node_modules/core-js-pure/internals/correct-is-regexp-logic.js","webpack:///./node_modules/@paypal/sdk-constants/index.js","webpack:///./node_modules/core-js-pure/stable/map/index.js","webpack:///./node_modules/@paypal/common-components/dist/ui.js","webpack:///./node_modules/core-js-pure/stable/number/is-nan.js","webpack:///./node_modules/core-js-pure/stable/array/flat-map.js","webpack:///./node_modules/@paypal/sdk-constants/dist/paypal-sdk-constants.js","webpack:///./node_modules/core-js-pure/es/map/index.js","webpack:///./node_modules/core-js-pure/internals/weak-map-basic-detection.js","webpack:///./node_modules/core-js-pure/internals/to-primitive.js","webpack:///./node_modules/core-js-pure/internals/engine-v8-version.js","webpack:///./node_modules/core-js-pure/internals/engine-user-agent.js","webpack:///./node_modules/core-js-pure/internals/ordinary-to-primitive.js","webpack:///./node_modules/core-js-pure/internals/define-global-property.js","webpack:///./node_modules/core-js-pure/internals/function-apply.js","webpack:///./node_modules/core-js-pure/internals/is-forced.js","webpack:///./node_modules/core-js-pure/internals/function-name.js","webpack:///./node_modules/core-js-pure/internals/iterator-create-constructor.js","webpack:///./node_modules/core-js-pure/internals/object-define-properties.js","webpack:///./node_modules/core-js-pure/internals/math-trunc.js","webpack:///./node_modules/core-js-pure/internals/html.js","webpack:///./node_modules/core-js-pure/internals/correct-prototype-getter.js","webpack:///./node_modules/core-js-pure/internals/object-to-string.js","webpack:///./node_modules/core-js-pure/internals/object-set-prototype-of.js","webpack:///./node_modules/core-js-pure/internals/function-uncurry-this-accessor.js","webpack:///./node_modules/core-js-pure/internals/a-possible-prototype.js","webpack:///./node_modules/core-js-pure/modules/es.map.js","webpack:///./node_modules/core-js-pure/modules/es.map.constructor.js","webpack:///./node_modules/core-js-pure/internals/collection.js","webpack:///./node_modules/core-js-pure/internals/object-get-own-property-names-external.js","webpack:///./node_modules/core-js-pure/internals/array-slice-simple.js","webpack:///./node_modules/core-js-pure/internals/object-is-extensible.js","webpack:///./node_modules/core-js-pure/internals/array-buffer-non-extensible.js","webpack:///./node_modules/core-js-pure/internals/freezing.js","webpack:///./node_modules/core-js-pure/internals/array-species-constructor.js","webpack:///./node_modules/core-js-pure/internals/inspect-source.js","webpack:///./node_modules/core-js-pure/internals/collection-strong.js","webpack:///./node_modules/core-js-pure/internals/define-built-ins.js","webpack:///./node_modules/core-js-pure/internals/set-species.js","webpack:///./node_modules/core-js-pure/internals/string-multibyte.js","webpack:///./node_modules/core-js-pure/modules/web.dom-collections.iterator.js","webpack:///./node_modules/core-js-pure/internals/dom-iterables.js","webpack:///./node_modules/core-js-pure/es/object/assign.js","webpack:///./node_modules/core-js-pure/modules/es.object.assign.js","webpack:///./node_modules/core-js-pure/internals/object-assign.js","webpack:///./node_modules/core-js-pure/internals/object-get-own-property-symbols.js","webpack:///./node_modules/core-js-pure/es/array/find.js","webpack:///./node_modules/core-js-pure/modules/es.array.find.js","webpack:///./node_modules/core-js-pure/es/array/includes.js","webpack:///./node_modules/core-js-pure/modules/es.array.includes.js","webpack:///./node_modules/core-js-pure/es/string/includes.js","webpack:///./node_modules/core-js-pure/modules/es.string.includes.js","webpack:///./node_modules/core-js-pure/internals/is-regexp.js","webpack:///./node_modules/core-js-pure/es/object/entries.js","webpack:///./node_modules/core-js-pure/modules/es.object.entries.js","webpack:///./node_modules/core-js-pure/internals/object-to-array.js","webpack:///./node_modules/core-js-pure/es/object/keys.js","webpack:///./node_modules/core-js-pure/modules/es.object.keys.js","webpack:///./node_modules/core-js-pure/es/number/is-nan.js","webpack:///./node_modules/core-js-pure/modules/es.number.is-nan.js","webpack:///./node_modules/core-js-pure/es/string/starts-with.js","webpack:///./node_modules/core-js-pure/modules/es.string.starts-with.js","webpack:///./node_modules/core-js-pure/es/array/from.js","webpack:///./node_modules/core-js-pure/modules/es.array.from.js","webpack:///./node_modules/core-js-pure/internals/array-from.js","webpack:///./node_modules/core-js-pure/internals/call-with-safe-iteration-closing.js","webpack:///./node_modules/core-js-pure/internals/check-correctness-of-iteration.js","webpack:///./node_modules/core-js-pure/es/array/flat-map.js","webpack:///./node_modules/core-js-pure/modules/es.array.flat-map.js","webpack:///./node_modules/core-js-pure/internals/flatten-into-array.js","webpack:///./node_modules/core-js-pure/internals/does-not-exceed-safe-integer.js","webpack:///./node_modules/core-js-pure/modules/es.array.unscopables.flat-map.js","webpack:///./node_modules/@krakenjs/zalgo-promise/src/utils.js","webpack:///./node_modules/@krakenjs/zalgo-promise/src/exceptions.js","webpack:///./node_modules/@krakenjs/zalgo-promise/src/flush.js","webpack:///./node_modules/@krakenjs/zalgo-promise/src/promise.js","webpack:///./src/utils/functional.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack:///./node_modules/@babel/runtime/helpers/esm/extends.js","webpack:///./node_modules/@krakenjs/cross-domain-utils/src/util.js","webpack:///./node_modules/@krakenjs/cross-domain-utils/src/constants.js","webpack:///./node_modules/@krakenjs/cross-domain-utils/src/utils.js","webpack:///./node_modules/@krakenjs/cross-domain-safe-weakmap/src/util.js","webpack:///./node_modules/@krakenjs/cross-domain-safe-weakmap/src/weakmap.js","webpack:///./node_modules/@krakenjs/belter/src/util.js","webpack:///./node_modules/@krakenjs/cross-domain-safe-weakmap/src/native.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/@krakenjs/belter/src/dom.js","webpack:///./node_modules/@krakenjs/belter/src/constants.js","webpack:///./node_modules/@krakenjs/belter/src/storage.js","webpack:///./node_modules/@krakenjs/belter/src/http.js","webpack:///./node_modules/@krakenjs/belter/src/css.js","webpack:///./src/utils/performance.js","webpack:///./node_modules/@krakenjs/belter/src/device.js","webpack:///./src/utils/objects.js","webpack:///./node_modules/@paypal/sdk-client/src/config.js","webpack:///./node_modules/@paypal/sdk-client/src/script.js","webpack:///./node_modules/@paypal/sdk-client/src/global.js","webpack:///./node_modules/@krakenjs/beaver-logger/src/constants.js","webpack:///./node_modules/@krakenjs/beaver-logger/src/config.js","webpack:///./node_modules/@krakenjs/beaver-logger/src/util.js","webpack:///./node_modules/@krakenjs/beaver-logger/src/logger.js","webpack:///./node_modules/@krakenjs/beaver-logger/src/http.js","webpack:///./node_modules/@paypal/sdk-client/src/logger.js","webpack:///./node_modules/@paypal/sdk-client/src/domains.js","webpack:///./node_modules/@paypal/sdk-client/src/api.js","webpack:///./node_modules/@paypal/sdk-client/src/events.js","webpack:///./src/utils/constants.js","webpack:///./src/utils/sdk.js","webpack:///./src/utils/debug.js","webpack:///./src/utils/elements.js","webpack:///./node_modules/@krakenjs/jsx-pragmatic/src/node.js","webpack:///./node_modules/@krakenjs/jsx-pragmatic/src/constants.js","webpack:///./node_modules/@krakenjs/jsx-pragmatic/src/renderers/dom.js","webpack:///./node_modules/@krakenjs/jsx-pragmatic/src/util.js","webpack:///./src/utils/miscellaneous.js","webpack:///./src/utils/global.js","webpack:///./src/utils/events.js","webpack:///./src/utils/logger.js","webpack:///./node_modules/@krakenjs/post-robot/src/global.js","webpack:///./node_modules/@krakenjs/post-robot/src/lib/hello.js","webpack:///./node_modules/@krakenjs/post-robot/src/conf/constants.js","webpack:///./node_modules/@krakenjs/post-robot/src/lib/windows.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/common.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/constants.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/serialize.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/serializers/function.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/serializers/error.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/serializers/promise.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/serializers/regex.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/serializers/date.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/serializers/array.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/serializers/object.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/serializers/string.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/serializers/number.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/serializers/boolean.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/serializers/null.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/serializers/undefined.js","webpack:///./node_modules/@krakenjs/universal-serialize/src/deserialize.js","webpack:///./node_modules/@krakenjs/post-robot/src/serialize/window.js","webpack:///./node_modules/@krakenjs/post-robot/src/bridge/common.js","webpack:///./node_modules/@krakenjs/post-robot/src/serialize/function.js","webpack:///./node_modules/@krakenjs/post-robot/src/serialize/serialize.js","webpack:///./node_modules/@krakenjs/post-robot/src/serialize/promise.js","webpack:///./node_modules/@krakenjs/post-robot/src/drivers/send/strategies.js","webpack:///./node_modules/@krakenjs/post-robot/src/drivers/send/index.js","webpack:///./node_modules/@krakenjs/post-robot/src/drivers/listeners.js","webpack:///./node_modules/@krakenjs/post-robot/src/drivers/receive/index.js","webpack:///./node_modules/@krakenjs/post-robot/src/drivers/receive/types.js","webpack:///./node_modules/@krakenjs/post-robot/src/public/on.js","webpack:///./node_modules/@krakenjs/post-robot/src/lib/compat.js","webpack:///./node_modules/@krakenjs/post-robot/src/public/send.js","webpack:///./node_modules/@krakenjs/post-robot/src/conf/config.js","webpack:///./node_modules/@krakenjs/post-robot/src/setup.js","webpack:///./node_modules/@krakenjs/post-robot/src/clean.js","webpack:///./node_modules/@krakenjs/zoid/src/lib/global.js","webpack:///./node_modules/@krakenjs/zoid/src/lib/serialize.js","webpack:///./node_modules/@krakenjs/post-robot/src/index.js","webpack:///./node_modules/@krakenjs/zoid/src/constants.js","webpack:///./node_modules/@krakenjs/zoid/src/lib/window.js","webpack:///./node_modules/@krakenjs/zoid/src/child/props.js","webpack:///./node_modules/@krakenjs/zoid/src/child/child.js","webpack:///./node_modules/@krakenjs/zoid/src/component/props.js","webpack:///./node_modules/@krakenjs/zoid/src/parent/props.js","webpack:///./node_modules/@krakenjs/zoid/src/parent/parent.js","webpack:///./node_modules/@krakenjs/zoid/src/drivers/react.js","webpack:///./node_modules/@krakenjs/zoid/src/drivers/vue.js","webpack:///./node_modules/@krakenjs/zoid/src/drivers/vue3.js","webpack:///./node_modules/@krakenjs/zoid/src/drivers/angular.js","webpack:///./node_modules/@krakenjs/zoid/src/drivers/angular2.js","webpack:///./node_modules/@krakenjs/zoid/src/component/templates/container.js","webpack:///./node_modules/@krakenjs/zoid/src/component/templates/component.js","webpack:///./node_modules/@krakenjs/zoid/src/component/component.js","webpack:///./src/library/zoid/message/validation.js","webpack:///./src/library/zoid/modal/containerTemplate.jsx","webpack:///./src/library/zoid/modal/prerenderTemplate.jsx","webpack:///./src/library/zoid/modal/component.js","webpack:///./src/library/controllers/modal/interface.js","webpack:///./src/library/modal.js","webpack:///./src/library/controllers/modal/setup.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","hasOwnProperty","p","s","exec","error","NATIVE_BIND","require","FunctionPrototype","Function","prototype","uncurryThisWithBind","fn","apply","arguments","$documentAll","documentAll","all","IS_HTMLDDA","argument","global","shared","hasOwn","uid","NATIVE_SYMBOL","USE_SYMBOL_AS_UID","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","fails","uncurryThis","isCallable","getOwnPropertyDescriptor","f","isForced","path","createNonEnumerableProperty","wrapConstructor","NativeConstructor","Wrapper","a","b","this","length","options","source","FORCED","USE_NATIVE","VIRTUAL_PROTOTYPE","sourceProperty","targetProperty","nativeProperty","resultProperty","descriptor","TARGET","target","GLOBAL","STATIC","stat","PROTO","proto","nativeSource","targetPrototype","forced","dontCallGetSet","wrap","sham","real","check","it","Math","globalThis","window","self","parent","toObject","DESCRIPTORS","IE8_DOM_DEFINE","V8_PROTOTYPE_DEFINE_BUG","anObject","toPropertyKey","$TypeError","TypeError","$defineProperty","$getOwnPropertyDescriptor","O","P","Attributes","current","configurable","writable","isObject","$String","String","IndexedObject","requireObjectCoercible","toString","stringSlice","slice","definePropertyModule","createPropertyDescriptor","$Object","toLength","obj","aCallable","that","undefined","isNullOrUndefined","aFunction","variable","namespace","method","tryToString","TO_STRING_TAG_SUPPORT","classofRaw","TO_STRING_TAG","wellKnownSymbol","CORRECT_ARGUMENTS","tag","result","tryGet","callee","getBuiltIn","test","set","has","NATIVE_WEAK_MAP","sharedKey","hiddenKeys","state","store","WeakMap","metadata","facade","STATE","enforce","getterFor","TYPE","type","bitmap","internalObjectKeys","enumBugKeys","keys","classof","split","propertyIsEnumerable","toPrimitive","isSymbol","isPrototypeOf","V","func","defineGlobalProperty","id","postfix","random","$","IS_PURE","FunctionName","createIteratorConstructor","getPrototypeOf","setPrototypeOf","setToStringTag","defineBuiltIn","Iterators","IteratorsCore","PROPER_FUNCTION_NAME","PROPER","CONFIGURABLE_FUNCTION_NAME","CONFIGURABLE","IteratorPrototype","BUGGY_SAFARI_ITERATORS","ITERATOR","returnThis","Iterable","NAME","IteratorConstructor","next","DEFAULT","IS_SET","CurrentIteratorPrototype","methods","KEY","getIterationMethod","KIND","defaultIterator","IterablePrototype","INCORRECT_VALUES_NAME","nativeIterator","anyNativeIterator","entries","values","$propertyIsEnumerable","NASHORN_BUG","1","activeXDocument","definePropertiesModule","html","documentCreateElement","IE_PROTO","EmptyConstructor","scriptTag","content","LT","NullProtoObjectViaActiveX","write","close","temp","parentWindow","NullProtoObject","ActiveXObject","iframeDocument","iframe","document","domain","style","display","appendChild","src","contentWindow","open","F","Properties","trunc","number","CORRECT_PROTOTYPE_GETTER","ObjectPrototype","constructor","TAG","SET_METHOD","done","getMethod","toIndexedObject","addToUnscopables","InternalStateModule","defineIterator","createIterResultObject","setInternalState","getInternalState","Array","iterated","kind","index","Arguments","createElement","EXISTS","$Symbol","iterator","V8_VERSION","getOwnPropertySymbols","symbol","push","version","copyright","license","propertyIsEnumerableModule","PrototypeOfArrayIteratorPrototype","arrayIterator","indexOf","names","toAbsoluteIndex","lengthOfArrayLike","createMethod","IS_INCLUDES","$this","el","fromIndex","includes","toIntegerOrInfinity","max","min","integer","getOwnPropertyNamesModule","getOwnPropertyNamesExternalModule","isExtensible","FREEZING","REQUIRED","METADATA","setMetadata","objectID","weakData","meta","enable","getOwnPropertyNames","splice","fastKey","getWeakData","onFreeze","concat","propertyKey","isArrayIteratorMethod","getIterator","getIteratorMethod","iteratorClose","Result","stopped","ResultPrototype","iterable","unboundFunction","iterFn","step","AS_ENTRIES","IS_RECORD","IS_ITERATOR","INTERRUPTED","stop","condition","callFn","ArrayPrototype","usingIterator","iteratorMethod","innerResult","innerError","Prototype","arraySpeciesCreate","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_REJECT","NO_HOLES","callbackfn","specificCreate","boundFunction","forEach","map","filter","some","every","find","findIndex","filterReject","arraySpeciesConstructor","originalArray","isArray","inspectSource","noop","empty","construct","constructorRegExp","INCORRECT_TO_STRING","isConstructorModern","isConstructorLegacy","called","charAt","string","point","isRegExp","MATCH","METHOD_NAME","regexp","error1","error2","default","__webpack_exports__","_renderChildren","children","renderer","_i2","renderedChild","render","_i4","subchild","Spinner","SpinnerPage","VenmoSpinner","VenmoSpinnerPage","node_ElementNode","ElementNode","props","onRender","_proto","renderChildren","node_FragmentNode","FragmentNode","node_TextNode","TextNode","text","node_ComponentNode","ComponentNode","component","_proto4","renderComponent","child","normalizeChildren","_i6","_i8","_normalizeChildren2","_ELEMENT_DEFAULT_XML_","_ATTRIBUTE_DEFAULT_XM","_ADD_CHILDREN","node_node","element","_len","_key","Fragment","ELEMENT_DEFAULT_XML_NAMESPACE","svg","ATTRIBUTE_DEFAULT_XML_NAMESPACE","createTextElement","doc","node","createTextNode","addProps","_Object$keys2","prop","val","match","addEventListener","toLowerCase","xmlNamespace","setAttributeNS","setAttribute","tagName","replace","floor","ADD_CHILDREN","firstChild","Error","win","docElement","documentElement","removeChild","opts","_opts$doc","domRenderer","xmlNamespaceDomRenderer","childNode","createElementNS","addChildren","script","_node$renderChildren2","innerHTML","_el$querySelectorAll2","querySelectorAll","parentNode","newScript","textContent","replaceChild","_ref","class","nonce","_ref2","E","N","S","R","u","L","Z","U","B","G","K","Y","y","W","J","h","T","e","A","_","D","I","H","C","M","g","k","v","AD","AE","AG","AI","AL","AM","AN","AO","AR","AT","AU","AW","AZ","BA","BB","BE","BF","BG","BH","BI","BJ","BM","BN","BO","BR","BS","BT","BW","BY","BZ","CA","CD","CG","CH","CI","CK","CL","CM","CN","CO","CR","CV","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GI","GL","GM","GN","GP","GR","GT","GW","GY","HK","HN","HR","HU","ID","IE","IL","IN","IS","IT","JM","JO","JP","KE","KG","KH","KI","KM","KN","KR","KW","KY","KZ","LA","LC","LI","LK","LS","LU","LV","MA","MC","MD","ME","MG","MH","MK","ML","MN","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PL","PM","PN","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","ST","SV","SZ","TC","TD","TG","TH","TJ","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","US","UY","VA","VC","VE","VG","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW","CS","DA","EL","EN","HE","JA","KO","SQ","TL","VI","ZH","ZH_HANT","CAPTURE","AUTHORIZE","ORDER","TOKENIZE","SUBSCRIPTION","TRUE","FALSE","AED","ALL","ANG","AOA","AUD","AWG","BAM","BBD","BGN","BIF","BMD","BND","BOB","BRL","BSD","BTN","CAD","CDF","CHF","CLP","COP","CRC","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ETB","EUR","FJD","FKP","GBP","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HUF","IDR","ILS","INR","ISK","JMD","JPY","KES","KMF","KRW","KYD","LAK","LKR","MDL","MGA","MKD","MNT","MRO","MUR","MVR","MXN","MYR","NAD","NIO","NOK","NPR","NZD","PEN","PGK","PHP","PLN","PYG","QAR","RON","RSD","RUB","SAR","SBD","SCR","SEK","SGD","SHP","SLL","SOS","SRD","SZL","THB","TJS","TOP","TTD","TWD","TZS","USD","UYU","VND","VUV","WST","XAF","XCD","YER","NAMESPACE","CLIENT_TOKEN","MERCHANT_ID","PARTNER_ATTRIBUTION_ID","STAGE_HOST","API_STAGE_HOST","CSP_NONCE","ENABLE_3DS","SDK_INTEGRATION_SOURCE","USER_ID_TOKEN","AMOUNT","CLIENT_METADATA_ID","PAGE_TYPE","USER_EXPERIENCE_FLOW","POPUPS_DISABLED","SDK_TOKEN","COMPONENTS","ENV","DEBUG","CACHEBUST","CLIENT_ID","LOCALE","CURRENCY","INTENT","COMMIT","VAULT","BUYER_COUNTRY","ENABLE_FUNDING","DISABLE_FUNDING","DISABLE_CARD","INTEGRATION_DATE","STAGE_ALIAS","CDN_REGISTRY","VERSION","BUTTONS","HOSTED_FIELDS","CARD_FIELDS","HTTP","HTTPS","HOME","PRODUCT","CART","CHECKOUT","PRODUCT_LISTING","SEARCH_RESULTS","PRODUCT_DETAILS","MINI_CART","VAULTABLE","LOCAL","STAGE","SANDBOX","PRODUCTION","TEST","ANDROID","IOS","VALIDATION_ERROR","FEED","EVENT_NAME","TRANSITION","PAGE","BUTTON_TYPE","SESSION_UID","BUTTON_SESSION_UID","TOKEN","CONTEXT_ID","CONTEXT_TYPE","REFERER","MERCHANT_DOMAIN","PAY_ID","SELLER_ID","DATA_SOURCE","BUTTON_SOURCE","ERROR_CODE","ERROR_DESC","PAGE_LOAD_TIME","EXPERIMENT_EXPERIENCE","EXPERIMENT_TREATMENT","EXPERIMENT_NAME","TREATMENT_NAME","TRANSITION_TIME","FUNDING_LIST","FUNDING_COUNT","CHOSEN_FUNDING","BUTTON_LAYOUT","INTEGRATION_IDENTIFIER","SDK_NAME","SDK_VERSION","SDK_ENVIRONMENT","MOBILE_APP_VERSION","MOBILE_BUNDLE_IDENTIFIER","USER_AGENT","USER_ACTION","CONTEXT_CORRID","SDK_CACHE","SDK_LOAD_TIME","IS_VAULT","RESPONSE_DURATION","PAYMENT_FLOW","BUTTON_VERSION","FI_LIST","FI_ID","CHOSEN_FI_TYPE","SELECTED_FI","POTENTIAL_PAYMENT_METHODS","PAY_NOW","STICKINESS_ID","TIMESTAMP","OPTION_SELECTED","USER_IDENTITY_METHOD","FIELDS_COMPONENT_SESSION_ID","CPL_COMP_METRICS","CPL_CHUNK_METRICS","CPL_QUERY_METRICS","CONTINUE","PAYMENTS_SDK","PAYPAL","VENMO","APPLEPAY","ITAU","CREDIT","PAYLATER","CARD","IDEAL","SEPA","BANCONTACT","GIROPAY","SOFORT","EPS","MYBANK","P24","PAYU","BLIK","TRUSTLY","OXXO","BOLETO","BOLETOBANCARIO","WECHATPAY","MERCADOPAGO","MULTIBANCO","SATISPAY","PAIDY","VISA","MASTERCARD","AMEX","DISCOVER","HIPER","ELO","JCB","CUP","BALANCE","BANK","PAY_IN_3","PAY_IN_4","DESKTOP","MOBILE","Map","ordinaryToPrimitive","TO_PRIMITIVE","input","pref","exoticToPrim","userAgent","process","Deno","versions","v8","navigator","valueOf","Reflect","replacement","feature","detection","data","normalize","POLYFILL","NATIVE","getDescriptor","ENUMERABLE_NEXT","objectKeys","defineProperties","ceil","x","uncurryThisAccessor","aPossiblePrototype","setter","CORRECT_SETTER","__proto__","collection","init","InternalMetadataModule","iterate","anInstance","internalStateGetterFor","CONSTRUCTOR_NAME","wrapper","common","Constructor","IS_WEAK","ADDER","NativePrototype","exported","IS_ADDER","size","getConstructor","setStrong","$getOwnPropertyNames","arraySlice","windowNames","getWindowNames","createProperty","$Array","start","end","fin","ARRAY_BUFFER_NON_EXTENSIBLE","$isExtensible","FAILS_ON_PRIMITIVES","ArrayBuffer","buffer","preventExtensions","isConstructor","SPECIES","functionToString","defineBuiltInAccessor","defineBuiltIns","setSpecies","first","last","define","previous","entry","getEntry","removed","clear","prev","add","ITERATOR_NAME","getInternalCollectionState","getInternalIteratorState","unsafe","charCodeAt","CONVERT_TO_STRING","pos","second","position","codeAt","DOMIterables","COLLECTION_NAME","Collection","CollectionPrototype","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","assign","arity","getOwnPropertySymbolsModule","$assign","chr","join","argumentsLength","j","entryUnbind","$find","SKIPS_HOLES","$includes","notARegExp","correctIsRegExpLogic","stringIndexOf","searchString","$entries","objectGetPrototypeOf","IE_BUG","TO_ENTRIES","IE_WORKAROUND","nativeKeys","Number","isNaN","nativeStartsWith","startsWith","CORRECT_IS_REGEXP_LOGIC","search","from","checkCorrectnessOfIteration","callWithSafeIterationClosing","arrayLike","IS_CONSTRUCTOR","mapfn","mapping","ENTRIES","SAFE_CLOSING","iteratorWithReturn","SKIP_CLOSING","ITERATION_SUPPORT","flattenIntoArray","flatMap","sourceLen","doesNotExceedSafeInteger","original","depth","mapper","thisArg","targetIndex","sourceIndex","mapFn","isPromise","item","Promise","Window","then","err","flushPromise","dispatchedErrors","possiblyUnhandledPromiseHandlers","activeCount","flushActive","promise","resolve","startActive","endActive","ZalgoPromise","handler","_this","resolved","rejected","errorHandled","handlers","dispatching","stack","isAsync","res","reject","dispatch","_this2","setTimeout","dispatchPossiblyUnhandledError","asyncReject","chain","firstPromise","secondPromise","_handlers$i","onSuccess","onError","promiseResult","catch","finally","onFinally","try","timeout","time","_this3","clearTimeout","toPromise","lazy","promises","count","results","prom","hash","awaitPromises","_loop","items","onPossiblyUnhandledException","cancel","context","args","delay","flush","memoize","cache","cacheKey","JSON","stringify","partial","_len2","intialArgs","_key2","_len3","nextArgs","_key3","curry","curried","_len4","_key4","_len5","_key5","_setPrototypeOf","_inheritsLoose","subClass","superClass","_extends","isRegex","WINDOW_TYPE","IFRAME","POPUP","IE_WIN_ACCESS_ERROR","getActualProtocol","location","protocol","getProtocol","mockDomain","isAboutProtocol","getParent","getOpener","opener","canReadFromWindow","getActualDomain","PROTOCOL","host","getDomain","isSameDomain","desc","isMockProtocol","isActuallySameDomain","assertSameDomain","isAncestorParent","childParent","getParents","getFrames","frames","len","frame","getAllChildFrames","_i3","_getFrames2","_i5","_getAllChildFrames2","getTop","top","_i7","_getAllChildFrames4","getAllFramesInWindow","iframeWindows","iframeFrames","isWindowClosed","allowMock","closed","message","mockclosed","iframeIndex","safeIndexOf","ownerDocument","contains","isFrameWindowClosed","getFrameByName","winFrames","_i9","childFrame","getAncestor","anyMatch","collection1","collection2","_i17","item1","_i19","getDistanceFromTop","distance","isSameTopWindow","win1","win2","top1","top2","allFrames1","allFrames2","opener1","opener2","matchDomain","pattern","origin","Boolean","subpattern","getDomainFromUrl","url","onCloseWindow","callback","maxtime","Infinity","isWindow","__cross_domain_utils_window_check__","getFrameForWindow","frameElement","_i21","_document$querySelect2","closeWindow","isIframe","parentElement","objectIDs","CrossDomainSafeWeakMap","weakmap","freeze","testWeakMap","testKey","hasNativeWeakMap","_cleanupClosedWindows","delete","isSafeToReadWrite","getOrSet","_getPrototypeOf","_isNativeReflectConstruct","Proxy","Date","_construct","Parent","Class","isNativeReflectConstruct","instance","_wrapNativeSuper","_cache","isElement","passed","Element","nodeType","getFunctionName","__name__","displayName","setFunctionName","base64encode","str","btoa","encodeURIComponent","p1","fromCharCode","parseInt","Buffer","uniqueID","chars","toISOString","getGlobal","__GLOBAL__","serializeArgs","subkey","getObjectID","getEmptyObject","memoizeGlobalIndex","memoizeGlobalIndexValidFrom","simpleCache","thisCache","_options$thisNamespac","thisNamespace","cacheTime","memoizeIndex","memoizedFunction","_unused","cacheResult","now","reset","memoizePromise","memoizedPromiseFunction","_arguments","inlineMemoize","logic","__inline_memoize_cache__","once","stringifyError","level","newErr","extend","objFilter","identity","safeInterval","loop","eventEmitter","triggered","emitter","on","eventName","handlerList","cancelled","listener","trigger","triggerOnce","dasherizeToCamel","toUpperCase","defineLazyProp","arrayFrom","isObjectObject","isPlainObject","replaceObject","replacer","fullKey","_loop2","itemKey","_loop3","isDefined","cleanup","cleanErr","tasks","cleaned","cleaner","register","task","shift","assertExists","thing","ExtendableError","_Error","_this6","captureStackTrace","ReferenceError","_assertThisInitialized","getBody","body","isDocumentReady","readyState","isDocumentInteractive","urlEncode","parseQuery","queryString","params","_queryString$split2","pair","decodeURIComponent","extendQuery","originalQuery","isBrowser","isLocalStorageEnabled","localStorage","setItem","getItem","removeItem","container","getElementSafe","querySelector","elementReady","interval","setInterval","clearInterval","awaitFrameLoadPromises","PopupOpenError","_ExtendableError","awaitFrameLoad","cleanIframes","linkFrameWindow","awaitFrameWindow","loadedFrame","styleText","className","attributes","_i10","styleSheet","cssText","allowTransparency","backgroundColor","border","isIE","hasAttribute","getElement","event","removeEventListener","showElement","setProperty","hideElement","destroyElement","isElementClosed","onResize","_temp","_ref2$width","width","_ref2$height","height","_ref2$interval","_ref2$win","currentWidth","offsetWidth","currentHeight","offsetHeight","canceled","observer","getClientRects","isElementVisible","newWidth","newHeight","ResizeObserver","observe","MutationObserver","childList","subtree","characterData","disconnect","isShadowElement","currentScript","getCurrentScript","getStackTrace","stackDetails","scriptLocation","_i22","_Array$prototype$slic2","getElementsByTagName","reverse","inferCurrentScript","currentUID","getCurrentScriptUID","getAttribute","ATTRIBUTES","hashedString","total","abs","strHashStr","dataset","getStorage","_ref$lifetime","lifetime","stickySessionId","accessedStorage","STORAGE_KEY","newStateID","getState","storage","localStorageEnabled","rawStorage","parse","getID","getSession","session","__session__","created","guid","isStateFresh","getSessionState","getSessionID","headerBuilders","request","_ref$method","_ref$headers","headers","json","_ref$win","_ref$timeout","normalizedHeaders","builtHeaders","headerBuilder","_Object$keys4","xhr","XMLHttpRequest","responseHeaders","rawHeaders","_rawHeaders$trim$spli2","trim","_line$split","parseHeaders","getAllResponseHeaders","status","contentType","isJSON","responseBody","responseText","evt","setRequestHeader","ontimeout","send","isPerc","toNum","toPx","toCSS","normalizeDimension","dim","namespaced","performance","getPerformance","timing","connectEnd","navigationStart","getPerformanceMeasure","_performance$getEntri","_performance$getEntri2","getEntriesByName","duration","addPerformanceMeasure","_ref3","startMark","endMark","repeat","clearMeasures","clearMarks","documentMode","measure","mark","objectClone","objectEntries","reduce","accumulator","_extends9","_extends7","_extends8","objectMerge","deepMerge","targetObject","mergingObject","_extends13","_extends10","_extends11","_extends12","flattenedToObject","option","attributeValue","delimiter","_ref6","_ref5","firstIndex","getSDKScript","errorString","buildScriptNotFoundError","__SDK_HOST__","__PATH__","_sdkScript$attributes2","attr","AUTO_FLUSH_LEVEL","LOG_LEVEL_PRIORITY","extendIfDefined","Logger","prefix","_ref$logLevel","logLevel","_ref$transport","transport","_ref$enableSendBeacon","enableSendBeacon","httpWindow","beaconResult","hasHeaders","sendBeacon","Blob","canUseSendBeacon","_ref2$useBlob","useBlob","blob","_ref$flushInterval","flushInterval","events","tracking","metrics","payloadBuilders","metaBuilders","trackingBuilders","print","payload","console","log","warning","immediateFlush","builder","localPromise","logger","logPayload","timestamp","enqueue","addBuilder","builders","debug","info","warn","track","trackingPayload","metric","metricPayload","metricNamespace","dimensions","addPayloadBuilder","addMetaBuilder","addTrackingBuilder","addHeaderBuilder","setTransport","newTransport","configure","__buffer__","getLogger","__PAYPAL_DOMAIN__","clientID","basicAuth","__PAYPAL_API_DOMAIN__","Authorization","grant_type","access_token","OFFER","PAY_LATER_LONG_TERM","PAY_LATER_SHORT_TERM","PAY_LATER_PAY_IN_1","PAYPAL_CREDIT_INSTALLMENTS","PAYPAL_CREDIT_NO_INTEREST","MESSAGE","MODAL","TREATEMENTS","getDisableSetCookie","getEnv","__ENV__","getNonce","getMeta","getLibraryVersion","__MESSAGES__","isZoidComponent","getBelterStorage","_getScript","getOrCreateDeviceID","getStageTag","getDevTouchpoint","getFeatures","ppDebug","inZoid","debugObj","HTMLElement","nodeName","getInlineOptions","attributeNameOverride","buyercountry","merchantid","cspnonce","ectoken","customerid","fontfamily","fontsource","onclick","onapply","onrender","inlineEventHandlers","dataOptions","stringStartsWith","nodeValue","_attributeNameOverrid","attributeName","arrayIncludes","getOptionValue","firstElementChild","markup","getElementsByClassName","elem","insertBefore","span","appendImage","alt","srcset","logo","Image","_url$dimensions","svgWrapper","canvas","getAllBySelector","selector","arrayFlatMap","normalizeChild","dom","ELEMENT_PROP","fixScripts","createElementWithXMLNamespace","getCurrentTime","getTime","viewportHijack","viewport","head","_viewport$getAttribut","_document$body$style$","_document$body$style$2","__pp_prev_content__","__pp_prev_overflow__","overflow","__pp_prev_msOverflowStyle__","msOverflowStyle","getStandardProductOffer","offer","getGlobalState","_window$NAMESPACE","_createState","globalState","initialState","objectAssign","createState","config","messagesMap","setGlobalState","newState","getGlobalUrl","getPayPalDomain","globalEvent","awaitWindowLoad","awaitDOMContentLoaded","eventsIndexes","_ref2$payload","refIndex","trackingIndexes","activeIndexes","trimmedMeta","_extends2","_ref4","withCredentials","xhttp","onreadystatechange","header","_header$trim$split","stringIncludes","integration_type","messaging_version","getGlobalKey","__POST_ROBOT__","globalKey","getObj","globalStore","defStore","storeKey","defVal","del","WildCard","getWildcard","WINDOW_WILDCARD","windowStore","winStore","getStore","getInstanceID","resolveHelloPromise","helloPromises","existingPromise","newPromise","sayHello","instanceID","getWindowInstanceID","_ref7","markWindowKnown","isSerializedType","__type__","determineType","serializeType","__val__","SERIALIZER","_SERIALIZER","code","toJSON","defaultSerializers","DESERIALIZER","_DESERIALIZER","RegExp","defaultDeserializers","cleanupProxyWindows","idToProxyWindow","_idToProxyWindow$keys2","shouldClean","getSerializedWindow","winPromise","_ref$id","windowNamePromise","windowTypePromise","getName","getType","focus","isClosed","setLocation","href","_opts$method","_ref3$method","form","_i24","_body$key","submit","submitForm","setName","sameDomain","ProxyWindow","serializedWindow","isProxyWindow","actualWindow","actualWindowPromise","setWindow","isPopup","_this4","isPopupPromise","getNamePromise","reopenPromise","focusPromise","getWindow","awaitWindow","matchWindow","_this5","proxyInstanceID","knownWindowInstanceID","unwrap","serialize","toProxyWindow","deserialize","_ref8","_ref9","addMethod","methodStore","proxyWindowMethods","lookupMethod","serializeFunction","destination","meth","methodSource","arg","__id__","serializeMessage","_serialize","serializers","serializer","serializePromise","deserializeMessage","_deserialize","deserializers","deserializer","serializedPromise","deserializePromise","serializedFunction","getDeserializedFunction","crossDomainFunctionWrapper","fireAndForget","__origin__","__source__","deserializeFunction","SEND_MESSAGE_STRATEGIES","sendMessage","domainBuffer","messages","serializedMessage","strategies","errors","strategyName","getResponseListener","deleteResponseListener","isResponseListenerErrored","getRequestListener","requestListeners","winQualifier","nameListeners","domainListeners","_domainListeners$__DO2","_domainListeners$__DO3","regex","receiveMessage","receivedMessages","parsedMessage","parseMessages","deserializeMessages","_ret","logName","sendResponse","ack","pathname","handleError","handleRequest","handleResponse","handleAck","requestListener","addRequestListener","winCandidate","requestListenerPromise","actualWin","listenersCollection","_win2","_i12","_domain2","_i14","existingListener","strDomain","winNameDomainRegexListeners","winNameDomainRegexListener","winNameListeners","winNameDomainListeners","errorHandler","postMessage","mockUserAgent","getUserAgent","foreignGlobal","winOrProxyWin","domainMatcher","responseTimeout","childTimeout","validateOptions","actualParent","_i15","_getFrames8","isAncestor","getHelloPromise","awaitWindowHello","targetDomain","actualDomain","normalizedDomain","normalizeDomain","responseListener","addResponseListener","reqPromises","markResponseListenerErrored","totalAckTimeout","isWindowKnown","totalResTimeout","ackTimeout","resTimeout","setup","initialized","setupGlobalReceiveMessage","sourceElement","originalEvent","messageListener","initHello","cleanUpWindow","_requestPromises$get2","__ZOID__","tryGlobal","getProxyObject","basicSerialize","getUIDRefStore","references","crossDomainSerialize","metaData","sender","receiver","_ref$passByReference","passByReference","_ref$basic","basic","proxyWin","internalSerializeMessage","reference","getRawRef","serializedData","cleanReference","ref","crossDomainDeserialize","_ref2$basic","atob","base64decode","basicDeserialize","getRefValue","internalDeserializeMessage","CONTEXT","buildChildWindowName","serializedPayload","parseWindowName","windowName","_windowName$split","zoidcomp","serializedInitialPayload","parseInitialParentPayload","_crossDomainDeseriali","windowRef","getNthParent","getNthParentFromTop","ancestor","_getAllFramesInWindow2","windows","findChildFrameByName","_i11","_getFrames4","namedFrame","findFrameByName","getWindowByRef","getInitialParentPayload","getWindowRef","targetWindow","currentWindow","normalizeChildProp","propsDef","helpers","childDecorate","onProps","resize","getParentDomain","show","hide","export","getSiblings","destroy","defaultNoop","decorateOnce","eachProp","serializeProps","propDef","_METHOD$GET$METHOD$PO","_METHOD$GET$METHOD$PO2","getParam","queryParam","bodyParam","getValue","queryValue","bodyValue","finalParam","finalValue","serialization","dotify","newobj","dotkey","mapProps","parentComponent","currentProxyWin","currentProxyContainer","childComponent","currentChildDomain","currentContainer","_ref$overrides","overrides","_ref$parentWin","parentWin","containerTemplate","prerenderTemplate","autoResize","domainMatch","xports","initPromise","handledErrors","clean","inputProps","internalState","visible","isRenderFinished","onErrorOverride","getProxyContainerOverride","getProxyContainer","showOverride","hideOverride","closeOverride","renderContainerOverride","renderContainer","getProxyWindowOverride","getProxyWindow","setProxyWinOverride","setProxyWin","openFrameOverride","openFrame","openPrerenderFrameOverride","openPrerenderFrame","prerenderOverride","prerender","openOverride","openPrerenderOverride","openPrerender","watchForUnloadOverride","watchForUnload","getInternalStateOverride","setInternalStateOverride","getDimensions","resolveInitPromise","rejectInitPromise","getPropsForChild","initialChildDomain","sendToChild","trustedChild","trustedDomains","acc","newInternalState","windowProp","setState","getUrl","getAttributes","getInitialChildDomain","title","proxyPrerenderFrame","prerenderFrame","prerenderFrameWindow","getCurrentWindowReferenceUID","actualComponentWindow","initChild","childDomain","childExports","_currentProxyWin","_currentProxyWin2","proxyFrame","_getDimensions","_getDimensions$width","_getDimensions$height","outerWidth","_options$closeOnUnloa","closeOnUnload","_options$name","left","round","screenX","screen","outerHeight","screenY","toolbar","menubar","resizable","scrollbars","popup","unloadWindowListener","closeParentWindowListener","checkWindowClose","secondIsClosed","exportsPromise","xport","actualExports","renderTemplate","proxyPrerenderWin","prerenderWindow","isBlankDomain","_arrayFrom2","_arrayFrom4","writeElementToWindow","_autoResize$width","_autoResize$height","_autoResize$element","prerenderResizeListener","_ref10","proxyContainer","_ref11","rerender","_ref12","innerContainer","containerWatcher","sacrificialFrame","sacrificialFrameWin","mutationObservers","_i18","elementClosed","mutationElement","mutationObserver","frameWin","watchElementForClose","removeError","getHelpers","updateProps","setProps","newInputProps","existingProps","valueDetermined","alias","required","decorate","getDerivedValue","extendProps","newProps","childProps","containerElement","insertShadowSlot","shadowHost","shadowRoot","getShadowRoot","getShadowHost","slotName","slot","slotProvider","onPrerender","onDisplay","onRendered","onPrerendered","onClose","onDestroy","onFocus","_ref14","childDomainMatch","checkAllowRender","delegatePromise","delegateProps","propName","allowDelegate","childOverridesPromise","POST_MESSAGE","_ref13","parentComp","getDelegateOverrides","childOverrides","_len6","_key6","_len7","_key7","_len8","_key8","_len9","_key9","_len10","_key10","_len11","_key11","_len12","_key12","delegate","watchForUnloadPromise","buildBodyPromise","onRenderPromise","getProxyContainerPromise","getProxyWindowPromise","finalSetPropsPromise","buildUrlPromise","query","originalUrl","originalHash","_url$split","_originalUrl$split","hashString","extendUrl","normalizeMockUrl","buildWindowNamePromise","_temp2","_ref6$target","checkClose","buildInitialChildPayload","childPayload","_crossDomainSerialize","buildSerializedChildPayload","openFramePromise","openPrerenderFramePromise","renderContainerPromise","_ref15","openPromise","_ref16","openPrerenderPromise","_ref17","setStatePromise","prerenderPromise","_ref18","setWindowNamePromise","_ref19","getMethodPromise","_ref20","loadUrlPromise","windowUrl","_ref21","watchForClosePromise","watchForClose","isCurrentContainerClosed","onDisplayPromise","openBridgePromise","runTimeoutPromise","onRenderedPromise","getProps","getExports","react","React","ReactDOM","_React$Component","_class","componentDidMount","findDOMNode","componentDidUpdate","Component","vue","Vue","inheritAttrs","mounted","$el","$attrs","styleObject","watch","deep","vue3","template","angular","ng","directive","scope","restrict","controller","$scope","$element","safeApply","$root","$$phase","$apply","$watch","angular2","AngularComponent","NgModule","ElementRef","NgZone","Inject","ComponentInstance","elementRef","zone","internalProps","_props","run","ngOnInit","targetElement","nativeElement","ngDoCheck","obj1","obj2","checked","equals","annotations","parameters","inputs","ModuleInstance","declarations","defaultContainerTemplate","div","cspNonce","classList","remove","defaultPrerenderTemplate","spinner","cleanInstances","cleanZoid","allowDelegateListener","delegateListener","bridgeUrl","_options$props","_options$dimensions","_options$autoResize","_options$allowedParen","allowedParentDomains","_options$attributes","_options$defaultConte","defaultContext","_options$containerTem","_options$prerenderTem","validate","_options$eligible","eligible","_options$logger","_options$exports","xportsDefinition","_options$children","valuePromise","normalizeOptions","driverCache","instances","isChild","isChildComponentWindow","registerChild","xprops","components","onPropHandlers","_getInitialParentPayl","parentComponentWindow","parentDomain","parentExports","initialProps","version1","version2","versionCompatabilityCheck","parentExport","parentResize","parentInit","anyParent","currentParent","winParent","isUpdate","normalizedProps","normalizeChildProps","updatedChildName","componentName","_crossDomainDeseriali2","childWindowName","updateChildWindowNameWithRef","checkParentDomain","ZOID","_eligible","eligibility","reason","clone","_ref4$decorate","getDefaultContext","finalContext","getDefaultContainer","newInstance","renderTo","childComponents","childName","Child","childInputProps","parentProps","getChildren","isEligible","_ref2$data","driver","driverName","dep","drivers","canRenderTo","validateType","expectedType","numberIsNaN","logInvalid","description","logInvalidType","valType","account","merchantId","customerId","amount","numberAmount","offerType","styleInput","layout","preset","currency","placement","logInvalidOption","buyerCountry","language","ignoreCache","channel","ecToken","merchantConfig","getTitle","_viewportHijack","hijackViewport","replaceViewport","CLASS","HIDDEN","MODAL_SHOW","modalTitle","overlay","handleShow","previousFocus","activeElement","requestAnimationFrame","renderedModal","handleHide","charCode","closeBtn","handleClose","_closeBtn2","lang","httpEquiv","_closeBtn","modalStatus","checkForErrors","onKeyUp","aria-errormessage","onClick","aria-keyshortcuts","aria-label","tabindex","aria-hidden","viewBox","fill","xmlns","transform","stroke","stroke-width","stroke-linecap","aria-live","createGlobalVariableGetter","setupPostRobot","comp","scrolling","integrationIdentifier","refId","onApply","linkName","et","event_type","link","onCalculate","onShow","_props$src","onReady","products","ts","messageRequestId","renderStart","trackingDetails","ppDebugId","partnerClientId","existingMeta","_getStorage$getState","_document$cookie$spli","_document$cookie$spli2","cookieVal","_existingMeta$global","existingGlobal","cookie","cookieStr","fromEntries","URLSearchParams","deviceID","sessionID","firstModalRenderDelay","modal","bn_code","SDK_SETTINGS","first_modal_render_delay","render_duration","currentIndex","payerId","clientId","sdkMeta","env","scriptUID","stageTag","devTouchpoint","integrationType","disableSetCookie","features","_setGlobalState","memoizedModal","renderProm","zoidComponent","getModalComponent","renderModal","intent","getTopWindow","modalReady","renderDelay","showModal","_options","_options$id","_options$constructor","newOptions","requestedProduct","productState","offerCountry","arrayFind","supportedProduct","hideModal","paypal","_window$paypal","MessagesModal","Modal","attachEls"],"mappings":"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GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKpX,GAAG,KAAKqX,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC,GAAG,KAAKC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","file":"modal.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 167);\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call.apply(fn, arguments);\n  };\n};\n","var $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = $documentAll.IS_HTMLDDA ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar Symbol = global.Symbol;\nvar WellKnownSymbolsStore = shared('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)\n      ? Symbol[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","'use strict';\nvar global = require('../internals/global');\nvar apply = require('../internals/function-apply');\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar isCallable = require('../internals/is-callable');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar isForced = require('../internals/is-forced');\nvar path = require('../internals/path');\nvar bind = require('../internals/function-bind-context');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\n\nvar wrapConstructor = function (NativeConstructor) {\n  var Wrapper = function (a, b, c) {\n    if (this instanceof Wrapper) {\n      switch (arguments.length) {\n        case 0: return new NativeConstructor();\n        case 1: return new NativeConstructor(a);\n        case 2: return new NativeConstructor(a, b);\n      } return new NativeConstructor(a, b, c);\n    } return apply(NativeConstructor, this, arguments);\n  };\n  Wrapper.prototype = NativeConstructor.prototype;\n  return Wrapper;\n};\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var PROTO = options.proto;\n\n  var nativeSource = GLOBAL ? global : STATIC ? global[TARGET] : (global[TARGET] || {}).prototype;\n\n  var target = GLOBAL ? path : path[TARGET] || createNonEnumerableProperty(path, TARGET, {})[TARGET];\n  var targetPrototype = target.prototype;\n\n  var FORCED, USE_NATIVE, VIRTUAL_PROTOTYPE;\n  var key, sourceProperty, targetProperty, nativeProperty, resultProperty, descriptor;\n\n  for (key in source) {\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contains in native\n    USE_NATIVE = !FORCED && nativeSource && hasOwn(nativeSource, key);\n\n    targetProperty = target[key];\n\n    if (USE_NATIVE) if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(nativeSource, key);\n      nativeProperty = descriptor && descriptor.value;\n    } else nativeProperty = nativeSource[key];\n\n    // export native or implementation\n    sourceProperty = (USE_NATIVE && nativeProperty) ? nativeProperty : source[key];\n\n    if (USE_NATIVE && typeof targetProperty == typeof sourceProperty) continue;\n\n    // bind methods to global for calling from export context\n    if (options.bind && USE_NATIVE) resultProperty = bind(sourceProperty, global);\n    // wrap global constructors for prevent changes in this version\n    else if (options.wrap && USE_NATIVE) resultProperty = wrapConstructor(sourceProperty);\n    // make static versions for prototype methods\n    else if (PROTO && isCallable(sourceProperty)) resultProperty = uncurryThis(sourceProperty);\n    // default case\n    else resultProperty = sourceProperty;\n\n    // add a flag to not completely full polyfills\n    if (options.sham || (sourceProperty && sourceProperty.sham) || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(resultProperty, 'sham', true);\n    }\n\n    createNonEnumerableProperty(target, key, resultProperty);\n\n    if (PROTO) {\n      VIRTUAL_PROTOTYPE = TARGET + 'Prototype';\n      if (!hasOwn(path, VIRTUAL_PROTOTYPE)) {\n        createNonEnumerableProperty(path, VIRTUAL_PROTOTYPE, {});\n      }\n      // export virtual prototype methods\n      createNonEnumerableProperty(path[VIRTUAL_PROTOTYPE], key, sourceProperty);\n      // export real prototype methods\n      if (options.real && targetPrototype && (FORCED || !targetPrototype[key])) {\n        createNonEnumerableProperty(targetPrototype, key, sourceProperty);\n      }\n    }\n  }\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || this || Function('return this')();\n","var parent = require('../../es/array/includes');\n\nmodule.exports = parent;\n","var isCallable = require('../internals/is-callable');\nvar $documentAll = require('../internals/document-all');\n\nvar documentAll = $documentAll.all;\n\nmodule.exports = $documentAll.IS_HTMLDDA ? function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it) || it === documentAll;\n} : function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","var parent = require('../../es/string/starts-with');\n\nmodule.exports = parent;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw $TypeError($String(argument) + ' is not an object');\n};\n","module.exports = {};\n","var parent = require('../../es/array/find');\n\nmodule.exports = parent;\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","var toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","var parent = require('../../es/object/entries');\n\nmodule.exports = parent;\n","module.exports = {};\n","var uncurryThis = require('../internals/function-uncurry-this-clause');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var path = require('../internals/path');\nvar global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (variable) {\n  return isCallable(variable) ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","var isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw $TypeError(tryToString(argument) + ' is not a function');\n};\n","module.exports = true;\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn;\n","var parent = require('../../es/string/includes');\n\nmodule.exports = parent;\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","module.exports = function () { /* empty */ };\n","var NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","module.exports = {};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var classof = require('../internals/classof');\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n","var parent = require('../../es/object/assign');\n\nmodule.exports = parent;\n","var parent = require('../../es/object/keys');\n\nmodule.exports = parent;\n","var parent = require('../../es/array/from');\n\nmodule.exports = parent;\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","var aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","var $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","var global = require('../internals/global');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || defineGlobalProperty(SHARED, {});\n\nmodule.exports = store;\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar IS_PURE = require('../internals/is-pure');\nvar FunctionName = require('../internals/function-name');\nvar isCallable = require('../internals/is-callable');\nvar createIteratorConstructor = require('../internals/iterator-create-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar PROPER_FUNCTION_NAME = FunctionName.PROPER;\nvar CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (!isCallable(CurrentIteratorPrototype[ITERATOR])) {\n          defineBuiltIn(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array.prototype.{ values, @@iterator }.name in V8 / FF\n  if (PROPER_FUNCTION_NAME && DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    if (!IS_PURE && CONFIGURABLE_FUNCTION_NAME) {\n      createNonEnumerableProperty(IterablePrototype, 'name', VALUES);\n    } else {\n      INCORRECT_VALUES_NAME = true;\n      defaultIterator = function values() { return call(nativeIterator, this); };\n    }\n  }\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        defineBuiltIn(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    defineBuiltIn(IterablePrototype, ITERATOR, defaultIterator, { name: DEFAULT });\n  }\n  Iterators[NAME] = defaultIterator;\n\n  return methods;\n};\n","var classofRaw = require('../internals/classof-raw');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThis(fn);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","var trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar $Object = Object;\nvar ObjectPrototype = $Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {\n  var object = toObject(O);\n  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof $Object ? ObjectPrototype : null;\n};\n","var createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (target, key, value, options) {\n  if (options && options.enumerable) target[key] = value;\n  else createNonEnumerableProperty(target, key, value);\n  return target;\n};\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar defineProperty = require('../internals/object-define-property').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar toString = require('../internals/object-to-string');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC, SET_METHOD) {\n  if (it) {\n    var target = STATIC ? it : it.prototype;\n    if (!hasOwn(target, TO_STRING_TAG)) {\n      defineProperty(target, TO_STRING_TAG, { configurable: true, value: TAG });\n    }\n    if (SET_METHOD && !TO_STRING_TAG_SUPPORT) {\n      createNonEnumerableProperty(target, 'toString', toString);\n    }\n  }\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","// `CreateIterResultObject` abstract operation\n// https://tc39.es/ecma262/#sec-createiterresultobject\nmodule.exports = function (value, done) {\n  return { value: value, done: done };\n};\n","var classof = require('../internals/classof');\nvar getMethod = require('../internals/get-method');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (!isNullOrUndefined(it)) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineProperty = require('../internals/object-define-property').f;\nvar defineIterator = require('../internals/iterator-define');\nvar createIterResultObject = require('../internals/create-iter-result-object');\nvar IS_PURE = require('../internals/is-pure');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.es/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.es/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.es/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.es/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return createIterResultObject(undefined, true);\n  }\n  if (kind == 'keys') return createIterResultObject(index, false);\n  if (kind == 'values') return createIterResultObject(target[index], false);\n  return createIterResultObject([index, target[index]], false);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.es/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.es/ecma262/#sec-createmappedargumentsobject\nvar values = Iterators.Arguments = Iterators.Array;\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n// V8 ~ Chrome 45- bug\nif (!IS_PURE && DESCRIPTORS && values.name !== 'values') try {\n  defineProperty(values, 'name', { value: 'values' });\n} catch (error) { /* empty */ }\n","var documentAll = typeof document == 'object' && document.all;\n\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nvar IS_HTMLDDA = typeof documentAll == 'undefined' && documentAll !== undefined;\n\nmodule.exports = {\n  all: documentAll,\n  IS_HTMLDDA: IS_HTMLDDA\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n","var getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\nvar global = require('../internals/global');\n\nvar $String = global.String;\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,\n  // of course, fail.\n  return !$String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.31.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: ' 2014-2023 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\n/* eslint-disable es/no-array-prototype-keys -- safe */\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = !isObject(IteratorPrototype) || fails(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype[ITERATOR].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};\nelse if (IS_PURE) IteratorPrototype = create(IteratorPrototype);\n\n// `%IteratorPrototype%[@@iterator]()` method\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator\nif (!isCallable(IteratorPrototype[ITERATOR])) {\n  defineBuiltIn(IteratorPrototype, ITERATOR, function () {\n    return this;\n  });\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternalModule = require('../internals/object-get-own-property-names-external');\nvar isExtensible = require('../internals/object-is-extensible');\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar REQUIRED = false;\nvar METADATA = uid('meta');\nvar id = 0;\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + id++, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && REQUIRED && isExtensible(it) && !hasOwn(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar enable = function () {\n  meta.enable = function () { /* empty */ };\n  REQUIRED = true;\n  var getOwnPropertyNames = getOwnPropertyNamesModule.f;\n  var splice = uncurryThis([].splice);\n  var test = {};\n  test[METADATA] = 1;\n\n  // prevent exposing of metadata key\n  if (getOwnPropertyNames(test).length) {\n    getOwnPropertyNamesModule.f = function (it) {\n      var result = getOwnPropertyNames(it);\n      for (var i = 0, length = result.length; i < length; i++) {\n        if (result[i] === METADATA) {\n          splice(result, i, 1);\n          break;\n        }\n      } return result;\n    };\n\n    $({ target: 'Object', stat: true, forced: true }, {\n      getOwnPropertyNames: getOwnPropertyNamesExternalModule.f\n    });\n  }\n};\n\nvar meta = module.exports = {\n  enable: enable,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","'use strict';\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","var bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar $TypeError = TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_RECORD = !!(options && options.IS_RECORD);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal', condition);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_RECORD) {\n    iterator = iterable.iterator;\n  } else if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw $TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = IS_RECORD ? iterable.next : iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","var call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw $TypeError(tryToString(argument) + ' is not iterable');\n};\n","var call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getMethod = require('../internals/get-method');\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n","var isPrototypeOf = require('../internals/object-is-prototype-of');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw $TypeError('Incorrect invocation');\n};\n","var bind = require('../internals/function-bind-context');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = uncurryThis([].push);\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_REJECT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that);\n    var length = lengthOfArrayLike(self);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push(target, value);      // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push(target, value);      // filterReject\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterReject` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterReject: createMethod(7)\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar empty = [];\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.exec(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, empty, argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","var defineProperty = require('../internals/object-define-property');\n\nmodule.exports = function (target, name, descriptor) {\n  return defineProperty.f(target, name, descriptor);\n};\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar toString = require('../internals/to-string');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/iterator-define');\nvar createIterResultObject = require('../internals/create-iter-result-object');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: toString(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return createIterResultObject(undefined, true);\n  point = charAt(string, index);\n  state.index += point.length;\n  return createIterResultObject(point, false);\n});\n","var isRegExp = require('../internals/is-regexp');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw $TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","/* @flow */\n\n// $FlowFixMe\nmodule.exports = require(\"./dist/paypal-sdk-constants\"); // eslint-disable-line import/no-commonjs\n","var parent = require('../../es/map');\nrequire('../../modules/web.dom-collections.iterator');\n\nmodule.exports = parent;\n","module.exports = function(modules) {\n    var installedModules = {};\n    function __webpack_require__(moduleId) {\n        if (installedModules[moduleId]) return installedModules[moduleId].exports;\n        var module = installedModules[moduleId] = {\n            i: moduleId,\n            l: !1,\n            exports: {}\n        };\n        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n        module.l = !0;\n        return module.exports;\n    }\n    __webpack_require__.m = modules;\n    __webpack_require__.c = installedModules;\n    __webpack_require__.d = function(exports, name, getter) {\n        __webpack_require__.o(exports, name) || Object.defineProperty(exports, name, {\n            enumerable: !0,\n            get: getter\n        });\n    };\n    __webpack_require__.r = function(exports) {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(exports, Symbol.toStringTag, {\n            value: \"Module\"\n        });\n        Object.defineProperty(exports, \"__esModule\", {\n            value: !0\n        });\n    };\n    __webpack_require__.t = function(value, mode) {\n        1 & mode && (value = __webpack_require__(value));\n        if (8 & mode) return value;\n        if (4 & mode && \"object\" == typeof value && value && value.__esModule) return value;\n        var ns = Object.create(null);\n        __webpack_require__.r(ns);\n        Object.defineProperty(ns, \"default\", {\n            enumerable: !0,\n            value: value\n        });\n        if (2 & mode && \"string\" != typeof value) for (var key in value) __webpack_require__.d(ns, key, function(key) {\n            return value[key];\n        }.bind(null, key));\n        return ns;\n    };\n    __webpack_require__.n = function(module) {\n        var getter = module && module.__esModule ? function() {\n            return module.default;\n        } : function() {\n            return module;\n        };\n        __webpack_require__.d(getter, \"a\", getter);\n        return getter;\n    };\n    __webpack_require__.o = function(object, property) {\n        return {}.hasOwnProperty.call(object, property);\n    };\n    __webpack_require__.p = \"\";\n    return __webpack_require__(__webpack_require__.s = 0);\n}([ function(module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n    __webpack_require__.r(__webpack_exports__);\n    __webpack_require__.d(__webpack_exports__, \"Spinner\", (function() {\n        return Spinner;\n    }));\n    __webpack_require__.d(__webpack_exports__, \"SpinnerPage\", (function() {\n        return SpinnerPage;\n    }));\n    __webpack_require__.d(__webpack_exports__, \"VenmoSpinner\", (function() {\n        return VenmoSpinner;\n    }));\n    __webpack_require__.d(__webpack_exports__, \"VenmoSpinnerPage\", (function() {\n        return VenmoSpinnerPage;\n    }));\n    function _renderChildren(children, renderer) {\n        var result = [];\n        for (var _i2 = 0; _i2 < children.length; _i2++) {\n            var renderedChild = children[_i2].render(renderer);\n            if (renderedChild) if (Array.isArray(renderedChild)) for (var _i4 = 0; _i4 < renderedChild.length; _i4++) {\n                var subchild = renderedChild[_i4];\n                subchild && result.push(subchild);\n            } else result.push(renderedChild);\n        }\n        return result;\n    }\n    var node_ElementNode = function() {\n        function ElementNode(name, props, children) {\n            this.type = \"element\";\n            this.name = void 0;\n            this.props = void 0;\n            this.children = void 0;\n            this.onRender = void 0;\n            this.name = name;\n            this.props = props || {};\n            this.children = children;\n            var onRender = this.props.onRender;\n            if (\"function\" == typeof onRender) {\n                this.onRender = onRender;\n                delete props.onRender;\n            }\n        }\n        var _proto = ElementNode.prototype;\n        _proto.render = function(renderer) {\n            var el = renderer(this);\n            this.onRender && this.onRender(el);\n            return el;\n        };\n        _proto.renderChildren = function(renderer) {\n            return _renderChildren(this.children, renderer);\n        };\n        return ElementNode;\n    }();\n    var node_FragmentNode = function() {\n        function FragmentNode(children) {\n            this.type = \"fragment\";\n            this.children = void 0;\n            this.children = children;\n        }\n        FragmentNode.prototype.render = function(renderer) {\n            return _renderChildren(this.children, renderer);\n        };\n        return FragmentNode;\n    }();\n    var node_TextNode = function() {\n        function TextNode(text) {\n            this.type = \"text\";\n            this.text = void 0;\n            this.text = text;\n        }\n        TextNode.prototype.render = function(renderer) {\n            return renderer(this);\n        };\n        return TextNode;\n    }();\n    var node_ComponentNode = function() {\n        function ComponentNode(component, props, children) {\n            this.type = \"component\";\n            this.component = void 0;\n            this.props = void 0;\n            this.children = void 0;\n            this.component = component;\n            this.props = props || {};\n            this.children = children;\n            this.props.children = children;\n        }\n        var _proto4 = ComponentNode.prototype;\n        _proto4.renderComponent = function(renderer) {\n            var child = function(child) {\n                var children = normalizeChildren(Array.isArray(child) ? child : [ child ]);\n                return 1 === children.length ? children[0] : children.length > 1 ? new node_FragmentNode(children) : void 0;\n            }(this.component(this.props, this.children));\n            if (child) return child.render(renderer);\n        };\n        _proto4.render = function(renderer) {\n            return renderer(this);\n        };\n        _proto4.renderChildren = function(renderer) {\n            return _renderChildren(this.children, renderer);\n        };\n        return ComponentNode;\n    }();\n    function normalizeChildren(children) {\n        var result = [];\n        for (var _i6 = 0; _i6 < children.length; _i6++) {\n            var child = children[_i6];\n            if (child) if (\"string\" == typeof child || \"number\" == typeof child) result.push(new node_TextNode(child.toString())); else {\n                if (\"boolean\" == typeof child) continue;\n                if (Array.isArray(child)) for (var _i8 = 0, _normalizeChildren2 = normalizeChildren(child); _i8 < _normalizeChildren2.length; _i8++) result.push(_normalizeChildren2[_i8]); else {\n                    if (!child || \"element\" !== child.type && \"text\" !== child.type && \"component\" !== child.type) throw new TypeError(\"Unrecognized node type: \" + typeof child);\n                    result.push(child);\n                }\n            }\n        }\n        return result;\n    }\n    var node_node = function(element, props) {\n        for (var _len = arguments.length, children = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) children[_key - 2] = arguments[_key];\n        children = normalizeChildren(children);\n        if (\"string\" == typeof element) return new node_ElementNode(element, props, children);\n        if (\"function\" == typeof element) return new node_ComponentNode(element, props, children);\n        throw new TypeError(\"Expected jsx element to be a string or a function\");\n    };\n    var Fragment = function(props, children) {\n        return children;\n    };\n    var _ELEMENT_DEFAULT_XML_, _ATTRIBUTE_DEFAULT_XM, _ADD_CHILDREN;\n    var ELEMENT_DEFAULT_XML_NAMESPACE = ((_ELEMENT_DEFAULT_XML_ = {}).svg = \"http://www.w3.org/2000/svg\", \n    _ELEMENT_DEFAULT_XML_);\n    var ATTRIBUTE_DEFAULT_XML_NAMESPACE = ((_ATTRIBUTE_DEFAULT_XM = {})[\"xlink:href\"] = \"http://www.w3.org/1999/xlink\", \n    _ATTRIBUTE_DEFAULT_XM);\n    function createTextElement(doc, node) {\n        return doc.createTextNode(node.text);\n    }\n    function addProps(el, node) {\n        var props = node.props;\n        for (var _i4 = 0, _Object$keys2 = Object.keys(props); _i4 < _Object$keys2.length; _i4++) {\n            var prop = _Object$keys2[_i4];\n            var val = props[prop];\n            if (null != val && \"el\" !== prop && \"innerHTML\" !== prop) if (prop.match(/^on[A-Z][a-z]/) && \"function\" == typeof val) el.addEventListener(prop.slice(2).toLowerCase(), val); else if (\"string\" == typeof val || \"number\" == typeof val) {\n                var xmlNamespace = ATTRIBUTE_DEFAULT_XML_NAMESPACE[prop];\n                xmlNamespace ? el.setAttributeNS(xmlNamespace, prop, val.toString()) : el.setAttribute(prop, val.toString());\n            } else \"boolean\" == typeof val && !0 === val && el.setAttribute(prop, \"\");\n        }\n        \"iframe\" !== el.tagName.toLowerCase() || props.id || el.setAttribute(\"id\", \"jsx-iframe-\" + \"xxxxxxxxxx\".replace(/./g, (function() {\n            return \"0123456789abcdef\".charAt(Math.floor(Math.random() * \"0123456789abcdef\".length));\n        })));\n    }\n    var ADD_CHILDREN = ((_ADD_CHILDREN = {}).iframe = function(el, node) {\n        var firstChild = node.children[0];\n        if (1 !== node.children.length || !firstChild || \"element\" !== firstChild.type || \"html\" !== firstChild.name) throw new Error(\"Expected only single html element node as child of iframe element\");\n        el.addEventListener(\"load\", (function() {\n            var win = el.contentWindow;\n            if (!win) throw new Error(\"Expected frame to have contentWindow\");\n            var doc = win.document;\n            var docElement = doc.documentElement;\n            for (;docElement.children && docElement.children.length; ) docElement.removeChild(docElement.children[0]);\n            var child = firstChild.render(function(opts) {\n                void 0 === opts && (opts = {});\n                var _opts$doc = opts.doc, doc = void 0 === _opts$doc ? document : _opts$doc;\n                return function domRenderer(node) {\n                    if (\"component\" === node.type) return node.renderComponent(domRenderer);\n                    if (\"text\" === node.type) return createTextElement(doc, node);\n                    if (\"element\" === node.type) {\n                        var xmlNamespace = ELEMENT_DEFAULT_XML_NAMESPACE[node.name.toLowerCase()];\n                        if (xmlNamespace) return function xmlNamespaceDomRenderer(node, xmlNamespace) {\n                            if (\"component\" === node.type) return node.renderComponent((function(childNode) {\n                                return xmlNamespaceDomRenderer(childNode, xmlNamespace);\n                            }));\n                            if (\"text\" === node.type) return createTextElement(doc, node);\n                            if (\"element\" === node.type) {\n                                var el = function(doc, node, xmlNamespace) {\n                                    return doc.createElementNS(xmlNamespace, node.name);\n                                }(doc, node, xmlNamespace);\n                                addProps(el, node);\n                                addChildren(el, node, doc, (function(childNode) {\n                                    return xmlNamespaceDomRenderer(childNode, xmlNamespace);\n                                }));\n                                return el;\n                            }\n                            throw new TypeError(\"Unhandleable node\");\n                        }(node, xmlNamespace);\n                        var el = function(doc, node) {\n                            return node.props.el ? node.props.el : doc.createElement(node.name);\n                        }(doc, node);\n                        addProps(el, node);\n                        addChildren(el, node, doc, domRenderer);\n                        return el;\n                    }\n                    throw new TypeError(\"Unhandleable node\");\n                };\n            }({\n                doc: doc\n            }));\n            for (;child.children.length; ) docElement.appendChild(child.children[0]);\n        }));\n    }, _ADD_CHILDREN.script = function(el, node) {\n        var firstChild = node.children[0];\n        if (1 !== node.children.length || !firstChild || \"text\" !== firstChild.type) throw new Error(\"Expected only single text node as child of script element\");\n        el.text = firstChild.text;\n    }, _ADD_CHILDREN.default = function(el, node, renderer) {\n        for (var _i6 = 0, _node$renderChildren2 = node.renderChildren(renderer); _i6 < _node$renderChildren2.length; _i6++) el.appendChild(_node$renderChildren2[_i6]);\n    }, _ADD_CHILDREN);\n    function addChildren(el, node, doc, renderer) {\n        if (node.props.hasOwnProperty(\"innerHTML\")) {\n            if (node.children.length) throw new Error(\"Expected no children to be passed when innerHTML prop is set\");\n            var html = node.props.innerHTML;\n            if (\"string\" != typeof html) throw new TypeError(\"innerHTML prop must be string\");\n            if (\"script\" === node.name) el.text = html; else {\n                el.innerHTML = html;\n                !function(el, doc) {\n                    void 0 === doc && (doc = window.document);\n                    for (var _i2 = 0, _el$querySelectorAll2 = el.querySelectorAll(\"script\"); _i2 < _el$querySelectorAll2.length; _i2++) {\n                        var script = _el$querySelectorAll2[_i2];\n                        var parentNode = script.parentNode;\n                        if (parentNode) {\n                            var newScript = doc.createElement(\"script\");\n                            newScript.text = script.textContent;\n                            parentNode.replaceChild(newScript, script);\n                        }\n                    }\n                }(el, doc);\n            }\n        } else (ADD_CHILDREN[node.name] || ADD_CHILDREN.default)(el, node, renderer);\n    }\n    function Spinner(_ref) {\n        return node_node(\"div\", {\n            class: \"preloader spinner\"\n        }, node_node(\"style\", {\n            nonce: _ref.nonce,\n            innerHTML: \"\\n\\n    body {\\n        width: 100%;\\n        height: 100%;\\n        overflow: hidden;\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        margin: 0;\\n    }\\n\\n    .spinner {\\n        height: 100%;\\n        width: 100%;\\n        position: absolute;\\n        z-index: 10\\n    }\\n\\n    .spinner .spinWrap {\\n        width: 200px;\\n        height: 100px;\\n        position: absolute;\\n        top: 50%;\\n        left: 50%;\\n        margin-left: -100px;\\n        margin-top: -50px\\n    }\\n\\n    .spinner .loader,\\n    .spinner .spinnerImage {\\n        height: 100px;\\n        width: 100px;\\n        position: absolute;\\n        top: 0;\\n        left: 50%;\\n        opacity: 1;\\n        filter: alpha(opacity=100)\\n    }\\n\\n    .spinner .spinnerImage {\\n        margin: 28px 0 0 -25px;\\n        background: url(https://www.paypalobjects.com/images/checkout/hermes/icon_ot_spin_lock_skinny.png) no-repeat\\n    }\\n\\n    .spinner .loader {\\n        margin: 0 0 0 -55px;\\n        background-color: transparent;\\n        animation: rotation .7s infinite linear;\\n        border-left: 5px solid #cbcbca;\\n        border-right: 5px solid #cbcbca;\\n        border-bottom: 5px solid #cbcbca;\\n        border-top: 5px solid #2380be;\\n        border-radius: 100%\\n    }\\n\\n    @keyframes rotation {\\n        from {\\n            transform: rotate(0deg)\\n        }\\n        to {\\n            transform: rotate(359deg)\\n        }\\n    }\\n\"\n        }), node_node(\"div\", {\n            class: \"spinWrap\"\n        }, node_node(\"p\", {\n            class: \"spinnerImage\"\n        }), node_node(\"p\", {\n            class: \"loader\"\n        })));\n    }\n    function SpinnerPage(_ref2, children) {\n        var nonce = _ref2.nonce;\n        return node_node(\"html\", null, node_node(\"head\", null, node_node(\"title\", null, \"PayPal\"), node_node(\"meta\", {\n            name: \"viewport\",\n            content: \"width=device-width, initial-scale=1\"\n        })), node_node(\"body\", null, node_node(Spinner, {\n            nonce: nonce\n        }), children));\n    }\n    function VenmoSpinner(_ref) {\n        return node_node(Fragment, null, node_node(\"style\", {\n            nonce: _ref.nonce,\n            innerHTML: '\\n    body {\\n        width: 100%;\\n        height: 100%;\\n        overflow: hidden;\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        margin: 0;\\n    }\\n    .spinner {\\n        color: official;\\n        display: inline-block;\\n        width: 80px;\\n        height: 80px;\\n        position: absolute;\\n        left: 50%;\\n        top: 50%;\\n        -webkit-transform: translate(-50%, -50%);\\n        transform: translate(-50%, -50%);\\n    }\\n    .spinner div {\\n        transform-origin: 40px 40px;\\n        animation: spinner 1.2s linear infinite;\\n    }\\n    .spinner div:after {\\n        content: \" \";\\n        display: block;\\n        position: absolute;\\n        top: 20px;\\n        left: 37px;\\n        width: 3px;\\n        height: 10px;\\n        border-radius: 30%;\\n        background: #808080;\\n    }\\n    .spinner div:nth-child(1) {\\n        transform: rotate(0deg);\\n        animation-delay: -1.1s;\\n    }\\n    .spinner div:nth-child(2) {\\n        transform: rotate(30deg);\\n        animation-delay: -1s;\\n    }\\n    .spinner div:nth-child(3) {\\n        transform: rotate(60deg);\\n        animation-delay: -0.9s;\\n    }\\n    .spinner div:nth-child(4) {\\n        transform: rotate(90deg);\\n        animation-delay: -0.8s;\\n    }\\n    .spinner div:nth-child(5) {\\n        transform: rotate(120deg);\\n        animation-delay: -0.7s;\\n    }\\n    .spinner div:nth-child(6) {\\n        transform: rotate(150deg);\\n        animation-delay: -0.6s;\\n    }\\n    .spinner div:nth-child(7) {\\n        transform: rotate(180deg);\\n        animation-delay: -0.5s;\\n    }\\n    .spinner div:nth-child(8) {\\n        transform: rotate(210deg);\\n        animation-delay: -0.4s;\\n    }\\n    .spinner div:nth-child(9) {\\n        transform: rotate(240deg);\\n        animation-delay: -0.3s;\\n    }\\n    .spinner div:nth-child(10) {\\n        transform: rotate(270deg);\\n        animation-delay: -0.2s;\\n    }\\n    .spinner div:nth-child(11) {\\n        transform: rotate(300deg);\\n        animation-delay: -0.1s;\\n    }\\n    .spinner div:nth-child(12) {\\n        transform: rotate(330deg);\\n        animation-delay: 0s;\\n    }\\n    @keyframes spinner {\\n        0% {\\n            opacity: 1;\\n        }\\n        100% {\\n            opacity: 0;\\n        }\\n    }\\n'\n        }), node_node(\"div\", {\n            class: \"spinner\"\n        }, node_node(\"div\", null), node_node(\"div\", null), node_node(\"div\", null), node_node(\"div\", null), node_node(\"div\", null), node_node(\"div\", null), node_node(\"div\", null), node_node(\"div\", null), node_node(\"div\", null), node_node(\"div\", null), node_node(\"div\", null), node_node(\"div\", null)));\n    }\n    function VenmoSpinnerPage(_ref2, children) {\n        var nonce = _ref2.nonce;\n        return node_node(\"html\", null, node_node(\"head\", null, node_node(\"title\", null, \"Venmo\"), node_node(\"meta\", {\n            name: \"viewport\",\n            content: \"width=device-width, initial-scale=1\"\n        })), node_node(\"body\", null, node_node(VenmoSpinner, {\n            nonce: nonce\n        }), children));\n    }\n} ]);","var parent = require('../../es/number/is-nan');\n\nmodule.exports = parent;\n","var parent = require('../../es/array/flat-map');\n\nmodule.exports = parent;\n","!function(E,N){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=N():\"function\"==typeof define&&define.amd?define(\"ppsdkconstants\",[],N):\"object\"==typeof exports?exports.ppsdkconstants=N():E.ppsdkconstants=N()}(\"undefined\"!=typeof self?self:this,(function(){return function(E){var N={};function S(R){if(N[R])return N[R].exports;var t=N[R]={i:R,l:!1,exports:{}};return E[R].call(t.exports,t,t.exports,S),t.l=!0,t.exports}return S.m=E,S.c=N,S.d=function(E,N,R){S.o(E,N)||Object.defineProperty(E,N,{enumerable:!0,get:R})},S.r=function(E){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(E,\"__esModule\",{value:!0})},S.t=function(E,N){if(1&N&&(E=S(E)),8&N)return E;if(4&N&&\"object\"==typeof E&&E&&E.__esModule)return E;var R=Object.create(null);if(S.r(R),Object.defineProperty(R,\"default\",{enumerable:!0,value:E}),2&N&&\"string\"!=typeof E)for(var t in E)S.d(R,t,function(N){return E[N]}.bind(null,t));return R},S.n=function(E){var N=E&&E.__esModule?function(){return E.default}:function(){return E};return S.d(N,\"a\",N),N},S.o=function(E,N){return{}.hasOwnProperty.call(E,N)},S.p=\"\",S(S.s=0)}([function(E,N,S){\"use strict\";S.r(N),S.d(N,\"DEFAULT_COUNTRY\",(function(){return u})),S.d(N,\"DEFAULT_CURRENCY\",(function(){return L})),S.d(N,\"DEFAULT_INTENT\",(function(){return P})),S.d(N,\"DEFAULT_COMMIT\",(function(){return Z})),S.d(N,\"DEFAULT_SALE_COMMIT\",(function(){return d})),S.d(N,\"DEFAULT_NONSALE_COMMIT\",(function(){return c})),S.d(N,\"DEFAULT_VAULT\",(function(){return U})),S.d(N,\"DEFAULT_COMPONENTS\",(function(){return s})),S.d(N,\"DEFAULT_DEBUG\",(function(){return B})),S.d(N,\"ENV\",(function(){return G})),S.d(N,\"MOBILE_ENV\",(function(){return K})),S.d(N,\"ERROR_CODE\",(function(){return p})),S.d(N,\"FPTI_KEY\",(function(){return l})),S.d(N,\"FPTI_USER_ACTION\",(function(){return f})),S.d(N,\"FPTI_DATA_SOURCE\",(function(){return Y})),S.d(N,\"FPTI_FEED\",(function(){return V})),S.d(N,\"FPTI_SDK_NAME\",(function(){return m})),S.d(N,\"FUNDING\",(function(){return y})),S.d(N,\"FUNDING_BRAND_LABEL\",(function(){return b})),S.d(N,\"CARD\",(function(){return W})),S.d(N,\"WALLET_INSTRUMENT\",(function(){return J})),S.d(N,\"FUNDING_PRODUCTS\",(function(){return h})),S.d(N,\"COUNTRY\",(function(){return R})),S.d(N,\"LANG\",(function(){return t})),S.d(N,\"COUNTRY_LANGS\",(function(){return T})),S.d(N,\"INTENT\",(function(){return e})),S.d(N,\"COMMIT\",(function(){return n})),S.d(N,\"VAULT\",(function(){return A})),S.d(N,\"CURRENCY\",(function(){return r})),S.d(N,\"SDK_PATH\",(function(){return _})),S.d(N,\"SDK_SETTINGS\",(function(){return F})),S.d(N,\"SDK_QUERY_KEYS\",(function(){return D})),S.d(N,\"COMPONENTS\",(function(){return I})),S.d(N,\"DEBUG\",(function(){return H})),S.d(N,\"QUERY_BOOL\",(function(){return o})),S.d(N,\"UNKNOWN\",(function(){return O})),S.d(N,\"PROTOCOL\",(function(){return i})),S.d(N,\"PAGE_TYPES\",(function(){return C})),S.d(N,\"MERCHANT_ID_MAX\",(function(){return M})),S.d(N,\"DISPLAY_ONLY_VALUES\",(function(){return a})),S.d(N,\"PLATFORM\",(function(){return g})),S.d(N,\"TYPES\",(function(){return k})),S.d(N,\"APM_LIST\",(function(){return v}));var R={AD:\"AD\",AE:\"AE\",AG:\"AG\",AI:\"AI\",AL:\"AL\",AM:\"AM\",AN:\"AN\",AO:\"AO\",AR:\"AR\",AT:\"AT\",AU:\"AU\",AW:\"AW\",AZ:\"AZ\",BA:\"BA\",BB:\"BB\",BE:\"BE\",BF:\"BF\",BG:\"BG\",BH:\"BH\",BI:\"BI\",BJ:\"BJ\",BM:\"BM\",BN:\"BN\",BO:\"BO\",BR:\"BR\",BS:\"BS\",BT:\"BT\",BW:\"BW\",BY:\"BY\",BZ:\"BZ\",CA:\"CA\",CD:\"CD\",CG:\"CG\",CH:\"CH\",CI:\"CI\",CK:\"CK\",CL:\"CL\",CM:\"CM\",CN:\"CN\",CO:\"CO\",CR:\"CR\",CV:\"CV\",CY:\"CY\",CZ:\"CZ\",DE:\"DE\",DJ:\"DJ\",DK:\"DK\",DM:\"DM\",DO:\"DO\",DZ:\"DZ\",EC:\"EC\",EE:\"EE\",EG:\"EG\",ER:\"ER\",ES:\"ES\",ET:\"ET\",FI:\"FI\",FJ:\"FJ\",FK:\"FK\",FM:\"FM\",FO:\"FO\",FR:\"FR\",GA:\"GA\",GB:\"GB\",GD:\"GD\",GE:\"GE\",GF:\"GF\",GI:\"GI\",GL:\"GL\",GM:\"GM\",GN:\"GN\",GP:\"GP\",GR:\"GR\",GT:\"GT\",GW:\"GW\",GY:\"GY\",HK:\"HK\",HN:\"HN\",HR:\"HR\",HU:\"HU\",ID:\"ID\",IE:\"IE\",IL:\"IL\",IN:\"IN\",IS:\"IS\",IT:\"IT\",JM:\"JM\",JO:\"JO\",JP:\"JP\",KE:\"KE\",KG:\"KG\",KH:\"KH\",KI:\"KI\",KM:\"KM\",KN:\"KN\",KR:\"KR\",KW:\"KW\",KY:\"KY\",KZ:\"KZ\",LA:\"LA\",LC:\"LC\",LI:\"LI\",LK:\"LK\",LS:\"LS\",LT:\"LT\",LU:\"LU\",LV:\"LV\",MA:\"MA\",MC:\"MC\",MD:\"MD\",ME:\"ME\",MG:\"MG\",MH:\"MH\",MK:\"MK\",ML:\"ML\",MN:\"MN\",MQ:\"MQ\",MR:\"MR\",MS:\"MS\",MT:\"MT\",MU:\"MU\",MV:\"MV\",MW:\"MW\",MX:\"MX\",MY:\"MY\",MZ:\"MZ\",NA:\"NA\",NC:\"NC\",NE:\"NE\",NF:\"NF\",NG:\"NG\",NI:\"NI\",NL:\"NL\",NO:\"NO\",NP:\"NP\",NR:\"NR\",NU:\"NU\",NZ:\"NZ\",OM:\"OM\",PA:\"PA\",PE:\"PE\",PF:\"PF\",PG:\"PG\",PH:\"PH\",PL:\"PL\",PM:\"PM\",PN:\"PN\",PT:\"PT\",PW:\"PW\",PY:\"PY\",QA:\"QA\",RE:\"RE\",RO:\"RO\",RS:\"RS\",RU:\"RU\",RW:\"RW\",SA:\"SA\",SB:\"SB\",SC:\"SC\",SE:\"SE\",SG:\"SG\",SH:\"SH\",SI:\"SI\",SJ:\"SJ\",SK:\"SK\",SL:\"SL\",SM:\"SM\",SN:\"SN\",SO:\"SO\",SR:\"SR\",ST:\"ST\",SV:\"SV\",SZ:\"SZ\",TC:\"TC\",TD:\"TD\",TG:\"TG\",TH:\"TH\",TJ:\"TJ\",TM:\"TM\",TN:\"TN\",TO:\"TO\",TR:\"TR\",TT:\"TT\",TV:\"TV\",TW:\"TW\",TZ:\"TZ\",UA:\"UA\",UG:\"UG\",US:\"US\",UY:\"UY\",VA:\"VA\",VC:\"VC\",VE:\"VE\",VG:\"VG\",VN:\"VN\",VU:\"VU\",WF:\"WF\",WS:\"WS\",YE:\"YE\",YT:\"YT\",ZA:\"ZA\",ZM:\"ZM\",ZW:\"ZW\"},t={AR:\"ar\",BG:\"bg\",CS:\"cs\",DA:\"da\",DE:\"de\",EL:\"el\",EN:\"en\",ES:\"es\",ET:\"et\",FI:\"fi\",FR:\"fr\",HE:\"he\",HU:\"hu\",ID:\"id\",IT:\"it\",JA:\"ja\",KO:\"ko\",LT:\"lt\",LV:\"lv\",MS:\"ms\",NL:\"nl\",NO:\"no\",PL:\"pl\",PT:\"pt\",RO:\"ro\",RU:\"ru\",SI:\"si\",SK:\"sk\",SL:\"sl\",SQ:\"sq\",SV:\"sv\",TH:\"th\",TL:\"tl\",TR:\"tr\",VI:\"vi\",ZH:\"zh\",ZH_HANT:\"zh_Hant\"},T={AD:[t.EN,t.FR,t.ES,t.ZH],AE:[t.EN,t.FR,t.ES,t.ZH,t.AR],AG:[t.EN,t.FR,t.ES,t.ZH],AI:[t.EN,t.FR,t.ES,t.ZH],AL:[t.SQ,t.EN],AM:[t.EN,t.FR,t.ES,t.ZH],AN:[t.EN,t.FR,t.ES,t.ZH],AO:[t.EN,t.FR,t.ES,t.ZH],AR:[t.ES,t.EN],AT:[t.DE,t.EN],AU:[t.EN],AW:[t.EN,t.FR,t.ES,t.ZH],AZ:[t.EN,t.FR,t.ES,t.ZH],BA:[t.EN],BB:[t.EN,t.FR,t.ES,t.ZH],BE:[t.EN,t.NL,t.FR],BF:[t.FR,t.EN,t.ES,t.ZH],BG:[t.BG,t.EN],BH:[t.AR,t.EN,t.FR,t.ES,t.ZH],BI:[t.FR,t.EN,t.ES,t.ZH],BJ:[t.FR,t.EN,t.ES,t.ZH],BM:[t.EN,t.FR,t.ES,t.ZH],BN:[t.MS,t.EN],BO:[t.ES,t.EN,t.FR,t.ZH],BR:[t.PT,t.EN],BS:[t.EN,t.FR,t.ES,t.ZH],BT:[t.EN],BW:[t.EN,t.FR,t.ES,t.ZH],BY:[t.EN],BZ:[t.EN,t.ES,t.FR,t.ZH],CA:[t.EN,t.FR],CD:[t.FR,t.EN,t.ES,t.ZH],CG:[t.EN,t.FR,t.ES,t.ZH],CH:[t.DE,t.FR,t.EN],CI:[t.FR,t.EN],CK:[t.EN,t.FR,t.ES,t.ZH],CL:[t.ES,t.EN,t.FR,t.ZH],CM:[t.FR,t.EN],CN:[t.ZH],CO:[t.ES,t.EN,t.FR,t.ZH],CR:[t.ES,t.EN,t.FR,t.ZH],CV:[t.EN,t.FR,t.ES,t.ZH],CY:[t.EN],CZ:[t.CS,t.EN],DE:[t.DE,t.EN],DJ:[t.FR,t.EN,t.ES,t.ZH],DK:[t.DA,t.EN],DM:[t.EN,t.FR,t.ES,t.ZH],DO:[t.ES,t.EN,t.FR,t.ZH],DZ:[t.AR,t.EN,t.FR,t.ES,t.ZH],EC:[t.ES,t.EN,t.FR,t.ZH],EE:[t.ET,t.EN,t.RU],EG:[t.AR,t.EN,t.FR,t.ES,t.ZH],ER:[t.EN,t.FR,t.ES,t.ZH],ES:[t.ES,t.EN],ET:[t.EN,t.FR,t.ES,t.ZH],FI:[t.FI,t.EN],FJ:[t.EN,t.FR,t.ES,t.ZH],FK:[t.EN,t.FR,t.ES,t.ZH],FM:[t.EN],FO:[t.DA,t.EN,t.FR,t.ES,t.ZH],FR:[t.FR,t.EN],GA:[t.FR,t.EN,t.ES,t.ZH],GB:[t.EN],GD:[t.EN,t.FR,t.ES,t.ZH],GE:[t.EN,t.FR,t.ES,t.ZH],GF:[t.EN,t.FR,t.ES,t.ZH],GI:[t.EN,t.FR,t.ES,t.ZH],GL:[t.DA,t.EN,t.FR,t.ES,t.ZH],GM:[t.EN,t.FR,t.ES,t.ZH],GN:[t.FR,t.EN,t.ES,t.ZH],GP:[t.EN,t.FR,t.ES,t.ZH],GR:[t.EL,t.EN],GT:[t.ES,t.EN,t.FR,t.ZH],GW:[t.EN,t.FR,t.ES,t.ZH],GY:[t.EN,t.FR,t.ES,t.ZH],HK:[t.EN,t.ZH_HANT,t.ZH],HN:[t.ES,t.EN,t.FR,t.ZH],HR:[t.EN],HU:[t.HU,t.EN],ID:[t.ID,t.EN],IE:[t.EN,t.FR,t.ES,t.ZH],IL:[t.HE,t.EN],IN:[t.EN],IS:[t.EN],IT:[t.IT,t.EN],JM:[t.EN,t.ES,t.FR,t.ZH],JO:[t.AR,t.EN,t.FR,t.ES,t.ZH],JP:[t.JA,t.EN],KE:[t.EN,t.FR,t.ES,t.ZH],KG:[t.EN,t.FR,t.ES,t.ZH],KH:[t.EN],KI:[t.EN,t.FR,t.ES,t.ZH],KM:[t.FR,t.EN,t.ES,t.ZH],KN:[t.EN,t.FR,t.ES,t.ZH],KR:[t.KO,t.EN],KW:[t.AR,t.EN,t.FR,t.ES,t.ZH],KY:[t.EN,t.FR,t.ES,t.ZH],KZ:[t.EN,t.FR,t.ES,t.ZH],LA:[t.EN],LC:[t.EN,t.FR,t.ES,t.ZH],LI:[t.EN,t.FR,t.ES,t.ZH],LK:[t.SI,t.EN],LS:[t.EN,t.FR,t.ES,t.ZH],LT:[t.LT,t.EN,t.RU,t.ZH],LU:[t.EN,t.DE,t.FR,t.ES,t.ZH],LV:[t.LV,t.EN,t.RU],MA:[t.AR,t.EN,t.FR,t.ES,t.ZH],MC:[t.FR,t.EN],MD:[t.EN],ME:[t.EN],MG:[t.EN,t.FR,t.ES,t.ZH],MH:[t.EN,t.FR,t.ES,t.ZH],MK:[t.EN],ML:[t.FR,t.EN,t.ES,t.ZH],MN:[t.EN],MQ:[t.EN,t.FR,t.ES,t.ZH],MR:[t.EN,t.FR,t.ES,t.ZH],MS:[t.EN,t.FR,t.ES,t.ZH],MT:[t.EN],MU:[t.EN,t.FR,t.ES,t.ZH],MV:[t.EN],MW:[t.EN,t.FR,t.ES,t.ZH],MX:[t.ES,t.EN],MY:[t.MS,t.EN],MZ:[t.EN,t.FR,t.ES,t.ZH],NA:[t.EN,t.FR,t.ES,t.ZH],NC:[t.EN,t.FR,t.ES,t.ZH],NE:[t.FR,t.EN,t.ES,t.ZH],NF:[t.EN,t.FR,t.ES,t.ZH],NG:[t.EN],NI:[t.ES,t.EN,t.FR,t.ZH],NL:[t.NL,t.EN],NO:[t.NO,t.EN],NP:[t.EN],NR:[t.EN,t.FR,t.ES,t.ZH],NU:[t.EN,t.FR,t.ES,t.ZH],NZ:[t.EN,t.FR,t.ES,t.ZH],OM:[t.AR,t.EN,t.FR,t.ES,t.ZH],PA:[t.ES,t.EN,t.FR,t.ZH],PE:[t.ES,t.EN,t.FR,t.ZH],PF:[t.EN,t.FR,t.ES,t.ZH],PG:[t.EN,t.FR,t.ES,t.ZH],PH:[t.TL,t.EN],PL:[t.PL,t.EN],PM:[t.EN,t.FR,t.ES,t.ZH],PN:[t.EN,t.FR,t.ES,t.ZH],PT:[t.PT,t.EN],PW:[t.EN,t.FR,t.ES,t.ZH],PY:[t.ES,t.EN],QA:[t.EN,t.FR,t.ES,t.ZH,t.AR],RE:[t.EN,t.FR,t.ES,t.ZH],RO:[t.RO,t.EN],RS:[t.EN,t.FR,t.ES,t.ZH],RU:[t.RU,t.EN],RW:[t.FR,t.EN,t.ES,t.ZH],SA:[t.AR,t.EN,t.FR,t.ES,t.ZH],SB:[t.EN,t.FR,t.ES,t.ZH],SC:[t.FR,t.EN,t.ES,t.ZH],SE:[t.SV,t.EN],SG:[t.EN],SH:[t.EN,t.FR,t.ES,t.ZH],SI:[t.SL,t.EN],SJ:[t.EN,t.FR,t.ES,t.ZH],SK:[t.SK,t.EN],SL:[t.EN,t.FR,t.ES,t.ZH],SM:[t.EN,t.FR,t.ES,t.ZH],SN:[t.FR,t.EN,t.ES,t.ZH],SO:[t.EN,t.FR,t.ES,t.ZH],SR:[t.EN,t.FR,t.ES,t.ZH],ST:[t.EN,t.FR,t.ES,t.ZH],SV:[t.ES,t.EN,t.FR,t.ZH],SZ:[t.EN,t.FR,t.ES,t.ZH],TC:[t.EN,t.FR,t.ES,t.ZH],TD:[t.FR,t.EN,t.ES,t.ZH],TG:[t.FR,t.EN,t.ES,t.ZH],TH:[t.TH,t.EN],TJ:[t.EN,t.FR,t.ES,t.ZH],TM:[t.EN,t.FR,t.ES,t.ZH],TN:[t.AR,t.EN,t.FR,t.ES,t.ZH],TO:[t.EN],TR:[t.TR,t.EN],TT:[t.EN,t.FR,t.ES,t.ZH],TV:[t.EN,t.FR,t.ES,t.ZH],TW:[t.ZH_HANT,t.ZH,t.EN],TZ:[t.EN,t.FR,t.ES,t.ZH],UA:[t.EN,t.RU,t.FR,t.ES,t.ZH],UG:[t.EN,t.FR,t.ES,t.ZH],US:[t.EN,t.FR,t.ES,t.ZH],UY:[t.ES,t.EN,t.FR,t.ZH],VA:[t.EN,t.FR,t.ES,t.ZH],VC:[t.EN,t.FR,t.ES,t.ZH],VE:[t.ES,t.EN,t.FR,t.ZH],VG:[t.EN,t.FR,t.ES,t.ZH],VN:[t.VI,t.EN],VU:[t.EN,t.FR,t.ES,t.ZH],WF:[t.EN,t.FR,t.ES,t.ZH],WS:[t.EN],YE:[t.AR,t.EN,t.FR,t.ES,t.ZH],YT:[t.EN,t.FR,t.ES,t.ZH],ZA:[t.EN,t.FR,t.ES,t.ZH],ZM:[t.EN,t.FR,t.ES,t.ZH],ZW:[t.EN]},e={CAPTURE:\"capture\",AUTHORIZE:\"authorize\",ORDER:\"order\",TOKENIZE:\"tokenize\",SUBSCRIPTION:\"subscription\"},n={TRUE:!0,FALSE:!1},A={TRUE:!0,FALSE:!1},r={AED:\"AED\",ALL:\"ALL\",ANG:\"ANG\",AOA:\"AOA\",AUD:\"AUD\",AWG:\"AWG\",BAM:\"BAM\",BBD:\"BBD\",BGN:\"BGN\",BIF:\"BIF\",BMD:\"BMD\",BND:\"BND\",BOB:\"BOB\",BRL:\"BRL\",BSD:\"BSD\",BTN:\"BTN\",CAD:\"CAD\",CDF:\"CDF\",CHF:\"CHF\",CLP:\"CLP\",COP:\"COP\",CRC:\"CRC\",CVE:\"CVE\",CZK:\"CZK\",DJF:\"DJF\",DKK:\"DKK\",DOP:\"DOP\",DZD:\"DZD\",EGP:\"EGP\",ETB:\"ETB\",EUR:\"EUR\",FJD:\"FJD\",FKP:\"FKP\",GBP:\"GBP\",GIP:\"GIP\",GMD:\"GMD\",GNF:\"GNF\",GTQ:\"GTQ\",GYD:\"GYD\",HKD:\"HKD\",HNL:\"HNL\",HRK:\"HRK\",HUF:\"HUF\",IDR:\"IDR\",ILS:\"ILS\",INR:\"INR\",ISK:\"ISK\",JMD:\"JMD\",JPY:\"JPY\",KES:\"KES\",KMF:\"KMF\",KRW:\"KRW\",KYD:\"KYD\",LAK:\"LAK\",LKR:\"LKR\",MDL:\"MDL\",MGA:\"MGA\",MKD:\"MKD\",MNT:\"MNT\",MRO:\"MRO\",MUR:\"MUR\",MVR:\"MVR\",MXN:\"MXN\",MYR:\"MYR\",NAD:\"NAD\",NIO:\"NIO\",NOK:\"NOK\",NPR:\"NPR\",NZD:\"NZD\",PEN:\"PEN\",PGK:\"PGK\",PHP:\"PHP\",PLN:\"PLN\",PYG:\"PYG\",QAR:\"QAR\",RON:\"RON\",RSD:\"RSD\",RUB:\"RUB\",SAR:\"SAR\",SBD:\"SBD\",SCR:\"SCR\",SEK:\"SEK\",SGD:\"SGD\",SHP:\"SHP\",SLL:\"SLL\",SOS:\"SOS\",SRD:\"SRD\",SZL:\"SZL\",THB:\"THB\",TJS:\"TJS\",TOP:\"TOP\",TTD:\"TTD\",TWD:\"TWD\",TZS:\"TZS\",USD:\"USD\",UYU:\"UYU\",VND:\"VND\",VUV:\"VUV\",WST:\"WST\",XAF:\"XAF\",XCD:\"XCD\",YER:\"YER\"},_=\"/sdk/js\",F={NAMESPACE:\"data-namespace\",CLIENT_TOKEN:\"data-client-token\",MERCHANT_ID:\"data-merchant-id\",PARTNER_ATTRIBUTION_ID:\"data-partner-attribution-id\",STAGE_HOST:\"data-stage-host\",API_STAGE_HOST:\"data-api-stage-host\",CSP_NONCE:\"data-csp-nonce\",ENABLE_3DS:\"data-enable-3ds\",SDK_INTEGRATION_SOURCE:\"data-sdk-integration-source\",USER_ID_TOKEN:\"data-user-id-token\",AMOUNT:\"data-amount\",CLIENT_METADATA_ID:\"data-client-metadata-id\",PAGE_TYPE:\"data-page-type\",USER_EXPERIENCE_FLOW:\"data-user-experience-flow\",POPUPS_DISABLED:\"data-popups-disabled\",SDK_TOKEN:\"data-sdk-client-token\"},D={COMPONENTS:\"components\",ENV:\"env\",DEBUG:\"debug\",CACHEBUST:\"cachebust\",CLIENT_ID:\"client-id\",MERCHANT_ID:\"merchant-id\",LOCALE:\"locale\",CURRENCY:\"currency\",INTENT:\"intent\",COMMIT:\"commit\",VAULT:\"vault\",BUYER_COUNTRY:\"buyer-country\",ENABLE_FUNDING:\"enable-funding\",DISABLE_FUNDING:\"disable-funding\",DISABLE_CARD:\"disable-card\",INTEGRATION_DATE:\"integration-date\",STAGE_HOST:\"stage-host\",STAGE_ALIAS:\"stage-alias\",CDN_REGISTRY:\"cdn-registry\",VERSION:\"version\"},I={BUTTONS:\"buttons\",HOSTED_FIELDS:\"hosted-fields\",CARD_FIELDS:\"card-fields\"},H={TRUE:!0,FALSE:!1},o={TRUE:\"true\",FALSE:\"false\"},O=\"unknown\",i={HTTP:\"http\",HTTPS:\"https\"},C={HOME:\"home\",PRODUCT:\"product\",CART:\"cart\",CHECKOUT:\"checkout\",PRODUCT_LISTING:\"product-listing\",SEARCH_RESULTS:\"search-results\",PRODUCT_DETAILS:\"product-details\",MINI_CART:\"mini-cart\"},M=10,a={VAULTABLE:\"vaultable\"},u=R.US,L=r.USD,P=e.CAPTURE,Z=n.TRUE,d=n.TRUE,c=n.TRUE,U=A.FALSE,s=I.BUTTONS,B=H.FALSE,G={LOCAL:\"local\",STAGE:\"stage\",SANDBOX:\"sandbox\",PRODUCTION:\"production\",TEST:\"test\"},K={ANDROID:\"android\",IOS:\"iOS\"},p={VALIDATION_ERROR:\"validation_error\"},l={FEED:\"feed_name\",STATE:\"state_name\",EVENT_NAME:\"event_name\",TRANSITION:\"transition_name\",PAGE:\"page_name\",BUTTON_TYPE:\"button_type\",SESSION_UID:\"page_session_id\",BUTTON_SESSION_UID:\"button_session_id\",TOKEN:\"token\",CONTEXT_ID:\"context_id\",CONTEXT_TYPE:\"context_type\",REFERER:\"referer_url\",MERCHANT_DOMAIN:\"merchant_domain\",PAY_ID:\"pay_id\",SELLER_ID:\"seller_id\",CLIENT_ID:\"client_id\",DATA_SOURCE:\"serverside_data_source\",BUTTON_SOURCE:\"button_source\",ERROR_CODE:\"ext_error_code\",ERROR_DESC:\"ext_error_desc\",PAGE_LOAD_TIME:\"page_load_time\",EXPERIMENT_EXPERIENCE:\"experimentation_experience\",EXPERIMENT_TREATMENT:\"experimentation_treatment\",EXPERIMENT_NAME:\"pxp_exp_id\",TREATMENT_NAME:\"pxp_trtmnt_id\",TRANSITION_TIME:\"transition_time\",FUNDING_LIST:\"eligible_payment_methods\",FUNDING_COUNT:\"eligible_payment_count\",CHOSEN_FUNDING:\"selected_payment_method\",BUTTON_LAYOUT:\"button_layout\",VERSION:\"checkoutjs_version\",LOCALE:\"locale\",BUYER_COUNTRY:\"buyer_cntry\",INTEGRATION_IDENTIFIER:\"integration_identifier\",PARTNER_ATTRIBUTION_ID:\"bn_code\",PAGE_TYPE:\"pp_placement\",SDK_NAME:\"sdk_name\",SDK_VERSION:\"sdk_version\",SDK_ENVIRONMENT:\"sdk_environment\",MOBILE_APP_VERSION:\"mobile_app_version\",MOBILE_BUNDLE_IDENTIFIER:\"mapv\",USER_AGENT:\"user_agent\",USER_ACTION:\"user_action\",CONTEXT_CORRID:\"context_correlation_id\",SDK_CACHE:\"sdk_cache\",SDK_LOAD_TIME:\"sdk_load_time\",IS_VAULT:\"is_vault\",DISABLE_FUNDING:\"disable_funding\",DISABLE_CARD:\"disable_card\",RESPONSE_DURATION:\"response_duration\",SDK_INTEGRATION_SOURCE:\"sdk_integration_source\",PAYMENT_FLOW:\"payment_flow\",BUTTON_VERSION:\"button_version\",FI_LIST:\"fi_list\",FI_ID:\"fi_id\",PRODUCT:\"product\",CHOSEN_FI_TYPE:\"chosen_fi_type\",SELECTED_FI:\"merchant_selected_funding_source\",POTENTIAL_PAYMENT_METHODS:\"potential_payment_methods\",PAY_NOW:\"pay_now\",STICKINESS_ID:\"stickiness_id\",TIMESTAMP:\"t\",OPTION_SELECTED:\"optsel\",USER_IDENTITY_METHOD:\"user_identity_method\",FIELDS_COMPONENT_SESSION_ID:\"fields_component_session_id\",CPL_COMP_METRICS:\"cpl_comp_metrics\",CPL_CHUNK_METRICS:\"cpl_chunk_metrics\",CPL_QUERY_METRICS:\"cpl_query_metrics\"},f={COMMIT:\"commit\",CONTINUE:\"continue\"},Y={PAYMENTS_SDK:\"checkout\"},V={PAYMENTS_SDK:\"payments_sdk\"},m={PAYMENTS_SDK:\"payments_sdk\"},y={PAYPAL:\"paypal\",VENMO:\"venmo\",APPLEPAY:\"applepay\",ITAU:\"itau\",CREDIT:\"credit\",PAYLATER:\"paylater\",CARD:\"card\",IDEAL:\"ideal\",SEPA:\"sepa\",BANCONTACT:\"bancontact\",GIROPAY:\"giropay\",SOFORT:\"sofort\",EPS:\"eps\",MYBANK:\"mybank\",P24:\"p24\",PAYU:\"payu\",BLIK:\"blik\",TRUSTLY:\"trustly\",OXXO:\"oxxo\",BOLETO:\"boleto\",BOLETOBANCARIO:\"boletobancario\",WECHATPAY:\"wechatpay\",MERCADOPAGO:\"mercadopago\",MULTIBANCO:\"multibanco\",SATISPAY:\"satispay\",PAIDY:\"paidy\"},b={PAYPAL:\"PayPal\",CREDIT:\"PayPal Credit\"},W={VISA:\"visa\",MASTERCARD:\"mastercard\",AMEX:\"amex\",DISCOVER:\"discover\",HIPER:\"hiper\",ELO:\"elo\",JCB:\"jcb\",CUP:\"cup\"},J={BALANCE:\"balance\",CARD:\"card\",BANK:\"bank\",CREDIT:\"credit\"},h={PAY_IN_3:\"payIn3\",PAY_IN_4:\"payIn4\",PAYLATER:\"paylater\",CREDIT:\"credit\"},g={DESKTOP:\"desktop\",MOBILE:\"mobile\"},k=!0,v=[y.IDEAL,y.BANCONTACT,y.GIROPAY,y.SOFORT,y.EPS,y.MYBANK,y.P24,y.PAYU,y.BLIK,y.TRUSTLY,y.OXXO,y.BOLETO,y.BOLETOBANCARIO,y.WECHATPAY,y.MERCADOPAGO,y.MULTIBANCO,y.SATISPAY,y.PAIDY]}])}));\n//# sourceMappingURL=paypal-sdk-constants.js.map","require('../../modules/es.array.iterator');\nrequire('../../modules/es.map');\nrequire('../../modules/es.object.to-string');\nrequire('../../modules/es.string.iterator');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Map;\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","var call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","module.exports = typeof navigator != 'undefined' && String(navigator.userAgent) || '';\n","var call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw $TypeError(\"Can't convert object to primitive value\");\n};\n","var global = require('../internals/global');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar apply = FunctionPrototype.apply;\nvar call = FunctionPrototype.call;\n\n// eslint-disable-next-line es/no-reflect -- safe\nmodule.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {\n  return call.apply(apply, arguments);\n});\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next, ENUMERABLE_NEXT) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(+!ENUMERABLE_NEXT, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classof = require('../internals/classof');\n\n// `Object.prototype.toString` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nmodule.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {\n  return '[object ' + classof(this) + ']';\n};\n","/* eslint-disable no-proto -- safe */\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\n\nmodule.exports = function (object, key, method) {\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));\n  } catch (error) { /* empty */ }\n};\n","var isCallable = require('../internals/is-callable');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (typeof argument == 'object' || isCallable(argument)) return argument;\n  throw $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n","// TODO: Remove this module from `core-js@4` since it's replaced to module below\nrequire('../modules/es.map.constructor');\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Map` constructor\n// https://tc39.es/ecma262/#sec-map-objects\ncollection('Map', function (init) {\n  return function Map() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar fails = require('../internals/fails');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar iterate = require('../internals/iterate');\nvar anInstance = require('../internals/an-instance');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar defineProperty = require('../internals/object-define-property').f;\nvar forEach = require('../internals/array-iteration').forEach;\nvar DESCRIPTORS = require('../internals/descriptors');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\n\nmodule.exports = function (CONSTRUCTOR_NAME, wrapper, common) {\n  var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;\n  var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var NativeConstructor = global[CONSTRUCTOR_NAME];\n  var NativePrototype = NativeConstructor && NativeConstructor.prototype;\n  var exported = {};\n  var Constructor;\n\n  if (!DESCRIPTORS || !isCallable(NativeConstructor)\n    || !(IS_WEAK || NativePrototype.forEach && !fails(function () { new NativeConstructor().entries().next(); }))\n  ) {\n    // create collection constructor\n    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);\n    InternalMetadataModule.enable();\n  } else {\n    Constructor = wrapper(function (target, iterable) {\n      setInternalState(anInstance(target, Prototype), {\n        type: CONSTRUCTOR_NAME,\n        collection: new NativeConstructor()\n      });\n      if (iterable != undefined) iterate(iterable, target[ADDER], { that: target, AS_ENTRIES: IS_MAP });\n    });\n\n    var Prototype = Constructor.prototype;\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    forEach(['add', 'clear', 'delete', 'forEach', 'get', 'has', 'set', 'keys', 'values', 'entries'], function (KEY) {\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if (KEY in NativePrototype && !(IS_WEAK && KEY == 'clear')) {\n        createNonEnumerableProperty(Prototype, KEY, function (a, b) {\n          var collection = getInternalState(this).collection;\n          if (!IS_ADDER && IS_WEAK && !isObject(a)) return KEY == 'get' ? undefined : false;\n          var result = collection[KEY](a === 0 ? 0 : a, b);\n          return IS_ADDER ? this : result;\n        });\n      }\n    });\n\n    IS_WEAK || defineProperty(Prototype, 'size', {\n      configurable: true,\n      get: function () {\n        return getInternalState(this).collection.size;\n      }\n    });\n  }\n\n  setToStringTag(Constructor, CONSTRUCTOR_NAME, false, true);\n\n  exported[CONSTRUCTOR_NAME] = Constructor;\n  $({ global: true, forced: true }, exported);\n\n  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);\n\n  return Constructor;\n};\n","/* eslint-disable es/no-object-getownpropertynames -- safe */\nvar classof = require('../internals/classof-raw');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar arraySlice = require('../internals/array-slice-simple');\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return $getOwnPropertyNames(it);\n  } catch (error) {\n    return arraySlice(windowNames);\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && classof(it) == 'Window'\n    ? getWindowNames(it)\n    : $getOwnPropertyNames(toIndexedObject(it));\n};\n","var toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\n\nvar $Array = Array;\nvar max = Math.max;\n\nmodule.exports = function (O, start, end) {\n  var length = lengthOfArrayLike(O);\n  var k = toAbsoluteIndex(start, length);\n  var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n  var result = $Array(max(fin - k, 0));\n  for (var n = 0; k < fin; k++, n++) createProperty(result, n, O[k]);\n  result.length = n;\n  return result;\n};\n","var fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar ARRAY_BUFFER_NON_EXTENSIBLE = require('../internals/array-buffer-non-extensible');\n\n// eslint-disable-next-line es/no-object-isextensible -- safe\nvar $isExtensible = Object.isExtensible;\nvar FAILS_ON_PRIMITIVES = fails(function () { $isExtensible(1); });\n\n// `Object.isExtensible` method\n// https://tc39.es/ecma262/#sec-object.isextensible\nmodule.exports = (FAILS_ON_PRIMITIVES || ARRAY_BUFFER_NON_EXTENSIBLE) ? function isExtensible(it) {\n  if (!isObject(it)) return false;\n  if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) == 'ArrayBuffer') return false;\n  return $isExtensible ? $isExtensible(it) : true;\n} : $isExtensible;\n","// FF26- bug: ArrayBuffers are non-extensible, but Object.isExtensible does not report it\nvar fails = require('../internals/fails');\n\nmodule.exports = fails(function () {\n  if (typeof ArrayBuffer == 'function') {\n    var buffer = new ArrayBuffer(8);\n    // eslint-disable-next-line es/no-object-isextensible, es/no-object-defineproperty -- safe\n    if (Object.isExtensible(buffer)) Object.defineProperty(buffer, 'a', { value: 8 });\n  }\n});\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-isextensible, es/no-object-preventextensions -- required for testing\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","var isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar $Array = Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? $Array : C;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","'use strict';\nvar create = require('../internals/object-create');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar defineBuiltIns = require('../internals/define-built-ins');\nvar bind = require('../internals/function-bind-context');\nvar anInstance = require('../internals/an-instance');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar iterate = require('../internals/iterate');\nvar defineIterator = require('../internals/iterator-define');\nvar createIterResultObject = require('../internals/create-iter-result-object');\nvar setSpecies = require('../internals/set-species');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fastKey = require('../internals/internal-metadata').fastKey;\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var Constructor = wrapper(function (that, iterable) {\n      anInstance(that, Prototype);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        index: create(null),\n        first: undefined,\n        last: undefined,\n        size: 0\n      });\n      if (!DESCRIPTORS) that.size = 0;\n      if (!isNullOrUndefined(iterable)) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var Prototype = Constructor.prototype;\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var entry = getEntry(that, key);\n      var previous, index;\n      // change existing entry\n      if (entry) {\n        entry.value = value;\n      // create new entry\n      } else {\n        state.last = entry = {\n          index: index = fastKey(key, true),\n          key: key,\n          value: value,\n          previous: previous = state.last,\n          next: undefined,\n          removed: false\n        };\n        if (!state.first) state.first = entry;\n        if (previous) previous.next = entry;\n        if (DESCRIPTORS) state.size++;\n        else that.size++;\n        // add to index\n        if (index !== 'F') state.index[index] = entry;\n      } return that;\n    };\n\n    var getEntry = function (that, key) {\n      var state = getInternalState(that);\n      // fast case\n      var index = fastKey(key);\n      var entry;\n      if (index !== 'F') return state.index[index];\n      // frozen object case\n      for (entry = state.first; entry; entry = entry.next) {\n        if (entry.key == key) return entry;\n      }\n    };\n\n    defineBuiltIns(Prototype, {\n      // `{ Map, Set }.prototype.clear()` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.clear\n      // https://tc39.es/ecma262/#sec-set.prototype.clear\n      clear: function clear() {\n        var that = this;\n        var state = getInternalState(that);\n        var data = state.index;\n        var entry = state.first;\n        while (entry) {\n          entry.removed = true;\n          if (entry.previous) entry.previous = entry.previous.next = undefined;\n          delete data[entry.index];\n          entry = entry.next;\n        }\n        state.first = state.last = undefined;\n        if (DESCRIPTORS) state.size = 0;\n        else that.size = 0;\n      },\n      // `{ Map, Set }.prototype.delete(key)` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.delete\n      // https://tc39.es/ecma262/#sec-set.prototype.delete\n      'delete': function (key) {\n        var that = this;\n        var state = getInternalState(that);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.next;\n          var prev = entry.previous;\n          delete state.index[entry.index];\n          entry.removed = true;\n          if (prev) prev.next = next;\n          if (next) next.previous = prev;\n          if (state.first == entry) state.first = next;\n          if (state.last == entry) state.last = prev;\n          if (DESCRIPTORS) state.size--;\n          else that.size--;\n        } return !!entry;\n      },\n      // `{ Map, Set }.prototype.forEach(callbackfn, thisArg = undefined)` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.foreach\n      // https://tc39.es/ecma262/#sec-set.prototype.foreach\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        var state = getInternalState(this);\n        var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n        var entry;\n        while (entry = entry ? entry.next : state.first) {\n          boundFunction(entry.value, entry.key, this);\n          // revert to the last existing entry\n          while (entry && entry.removed) entry = entry.previous;\n        }\n      },\n      // `{ Map, Set}.prototype.has(key)` methods\n      // https://tc39.es/ecma262/#sec-map.prototype.has\n      // https://tc39.es/ecma262/#sec-set.prototype.has\n      has: function has(key) {\n        return !!getEntry(this, key);\n      }\n    });\n\n    defineBuiltIns(Prototype, IS_MAP ? {\n      // `Map.prototype.get(key)` method\n      // https://tc39.es/ecma262/#sec-map.prototype.get\n      get: function get(key) {\n        var entry = getEntry(this, key);\n        return entry && entry.value;\n      },\n      // `Map.prototype.set(key, value)` method\n      // https://tc39.es/ecma262/#sec-map.prototype.set\n      set: function set(key, value) {\n        return define(this, key === 0 ? 0 : key, value);\n      }\n    } : {\n      // `Set.prototype.add(value)` method\n      // https://tc39.es/ecma262/#sec-set.prototype.add\n      add: function add(value) {\n        return define(this, value = value === 0 ? 0 : value, value);\n      }\n    });\n    if (DESCRIPTORS) defineBuiltInAccessor(Prototype, 'size', {\n      configurable: true,\n      get: function () {\n        return getInternalState(this).size;\n      }\n    });\n    return Constructor;\n  },\n  setStrong: function (Constructor, CONSTRUCTOR_NAME, IS_MAP) {\n    var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';\n    var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);\n    var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);\n    // `{ Map, Set }.prototype.{ keys, values, entries, @@iterator }()` methods\n    // https://tc39.es/ecma262/#sec-map.prototype.entries\n    // https://tc39.es/ecma262/#sec-map.prototype.keys\n    // https://tc39.es/ecma262/#sec-map.prototype.values\n    // https://tc39.es/ecma262/#sec-map.prototype-@@iterator\n    // https://tc39.es/ecma262/#sec-set.prototype.entries\n    // https://tc39.es/ecma262/#sec-set.prototype.keys\n    // https://tc39.es/ecma262/#sec-set.prototype.values\n    // https://tc39.es/ecma262/#sec-set.prototype-@@iterator\n    defineIterator(Constructor, CONSTRUCTOR_NAME, function (iterated, kind) {\n      setInternalState(this, {\n        type: ITERATOR_NAME,\n        target: iterated,\n        state: getInternalCollectionState(iterated),\n        kind: kind,\n        last: undefined\n      });\n    }, function () {\n      var state = getInternalIteratorState(this);\n      var kind = state.kind;\n      var entry = state.last;\n      // revert to the last existing entry\n      while (entry && entry.removed) entry = entry.previous;\n      // get next entry\n      if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {\n        // or finish the iteration\n        state.target = undefined;\n        return createIterResultObject(undefined, true);\n      }\n      // return step by kind\n      if (kind == 'keys') return createIterResultObject(entry.key, false);\n      if (kind == 'values') return createIterResultObject(entry.value, false);\n      return createIterResultObject([entry.key, entry.value], false);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // `{ Map, Set }.prototype[@@species]` accessors\n    // https://tc39.es/ecma262/#sec-get-map-@@species\n    // https://tc39.es/ecma262/#sec-get-set-@@species\n    setSpecies(CONSTRUCTOR_NAME);\n  }\n};\n","var defineBuiltIn = require('../internals/define-built-in');\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) {\n    if (options && options.unsafe && target[key]) target[key] = src[key];\n    else defineBuiltIn(target, key, src[key], options);\n  } return target;\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineBuiltInAccessor(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar stringSlice = uncurryThis(''.slice);\n\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = toString(requireObjectCoercible($this));\n    var position = toIntegerOrInfinity(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = charCodeAt(S, position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = charCodeAt(S, position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING\n          ? charAt(S, position)\n          : first\n        : CONVERT_TO_STRING\n          ? stringSlice(S, position, position + 2)\n          : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.es/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","require('../modules/es.array.iterator');\nvar DOMIterables = require('../internals/dom-iterables');\nvar global = require('../internals/global');\nvar classof = require('../internals/classof');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  if (CollectionPrototype && classof(CollectionPrototype) !== TO_STRING_TAG) {\n    createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n  }\n  Iterators[COLLECTION_NAME] = Iterators.Array;\n}\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","require('../../modules/es.object.assign');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Object.assign;\n","var $ = require('../internals/export');\nvar assign = require('../internals/object-assign');\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\n// eslint-disable-next-line es/no-object-assign -- required for testing\n$({ target: 'Object', stat: true, arity: 2, forced: Object.assign !== assign }, {\n  assign: assign\n});\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar call = require('../internals/function-call');\nvar fails = require('../internals/fails');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\n\n// eslint-disable-next-line es/no-object-assign -- safe\nvar $assign = Object.assign;\n// eslint-disable-next-line es/no-object-defineproperty -- required for testing\nvar defineProperty = Object.defineProperty;\nvar concat = uncurryThis([].concat);\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\nmodule.exports = !$assign || fails(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line es/no-symbol -- safe\n  var symbol = Symbol();\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return $assign({}, A)[symbol] != 7 || objectKeys($assign({}, B)).join('') != alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`\n  var T = toObject(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? concat(objectKeys(S), getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || call(propertyIsEnumerable, S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","require('../../modules/es.array.find');\nvar entryUnbind = require('../../internals/entry-unbind');\n\nmodule.exports = entryUnbind('Array', 'find');\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\n// eslint-disable-next-line es/no-array-prototype-find -- testing\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","require('../../modules/es.array.includes');\nvar entryUnbind = require('../../internals/entry-unbind');\n\nmodule.exports = entryUnbind('Array', 'includes');\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar fails = require('../internals/fails');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// FF99+ bug\nvar BROKEN_ON_SPARSE = fails(function () {\n  // eslint-disable-next-line es/no-array-prototype-includes -- detection\n  return !Array(1).includes();\n});\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: BROKEN_ON_SPARSE }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","require('../../modules/es.string.includes');\nvar entryUnbind = require('../../internals/entry-unbind');\n\nmodule.exports = entryUnbind('String', 'includes');\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\nvar stringIndexOf = uncurryThis(''.indexOf);\n\n// `String.prototype.includes` method\n// https://tc39.es/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~stringIndexOf(\n      toString(requireObjectCoercible(this)),\n      toString(notARegExp(searchString)),\n      arguments.length > 1 ? arguments[1] : undefined\n    );\n  }\n});\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.es/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","require('../../modules/es.object.entries');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Object.entries;\n","var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar objectGetPrototypeOf = require('../internals/object-get-prototype-of');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\nvar propertyIsEnumerable = uncurryThis($propertyIsEnumerable);\nvar push = uncurryThis([].push);\n\n// in some IE versions, `propertyIsEnumerable` returns incorrect result on integer keys\n// of `null` prototype objects\nvar IE_BUG = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-create -- safe\n  var O = Object.create(null);\n  O[2] = 2;\n  return !propertyIsEnumerable(O, 2);\n});\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var IE_WORKAROUND = IE_BUG && objectGetPrototypeOf(O) === null;\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || (IE_WORKAROUND ? key in O : propertyIsEnumerable(O, key))) {\n        push(result, TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.es/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.es/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","require('../../modules/es.object.keys');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Object.keys;\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","require('../../modules/es.number.is-nan');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Number.isNaN;\n","var $ = require('../internals/export');\n\n// `Number.isNaN` method\n// https://tc39.es/ecma262/#sec-number.isnan\n$({ target: 'Number', stat: true }, {\n  isNaN: function isNaN(number) {\n    // eslint-disable-next-line no-self-compare -- NaN check\n    return number != number;\n  }\n});\n","require('../../modules/es.string.starts-with');\nvar entryUnbind = require('../../internals/entry-unbind');\n\nmodule.exports = entryUnbind('String', 'startsWith');\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\n// eslint-disable-next-line es/no-string-prototype-startswith -- safe\nvar nativeStartsWith = uncurryThis(''.startsWith);\nvar stringSlice = uncurryThis(''.slice);\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.startsWith` method\n// https://tc39.es/ecma262/#sec-string.prototype.startswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = toString(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = toString(searchString);\n    return nativeStartsWith\n      ? nativeStartsWith(that, search, index)\n      : stringSlice(that, index, index + search.length) === search;\n  }\n});\n","require('../../modules/es.string.iterator');\nrequire('../../modules/es.array.from');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Array.from;\n","var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  // eslint-disable-next-line es/no-array-from -- required for testing\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.es/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar isConstructor = require('../internals/is-constructor');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar $Array = Array;\n\n// `Array.from` method implementation\n// https://tc39.es/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var IS_CONSTRUCTOR = isConstructor(this);\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined);\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod && !(this === $Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = getIterator(O, iteratorMethod);\n    next = iterator.next;\n    result = IS_CONSTRUCTOR ? new this() : [];\n    for (;!(step = call(next, iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = lengthOfArrayLike(O);\n    result = IS_CONSTRUCTOR ? new this(length) : $Array(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n","var anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator, 'throw', error);\n  }\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line es/no-array-from, no-throw-literal -- required for testing\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n","require('../../modules/es.array.flat-map');\nrequire('../../modules/es.array.unscopables.flat-map');\nvar entryUnbind = require('../../internals/entry-unbind');\n\nmodule.exports = entryUnbind('Array', 'flatMap');\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flatMap` method\n// https://tc39.es/ecma262/#sec-array.prototype.flatmap\n$({ target: 'Array', proto: true }, {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen = lengthOfArrayLike(O);\n    var A;\n    aCallable(callbackfn);\n    A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return A;\n  }\n});\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg) : false;\n  var element, elementLen;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        elementLen = lengthOfArrayLike(element);\n        targetIndex = flattenIntoArray(target, original, element, elementLen, targetIndex, depth - 1) - 1;\n      } else {\n        doesNotExceedSafeInteger(targetIndex + 1);\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","var $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flatMap');\n","/* @flow */\n\nexport function isPromise(item : mixed) : boolean {\n    try {\n        if (!item) {\n            return false;\n        }\n\n        if (typeof Promise !== 'undefined' && item instanceof Promise) {\n            return true;\n        }\n\n        if (typeof window !== 'undefined' && typeof window.Window === 'function' && item instanceof window.Window) {\n            return false;\n        }\n\n        if (typeof window !== 'undefined' && typeof window.constructor === 'function' && item instanceof window.constructor) {\n            return false;\n        }\n\n        const toString = ({}).toString;\n\n        if (toString) {\n            const name = toString.call(item);\n\n            if (name === '[object Window]' || name === '[object global]' || name === '[object DOMWindow]') {\n                return false;\n            }\n        }\n\n        if (typeof item.then === 'function') {\n            return true;\n        }\n    } catch (err) {\n        return false;\n    }\n\n    return false;\n}\n","/* @flow */\n\nimport type { ZalgoPromise } from './promise';\n\nconst dispatchedErrors = [];\nconst possiblyUnhandledPromiseHandlers : Array<(mixed, promise? : ZalgoPromise<mixed>) => void> = [];\n\nexport function dispatchPossiblyUnhandledError<T>(err : mixed, promise : ZalgoPromise<T>) {\n\n    if (dispatchedErrors.indexOf(err) !== -1) {\n        return;\n    }\n\n    dispatchedErrors.push(err);\n\n    setTimeout(() => {\n        if (__DEBUG__) {\n            // $FlowFixMe\n            throw new Error(`${ err.stack || err.toString() }\\n\\nFrom promise:\\n\\n${ promise.stack }`);\n        }\n\n        throw err;\n    }, 1);\n\n    for (let j = 0; j < possiblyUnhandledPromiseHandlers.length; j++) {\n        // $FlowFixMe\n        possiblyUnhandledPromiseHandlers[j](err, promise);\n    }\n}\n\nexport function onPossiblyUnhandledException(handler : (mixed, promise? : ZalgoPromise<mixed>) => void) : {| cancel : () => void |} {\n    possiblyUnhandledPromiseHandlers.push(handler);\n\n    return {\n        cancel() {\n            possiblyUnhandledPromiseHandlers.splice(possiblyUnhandledPromiseHandlers.indexOf(handler), 1);\n        }\n    };\n}\n","/* @flow */\n\nimport type { ZalgoPromise } from './promise';\n\nlet activeCount = 0;\nlet flushPromise;\n\nfunction flushActive() {\n    if (!activeCount && flushPromise) {\n        const promise = flushPromise;\n        flushPromise = null;\n        promise.resolve();\n    }\n}\n\nexport function startActive() {\n    activeCount += 1;\n}\n\nexport function endActive() {\n    activeCount -= 1;\n    flushActive();\n}\n\nexport function awaitActive(Zalgo : Class<ZalgoPromise<*>>) : ZalgoPromise<void> { // eslint-disable-line no-undef\n    const promise = flushPromise = flushPromise || new Zalgo();\n    flushActive();\n    return promise;\n}\n","/* @flow */\n/* eslint no-use-before-define: off */\n\nimport { isPromise } from './utils';\nimport { onPossiblyUnhandledException, dispatchPossiblyUnhandledError } from './exceptions';\nimport { startActive, endActive, awaitActive } from './flush';\n\nexport class ZalgoPromise<R : mixed> {\n\n    resolved : boolean;\n    rejected : boolean;\n    errorHandled : boolean;\n    value : R;\n    error : mixed;\n    // eslint-disable-next-line flowtype/no-mutable-array\n    handlers : Array<{|\n        promise : ZalgoPromise<*>,\n        onSuccess : void | (result : R) => mixed,\n        onError : void | (error : mixed) => mixed\n    |}>;\n    dispatching : boolean;\n    stack : string;\n\n    constructor(handler : ?(resolve : (result : R) => void, reject : (error : mixed) => void) => void) {\n\n        this.resolved = false;\n        this.rejected = false;\n        this.errorHandled = false;\n\n        this.handlers = [];\n\n        if (handler) {\n\n            let result;\n            let error;\n            let resolved = false;\n            let rejected = false;\n            let isAsync = false;\n\n            startActive();\n\n            try {\n                handler(res => {\n                    if (isAsync) {\n                        this.resolve(res);\n                    } else {\n                        resolved = true;\n                        result = res;\n                    }\n\n                }, err => {\n                    if (isAsync) {\n                        this.reject(err);\n                    } else {\n                        rejected = true;\n                        error = err;\n                    }\n                });\n\n            } catch (err) {\n                endActive();\n                this.reject(err);\n                return;\n            }\n\n            endActive();\n\n            isAsync = true;\n\n            if (resolved) {\n                // $FlowFixMe\n                this.resolve(result);\n            } else if (rejected) {\n                this.reject(error);\n            }\n        }\n\n        if (__DEBUG__) {\n            try {\n                throw new Error(`ZalgoPromise`);\n            } catch (err) {\n                this.stack = err.stack;\n            }\n        }\n    }\n\n    resolve(result : R) : ZalgoPromise<R> {\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        if (isPromise(result)) {\n            throw new Error('Can not resolve promise with another promise');\n        }\n\n        this.resolved = true;\n        this.value = result;\n        this.dispatch();\n\n        return this;\n    }\n\n    reject(error : mixed) : ZalgoPromise<R> {\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        if (isPromise(error)) {\n            throw new Error('Can not reject promise with another promise');\n        }\n\n        if (!error) {\n            // $FlowFixMe\n            const err = (error && typeof error.toString === 'function' ? error.toString() : Object.prototype.toString.call(error));\n            error = new Error(`Expected reject to be called with Error, got ${ err }`);\n        }\n\n        this.rejected = true;\n        this.error = error;\n\n        if (!this.errorHandled) {\n            setTimeout(() => {\n                if (!this.errorHandled) {\n                    dispatchPossiblyUnhandledError(error, this);\n                }\n            }, 1);\n        }\n\n        this.dispatch();\n\n        return this;\n    }\n\n    asyncReject(error : mixed) : ZalgoPromise<R> {\n        this.errorHandled = true;\n        this.reject(error);\n        return this;\n    }\n\n    dispatch() {\n\n        const { dispatching, resolved, rejected, handlers } = this;\n\n        if (dispatching) {\n            return;\n        }\n\n        if (!resolved && !rejected) {\n            return;\n        }\n\n        this.dispatching = true;\n        startActive();\n\n        const chain = <T>(firstPromise : ZalgoPromise<T>, secondPromise : ZalgoPromise<T>) => {\n            return firstPromise.then(res => {\n                secondPromise.resolve(res);\n            }, err => {\n                secondPromise.reject(err);\n            });\n        };\n\n        for (let i = 0; i < handlers.length; i++) {\n\n            const { onSuccess, onError, promise } = handlers[i];\n\n            let result;\n\n            if (resolved) {\n\n                try {\n                    result = onSuccess ? onSuccess(this.value) : this.value;\n                } catch (err) {\n                    promise.reject(err);\n                    continue;\n                }\n\n            } else if (rejected) {\n\n                if (!onError) {\n                    promise.reject(this.error);\n                    continue;\n                }\n\n                try {\n                    result = onError(this.error);\n                } catch (err) {\n                    promise.reject(err);\n                    continue;\n                }\n            }\n\n            if (result instanceof ZalgoPromise && (result.resolved || result.rejected)) {\n                const promiseResult : ZalgoPromise<*> = result;\n\n                if (promiseResult.resolved) {\n                    promise.resolve(promiseResult.value);\n                } else {\n                    promise.reject(promiseResult.error);\n                }\n\n                promiseResult.errorHandled = true;\n\n            } else if (isPromise(result)) {\n\n                if (result instanceof ZalgoPromise && (result.resolved || result.rejected)) {\n                    if (result.resolved) {\n                        promise.resolve(result.value);\n                    } else {\n                        promise.reject(result.error);\n                    }\n\n                } else {\n                    // $FlowFixMe\n                    chain(result, promise);\n                }\n\n            } else {\n\n                promise.resolve(result);\n            }\n        }\n\n        handlers.length = 0;\n        this.dispatching = false;\n        endActive();\n    }\n\n    then<X, Y>(onSuccess : void | (result : R) => (ZalgoPromise<X> | Y), onError : void | (error : mixed) => (ZalgoPromise<X> | Y)) : ZalgoPromise<X | Y> {\n\n        if (onSuccess && typeof onSuccess !== 'function' && !onSuccess.call) {\n            throw new Error('Promise.then expected a function for success handler');\n        }\n\n        if (onError && typeof onError !== 'function' && !onError.call) {\n            throw new Error('Promise.then expected a function for error handler');\n        }\n\n        const promise = new ZalgoPromise();\n\n        this.handlers.push({\n            promise,\n            onSuccess,\n            onError\n        });\n\n        this.errorHandled = true;\n\n        this.dispatch();\n\n        return promise;\n    }\n\n    catch<X, Y>(onError : (error : mixed) => ZalgoPromise<X> | Y) : ZalgoPromise<X | Y> {\n        // $FlowFixMe incompatible-call\n        const resultPromise : ZalgoPromise<X | Y> = this.then(undefined, onError);\n        return resultPromise;\n    }\n\n    finally(onFinally : () => mixed) : ZalgoPromise<R> {\n\n        if (onFinally && typeof onFinally !== 'function' && !onFinally.call) {\n            throw new Error('Promise.finally expected a function');\n        }\n\n        return this.then((result) => {\n            return ZalgoPromise.try(onFinally)\n                .then(() => {\n                    return result;\n                });\n        }, (err) => {\n            return ZalgoPromise.try(onFinally)\n                .then(() => {\n                    throw err;\n                });\n        });\n    }\n\n    timeout(time : number, err : ?Error) : ZalgoPromise<R> {\n\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        const timeout = setTimeout(() => {\n\n            if (this.resolved || this.rejected) {\n                return;\n            }\n\n            this.reject(err || new Error(`Promise timed out after ${ time }ms`));\n\n        }, time);\n\n        return this.then(result => {\n            clearTimeout(timeout);\n            return result;\n        });\n    }\n\n    // $FlowFixMe\n    toPromise() : Promise<R> {\n        // $FlowFixMe\n        if (typeof Promise === 'undefined') {\n            throw new TypeError(`Could not find Promise`);\n        }\n        // $FlowFixMe\n        return Promise.resolve(this); // eslint-disable-line compat/compat\n    }\n\n    lazy() : ZalgoPromise<R> {\n        this.errorHandled = true;\n        return this;\n    }\n\n    static resolve<X, Y>(value : ZalgoPromise<X> | Y) : ZalgoPromise<X | Y> {\n\n        if (value instanceof ZalgoPromise) {\n            // $FlowFixMe incompatible-type-arg\n            const result : ZalgoPromise<X | Y> = value;\n            return result;\n        }\n\n        if (isPromise(value)) {\n            // $FlowFixMe\n            return new ZalgoPromise((resolve, reject) => value.then(resolve, reject));\n        }\n\n        return new ZalgoPromise().resolve(value);\n    }\n\n    static reject(error : mixed) : ZalgoPromise<R> {\n        return new ZalgoPromise().reject(error);\n    }\n\n    static asyncReject(error : mixed) : ZalgoPromise<R> {\n        return new ZalgoPromise().asyncReject(error);\n    }\n\n    static all<X : $ReadOnlyArray<mixed>>(promises : X) : ZalgoPromise<$TupleMap<X, <Y>(ZalgoPromise<Y> | Y) => Y>> { // eslint-disable-line no-undef\n\n        const promise = new ZalgoPromise();\n        let count = promises.length;\n        // eslint-disable-next-line no-undef, unicorn/prefer-spread\n        const results = ([] : $TupleMap<X, <Y>(ZalgoPromise<Y> | Y) => Y>).slice();\n\n        if (!count) {\n            promise.resolve(results);\n            return promise;\n        }\n\n        const chain = <T>(i : number, firstPromise : ZalgoPromise<T>, secondPromise : ZalgoPromise<T>) => {\n            return firstPromise.then(res => {\n                results[i] = res;\n                count -= 1;\n                if (count === 0) {\n                    promise.resolve(results);\n                }\n            }, err => {\n                secondPromise.reject(err);\n            });\n        };\n\n        for (let i = 0; i < promises.length; i++) {\n            const prom = promises[i];\n\n            if (prom instanceof ZalgoPromise) {\n                if (prom.resolved) {\n                    results[i] = prom.value;\n                    count -= 1;\n                    continue;\n                }\n            } else if (!isPromise(prom)) {\n                results[i] = prom;\n                count -= 1;\n                continue;\n            }\n\n            chain(i, ZalgoPromise.resolve(prom), promise);\n        }\n\n        if (count === 0) {\n            promise.resolve(results);\n        }\n\n        return promise;\n    }\n\n    static hash<O : Object>(promises : O) : ZalgoPromise<$ObjMap<O, <Y>(ZalgoPromise<Y> | Y) => Y>> { // eslint-disable-line no-undef\n        const result = {};\n        const awaitPromises = [];\n\n        for (const key in promises) {\n            if (promises.hasOwnProperty(key)) {\n                const value = promises[key];\n\n                if (isPromise(value)) {\n                    awaitPromises.push(value.then(res => {\n                        result[key] = res;\n                    }));\n                } else {\n                    result[key] = value;\n                }\n            }\n        }\n\n        return ZalgoPromise.all(awaitPromises).then(() => result);\n    }\n\n    static map<T, X>(items : $ReadOnlyArray<T>, method : (T) => (ZalgoPromise<X> | X)) : ZalgoPromise<$ReadOnlyArray<X>> {\n        // $FlowFixMe\n        return ZalgoPromise.all(items.map(method));\n    }\n\n    static onPossiblyUnhandledException(handler : (err : mixed) => void) : {| cancel : () => void |} {\n        return onPossiblyUnhandledException(handler);\n    }\n\n    static try<X, Y, C : mixed, A : $ReadOnlyArray<mixed>>(method : (...args : $ReadOnlyArray<mixed>) => (ZalgoPromise<X> | Y), context? : C, args? : A) : ZalgoPromise<X | Y> {\n\n        if (method && typeof method !== 'function' && !method.call) {\n            throw new Error('Promise.try expected a function');\n        }\n\n        let result : ZalgoPromise<X> | Y;\n\n        startActive();\n\n        try {\n            result = method.apply(context, args || []);\n        } catch (err) {\n            endActive();\n            return ZalgoPromise.reject(err);\n        }\n\n        endActive();\n\n        // $FlowFixMe incompatible-call\n        const resultPromise = ZalgoPromise.resolve(result);\n\n        return resultPromise;\n    }\n\n    static delay(delay : number) : ZalgoPromise<void> {\n        return new ZalgoPromise(resolve => {\n            setTimeout(resolve, delay);\n        });\n    }\n\n    static isPromise(value : mixed) : boolean {\n\n        if (value && value instanceof ZalgoPromise) {\n            return true;\n        }\n\n        return isPromise(value);\n    }\n\n    static flush() : ZalgoPromise<void> {\n        return awaitActive(ZalgoPromise);\n    }\n}\n","/**\n * Memoize a function based on all arguments\n * @param {Function} fn Function to memoize\n * @returns {Function} Memoized function\n */\nexport function memoize(fn) {\n    const cache = new Map();\n\n    return (...args) => {\n        const cacheKey = JSON.stringify(args);\n\n        if (!cache.has(cacheKey)) {\n            cache.set(cacheKey, fn(...args));\n        }\n\n        return cache.get(cacheKey);\n    };\n}\n\n/**\n * Memoize a unary function that takes has a single object parameter\n * @param {Function} fn Function to memoize\n * @param {Array<string>} props Property names to cache against\n * @returns {Function} Memoized function\n */\nexport function memoizeOnProps(fn, props) {\n    const cache = new Map();\n\n    return (options, ignoreCache = false) => {\n        const cacheKey = JSON.stringify(props.map(key => options[key]));\n\n        if (!cache.has(cacheKey) || ignoreCache) {\n            cache.set(cacheKey, fn(options));\n        }\n\n        return cache.get(cacheKey);\n    };\n}\n\n/**\n * Partially apply a function with specified parameters\n * @param {Function} fn Function to partially apply\n * @param  {...any} intialArgs Arguments to partially apply\n * @returns {Function} Partially applied function\n */\nexport function partial(fn, ...intialArgs) {\n    return (...nextArgs) => fn(...intialArgs, ...nextArgs);\n}\n\n/**\n * Curry a function\n * @param {Function} fn Function to curry\n * @param {Number} arity Number of function parameters\n * @returns {Function} Curried function\n */\nexport function curry(fn, arity = fn.length) {\n    return function curried(...args) {\n        if (args.length < arity) {\n            return (...nextArgs) => curried(...args, ...nextArgs);\n        }\n\n        return fn(...args);\n    };\n}\n\n/**\n * Higher order function to run an effectful function\n * and still pass along the arguments for chaining\n * @param {Function} fn Effectful function\n * @returns {Function} Pass through function\n */\nexport function passThrough(fn) {\n    return arg => {\n        const result = fn(arg);\n        return typeof result === 'object' && result.then ? result.then(() => arg) : arg;\n    };\n}\n\n/**\n * Chain function calls together, starting with an initial value\n * @param  {...Function} args Functions\n * @returns {Function} Function that runs initial value through all passed in functions\n */\nexport function pipe(...args) {\n    return initialValue => args.reduce((accumulator, fn) => fn(accumulator), initialValue);\n}\n\n/**\n * Retrieve a single property from an object\n * @param {String} prop Property to retrieve\n * @param {Object} obj Object to get get property from\n * @returns {Any} Object property value\n */\nexport const pluck = curry((prop, obj) => obj[prop]);\n\n/**\n * Create an object and assign the value to the property\n * @param {String} prop Property name\n * @param {Any} value Property value\n * @returns {Object} New object with property and value\n */\nexport const assignToProp = curry((prop, value) => ({ [prop]: value }));\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","/* @flow */\n\nexport function isRegex(item: mixed): boolean {\n  // $FlowFixMe method-unbinding\n  return Object.prototype.toString.call(item) === \"[object RegExp]\";\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function noop(...args: $ReadOnlyArray<mixed>) {\n  // pass\n}\n","/* @flow */\n\nexport const PROTOCOL = {\n  MOCK: (\"mock:\": \"mock:\"),\n  FILE: (\"file:\": \"file:\"),\n  ABOUT: (\"about:\": \"about:\"),\n};\n\nexport const WILDCARD = \"*\";\n\nexport const WINDOW_TYPE = {\n  IFRAME: (\"iframe\": \"iframe\"),\n  POPUP: (\"popup\": \"popup\"),\n};\n","/* @flow */\n/* eslint max-lines: 0 */\n\nimport { isRegex, noop } from \"./util\";\nimport type {\n  CrossDomainWindowType,\n  SameDomainWindowType,\n  DomainMatcher,\n} from \"./types\";\nimport { PROTOCOL, WILDCARD } from \"./constants\";\n\nconst IE_WIN_ACCESS_ERROR = \"Call was rejected by callee.\\r\\n\";\n\nexport function getActualProtocol(win: SameDomainWindowType = window): ?string {\n  return win.location.protocol;\n}\n\nexport function getProtocol(win: SameDomainWindowType = window): ?string {\n  if (win.mockDomain) {\n    const protocol = win.mockDomain.split(\"//\")[0];\n\n    if (protocol) {\n      return protocol;\n    }\n  }\n\n  return getActualProtocol(win);\n}\n\nexport function isFileProtocol(win: SameDomainWindowType = window): boolean {\n  return getProtocol(win) === PROTOCOL.FILE;\n}\n\nexport function isAboutProtocol(win: SameDomainWindowType = window): boolean {\n  return getProtocol(win) === PROTOCOL.ABOUT;\n}\n\nexport function isMockProtocol(win: SameDomainWindowType = window): boolean {\n  return getProtocol(win) === PROTOCOL.MOCK;\n}\n\nexport function getParent(\n  win?: CrossDomainWindowType = window\n): ?CrossDomainWindowType {\n  if (!win) {\n    return;\n  }\n\n  try {\n    if (win.parent && win.parent !== win) {\n      return win.parent;\n    }\n  } catch (err) {\n    // pass\n  }\n}\n\nexport function getOpener(\n  win?: CrossDomainWindowType = window\n): ?CrossDomainWindowType {\n  if (!win) {\n    return;\n  }\n\n  // Make sure we're not actually an iframe which has had window.open() called on us\n  if (getParent(win)) {\n    return;\n  }\n\n  try {\n    return win.opener;\n  } catch (err) {\n    // pass\n  }\n}\n\nexport function canReadFromWindow(\n  win: CrossDomainWindowType | SameDomainWindowType\n): boolean {\n  try {\n    // $FlowFixMe\n    noop(win && win.location && win.location.href);\n    return true;\n  } catch (err) {\n    // pass\n  }\n\n  return false;\n}\n\nexport function getActualDomain(win?: SameDomainWindowType = window): string {\n  const location = win.location;\n\n  if (!location) {\n    throw new Error(`Can not read window location`);\n  }\n\n  const protocol = getActualProtocol(win);\n\n  if (!protocol) {\n    throw new Error(`Can not read window protocol`);\n  }\n\n  if (protocol === PROTOCOL.FILE) {\n    return `${PROTOCOL.FILE}//`;\n  }\n\n  if (protocol === PROTOCOL.ABOUT) {\n    const parent = getParent(win);\n    if (parent && canReadFromWindow(parent)) {\n      // $FlowFixMe\n      return getActualDomain(parent);\n    }\n\n    return `${PROTOCOL.ABOUT}//`;\n  }\n\n  const host = location.host;\n\n  if (!host) {\n    throw new Error(`Can not read window host`);\n  }\n\n  return `${protocol}//${host}`;\n}\n\nexport function getDomain(win?: SameDomainWindowType = window): string {\n  const domain = getActualDomain(win);\n\n  if (domain && win.mockDomain && win.mockDomain.indexOf(PROTOCOL.MOCK) === 0) {\n    return win.mockDomain;\n  }\n\n  return domain;\n}\n\nexport function isBlankDomain(win: CrossDomainWindowType): boolean {\n  try {\n    // $FlowFixMe\n    if (!win.location.href) {\n      return true;\n    }\n\n    if (win.location.href === \"about:blank\") {\n      return true;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  return false;\n}\n\nexport function isActuallySameDomain(win: CrossDomainWindowType): boolean {\n  try {\n    if (win === window) {\n      return true;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  try {\n    const desc = Object.getOwnPropertyDescriptor(win, \"location\");\n\n    if (desc && desc.enumerable === false) {\n      return false;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  try {\n    // $FlowFixMe\n    if (isAboutProtocol(win) && canReadFromWindow(win)) {\n      return true;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  try {\n    // $FlowFixMe\n    if (isMockProtocol(win) && canReadFromWindow(win)) {\n      return true;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  try {\n    // $FlowFixMe\n    if (getActualDomain(win) === getActualDomain(window)) {\n      return true;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  return false;\n}\n\nexport function isSameDomain(\n  win: CrossDomainWindowType | SameDomainWindowType\n): boolean {\n  if (!isActuallySameDomain(win)) {\n    return false;\n  }\n\n  try {\n    if (win === window) {\n      return true;\n    }\n\n    // $FlowFixMe\n    if (isAboutProtocol(win) && canReadFromWindow(win)) {\n      return true;\n    }\n\n    // $FlowFixMe\n    if (getDomain(window) === getDomain(win)) {\n      return true;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  return false;\n}\n\nexport function assertSameDomain(\n  win: CrossDomainWindowType | SameDomainWindowType\n): SameDomainWindowType {\n  if (!isSameDomain(win)) {\n    throw new Error(`Expected window to be same domain`);\n  }\n\n  // $FlowFixMe\n  return win;\n}\n\nexport function getParents(\n  win: CrossDomainWindowType\n): $ReadOnlyArray<CrossDomainWindowType> {\n  const result = [];\n\n  try {\n    while (win.parent !== win) {\n      result.push(win.parent);\n      win = win.parent;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  return result;\n}\n\nexport function isAncestorParent(\n  parent: CrossDomainWindowType,\n  child: CrossDomainWindowType\n): boolean {\n  if (!parent || !child) {\n    return false;\n  }\n\n  const childParent = getParent(child);\n\n  if (childParent) {\n    return childParent === parent;\n  }\n\n  if (getParents(child).indexOf(parent) !== -1) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function getFrames(\n  win: CrossDomainWindowType\n): $ReadOnlyArray<CrossDomainWindowType> {\n  const result = [];\n\n  let frames;\n\n  try {\n    frames = win.frames;\n  } catch (err) {\n    frames = win;\n  }\n\n  let len;\n\n  try {\n    len = frames.length;\n  } catch (err) {\n    // pass\n  }\n\n  if (len === 0) {\n    return result;\n  }\n\n  if (len) {\n    for (let i = 0; i < len; i++) {\n      let frame;\n\n      try {\n        frame = frames[i];\n      } catch (err) {\n        continue;\n      }\n\n      result.push(frame);\n    }\n\n    return result;\n  }\n\n  for (let i = 0; i < 100; i++) {\n    let frame;\n\n    try {\n      frame = frames[i];\n    } catch (err) {\n      return result;\n    }\n\n    if (!frame) {\n      return result;\n    }\n\n    result.push(frame);\n  }\n\n  return result;\n}\n\nexport function getAllChildFrames(\n  win: CrossDomainWindowType\n): $ReadOnlyArray<CrossDomainWindowType> {\n  const result = [];\n\n  for (const frame of getFrames(win)) {\n    result.push(frame);\n\n    for (const childFrame of getAllChildFrames(frame)) {\n      result.push(childFrame);\n    }\n  }\n\n  return result;\n}\n\nexport function getTop(\n  win?: CrossDomainWindowType = window\n): ?CrossDomainWindowType {\n  try {\n    if (win.top) {\n      return win.top;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  if (getParent(win) === win) {\n    return win;\n  }\n\n  try {\n    if (isAncestorParent(window, win) && window.top) {\n      return window.top;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  try {\n    if (isAncestorParent(win, window) && window.top) {\n      return window.top;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  for (const frame of getAllChildFrames(win)) {\n    try {\n      if (frame.top) {\n        return frame.top;\n      }\n    } catch (err) {\n      // pass\n    }\n\n    if (getParent(frame) === frame) {\n      return frame;\n    }\n  }\n}\n\nexport function getNextOpener(\n  win?: CrossDomainWindowType = window\n): ?CrossDomainWindowType {\n  return getOpener(getTop(win) || win);\n}\n\nexport function getUltimateTop(\n  win?: CrossDomainWindowType = window\n): CrossDomainWindowType {\n  const opener = getNextOpener(win);\n\n  if (opener) {\n    return getUltimateTop(opener);\n  }\n\n  return top;\n}\n\nexport function getAllFramesInWindow(\n  win: CrossDomainWindowType\n): $ReadOnlyArray<CrossDomainWindowType> {\n  const top = getTop(win);\n\n  if (!top) {\n    throw new Error(`Can not determine top window`);\n  }\n\n  let result = [...getAllChildFrames(top), top];\n\n  // Win may be in shadow dom\n  if (result.indexOf(win) === -1) {\n    result = [...result, win, ...getAllChildFrames(win)];\n  }\n\n  return result;\n}\n\nexport function getAllWindows(\n  win?: CrossDomainWindowType = window\n): $ReadOnlyArray<CrossDomainWindowType> {\n  const frames = getAllFramesInWindow(win);\n  const opener = getNextOpener(win);\n\n  if (opener) {\n    return [...getAllWindows(opener), ...frames];\n  } else {\n    return frames;\n  }\n}\n\nexport function isTop(win: CrossDomainWindowType): boolean {\n  return win === getTop(win);\n}\n\nexport function isFrameWindowClosed(frame: HTMLIFrameElement): boolean {\n  if (!frame.contentWindow) {\n    return true;\n  }\n\n  if (!frame.parentNode) {\n    return true;\n  }\n\n  const doc = frame.ownerDocument;\n\n  if (doc && doc.documentElement && !doc.documentElement.contains(frame)) {\n    let parent = frame;\n\n    while (parent.parentNode && parent.parentNode !== parent) {\n      parent = parent.parentNode;\n    }\n\n    // $FlowFixMe\n    if (!parent.host || !doc.documentElement.contains(parent.host)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction safeIndexOf<T>(collection: $ReadOnlyArray<T>, item: T): number {\n  for (let i = 0; i < collection.length; i++) {\n    try {\n      if (collection[i] === item) {\n        return i;\n      }\n    } catch (err) {\n      // pass\n    }\n  }\n\n  return -1;\n}\n\nconst iframeWindows = [];\nconst iframeFrames = [];\n\nexport function isWindowClosed(\n  win: CrossDomainWindowType,\n  allowMock: boolean = true\n): boolean {\n  try {\n    if (win === window) {\n      return false;\n    }\n  } catch (err) {\n    return true;\n  }\n\n  try {\n    if (!win) {\n      return true;\n    }\n  } catch (err) {\n    return true;\n  }\n\n  try {\n    if (win.closed) {\n      return true;\n    }\n  } catch (err) {\n    // I love you so much IE\n\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return false;\n    }\n\n    return true;\n  }\n\n  if (allowMock && isSameDomain(win)) {\n    try {\n      // $FlowFixMe\n      if (win.mockclosed) {\n        return true;\n      }\n    } catch (err) {\n      // pass\n    }\n  }\n\n  // Mobile safari\n\n  try {\n    if (!win.parent || !win.top) {\n      return true;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  // Yes, this actually happens in IE. win === win errors out when the window\n  // is from an iframe, and the iframe was removed from the page.\n\n  try {\n    noop(win === win); // eslint-disable-line no-self-compare\n  } catch (err) {\n    return true;\n  }\n\n  // IE orphaned frame\n\n  const iframeIndex = safeIndexOf(iframeWindows, win);\n\n  if (iframeIndex !== -1) {\n    const frame = iframeFrames[iframeIndex];\n\n    if (frame && isFrameWindowClosed(frame)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction cleanIframes() {\n  for (let i = 0; i < iframeWindows.length; i++) {\n    let closed = false;\n\n    try {\n      closed = iframeWindows[i].closed;\n    } catch (err) {\n      // pass\n    }\n\n    if (closed) {\n      iframeFrames.splice(i, 1);\n      iframeWindows.splice(i, 1);\n    }\n  }\n}\n\nexport function linkFrameWindow(frame: HTMLIFrameElement) {\n  cleanIframes();\n\n  if (frame && frame.contentWindow) {\n    try {\n      iframeWindows.push(frame.contentWindow);\n      iframeFrames.push(frame);\n    } catch (err) {\n      // pass\n    }\n  }\n}\n\nexport function getUserAgent(win: ?SameDomainWindowType): string {\n  win = win || window;\n  return win.navigator.mockUserAgent || win.navigator.userAgent;\n}\n\nexport function getFrameByName(\n  win: CrossDomainWindowType,\n  name: string\n): ?CrossDomainWindowType {\n  const winFrames = getFrames(win);\n\n  for (const childFrame of winFrames) {\n    try {\n      if (\n        isSameDomain(childFrame) &&\n        // $FlowFixMe\n        childFrame.name === name &&\n        winFrames.indexOf(childFrame) !== -1\n      ) {\n        return childFrame;\n      }\n    } catch (err) {\n      // pass\n    }\n  }\n\n  try {\n    // $FlowFixMe\n    if (winFrames.indexOf(win.frames[name]) !== -1) {\n      // $FlowFixMe\n      return win.frames[name];\n    }\n  } catch (err) {\n    // pass\n  }\n\n  try {\n    if (winFrames.indexOf(win[name]) !== -1) {\n      return win[name];\n    }\n  } catch (err) {\n    // pass\n  }\n}\n\nexport function findChildFrameByName(\n  win: CrossDomainWindowType,\n  name: string\n): ?CrossDomainWindowType {\n  const frame = getFrameByName(win, name);\n\n  if (frame) {\n    return frame;\n  }\n\n  for (const childFrame of getFrames(win)) {\n    const namedFrame = findChildFrameByName(childFrame, name);\n\n    if (namedFrame) {\n      return namedFrame;\n    }\n  }\n}\n\nexport function findFrameByName(\n  win: CrossDomainWindowType,\n  name: string\n): ?CrossDomainWindowType {\n  const frame = getFrameByName(win, name);\n\n  if (frame) {\n    return frame;\n  }\n\n  const top = getTop(win) || win;\n\n  return findChildFrameByName(top, name);\n}\n\nexport function isParent(\n  win: CrossDomainWindowType,\n  frame: CrossDomainWindowType\n): boolean {\n  const frameParent = getParent(frame);\n\n  if (frameParent) {\n    return frameParent === win;\n  }\n\n  for (const childFrame of getFrames(win)) {\n    if (childFrame === frame) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function isOpener(\n  parent: CrossDomainWindowType,\n  child: CrossDomainWindowType\n): boolean {\n  return parent === getOpener(child);\n}\n\nexport function getAncestor(\n  win?: CrossDomainWindowType = window\n): ?CrossDomainWindowType {\n  win = win || window;\n\n  const opener = getOpener(win);\n\n  if (opener) {\n    return opener;\n  }\n\n  const parent = getParent(win);\n\n  if (parent) {\n    return parent;\n  }\n}\n\nexport function getAncestors(\n  win: CrossDomainWindowType\n): $ReadOnlyArray<CrossDomainWindowType> {\n  const results = [];\n\n  let ancestor = win;\n\n  while (ancestor) {\n    ancestor = getAncestor(ancestor);\n    if (ancestor) {\n      results.push(ancestor);\n    }\n  }\n\n  return results;\n}\n\nexport function isAncestor(\n  parent: CrossDomainWindowType,\n  child: CrossDomainWindowType\n): boolean {\n  const actualParent = getAncestor(child);\n\n  if (actualParent) {\n    if (actualParent === parent) {\n      return true;\n    }\n\n    return false;\n  }\n\n  if (child === parent) {\n    return false;\n  }\n\n  if (getTop(child) === child) {\n    return false;\n  }\n\n  for (const frame of getFrames(parent)) {\n    if (frame === child) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function isPopup(win?: CrossDomainWindowType = window): boolean {\n  return Boolean(getOpener(win));\n}\n\nexport function isIframe(win?: CrossDomainWindowType = window): boolean {\n  return Boolean(getParent(win));\n}\n\nexport function isFullpage(win?: CrossDomainWindowType = window): boolean {\n  return Boolean(!isIframe(win) && !isPopup(win));\n}\n\nfunction anyMatch(collection1, collection2): boolean {\n  for (const item1 of collection1) {\n    for (const item2 of collection2) {\n      if (item1 === item2) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nexport function getDistanceFromTop(\n  win: CrossDomainWindowType = window\n): number {\n  let distance = 0;\n  let parent = win;\n\n  while (parent) {\n    parent = getParent(parent);\n    if (parent) {\n      distance += 1;\n    }\n  }\n\n  return distance;\n}\n\nexport function getNthParent(\n  win: CrossDomainWindowType,\n  n: number = 1\n): ?CrossDomainWindowType {\n  let parent = win;\n\n  for (let i = 0; i < n; i++) {\n    if (!parent) {\n      return;\n    }\n\n    parent = getParent(parent);\n  }\n\n  return parent;\n}\n\nexport function getNthParentFromTop(\n  win: CrossDomainWindowType,\n  n: number = 1\n): ?CrossDomainWindowType {\n  return getNthParent(win, getDistanceFromTop(win) - n);\n}\n\nexport function isSameTopWindow(\n  win1: CrossDomainWindowType,\n  win2: CrossDomainWindowType\n): boolean {\n  const top1 = getTop(win1) || win1;\n  const top2 = getTop(win2) || win2;\n\n  try {\n    if (top1 && top2) {\n      if (top1 === top2) {\n        return true;\n      }\n\n      return false;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  const allFrames1 = getAllFramesInWindow(win1);\n  const allFrames2 = getAllFramesInWindow(win2);\n\n  if (anyMatch(allFrames1, allFrames2)) {\n    return true;\n  }\n\n  const opener1 = getOpener(top1);\n  const opener2 = getOpener(top2);\n\n  if (opener1 && anyMatch(getAllFramesInWindow(opener1), allFrames2)) {\n    return false;\n  }\n\n  if (opener2 && anyMatch(getAllFramesInWindow(opener2), allFrames1)) {\n    return false;\n  }\n\n  return false;\n}\n\nexport function matchDomain(\n  pattern: DomainMatcher,\n  origin: DomainMatcher\n): boolean {\n  if (typeof pattern === \"string\") {\n    if (typeof origin === \"string\") {\n      return pattern === WILDCARD || origin === pattern;\n    }\n\n    if (isRegex(origin)) {\n      return false;\n    }\n\n    if (Array.isArray(origin)) {\n      return false;\n    }\n  }\n\n  if (isRegex(pattern)) {\n    if (isRegex(origin)) {\n      return pattern.toString() === origin.toString();\n    }\n\n    if (Array.isArray(origin)) {\n      return false;\n    }\n\n    // $FlowFixMe\n    return Boolean(origin.match(pattern));\n  }\n\n  if (Array.isArray(pattern)) {\n    if (Array.isArray(origin)) {\n      return JSON.stringify(pattern) === JSON.stringify(origin);\n    }\n\n    if (isRegex(origin)) {\n      return false;\n    }\n\n    return pattern.some((subpattern) => matchDomain(subpattern, origin));\n  }\n\n  return false;\n}\n\nexport function stringifyDomainPattern(pattern: DomainMatcher): string {\n  if (Array.isArray(pattern)) {\n    return `(${pattern.join(\" | \")})`;\n  } else if (isRegex(pattern)) {\n    return `RegExp(${pattern.toString()})`;\n  } else {\n    return pattern.toString();\n  }\n}\n\nexport function getDomainFromUrl(url: string): string {\n  let domain;\n\n  if (url.match(/^(https?|mock|file):\\/\\//)) {\n    domain = url;\n  } else {\n    return getDomain();\n  }\n\n  domain = domain.split(\"/\").slice(0, 3).join(\"/\");\n\n  return domain;\n}\n\nexport function onCloseWindow(\n  win: CrossDomainWindowType,\n  callback: Function,\n  delay: number = 1000,\n  maxtime: number = Infinity\n): {| cancel: () => void |} {\n  let timeout;\n\n  const check = () => {\n    if (isWindowClosed(win)) {\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n\n      return callback();\n    }\n\n    if (maxtime <= 0) {\n      clearTimeout(timeout);\n    } else {\n      maxtime -= delay;\n      timeout = setTimeout(check, delay);\n    }\n  };\n\n  check();\n\n  return {\n    cancel() {\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n    },\n  };\n}\n\n// eslint-disable-next-line complexity\nexport function isWindow(obj: Object): boolean {\n  try {\n    if (obj === window) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    // $FlowFixMe method-unbinding\n    if (Object.prototype.toString.call(obj) === \"[object Window]\") {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    if (window.Window && obj instanceof window.Window) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    if (obj && obj.self === obj) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    if (obj && obj.parent === obj) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    if (obj && obj.top === obj) {\n      return true;\n    }\n  } catch (err) {\n    if (err && err.message === IE_WIN_ACCESS_ERROR) {\n      return true;\n    }\n  }\n\n  try {\n    // eslint-disable-next-line no-self-compare\n    if (noop(obj === obj) === \"__unlikely_value__\") {\n      return false;\n    }\n  } catch (err) {\n    return true;\n  }\n\n  try {\n    if (\n      obj &&\n      obj.__cross_domain_utils_window_check__ === \"__unlikely_value__\"\n    ) {\n      return false;\n    }\n  } catch (err) {\n    return true;\n  }\n\n  try {\n    if (\"postMessage\" in obj && \"self\" in obj && \"location\" in obj) {\n      return true;\n    }\n  } catch (err) {\n    // pass\n  }\n\n  return false;\n}\n\nexport function isBrowser(): boolean {\n  return (\n    typeof window !== \"undefined\" && typeof window.location !== \"undefined\"\n  );\n}\n\nexport function isCurrentDomain(domain: string): boolean {\n  if (!isBrowser()) {\n    return false;\n  }\n\n  return getDomain() === domain;\n}\n\nexport function isMockDomain(domain: string): boolean {\n  return domain.indexOf(PROTOCOL.MOCK) === 0;\n}\n\nexport function normalizeMockUrl(url: string): string {\n  if (!isMockDomain(getDomainFromUrl(url))) {\n    return url;\n  }\n\n  if (!__TEST__) {\n    throw new Error(`Mock urls not supported out of test mode`);\n  }\n\n  return url.replace(/^mock:\\/\\/[^/]+/, getActualDomain(window));\n}\n\nexport function getFrameForWindow(win: CrossDomainWindowType): ?HTMLElement {\n  if (isSameDomain(win)) {\n    return assertSameDomain(win).frameElement;\n  }\n\n  for (const frame of document.querySelectorAll(\"iframe\")) {\n    if (frame && frame.contentWindow && frame.contentWindow === win) {\n      return frame;\n    }\n  }\n}\n\nexport function closeWindow(win: CrossDomainWindowType) {\n  if (isIframe(win)) {\n    const frame = getFrameForWindow(win);\n    if (frame && frame.parentElement) {\n      frame.parentElement.removeChild(frame);\n      return;\n    }\n  }\n\n  try {\n    win.close();\n  } catch (err) {\n    // pass\n  }\n}\n","/* @flow */\n\nexport function safeIndexOf<T>(collection : $ReadOnlyArray<T>, item : T) : number {\n    for (let i = 0; i < collection.length; i++) {\n\n        try {\n            if (collection[i] === item) {\n                return i;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    return -1;\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function noop(...args : $ReadOnlyArray<mixed>) {\n    // pass\n}\n","/* @flow */\n\nimport { isWindow, isWindowClosed } from '@krakenjs/cross-domain-utils/src';\n\nimport { hasNativeWeakMap } from './native';\nimport { noop, safeIndexOf } from './util';\n\nexport class CrossDomainSafeWeakMap<K : Object, V : mixed> {\n\n    name : string;\n    weakmap : ?WeakMap<K, V>;\n    // eslint-disable-next-line flowtype/no-mutable-array\n    keys : Array<K>;\n    // eslint-disable-next-line flowtype/no-mutable-array\n    values : Array<V>;\n\n    constructor() {\n        // eslint-disable-next-line no-bitwise\n        this.name = `__weakmap_${ Math.random() * 1e9 >>> 0 }__`;\n\n        if (hasNativeWeakMap()) {\n            try {\n                this.weakmap = new WeakMap();\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this.keys  = [];\n        this.values = [];\n    }\n\n    _cleanupClosedWindows() {\n\n        const weakmap = this.weakmap;\n        const keys = this.keys;\n\n        for (let i = 0; i < keys.length; i++) {\n            const value = keys[i];\n\n            if (isWindow(value) && isWindowClosed(value)) {\n\n                if (weakmap) {\n                    try {\n                        weakmap.delete(value);\n                    } catch (err) {\n                        // pass\n                    }\n                }\n\n                keys.splice(i, 1);\n                this.values.splice(i, 1);\n\n                i -= 1;\n            }\n        }\n    }\n\n    isSafeToReadWrite(key : K) : boolean {\n\n        if (isWindow(key)) {\n            return false;\n        }\n\n        try {\n            noop(key && key.self);\n            noop(key && key[this.name]);\n        } catch (err) {\n            return false;\n        }\n\n        return true;\n    }\n\n    set(key : K, value : V) {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                weakmap.set(key, value);\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const name = this.name;\n                const entry = key[name];\n\n                if (entry && entry[0] === key) {\n                    entry[1] = value;\n                } else {\n                    Object.defineProperty(key, name, {\n                        value:    [ key, value ],\n                        writable: true\n                    });\n                }\n\n                return;\n\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const keys = this.keys;\n        const values = this.values;\n        const index = safeIndexOf(keys, key);\n\n        if (index === -1) {\n            keys.push(key);\n            values.push(value);\n        } else {\n            values[index] = value;\n        }\n    }\n\n    get(key : K) : V | void {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                if (weakmap.has(key)) {\n                    return weakmap.get(key);\n                }\n\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    return entry[1];\n                }\n\n                return;\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const keys = this.keys;\n        const index = safeIndexOf(keys, key);\n\n        if (index === -1) {\n            return;\n        }\n\n        return this.values[index];\n    }\n\n    delete(key : K) {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                weakmap.delete(key);\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    entry[0] = entry[1] = undefined;\n                }\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const keys = this.keys;\n        const index = safeIndexOf(keys, key);\n\n        if (index !== -1) {\n            keys.splice(index, 1);\n            this.values.splice(index, 1);\n        }\n    }\n\n    has(key : K) : boolean {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                if (weakmap.has(key)) {\n                    return true;\n                }\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    return true;\n                }\n\n                return false;\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const index = safeIndexOf(this.keys, key);\n        return index !== -1;\n    }\n\n    getOrSet(key : K, getter : () => V) : V {\n        if (this.has(key)) {\n            // $FlowFixMe\n            return this.get(key);\n        }\n\n        const value = getter();\n        this.set(key, value);\n        return value;\n    }\n}\n","/* @flow */\n/* eslint max-lines: 0 */\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise/src\";\nimport { WeakMap } from \"@krakenjs/cross-domain-safe-weakmap/src\";\n\nimport {\n  BLANK_URL,\n  ctrlCharactersRegex,\n  htmlCtrlEntityRegex,\n  htmlEntitiesRegex,\n  invalidProtocolRegex,\n  relativeFirstCharacters,\n  urlSchemeRegex,\n} from \"./constants\";\nimport type { CancelableType } from \"./types\";\n\nexport function isElement(element: mixed): boolean {\n  let passed = false;\n\n  try {\n    if (element instanceof window.Element) {\n      passed = true;\n    } else if (\n      element !== null &&\n      typeof element === \"object\" &&\n      element.nodeType === 1 &&\n      typeof element.style === \"object\" &&\n      typeof element.ownerDocument === \"object\"\n    ) {\n      passed = true;\n    }\n  } catch (_) {\n    // we don't have an element\n  }\n\n  return passed;\n}\n\nexport function getFunctionName<T: Function>(fn: T): string {\n  return fn.name || fn.__name__ || fn.displayName || \"anonymous\";\n}\n\nexport function setFunctionName<T: Function>(fn: T, name: string): T {\n  try {\n    delete fn.name;\n    fn.name = name;\n  } catch (err) {\n    // pass\n  }\n\n  fn.__name__ = fn.displayName = name;\n  return fn;\n}\n\nexport function base64encode(str: string): string {\n  if (typeof btoa === \"function\") {\n    return btoa(\n      encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (m, p1) => {\n        return String.fromCharCode(parseInt(p1, 16));\n      })\n    ).replace(/[=]/g, \"\");\n  }\n\n  if (typeof Buffer !== \"undefined\") {\n    return Buffer.from(str, \"utf8\").toString(\"base64\").replace(/[=]/g, \"\");\n  }\n\n  throw new Error(`Can not find window.btoa or Buffer`);\n}\n\nexport function base64decode(str: string): string {\n  if (typeof atob === \"function\") {\n    return decodeURIComponent(\n      // $FlowFixMe[method-unbinding]\n      Array.prototype.map\n        .call(atob(str), (c) => {\n          // eslint-disable-next-line prefer-template\n          return \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2);\n        })\n        .join(\"\")\n    );\n  }\n\n  if (typeof Buffer !== \"undefined\") {\n    return Buffer.from(str, \"base64\").toString(\"utf8\");\n  }\n\n  throw new Error(`Can not find window.atob or Buffer`);\n}\n\nexport function uniqueID(): string {\n  const chars = \"0123456789abcdef\";\n\n  const randomID = \"xxxxxxxxxx\".replace(/./g, () => {\n    return chars.charAt(Math.floor(Math.random() * chars.length));\n  });\n\n  const timeID = base64encode(\n    new Date().toISOString().slice(11, 19).replace(\"T\", \".\")\n  )\n    .replace(/[^a-zA-Z0-9]/g, \"\")\n    .toLowerCase();\n\n  return `uid_${randomID}_${timeID}`;\n}\n\nexport function getGlobal(): Object {\n  if (typeof window !== \"undefined\") {\n    return window;\n  }\n  if (typeof global !== \"undefined\") {\n    return global;\n  }\n  if (typeof __GLOBAL__ !== \"undefined\") {\n    return __GLOBAL__;\n  }\n  throw new Error(`No global found`);\n}\n\nlet objectIDs;\n\nexport function getObjectID(obj: Object): string {\n  objectIDs = objectIDs || new WeakMap();\n\n  if (\n    obj === null ||\n    obj === undefined ||\n    (typeof obj !== \"object\" && typeof obj !== \"function\")\n  ) {\n    throw new Error(`Invalid object`);\n  }\n\n  let uid = objectIDs.get(obj);\n\n  if (!uid) {\n    uid = `${typeof obj}:${uniqueID()}`;\n    objectIDs.set(obj, uid);\n  }\n\n  return uid;\n}\n\nfunction serializeArgs<T>(args: $ReadOnlyArray<T>): string {\n  try {\n    // $FlowFixMe[method-unbinding]\n    return JSON.stringify(Array.prototype.slice.call(args), (subkey, val) => {\n      // Treat each distinct function as unique for purposes of memoization\n      // e.g. even if someFunction.stringify() is the same, we may use a different memoize cache\n      // if the actual function is different.\n      if (typeof val === \"function\") {\n        return `memoize[${getObjectID(val)}]`;\n      }\n\n      // By default JSON.stringify(domElement) returns '{}'. This ensures that stays true even for non-standard\n      // elements (e.g. React-rendered dom elements) with custom properties\n      if (isElement(val)) {\n        return {};\n      }\n\n      return val;\n    });\n  } catch (err) {\n    throw new Error(`Arguments not serializable -- can not be used to memoize`);\n  }\n}\n\nexport function getEmptyObject(): {||} {\n  // $FlowFixMe\n  return {};\n}\n\ntype MemoizeOptions = {|\n  name?: string,\n  time?: number,\n  thisNamespace?: boolean,\n|};\n\nconst getDefaultMemoizeOptions = (): MemoizeOptions => {\n  // $FlowFixMe\n  return {};\n};\n\nexport type Memoized<F> = F & {| reset: () => void |};\n\nlet memoizeGlobalIndex = 0;\nlet memoizeGlobalIndexValidFrom = 0;\n\nexport function memoize<F: Function>(\n  method: F,\n  options?: MemoizeOptions = getDefaultMemoizeOptions()\n): Memoized<F> {\n  const { thisNamespace = false, time: cacheTime } = options;\n\n  let simpleCache;\n  let thisCache;\n\n  let memoizeIndex = memoizeGlobalIndex;\n  memoizeGlobalIndex += 1;\n\n  const memoizedFunction = function memoizedFunction(...args): mixed {\n    if (memoizeIndex < memoizeGlobalIndexValidFrom) {\n      simpleCache = null;\n      thisCache = null;\n      memoizeIndex = memoizeGlobalIndex;\n      memoizeGlobalIndex += 1;\n    }\n\n    let cache;\n\n    if (thisNamespace) {\n      thisCache = thisCache || new WeakMap();\n      cache = thisCache.getOrSet(this, getEmptyObject);\n    } else {\n      cache = simpleCache = simpleCache || {};\n    }\n\n    let cacheKey;\n\n    try {\n      cacheKey = serializeArgs(args);\n    } catch {\n      return method.apply(this, arguments);\n    }\n\n    let cacheResult = cache[cacheKey];\n\n    if (cacheResult && cacheTime && Date.now() - cacheResult.time < cacheTime) {\n      delete cache[cacheKey];\n      cacheResult = null;\n    }\n\n    if (cacheResult) {\n      return cacheResult.value;\n    }\n\n    const time = Date.now();\n    const value = method.apply(this, arguments);\n\n    cache[cacheKey] = { time, value };\n\n    return value;\n  };\n\n  memoizedFunction.reset = () => {\n    simpleCache = null;\n    thisCache = null;\n  };\n\n  // $FlowFixMe\n  const result: F = memoizedFunction;\n\n  return setFunctionName(\n    result,\n    `${options.name || getFunctionName(method)}::memoized`\n  );\n}\n\nmemoize.clear = () => {\n  memoizeGlobalIndexValidFrom = memoizeGlobalIndex;\n};\n\nexport function promiseIdentity<T: mixed>(\n  item: ZalgoPromise<T> | T\n): ZalgoPromise<T> {\n  // $FlowFixMe\n  return ZalgoPromise.resolve(item);\n}\n\nexport function memoizePromise<R>(\n  // eslint-disable-next-line flowtype/no-weak-types\n  method: (...args: $ReadOnlyArray<any>) => ZalgoPromise<R>\n  // eslint-disable-next-line flowtype/no-weak-types\n): (...args: $ReadOnlyArray<any>) => ZalgoPromise<R> {\n  let cache = {};\n\n  function memoizedPromiseFunction(\n    // eslint-disable-next-line flowtype/no-weak-types\n    ...args: $ReadOnlyArray<any>\n  ): ZalgoPromise<R> {\n    const key: string = serializeArgs(args);\n\n    if (cache.hasOwnProperty(key)) {\n      return cache[key];\n    }\n\n    cache[key] = ZalgoPromise.try(() => method.apply(this, arguments)).finally(\n      () => {\n        delete cache[key];\n      }\n    );\n\n    return cache[key];\n  }\n\n  memoizedPromiseFunction.reset = () => {\n    cache = {};\n  };\n\n  return setFunctionName(\n    memoizedPromiseFunction,\n    `${getFunctionName(method)}::promiseMemoized`\n  );\n}\n\ntype PromisifyOptions = {|\n  name?: string,\n|};\n\nconst getDefaultPromisifyOptions = (): PromisifyOptions => {\n  // $FlowFixMe\n  return {};\n};\n\nexport function promisify<R>(\n  // eslint-disable-next-line flowtype/no-weak-types\n  method: (...args: $ReadOnlyArray<any>) => R,\n  options: PromisifyOptions = getDefaultPromisifyOptions()\n  // eslint-disable-next-line flowtype/no-weak-types\n): (...args: $ReadOnlyArray<any>) => ZalgoPromise<R> {\n  function promisifiedFunction(): ZalgoPromise<R> {\n    return ZalgoPromise.try(method, this, arguments);\n  }\n\n  if (options.name) {\n    promisifiedFunction.displayName = `${options.name}:promisified`;\n  }\n\n  return setFunctionName(\n    promisifiedFunction,\n    `${getFunctionName(method)}::promisified`\n  );\n}\n\nexport function inlineMemoize<R>(\n  // eslint-disable-next-line flowtype/no-weak-types\n  method: (...args: $ReadOnlyArray<any>) => R,\n  // eslint-disable-next-line flowtype/no-weak-types\n  logic: (...args: $ReadOnlyArray<any>) => R,\n  // eslint-disable-next-line flowtype/no-weak-types\n  args: $ReadOnlyArray<any> = []\n): R {\n  // $FlowFixMe\n  const cache: {| [string]: R |} = (method.__inline_memoize_cache__ =\n    // $FlowFixMe\n    method.__inline_memoize_cache__ || {});\n  const key = serializeArgs(args);\n\n  if (cache.hasOwnProperty(key)) {\n    return cache[key];\n  }\n\n  const result = (cache[key] = logic(...args));\n\n  return result;\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function noop(...args: $ReadOnlyArray<mixed>) {\n  // pass\n}\n\nexport function once(method: Function): Function {\n  let called = false;\n\n  const onceFunction = function (): mixed {\n    if (!called) {\n      called = true;\n      return method.apply(this, arguments);\n    }\n  };\n\n  return setFunctionName(onceFunction, `${getFunctionName(method)}::once`);\n}\n\nexport function hashStr(str: string): number {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash += str[i].charCodeAt(0) * Math.pow((i % 10) + 1, 5);\n  }\n  return Math.floor(Math.pow(Math.sqrt(hash), 5));\n}\n\nexport function strHashStr(str: string): string {\n  let hash = \"\";\n\n  for (let i = 0; i < str.length; i++) {\n    let total = str[i].charCodeAt(0) * i;\n\n    if (str[i + 1]) {\n      total += str[i + 1].charCodeAt(0) * (i - 1);\n    }\n\n    hash += String.fromCharCode(97 + (Math.abs(total) % 26));\n  }\n\n  return hash;\n}\n\nexport function match(str: string, pattern: RegExp): ?string {\n  const regmatch = str.match(pattern);\n  if (regmatch) {\n    return regmatch[1];\n  }\n}\n\nexport function awaitKey<T: mixed>(obj: Object, key: string): ZalgoPromise<T> {\n  return new ZalgoPromise((resolve) => {\n    let value = obj[key];\n\n    if (value) {\n      return resolve(value);\n    }\n\n    delete obj[key];\n\n    Object.defineProperty(obj, key, {\n      configurable: true,\n\n      set(item) {\n        value = item;\n\n        if (value) {\n          resolve(value);\n        }\n      },\n\n      get(): T {\n        return value;\n      },\n    });\n  });\n}\n\nexport function stringifyError(err: mixed, level: number = 1): string {\n  if (level >= 3) {\n    return \"stringifyError stack overflow\";\n  }\n\n  try {\n    if (!err) {\n      // $FlowFixMe[method-unbinding]\n      return `<unknown error: ${Object.prototype.toString.call(err)}>`;\n    }\n\n    if (typeof err === \"string\") {\n      return err;\n    }\n\n    if (err instanceof Error) {\n      const stack = err && err.stack;\n      const message = err && err.message;\n\n      if (stack && message) {\n        if (stack.indexOf(message) !== -1) {\n          return stack;\n        } else {\n          return `${message}\\n${stack}`;\n        }\n      } else if (stack) {\n        return stack;\n      } else if (message) {\n        return message;\n      }\n    }\n\n    if (err && err.toString && typeof err.toString === \"function\") {\n      // $FlowFixMe\n      return err.toString();\n    }\n\n    // $FlowFixMe[method-unbinding]\n    return Object.prototype.toString.call(err);\n  } catch (newErr) {\n    return `Error while stringifying error: ${stringifyError(\n      newErr,\n      level + 1\n    )}`;\n  }\n}\n\nexport function stringifyErrorMessage(err: mixed): string {\n  // $FlowFixMe[method-unbinding]\n  const defaultMessage = `<unknown error: ${Object.prototype.toString.call(\n    err\n  )}>`;\n\n  if (!err) {\n    return defaultMessage;\n  }\n\n  if (err instanceof Error) {\n    return err.message || defaultMessage;\n  }\n\n  if (typeof err.message === \"string\") {\n    return err.message || defaultMessage;\n  }\n\n  return defaultMessage;\n}\n\nexport function stringify(item: mixed): string {\n  if (typeof item === \"string\") {\n    return item;\n  }\n\n  if (item && item.toString && typeof item.toString === \"function\") {\n    // $FlowFixMe\n    return item.toString();\n  }\n\n  // $FlowFixMe[method-unbinding]\n  return Object.prototype.toString.call(item);\n}\n\nexport function domainMatches(hostname: string, domain: string): boolean {\n  hostname = hostname.split(\"://\")[1];\n  const index = hostname.indexOf(domain);\n  return index !== -1 && hostname.slice(index) === domain;\n}\n\nexport function patchMethod(obj: Object, name: string, handler: Function) {\n  const original = obj[name];\n\n  obj[name] = function patchedMethod(): mixed {\n    return handler({\n      context: this,\n      // $FlowFixMe[method-unbinding]\n      args: Array.prototype.slice.call(arguments),\n      original,\n      callOriginal: () => original.apply(this, arguments),\n    });\n  };\n}\n\nexport function extend<T: Object | Function>(obj: T, source: Object): T {\n  if (!source) {\n    return obj;\n  }\n\n  if (Object.assign) {\n    return Object.assign(obj, source);\n  }\n\n  for (const key in source) {\n    if (source.hasOwnProperty(key)) {\n      obj[key] = source[key];\n    }\n  }\n\n  return obj;\n}\n\nexport function values<T>(obj: { [string]: T }): $ReadOnlyArray<T> {\n  if (Object.values) {\n    // $FlowFixMe\n    return Object.values(obj);\n  }\n\n  const result: Array<T> = [];\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      // $FlowFixMe[escaped-generic]\n      result.push(obj[key]);\n    }\n  }\n\n  // $FlowFixMe\n  return result;\n}\n\n// eslint-disable-next-line no-undef\nexport const memoizedValues: <T>({ [string]: T }) => $ReadOnlyArray<T> =\n  memoize(values);\n\nexport function perc(pixels: number, percentage: number): number {\n  return Math.round((pixels * percentage) / 100);\n}\n\nexport function min(...args: $ReadOnlyArray<number>): number {\n  return Math.min(...args);\n}\n\nexport function max(...args: $ReadOnlyArray<number>): number {\n  return Math.max(...args);\n}\n\nexport function roundUp(num: number, nearest: number): number {\n  const remainder = num % nearest;\n  return remainder ? num - remainder + nearest : num;\n}\n\nexport function regexMap<T>(\n  str: string,\n  regexp: RegExp,\n  handler: () => T\n): $ReadOnlyArray<T> {\n  const results = [];\n\n  // $FlowFixMe\n  str.replace(regexp, function regexMapMatcher(item) {\n    results.push(handler ? handler.apply(null, arguments) : item);\n  });\n\n  // $FlowFixMe\n  return results;\n}\n\nexport function svgToBase64(svg: string): string {\n  return `data:image/svg+xml;base64,${base64encode(svg)}`;\n}\n\nexport function objFilter<T, R>(\n  obj: { [string]: T },\n  filter?: (T, ?string) => mixed = Boolean\n): { [string]: R } {\n  const result = {};\n\n  for (const key in obj) {\n    if (!obj.hasOwnProperty(key) || !filter(obj[key], key)) {\n      continue;\n    }\n\n    result[key] = obj[key];\n  }\n\n  return result;\n}\n\nexport function identity<T>(item: T): T {\n  return item;\n}\n\nexport function regexTokenize(\n  text: string,\n  regexp: RegExp\n): $ReadOnlyArray<string> {\n  const result = [];\n  text.replace(regexp, (token) => {\n    result.push(token);\n    return \"\";\n  });\n  return result;\n}\n\nexport function promiseDebounce<T>(\n  method: () => ZalgoPromise<T> | T,\n  delay: number = 50\n): () => ZalgoPromise<T> {\n  let promise;\n  let timeout;\n\n  const promiseDebounced = function (): ZalgoPromise<T> {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n\n    const localPromise = (promise = promise || new ZalgoPromise());\n\n    timeout = setTimeout(() => {\n      promise = null;\n      timeout = null;\n\n      ZalgoPromise.try(method).then(\n        (result) => {\n          localPromise.resolve(result);\n        },\n        (err) => {\n          localPromise.reject(err);\n        }\n      );\n    }, delay);\n\n    return localPromise;\n  };\n\n  return setFunctionName(\n    promiseDebounced,\n    `${getFunctionName(method)}::promiseDebounced`\n  );\n}\n\nexport function safeInterval(\n  method: Function,\n  time: number\n): {| cancel: () => void |} {\n  let timeout;\n\n  function loop() {\n    timeout = setTimeout(() => {\n      method();\n      loop();\n    }, time);\n  }\n\n  loop();\n\n  return {\n    cancel() {\n      clearTimeout(timeout);\n    },\n  };\n}\n\nexport function isInteger(str: string): boolean {\n  return Boolean(str.match(/^[0-9]+$/));\n}\n\nexport function isFloat(str: string): boolean {\n  return Boolean(str.match(/^[0-9]+\\.[0-9]+$/));\n}\n\nexport function serializePrimitive(value: string | number | boolean): string {\n  return value.toString();\n}\n\nexport function deserializePrimitive(value: string): string | number | boolean {\n  if (value === \"true\") {\n    return true;\n  } else if (value === \"false\") {\n    return false;\n  } else if (isInteger(value)) {\n    return parseInt(value, 10);\n  } else if (isFloat(value)) {\n    return parseFloat(value);\n  } else {\n    return value;\n  }\n}\n\nexport function dotify(\n  obj: Object,\n  prefix: string = \"\",\n  newobj: Object = {}\n): { [string]: string } {\n  prefix = prefix ? `${prefix}.` : prefix;\n  for (const key in obj) {\n    if (\n      !obj.hasOwnProperty(key) ||\n      obj[key] === undefined ||\n      obj[key] === null ||\n      typeof obj[key] === \"function\"\n    ) {\n      continue;\n    } else if (\n      obj[key] &&\n      Array.isArray(obj[key]) &&\n      obj[key].length &&\n      obj[key].every((val) => typeof val !== \"object\")\n    ) {\n      newobj[`${prefix}${key}[]`] = obj[key].join(\",\");\n    } else if (obj[key] && typeof obj[key] === \"object\") {\n      newobj = dotify(obj[key], `${prefix}${key}`, newobj);\n    } else {\n      newobj[`${prefix}${key}`] = serializePrimitive(obj[key]);\n    }\n  }\n  return newobj;\n}\n\nexport function undotify(obj: { [string]: string }): Object {\n  const result = {};\n\n  for (let key in obj) {\n    if (!obj.hasOwnProperty(key) || typeof obj[key] !== \"string\") {\n      continue;\n    }\n\n    let value = obj[key];\n\n    if (key.match(/^.+\\[\\]$/)) {\n      key = key.slice(0, -2);\n      value = value.split(\",\").map(deserializePrimitive);\n    } else {\n      value = deserializePrimitive(value);\n    }\n\n    let keyResult = result;\n    const parts = key.split(\".\");\n    for (let i = 0; i < parts.length; i++) {\n      const part = parts[i];\n      const isLast = i + 1 === parts.length;\n      const isIndex = !isLast && isInteger(parts[i + 1]);\n\n      if (\n        part === \"constructor\" ||\n        part === \"prototype\" ||\n        part === \"__proto__\"\n      ) {\n        throw new Error(`Disallowed key: ${part}`);\n      }\n\n      if (isLast) {\n        // $FlowFixMe\n        keyResult[part] = value;\n      } else {\n        // $FlowFixMe\n        keyResult = keyResult[part] = keyResult[part] || (isIndex ? [] : {});\n      }\n    }\n  }\n\n  return result;\n}\n\nexport type EventEmitterType = {|\n  on: (eventName: string, handler: Function) => CancelableType,\n  once: (eventName: string, handler: Function) => CancelableType,\n  trigger: (\n    eventName: string,\n    ...args: $ReadOnlyArray<mixed>\n  ) => ZalgoPromise<void>,\n  triggerOnce: (\n    eventName: string,\n    ...args: $ReadOnlyArray<mixed>\n  ) => ZalgoPromise<void>,\n  reset: () => void,\n|};\n\nexport function eventEmitter(): EventEmitterType {\n  const triggered = {};\n  let handlers = {};\n\n  const emitter = {\n    on(eventName: string, handler: Function): CancelableType {\n      const handlerList = (handlers[eventName] = handlers[eventName] || []);\n\n      handlerList.push(handler);\n\n      let cancelled = false;\n\n      return {\n        cancel() {\n          if (!cancelled) {\n            cancelled = true;\n            handlerList.splice(handlerList.indexOf(handler), 1);\n          }\n        },\n      };\n    },\n\n    once(eventName: string, handler: Function): CancelableType {\n      const listener = emitter.on(eventName, () => {\n        listener.cancel();\n        handler();\n      });\n\n      return listener;\n    },\n\n    trigger(\n      eventName: string,\n      ...args: $ReadOnlyArray<mixed>\n    ): ZalgoPromise<void> {\n      const handlerList = handlers[eventName];\n      const promises = [];\n\n      if (handlerList) {\n        for (const handler of handlerList) {\n          promises.push(ZalgoPromise.try(() => handler(...args)));\n        }\n      }\n\n      return ZalgoPromise.all(promises).then(noop);\n    },\n\n    triggerOnce(\n      eventName: string,\n      ...args: $ReadOnlyArray<mixed>\n    ): ZalgoPromise<void> {\n      if (triggered[eventName]) {\n        return ZalgoPromise.resolve();\n      }\n\n      triggered[eventName] = true;\n      return emitter.trigger(eventName, ...args);\n    },\n\n    reset() {\n      handlers = {};\n    },\n  };\n\n  return emitter;\n}\n\nexport function camelToDasherize(string: string): string {\n  return string.replace(/([A-Z])/g, (g) => {\n    return `-${g.toLowerCase()}`;\n  });\n}\n\nexport function dasherizeToCamel(string: string): string {\n  return string.replace(/-([a-z])/g, (g) => {\n    return g[1].toUpperCase();\n  });\n}\n\nexport function capitalizeFirstLetter(string: string): string {\n  return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n}\n\nexport function get(item: Object, path: string, def: mixed): mixed {\n  if (!path) {\n    return def;\n  }\n\n  const pathParts = path.split(\".\");\n\n  // Loop through each section of our key path\n\n  for (let i = 0; i < pathParts.length; i++) {\n    // If we have an object, we can get the key\n    if (typeof item === \"object\" && item !== null) {\n      item = item[pathParts[i]];\n\n      // Otherwise, we should return the default (undefined if not provided)\n    } else {\n      return def;\n    }\n  }\n\n  // If our final result is undefined, we should return the default\n\n  return item === undefined ? def : item;\n}\n\nexport function safeTimeout(method: Function, time: number) {\n  const interval = safeInterval(() => {\n    time -= 100;\n    if (time <= 0) {\n      interval.cancel();\n      method();\n    }\n  }, 100);\n}\n\nexport function defineLazyProp<T>(\n  obj: Object | $ReadOnlyArray<mixed>,\n  key: string | number,\n  getter: () => T\n) {\n  if (Array.isArray(obj)) {\n    if (typeof key !== \"number\") {\n      throw new TypeError(`Array key must be number`);\n    }\n  } else if (typeof obj === \"object\" && obj !== null) {\n    if (typeof key !== \"string\") {\n      throw new TypeError(`Object key must be string`);\n    }\n  }\n\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: true,\n    get: () => {\n      // $FlowFixMe\n      delete obj[key];\n      const value = getter();\n      // $FlowFixMe\n      obj[key] = value;\n      return value;\n    },\n    set: (value: T) => {\n      // $FlowFixMe\n      delete obj[key];\n      // $FlowFixMe\n      obj[key] = value;\n    },\n  });\n}\n\n// eslint-disable-next-line no-undef\nexport function arrayFrom<T>(item: Iterable<T>): $ReadOnlyArray<T> {\n  // $FlowFixMe[method-unbinding]\n  return Array.prototype.slice.call(item);\n}\n\nexport function isObject(item: mixed): boolean {\n  return typeof item === \"object\" && item !== null;\n}\n\nexport function isObjectObject(obj: mixed): boolean {\n  return (\n    // $FlowFixMe[method-unbinding]\n    isObject(obj) && Object.prototype.toString.call(obj) === \"[object Object]\"\n  );\n}\n\nexport function isPlainObject(obj: mixed): boolean {\n  if (!isObjectObject(obj)) {\n    return false;\n  }\n\n  // $FlowFixMe\n  const constructor = obj.constructor;\n\n  if (typeof constructor !== \"function\") {\n    return false;\n  }\n\n  const prototype = constructor.prototype;\n\n  if (!isObjectObject(prototype)) {\n    return false;\n  }\n\n  if (!prototype.hasOwnProperty(\"isPrototypeOf\")) {\n    return false;\n  }\n\n  return true;\n}\n\nexport function replaceObject<T: $ReadOnlyArray<mixed> | Object>(\n  item: T,\n  replacer: (mixed, string | number, string) => mixed,\n  fullKey: string = \"\"\n): T {\n  if (Array.isArray(item)) {\n    const length = item.length;\n    const result: Array<mixed> = [];\n\n    for (let i = 0; i < length; i++) {\n      defineLazyProp(result, i, () => {\n        const itemKey = fullKey ? `${fullKey}.${i}` : `${i}`;\n        const el = item[i];\n\n        let child = replacer(el, i, itemKey);\n\n        if (isPlainObject(child) || Array.isArray(child)) {\n          // $FlowFixMe\n          child = replaceObject(child, replacer, itemKey);\n        }\n\n        return child;\n      });\n    }\n\n    // $FlowFixMe\n    return result;\n  } else if (isPlainObject(item)) {\n    const result = {};\n\n    for (const key in item) {\n      if (!item.hasOwnProperty(key)) {\n        continue;\n      }\n\n      defineLazyProp(result, key, () => {\n        const itemKey = fullKey ? `${fullKey}.${key}` : `${key}`;\n        // $FlowFixMe\n        const el = item[key];\n\n        let child = replacer(el, key, itemKey);\n\n        if (isPlainObject(child) || Array.isArray(child)) {\n          // $FlowFixMe\n          child = replaceObject(child, replacer, itemKey);\n        }\n\n        return child;\n      });\n    }\n\n    // $FlowFixMe\n    return result;\n  } else {\n    throw new Error(`Pass an object or array`);\n  }\n}\n\nexport function copyProp(\n  source: Object,\n  target: Object,\n  name: string,\n  def: mixed\n) {\n  if (source.hasOwnProperty(name)) {\n    const descriptor = Object.getOwnPropertyDescriptor(source, name);\n    // $FlowFixMe\n    Object.defineProperty(target, name, descriptor);\n  } else {\n    target[name] = def;\n  }\n}\n\ntype RegexResultType = {|\n  text: string,\n  groups: $ReadOnlyArray<string>,\n  start: number,\n  end: number,\n  length: number,\n  replace: (text: string) => string,\n|};\n\nexport function regex(\n  pattern: string | RegExp,\n  string: string,\n  start: number = 0\n): ?RegexResultType {\n  if (typeof pattern === \"string\") {\n    // eslint-disable-next-line security/detect-non-literal-regexp\n    pattern = new RegExp(pattern);\n  }\n\n  const result = string.slice(start).match(pattern);\n\n  if (!result) {\n    return;\n  }\n\n  // $FlowFixMe\n  const index: number = result.index;\n  const regmatch = result[0];\n\n  return {\n    text: regmatch,\n    groups: result.slice(1),\n    start: start + index,\n    end: start + index + regmatch.length,\n    length: regmatch.length,\n\n    replace(text: string): string {\n      if (!regmatch) {\n        return \"\";\n      }\n\n      return `${regmatch.slice(0, start + index)}${text}${regmatch.slice(\n        index + regmatch.length\n      )}`;\n    },\n  };\n}\n\nexport function regexAll(\n  pattern: string | RegExp,\n  string: string\n): $ReadOnlyArray<RegexResultType> {\n  const matches = [];\n  let start = 0;\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const regmatch = regex(pattern, string, start);\n\n    if (!regmatch) {\n      break;\n    }\n\n    matches.push(regmatch);\n    start = match.end;\n  }\n\n  return matches;\n}\n\nexport function isDefined(value: ?mixed): boolean {\n  return value !== null && value !== undefined;\n}\n\nexport function cycle(method: Function): ZalgoPromise<void> {\n  return ZalgoPromise.try(method).then(() => cycle(method));\n}\n\nexport function debounce<T>(\n  method: (...args: $ReadOnlyArray<mixed>) => T,\n  time: number = 100\n): (...args: $ReadOnlyArray<mixed>) => void {\n  let timeout;\n\n  const debounceWrapper = function () {\n    clearTimeout(timeout);\n\n    timeout = setTimeout(() => {\n      return method.apply(this, arguments);\n    }, time);\n  };\n\n  return setFunctionName(\n    debounceWrapper,\n    `${getFunctionName(method)}::debounced`\n  );\n}\n\nexport function isRegex(item: mixed): boolean {\n  // $FlowFixMe[method-unbinding]\n  return Object.prototype.toString.call(item) === \"[object RegExp]\";\n}\n\ntype FunctionProxy<T: Function> = (method: T) => T;\n\nexport const weakMapMemoize: FunctionProxy<*> = <R: mixed>(\n  // eslint-disable-next-line flowtype/no-weak-types\n  method: (arg: any) => R\n  // eslint-disable-next-line flowtype/no-weak-types\n): ((...args: $ReadOnlyArray<any>) => R) => {\n  const weakmap = new WeakMap();\n\n  // eslint-disable-next-line flowtype/no-weak-types\n  return function weakmapMemoized(arg: any): R {\n    return weakmap.getOrSet(arg, () => method.call(this, arg));\n  };\n};\n\ntype FunctionPromiseProxy<\n  R: mixed,\n  T: (...args: $ReadOnlyArray<mixed>) => ZalgoPromise<R>\n> = (T) => T;\n\nexport const weakMapMemoizePromise: FunctionPromiseProxy<*, *> = <R: mixed>(\n  // eslint-disable-next-line flowtype/no-weak-types\n  method: (arg: any) => ZalgoPromise<R>\n  // eslint-disable-next-line flowtype/no-weak-types\n): ((...args: $ReadOnlyArray<any>) => ZalgoPromise<R>) => {\n  const weakmap = new WeakMap();\n\n  // eslint-disable-next-line flowtype/no-weak-types\n  return function weakmapMemoizedPromise(arg: any): ZalgoPromise<R> {\n    return weakmap.getOrSet(arg, () =>\n      method.call(this, arg).finally(() => {\n        weakmap.delete(arg);\n      })\n    );\n  };\n};\n\nexport function getOrSet<O: Object, T: mixed>(\n  obj: O,\n  key: string,\n  getter: () => T\n): T {\n  if (obj.hasOwnProperty(key)) {\n    return obj[key];\n  }\n\n  const val = getter();\n  obj[key] = val;\n  return val;\n}\n\nexport type CleanupType = {|\n  set: <T: mixed>(string, T) => T, // eslint-disable-line no-undef\n  register: (Function) => {| cancel: () => void |},\n  all: (err?: mixed) => ZalgoPromise<void>,\n|};\n\nexport function cleanup(obj: Object): CleanupType {\n  const tasks = [];\n  let cleaned = false;\n  let cleanErr;\n\n  const cleaner = {\n    set<T: mixed>(name: string, item: T): T {\n      if (!cleaned) {\n        obj[name] = item;\n        cleaner.register(() => {\n          delete obj[name];\n        });\n      }\n      return item;\n    },\n\n    register(method: Function): {| cancel: () => void |} {\n      const task = once(() => method(cleanErr));\n\n      if (cleaned) {\n        method(cleanErr);\n      } else {\n        tasks.push(task);\n      }\n\n      return {\n        cancel: () => {\n          const index = tasks.indexOf(task);\n          if (index !== -1) {\n            tasks.splice(index, 1);\n          }\n        },\n      };\n    },\n\n    all(err?: mixed): ZalgoPromise<void> {\n      cleanErr = err;\n\n      const results = [];\n      cleaned = true;\n\n      while (tasks.length) {\n        const task = tasks.shift();\n        results.push(task());\n      }\n\n      return ZalgoPromise.all(results).then(noop);\n    },\n  };\n\n  return cleaner;\n}\n\nexport function tryCatch<T>(\n  fn: () => T\n): {| result: T, error: void |} | {| result: void, error: mixed |} {\n  let result;\n  let error;\n\n  try {\n    result = fn();\n  } catch (err) {\n    error = err;\n  }\n\n  // $FlowFixMe\n  return { result, error };\n}\n\n// eslint-disable-next-line flowtype/no-mutable-array\nexport function removeFromArray<X, T: Array<X>>(arr: T, item: X) {\n  const index = arr.indexOf(item);\n  if (index !== -1) {\n    arr.splice(index, 1);\n  }\n}\n\nexport function assertExists<T>(name: string, thing: void | null | T): T {\n  if (thing === null || typeof thing === \"undefined\") {\n    throw new Error(`Expected ${name} to be present`);\n  }\n\n  return thing;\n}\n\nexport function unique(arr: $ReadOnlyArray<string>): $ReadOnlyArray<string> {\n  const result = {};\n  for (const item of arr) {\n    result[item] = true;\n  }\n  return Object.keys(result);\n}\n\nexport const constHas = <X: string | boolean | number, T: { [string]: X }>(\n  constant: T,\n  value: X\n): boolean => {\n  return memoizedValues(constant).indexOf(value) !== -1;\n};\n\nexport function dedupeErrors<T>(handler: (mixed) => T): (mixed) => T | void {\n  const seenErrors = [];\n  const seenStringifiedErrors = {};\n\n  return (err) => {\n    if (seenErrors.indexOf(err) !== -1) {\n      return;\n    }\n\n    seenErrors.push(err);\n\n    const stringifiedError = stringifyError(err);\n    if (seenStringifiedErrors[stringifiedError]) {\n      return;\n    }\n\n    seenStringifiedErrors[stringifiedError] = true;\n    return handler(err);\n  };\n}\n\nexport class ExtendableError extends Error {\n  constructor(message: string) {\n    super(message);\n    // eslint-disable-next-line unicorn/custom-error-definition\n    this.name = this.constructor.name;\n    if (typeof Error.captureStackTrace === \"function\") {\n      Error.captureStackTrace(this, this.constructor);\n    } else {\n      this.stack = new Error(message).stack;\n    }\n  }\n}\n\nfunction isRelativeUrlWithoutProtocol(url: string): boolean {\n  return relativeFirstCharacters.indexOf(url[0]) > -1;\n}\n\nfunction decodeHtmlCharacters(str: string): string {\n  const removedNullByte: string = str.replace(ctrlCharactersRegex, \"\");\n  return removedNullByte.replace(htmlEntitiesRegex, (matchRegex, dec) => {\n    return String.fromCharCode(dec);\n  });\n}\n\nexport function sanitizeUrl(url?: string): string {\n  if (!url) {\n    return BLANK_URL;\n  }\n\n  const sanitizedUrl = decodeHtmlCharacters(url)\n    .replace(htmlCtrlEntityRegex, \"\")\n    .replace(ctrlCharactersRegex, \"\")\n    .trim();\n\n  if (!sanitizedUrl) {\n    return BLANK_URL;\n  }\n\n  if (isRelativeUrlWithoutProtocol(sanitizedUrl)) {\n    return sanitizedUrl;\n  }\n\n  const urlSchemeParseResults = sanitizedUrl.match(urlSchemeRegex);\n\n  if (!urlSchemeParseResults) {\n    return sanitizedUrl;\n  }\n\n  const urlScheme = urlSchemeParseResults[0];\n\n  if (invalidProtocolRegex.test(urlScheme)) {\n    return BLANK_URL;\n  }\n\n  return sanitizedUrl;\n}\n","/* @flow */\n\nexport function hasNativeWeakMap() : boolean {\n\n    if (typeof WeakMap === 'undefined') {\n        return false;\n    }\n\n    if (typeof Object.freeze === 'undefined') {\n        return false;\n    }\n\n    try {\n\n        const testWeakMap = new WeakMap();\n        const testKey = {};\n        const testValue = '__testvalue__';\n\n        Object.freeze(testKey);\n\n        testWeakMap.set(testKey, testValue);\n\n        if (testWeakMap.get(testKey) === testValue) {\n            return true;\n        }\n\n        return false;\n\n    } catch (err) {\n\n        return false;\n    }\n}\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nimport isNativeFunction from \"@babel/runtime/helpers/esm/isNativeFunction\";\nimport construct from \"@babel/runtime/helpers/esm/construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","/* @flow */\n/* eslint max-lines: off */\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise/src\";\nimport {\n  linkFrameWindow,\n  isWindowClosed,\n  assertSameDomain,\n  type SameDomainWindowType,\n  type CrossDomainWindowType,\n} from \"@krakenjs/cross-domain-utils/src\";\nimport { WeakMap } from \"@krakenjs/cross-domain-safe-weakmap/src\";\n\nimport {\n  isElement,\n  inlineMemoize,\n  memoize,\n  noop,\n  stringify,\n  capitalizeFirstLetter,\n  once,\n  extend,\n  safeInterval,\n  uniqueID,\n  arrayFrom,\n  ExtendableError,\n  strHashStr,\n} from \"./util\";\nimport { isDevice } from \"./device\";\nimport { KEY_CODES, ATTRIBUTES, UID_HASH_LENGTH } from \"./constants\";\nimport type { CancelableType } from \"./types\";\n\ntype ElementRefType = string | HTMLElement;\n\nexport function getBody(): HTMLBodyElement {\n  // eslint-disable-next-line compat/compat\n  const body = document.body;\n\n  if (!body) {\n    throw new Error(`Body element not found`);\n  }\n\n  return body;\n}\n\nexport function isDocumentReady(): boolean {\n  // eslint-disable-next-line compat/compat\n  return Boolean(document.body) && document.readyState === \"complete\";\n}\n\nexport function isDocumentInteractive(): boolean {\n  // eslint-disable-next-line compat/compat\n  return Boolean(document.body) && document.readyState === \"interactive\";\n}\n\nexport function urlEncode(str: string): string {\n  return encodeURIComponent(str);\n}\n\nexport function waitForWindowReady(): ZalgoPromise<void> {\n  return inlineMemoize(waitForWindowReady, (): ZalgoPromise<void> => {\n    return new ZalgoPromise((resolve) => {\n      if (isDocumentReady()) {\n        resolve();\n      }\n\n      window.addEventListener(\"load\", () => resolve());\n    });\n  });\n}\n\ntype WaitForDocumentReady = () => ZalgoPromise<void>;\n\nexport const waitForDocumentReady: WaitForDocumentReady = memoize(() => {\n  return new ZalgoPromise((resolve) => {\n    if (isDocumentReady() || isDocumentInteractive()) {\n      return resolve();\n    }\n\n    const interval = setInterval(() => {\n      if (isDocumentReady() || isDocumentInteractive()) {\n        clearInterval(interval);\n        return resolve();\n      }\n    }, 10);\n  });\n});\n\nexport function waitForDocumentBody(): ZalgoPromise<HTMLBodyElement> {\n  return ZalgoPromise.try(() => {\n    if (document.body) {\n      return document.body;\n    }\n\n    return waitForDocumentReady().then(() => {\n      if (document.body) {\n        return document.body;\n      }\n\n      throw new Error(\"Document ready but document.body not present\");\n    });\n  });\n}\n\nexport function parseQuery(queryString: string): Object {\n  return inlineMemoize(\n    parseQuery,\n    (): Object => {\n      const params = {};\n\n      if (!queryString) {\n        return params;\n      }\n\n      if (queryString.indexOf(\"=\") === -1) {\n        return params;\n      }\n\n      for (let pair of queryString.split(\"&\")) {\n        pair = pair.split(\"=\");\n\n        if (pair[0] && pair[1]) {\n          params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n        }\n      }\n\n      return params;\n    },\n    [queryString]\n  );\n}\n\nexport function getQueryParam(name: string): string {\n  return parseQuery(window.location.search.slice(1))[name];\n}\n\nexport function urlWillRedirectPage(url: string): boolean {\n  if (url.indexOf(\"#\") === -1) {\n    return true;\n  }\n\n  if (url.indexOf(\"#\") === 0) {\n    return false;\n  }\n\n  if (url.split(\"#\")[0] === window.location.href.split(\"#\")[0]) {\n    return false;\n  }\n\n  return true;\n}\n\nexport type Query = {\n  [string]: boolean | string,\n};\n\nexport function formatQuery(obj: Query = {}): string {\n  return Object.keys(obj)\n    .filter((key) => {\n      return typeof obj[key] === \"string\" || typeof obj[key] === \"boolean\";\n    })\n    .map((key) => {\n      const val = obj[key];\n\n      if (typeof val !== \"string\" && typeof val !== \"boolean\") {\n        throw new TypeError(`Invalid type for query`);\n      }\n\n      return `${urlEncode(key)}=${urlEncode(val.toString())}`;\n    })\n    .join(\"&\");\n}\n\nexport function extendQuery(originalQuery: string, props: Query = {}): string {\n  if (!props || !Object.keys(props).length) {\n    return originalQuery;\n  }\n\n  return formatQuery({\n    ...parseQuery(originalQuery),\n    ...props,\n  });\n}\n\nexport function extendUrl(\n  url: string,\n  options: {| query?: Query, hash?: Query |}\n): string {\n  const query = options.query || {};\n  const hash = options.hash || {};\n\n  let originalUrl;\n  let originalQuery;\n  let originalHash;\n\n  [originalUrl, originalHash] = url.split(\"#\");\n  [originalUrl, originalQuery] = originalUrl.split(\"?\");\n\n  const queryString = extendQuery(originalQuery, query);\n  const hashString = extendQuery(originalHash, hash);\n\n  if (queryString) {\n    originalUrl = `${originalUrl}?${queryString}`;\n  }\n\n  if (hashString) {\n    originalUrl = `${originalUrl}#${hashString}`;\n  }\n\n  return originalUrl;\n}\n\nexport function redirect(\n  url: string,\n  win: CrossDomainWindowType = window\n): ZalgoPromise<void> {\n  return new ZalgoPromise((resolve) => {\n    win.location = url;\n    if (!urlWillRedirectPage(url)) {\n      resolve();\n    }\n  });\n}\n\nexport function hasMetaViewPort(): boolean {\n  const meta = document.querySelector(\"meta[name=viewport]\");\n\n  if (isDevice() && window.screen.width < 660 && !meta) {\n    return false;\n  }\n\n  return true;\n}\n\nexport function isElementVisible(el: HTMLElement): boolean {\n  return Boolean(\n    el.offsetWidth || el.offsetHeight || el.getClientRects().length\n  );\n}\n\nexport function getPerformance(): ?Performance {\n  return inlineMemoize(getPerformance, (): ?Performance => {\n    const performance = window.performance;\n\n    if (\n      performance &&\n      performance.now &&\n      performance.timing &&\n      performance.timing.connectEnd &&\n      performance.timing.navigationStart &&\n      Math.abs(performance.now() - Date.now()) > 1000 &&\n      performance.now() -\n        (performance.timing.connectEnd - performance.timing.navigationStart) >\n        0\n    ) {\n      return performance;\n    }\n  });\n}\n\nexport function enablePerformance(): boolean {\n  return Boolean(getPerformance());\n}\n\nexport function getPageRenderTime(): ZalgoPromise<?number> {\n  return waitForDocumentReady().then(() => {\n    const performance = getPerformance();\n\n    if (!performance) {\n      return;\n    }\n\n    const timing = performance.timing;\n\n    if (timing.connectEnd && timing.domInteractive) {\n      return timing.domInteractive - timing.connectEnd;\n    }\n  });\n}\n\nexport function htmlEncode(html: string = \"\"): string {\n  return html\n    .toString()\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#39;\")\n    .replace(/\\//g, \"&#x2F;\");\n}\n\nexport function isBrowser(): boolean {\n  return typeof window !== \"undefined\" && window.location !== undefined;\n}\n\nexport function querySelectorAll(\n  selector: string,\n  doc: HTMLElement = window.document\n): $ReadOnlyArray<HTMLElement> {\n  // $FlowFixMe[method-unbinding]\n  return Array.prototype.slice.call(doc.querySelectorAll(selector));\n}\n\n/**\n * Sets up event handlers for click events and\n * enter/space keypresses.\n * @callback handler\n * @param {HTMLElement} element\n * @param {handler} handler\n */\nexport function onClick(element: HTMLElement, handler: (Event) => void) {\n  element.addEventListener(\"touchstart\", noop, { passive: true });\n  element.addEventListener(\"click\", handler);\n  element.addEventListener(\"keypress\", (event: Event) => {\n    if (\n      // $FlowFixMe\n      event.keyCode === KEY_CODES.ENTER ||\n      // $FlowFixMe\n      event.keyCode === KEY_CODES.SPACE\n    ) {\n      return handler(event);\n    }\n  });\n}\n\nexport function getScript({\n  host = window.location.host,\n  path,\n  reverse = false,\n}: {|\n  host?: string,\n  path: string,\n  reverse?: boolean,\n|}): ?HTMLScriptElement {\n  return inlineMemoize(\n    getScript,\n    (): ?HTMLScriptElement => {\n      const url = `${host}${path}`;\n      // $FlowFixMe[method-unbinding]\n      const scripts = Array.prototype.slice.call(\n        document.getElementsByTagName(\"script\")\n      );\n\n      if (reverse) {\n        scripts.reverse();\n      }\n\n      for (const script of scripts) {\n        if (!script.src) {\n          continue;\n        }\n\n        const src = script.src.replace(/^https?:\\/\\//, \"\").split(\"?\")[0];\n\n        if (src === url) {\n          return script;\n        }\n      }\n    },\n    [path]\n  );\n}\n\nexport function isLocalStorageEnabled(): boolean {\n  return inlineMemoize(isLocalStorageEnabled, () => {\n    try {\n      if (typeof window === \"undefined\") {\n        return false;\n      }\n\n      if (window.localStorage) {\n        const value = Math.random().toString();\n        window.localStorage.setItem(\"__test__localStorage__\", value);\n        const result = window.localStorage.getItem(\"__test__localStorage__\");\n        window.localStorage.removeItem(\"__test__localStorage__\");\n        if (value === result) {\n          return true;\n        }\n      }\n    } catch (err) {\n      // pass\n    }\n    return false;\n  });\n}\n\nexport function getBrowserLocales(): $ReadOnlyArray<{|\n  country?: string,\n  lang: string,\n|}> {\n  const nav = window.navigator;\n\n  const locales = nav.languages ? [...nav.languages] : [];\n\n  if (nav.language) {\n    locales.push(nav.language);\n  }\n\n  if (nav.userLanguage) {\n    locales.push(nav.userLanguage);\n  }\n\n  return locales\n    .map((locale) => {\n      if (locale && locale.match(/^[a-z]{2}[-_][A-Z]{2}$/)) {\n        const [lang, country] = locale.split(/[-_]/);\n        return { country, lang };\n      }\n\n      if (locale && locale.match(/^[a-z]{2}$/)) {\n        return { lang: locale };\n      }\n\n      return null;\n    })\n    .filter(Boolean);\n}\n\nexport function appendChild(container: HTMLElement, child: HTMLElement | Text) {\n  container.appendChild(child);\n}\n\nexport function getElementSafe(\n  id: ElementRefType,\n  doc: Document | HTMLElement = document\n): ?HTMLElement {\n  if (isElement(id)) {\n    // $FlowFixMe\n    return id;\n  }\n\n  if (typeof id === \"string\") {\n    return doc.querySelector(id);\n  }\n}\n\nexport function getElement(\n  id: ElementRefType,\n  doc: Document | HTMLElement = document\n): HTMLElement {\n  const element = getElementSafe(id, doc);\n\n  if (element) {\n    return element;\n  }\n\n  throw new Error(`Can not find element: ${stringify(id)}`);\n}\n\nexport function elementReady(id: ElementRefType): ZalgoPromise<HTMLElement> {\n  return new ZalgoPromise((resolve, reject) => {\n    const name = stringify(id);\n    let el = getElementSafe(id);\n\n    if (el) {\n      return resolve(el);\n    }\n\n    if (isDocumentReady()) {\n      return reject(\n        new Error(`Document is ready and element ${name} does not exist`)\n      );\n    }\n\n    const interval = setInterval(() => {\n      el = getElementSafe(id);\n\n      if (el) {\n        resolve(el);\n        clearInterval(interval);\n        return;\n      }\n\n      if (isDocumentReady()) {\n        clearInterval(interval);\n        return reject(\n          new Error(`Document is ready and element ${name} does not exist`)\n        );\n      }\n    }, 10);\n  });\n}\n\n// eslint-disable-next-line unicorn/custom-error-definition\nexport class PopupOpenError extends ExtendableError {}\n\ntype PopupOptions = {|\n  name?: string,\n  width?: number,\n  height?: number,\n  top?: number,\n  left?: number,\n  status?: 0 | 1,\n  resizable?: 0 | 1,\n  toolbar?: 0 | 1,\n  menubar?: 0 | 1,\n  scrollbars?: 0 | 1,\n  closeOnUnload?: 0 | 1,\n|};\n\nexport function popup(\n  url: string,\n  options?: PopupOptions\n): CrossDomainWindowType {\n  // $FlowFixMe\n  options = options || {};\n\n  const { closeOnUnload = 1, name = \"\", width, height } = options;\n\n  let top = 0;\n  let left = 0;\n\n  if (width) {\n    if (window.outerWidth) {\n      left = Math.round((window.outerWidth - width) / 2) + window.screenX;\n    } else if (window.screen.width) {\n      left = Math.round((window.screen.width - width) / 2);\n    }\n  }\n\n  if (height) {\n    if (window.outerHeight) {\n      top = Math.round((window.outerHeight - height) / 2) + window.screenY;\n    } else if (window.screen.height) {\n      top = Math.round((window.screen.height - height) / 2);\n    }\n  }\n\n  delete options.closeOnUnload;\n  delete options.name;\n\n  if (width && height) {\n    // $FlowFixMe\n    options = {\n      top,\n      left,\n      width,\n      height,\n      status: 1,\n      toolbar: 0,\n      menubar: 0,\n      resizable: 1,\n      scrollbars: 1,\n      ...options,\n    };\n  }\n\n  const params = Object.keys(options)\n    // eslint-disable-next-line array-callback-return\n    .map((key) => {\n      // $FlowFixMe\n      if (options[key] !== null && options[key] !== undefined) {\n        return `${key}=${stringify(options[key])}`;\n      }\n    })\n    .filter(Boolean)\n    .join(\",\");\n\n  let win;\n\n  try {\n    win = window.open(url, name, params);\n  } catch (err) {\n    throw new PopupOpenError(\n      `Can not open popup window - ${err.stack || err.message}`\n    );\n  }\n\n  if (isWindowClosed(win)) {\n    const err = new PopupOpenError(`Can not open popup window - blocked`);\n    throw err;\n  }\n\n  if (closeOnUnload) {\n    window.addEventListener(\"unload\", () => win.close());\n  }\n\n  return win;\n}\n\nexport function writeToWindow(win: SameDomainWindowType, html: string) {\n  try {\n    win.document.open();\n    win.document.write(html);\n    win.document.close();\n  } catch (err) {\n    try {\n      win.location = `javascript: document.open(); document.write(${JSON.stringify(\n        html\n      )}); document.close();`;\n    } catch (err2) {\n      // pass\n    }\n  }\n}\n\nexport function writeElementToWindow(\n  win: SameDomainWindowType,\n  el: HTMLElement\n) {\n  const tag = el.tagName.toLowerCase();\n\n  if (tag !== \"html\") {\n    throw new Error(`Expected element to be html, got ${tag}`);\n  }\n\n  const documentElement = win.document.documentElement;\n\n  for (const child of arrayFrom(documentElement.children)) {\n    documentElement.removeChild(child);\n  }\n\n  for (const child of arrayFrom(el.children)) {\n    documentElement.appendChild(child);\n  }\n}\n\nexport function setStyle(\n  el: HTMLElement,\n  styleText: string,\n  doc: Document = window.document\n) {\n  // $FlowFixMe\n  if (el.styleSheet) {\n    // $FlowFixMe\n    el.styleSheet.cssText = styleText;\n  } else {\n    el.appendChild(doc.createTextNode(styleText));\n  }\n}\n\nexport type ElementOptionsType = {|\n  style?: { [string]: string },\n  id?: string,\n  class?: ?$ReadOnlyArray<string>,\n  attributes?: { [string]: string },\n  styleSheet?: ?string,\n  html?: ?string,\n|};\n\nlet awaitFrameLoadPromises: WeakMap<\n  HTMLIFrameElement,\n  ZalgoPromise<HTMLIFrameElement>\n>;\n\nexport function awaitFrameLoad(\n  frame: HTMLIFrameElement\n): ZalgoPromise<HTMLIFrameElement> {\n  awaitFrameLoadPromises = awaitFrameLoadPromises || new WeakMap();\n\n  if (awaitFrameLoadPromises.has(frame)) {\n    const promise = awaitFrameLoadPromises.get(frame);\n    if (promise) {\n      return promise;\n    }\n  }\n\n  const promise = new ZalgoPromise((resolve, reject) => {\n    frame.addEventListener(\"load\", () => {\n      linkFrameWindow(frame);\n      resolve(frame);\n    });\n\n    frame.addEventListener(\"error\", (err: Event) => {\n      if (frame.contentWindow) {\n        resolve(frame);\n      } else {\n        reject(err);\n      }\n    });\n  });\n\n  awaitFrameLoadPromises.set(frame, promise);\n\n  return promise;\n}\n\nexport function awaitFrameWindow(\n  frame: HTMLIFrameElement\n): ZalgoPromise<CrossDomainWindowType> {\n  return awaitFrameLoad(frame).then((loadedFrame) => {\n    if (!loadedFrame.contentWindow) {\n      throw new Error(`Could not find window in iframe`);\n    }\n\n    return loadedFrame.contentWindow;\n  });\n}\n\nconst getDefaultCreateElementOptions = (): ElementOptionsType => {\n  // $FlowFixMe\n  return {};\n};\n\nexport function createElement(\n  tag: string = \"div\",\n  options: ElementOptionsType = getDefaultCreateElementOptions(),\n  container: ?HTMLElement\n): HTMLElement {\n  tag = tag.toLowerCase();\n  const element = document.createElement(tag);\n\n  if (options.style) {\n    extend(element.style, options.style);\n  }\n\n  if (options.class) {\n    element.className = options.class.join(\" \");\n  }\n\n  if (options.id) {\n    element.setAttribute(\"id\", options.id);\n  }\n\n  if (options.attributes) {\n    for (const key of Object.keys(options.attributes)) {\n      element.setAttribute(key, options.attributes[key]);\n    }\n  }\n\n  if (options.styleSheet) {\n    setStyle(element, options.styleSheet);\n  }\n\n  if (container) {\n    appendChild(container, element);\n  }\n\n  if (options.html) {\n    if (tag === \"iframe\") {\n      // $FlowFixMe\n      if (!container || !element.contentWindow) {\n        throw new Error(\n          `Iframe html can not be written unless container provided and iframe in DOM`\n        );\n      }\n\n      // $FlowFixMe\n      writeToWindow(element.contentWindow, options.html);\n    } else {\n      element.innerHTML = options.html;\n    }\n  }\n\n  return element;\n}\n\ntype StringMap = {|\n  [string]: string,\n|};\n\nexport type IframeElementOptionsType = {|\n  style?: StringMap,\n  class?: ?$ReadOnlyArray<string>,\n  attributes?: StringMap,\n  styleSheet?: ?string,\n  html?: ?string,\n  url?: ?string,\n|};\n\nconst getDefaultIframeOptions = (): IframeElementOptionsType => {\n  // $FlowFixMe\n  return {};\n};\n\nconst getDefaultStringMap = (): StringMap => {\n  // $FlowFixMe\n  return {};\n};\n\nexport function iframe(\n  options: IframeElementOptionsType = getDefaultIframeOptions(),\n  container: ?HTMLElement\n): HTMLIFrameElement {\n  const attributes = options.attributes || getDefaultStringMap();\n  const style = options.style || getDefaultStringMap();\n\n  // $FlowFixMe\n  const newAttributes = {\n    allowTransparency: \"true\",\n    ...attributes,\n  };\n\n  // $FlowFixMe\n  const newStyle = {\n    backgroundColor: \"transparent\",\n    border: \"none\",\n    ...style,\n  };\n\n  const frame = createElement(\"iframe\", {\n    attributes: newAttributes,\n    style: newStyle,\n    html: options.html,\n    class: options.class,\n  });\n\n  const isIE = window.navigator.userAgent.match(/MSIE|Edge/i);\n\n  if (!frame.hasAttribute(\"id\")) {\n    frame.setAttribute(\"id\", uniqueID());\n  }\n\n  // $FlowFixMe\n  awaitFrameLoad(frame);\n\n  if (container) {\n    const el = getElement(container);\n    el.appendChild(frame);\n  }\n\n  if (options.url || isIE) {\n    frame.setAttribute(\"src\", options.url || \"about:blank\");\n  }\n\n  // $FlowFixMe\n  return frame;\n}\n\nexport function addEventListener(\n  obj: HTMLElement,\n  event: string,\n  handler: (event: Event) => void\n): CancelableType {\n  obj.addEventListener(event, handler);\n  return {\n    cancel() {\n      obj.removeEventListener(event, handler);\n    },\n  };\n}\n\nexport function bindEvents(\n  element: HTMLElement,\n  eventNames: $ReadOnlyArray<string>,\n  handler: (event: Event) => void\n): CancelableType {\n  handler = once(handler);\n\n  for (const eventName of eventNames) {\n    element.addEventListener(eventName, handler);\n  }\n\n  return {\n    cancel: once(() => {\n      for (const eventName of eventNames) {\n        element.removeEventListener(eventName, handler);\n      }\n    }),\n  };\n}\n\nconst VENDOR_PREFIXES = [\"webkit\", \"moz\", \"ms\", \"o\"];\n\nexport function setVendorCSS(\n  element: HTMLElement,\n  name: string,\n  value: string\n) {\n  // $FlowFixMe\n  element.style[name] = value;\n\n  const capitalizedName = capitalizeFirstLetter(name);\n\n  for (const prefix of VENDOR_PREFIXES) {\n    // $FlowFixMe\n    element.style[`${prefix}${capitalizedName}`] = value;\n  }\n}\n\nconst ANIMATION_START_EVENTS = [\n  \"animationstart\",\n  \"webkitAnimationStart\",\n  \"oAnimationStart\",\n  \"MSAnimationStart\",\n];\nconst ANIMATION_END_EVENTS = [\n  \"animationend\",\n  \"webkitAnimationEnd\",\n  \"oAnimationEnd\",\n  \"MSAnimationEnd\",\n];\n\nexport function animate(\n  element: ElementRefType,\n  name: string,\n  clean: (Function) => void,\n  timeout: number = 1000\n): ZalgoPromise<void> {\n  return new ZalgoPromise((resolve, reject) => {\n    const el = getElement(element);\n\n    if (!el) {\n      return resolve();\n    }\n\n    let hasStarted = false;\n\n    // eslint-disable-next-line prefer-const\n    let startTimeout;\n    let endTimeout;\n    // eslint-disable-next-line prefer-const\n    let startEvent;\n    // eslint-disable-next-line prefer-const\n    let endEvent;\n\n    function cleanUp() {\n      clearTimeout(startTimeout);\n      clearTimeout(endTimeout);\n      startEvent.cancel();\n      endEvent.cancel();\n    }\n\n    startEvent = bindEvents(el, ANIMATION_START_EVENTS, (event) => {\n      // $FlowFixMe\n      if (event.target !== el || event.animationName !== name) {\n        return;\n      }\n\n      clearTimeout(startTimeout);\n\n      event.stopPropagation();\n\n      startEvent.cancel();\n      hasStarted = true;\n\n      endTimeout = setTimeout(() => {\n        cleanUp();\n        resolve();\n      }, timeout);\n    });\n\n    endEvent = bindEvents(el, ANIMATION_END_EVENTS, (event) => {\n      // $FlowFixMe\n      if (event.target !== el || event.animationName !== name) {\n        return;\n      }\n\n      cleanUp();\n\n      if (\n        // $FlowFixMe\n        typeof event.animationName === \"string\" &&\n        event.animationName !== name\n      ) {\n        return reject(\n          `Expected animation name to be ${name}, found ${event.animationName}`\n        );\n      }\n\n      return resolve();\n    });\n\n    setVendorCSS(el, \"animationName\", name);\n\n    startTimeout = setTimeout(() => {\n      if (!hasStarted) {\n        cleanUp();\n        return resolve();\n      }\n    }, 200);\n\n    if (clean) {\n      clean(cleanUp);\n    }\n  });\n}\n\nexport function makeElementVisible(element: HTMLElement) {\n  element.style.setProperty(\"visibility\", \"\");\n}\n\nexport function makeElementInvisible(element: HTMLElement) {\n  element.style.setProperty(\"visibility\", \"hidden\", \"important\");\n}\n\nexport function showElement(element: HTMLElement) {\n  element.style.setProperty(\"display\", \"\");\n}\n\nexport function hideElement(element: HTMLElement) {\n  element.style.setProperty(\"display\", \"none\", \"important\");\n}\n\nexport function destroyElement(element: HTMLElement) {\n  if (element && element.parentNode) {\n    element.parentNode.removeChild(element);\n  }\n}\n\nexport function showAndAnimate(\n  element: HTMLElement,\n  name: string,\n  clean: (Function) => void\n): ZalgoPromise<void> {\n  const animation = animate(element, name, clean);\n  showElement(element);\n  return animation;\n}\n\nexport function animateAndHide(\n  element: HTMLElement,\n  name: string,\n  clean: (Function) => void\n): ZalgoPromise<void> {\n  return animate(element, name, clean).then(() => {\n    hideElement(element);\n  });\n}\n\nexport function addClass(element: HTMLElement, name: string) {\n  element.classList.add(name);\n}\n\nexport function removeClass(element: HTMLElement, name: string) {\n  element.classList.remove(name);\n}\n\nexport function isElementClosed(el: HTMLElement): boolean {\n  if (\n    !el ||\n    !el.parentNode ||\n    !el.ownerDocument ||\n    !el.ownerDocument.documentElement ||\n    !el.ownerDocument.documentElement.contains(el)\n  ) {\n    return true;\n  }\n  return false;\n}\n\nexport function watchElementForClose(\n  element: HTMLElement,\n  handler: () => mixed\n): CancelableType {\n  handler = once(handler);\n\n  let cancelled = false;\n  const mutationObservers = [];\n  // eslint-disable-next-line prefer-const\n  let interval;\n  // eslint-disable-next-line prefer-const\n  let sacrificialFrame;\n  let sacrificialFrameWin;\n\n  const cancel = () => {\n    cancelled = true;\n    for (const observer of mutationObservers) {\n      observer.disconnect();\n    }\n    if (interval) {\n      interval.cancel();\n    }\n    if (sacrificialFrameWin) {\n      // eslint-disable-next-line no-use-before-define\n      sacrificialFrameWin.removeEventListener(\"unload\", elementClosed);\n    }\n    if (sacrificialFrame) {\n      destroyElement(sacrificialFrame);\n    }\n  };\n\n  const elementClosed = () => {\n    if (!cancelled) {\n      handler();\n      cancel();\n    }\n  };\n\n  if (isElementClosed(element)) {\n    elementClosed();\n    return { cancel };\n  }\n\n  // Strategy 1: Mutation observer\n\n  if (window.MutationObserver) {\n    let mutationElement = element.parentElement;\n    while (mutationElement) {\n      const mutationObserver = new window.MutationObserver(() => {\n        if (isElementClosed(element)) {\n          elementClosed();\n        }\n      });\n\n      mutationObserver.observe(mutationElement, { childList: true });\n      mutationObservers.push(mutationObserver);\n      mutationElement = mutationElement.parentElement;\n    }\n  }\n\n  // Strategy 2: Sacrificial iframe\n\n  sacrificialFrame = document.createElement(\"iframe\");\n  sacrificialFrame.setAttribute(\"name\", `__detect_close_${uniqueID()}__`);\n  sacrificialFrame.style.display = \"none\";\n  awaitFrameWindow(sacrificialFrame).then((frameWin) => {\n    sacrificialFrameWin = assertSameDomain(frameWin);\n    sacrificialFrameWin.addEventListener(\"unload\", elementClosed);\n  });\n  element.appendChild(sacrificialFrame);\n\n  // Strategy 3: Poller\n\n  const check = () => {\n    if (isElementClosed(element)) {\n      elementClosed();\n    }\n  };\n  interval = safeInterval(check, 1000);\n\n  return { cancel };\n}\n\nexport function fixScripts(el: HTMLElement, doc: Document = window.document) {\n  for (const script of querySelectorAll(\"script\", el)) {\n    const parentNode = script.parentNode;\n\n    if (!parentNode) {\n      continue;\n    }\n\n    const newScript = doc.createElement(\"script\");\n    newScript.text = script.textContent;\n    parentNode.replaceChild(newScript, script);\n  }\n}\n\ntype OnResizeOptions = {|\n  width?: boolean,\n  height?: boolean,\n  interval?: number,\n  win?: SameDomainWindowType,\n|};\n\nexport function onResize(\n  el: HTMLElement,\n  handler: ({| width: number, height: number |}) => void,\n  {\n    width = true,\n    height = true,\n    interval = 100,\n    win = window,\n  }: OnResizeOptions = {}\n): {| cancel: () => void |} {\n  let currentWidth = el.offsetWidth;\n  let currentHeight = el.offsetHeight;\n  let canceled = false;\n\n  handler({ width: currentWidth, height: currentHeight });\n\n  const check = () => {\n    if (canceled || !isElementVisible(el)) {\n      return;\n    }\n\n    const newWidth = el.offsetWidth;\n    const newHeight = el.offsetHeight;\n\n    if (\n      (width && newWidth !== currentWidth) ||\n      (height && newHeight !== currentHeight)\n    ) {\n      handler({ width: newWidth, height: newHeight });\n    }\n\n    currentWidth = newWidth;\n    currentHeight = newHeight;\n  };\n\n  let observer;\n  let timeout;\n\n  win.addEventListener(\"resize\", check);\n\n  if (typeof win.ResizeObserver !== \"undefined\") {\n    observer = new win.ResizeObserver(check);\n    observer.observe(el);\n    timeout = safeInterval(check, interval * 10);\n  } else if (typeof win.MutationObserver !== \"undefined\") {\n    observer = new win.MutationObserver(check);\n    observer.observe(el, {\n      attributes: true,\n      childList: true,\n      subtree: true,\n      characterData: false,\n    });\n    timeout = safeInterval(check, interval * 10);\n  } else {\n    timeout = safeInterval(check, interval);\n  }\n\n  return {\n    cancel: () => {\n      canceled = true;\n      observer.disconnect();\n      window.removeEventListener(\"resize\", check);\n      timeout.cancel();\n    },\n  };\n}\n\nexport function getResourceLoadTime(url: string): ?number {\n  const performance = getPerformance();\n\n  if (!performance) {\n    return;\n  }\n\n  // $FlowFixMe[method-unbinding]\n  if (typeof performance.getEntries !== \"function\") {\n    return;\n  }\n\n  const entries = performance.getEntries();\n\n  for (let i = 0; i < entries.length; i++) {\n    const entry = entries[i];\n\n    if (\n      entry &&\n      entry.name &&\n      entry.name.indexOf(url) === 0 &&\n      typeof entry.duration === \"number\"\n    ) {\n      return Math.floor(entry.duration);\n    }\n  }\n}\n\nexport function isShadowElement(element: Node): boolean {\n  while (element.parentNode) {\n    element = element.parentNode;\n  }\n\n  return element.toString() === \"[object ShadowRoot]\";\n}\n\nexport function getShadowRoot(element: Node): ?Node {\n  while (element.parentNode) {\n    element = element.parentNode;\n  }\n\n  if (isShadowElement(element)) {\n    return element;\n  }\n}\n\nexport function getShadowHost(element: Node): ?HTMLElement {\n  const shadowRoot = getShadowRoot(element);\n\n  // $FlowFixMe\n  if (shadowRoot && shadowRoot.host) {\n    // $FlowFixMe\n    return shadowRoot.host;\n  }\n}\n\nexport function insertShadowSlot(element: HTMLElement): HTMLElement {\n  const shadowHost = getShadowHost(element);\n\n  if (!shadowHost) {\n    throw new Error(`Element is not in shadow dom`);\n  }\n\n  const slotName = `shadow-slot-${uniqueID()}`;\n  const slot = document.createElement(\"slot\");\n  slot.setAttribute(\"name\", slotName);\n  element.appendChild(slot);\n\n  const slotProvider = document.createElement(\"div\");\n  slotProvider.setAttribute(\"slot\", slotName);\n  shadowHost.appendChild(slotProvider);\n\n  if (isShadowElement(shadowHost)) {\n    return insertShadowSlot(slotProvider);\n  }\n\n  return slotProvider;\n}\n\nexport function preventClickFocus(el: HTMLElement) {\n  const onFocus = (event: Event) => {\n    el.removeEventListener(\"focus\", onFocus);\n    event.preventDefault();\n    el.blur();\n    return false;\n  };\n\n  el.addEventListener(\"mousedown\", () => {\n    el.addEventListener(\"focus\", onFocus);\n    setTimeout(() => {\n      el.removeEventListener(\"focus\", onFocus);\n    }, 1);\n  });\n}\n\nexport function getStackTrace(): string {\n  try {\n    throw new Error(\"_\");\n  } catch (err) {\n    return err.stack || \"\";\n  }\n}\n\nfunction inferCurrentScript(): ?HTMLScriptElement {\n  try {\n    const stack = getStackTrace();\n    const stackDetails = /.*at [^(]*\\((.*):(.+):(.+)\\)$/gi.exec(stack);\n    const scriptLocation = stackDetails && stackDetails[1];\n\n    if (!scriptLocation) {\n      return;\n    }\n\n    // $FlowFixMe[method-unbinding]\n    for (const script of Array.prototype.slice\n      .call(document.getElementsByTagName(\"script\"))\n      .reverse()) {\n      if (script.src && script.src === scriptLocation) {\n        return script;\n      }\n    }\n  } catch (err) {\n    // pass\n  }\n}\n\nlet currentScript =\n  // eslint-disable-next-line compat/compat\n  typeof document !== \"undefined\" ? document.currentScript : null;\n\ntype GetCurrentScript = () => HTMLScriptElement;\n\nexport const getCurrentScript: GetCurrentScript = memoize(() => {\n  if (currentScript) {\n    return currentScript;\n  }\n\n  currentScript = inferCurrentScript();\n\n  if (currentScript) {\n    return currentScript;\n  }\n\n  throw new Error(\"Can not determine current script\");\n});\n\nconst currentUID = uniqueID();\n\ntype GetCurrentScriptUID = () => string;\n\nexport const getCurrentScriptUID: GetCurrentScriptUID = memoize(() => {\n  let script;\n\n  try {\n    script = getCurrentScript();\n  } catch (err) {\n    return currentUID;\n  }\n\n  let uid = script.getAttribute(ATTRIBUTES.UID);\n\n  if (uid && typeof uid === \"string\") {\n    return uid;\n  }\n\n  uid = script.getAttribute(`${ATTRIBUTES.UID}-auto`);\n\n  if (uid && typeof uid === \"string\") {\n    return uid;\n  }\n\n  if (script.src) {\n    const { src, dataset } = script;\n    const stringToHash = JSON.stringify({ src, dataset });\n    const hashedString = strHashStr(stringToHash);\n    const hashResult = hashedString.slice(\n      hashedString.length - UID_HASH_LENGTH\n    );\n\n    uid = `uid_${hashResult}`;\n  } else {\n    uid = uniqueID();\n  }\n\n  script.setAttribute(`${ATTRIBUTES.UID}-auto`, uid);\n\n  return uid;\n});\n\ntype SubmitFormOptions = {|\n  url: string,\n  target: string,\n  body?: {| [string]: string | boolean |},\n  method?: string,\n|};\n\nexport function submitForm({\n  url,\n  target,\n  body,\n  method = \"post\",\n}: SubmitFormOptions) {\n  const form = document.createElement(\"form\");\n  form.setAttribute(\"target\", target);\n  form.setAttribute(\"method\", method);\n  form.setAttribute(\"action\", url);\n  form.style.display = \"none\";\n\n  if (body) {\n    for (const key of Object.keys(body)) {\n      const input = document.createElement(\"input\");\n      input.setAttribute(\"name\", key);\n      input.setAttribute(\"value\", body[key]?.toString());\n      form.appendChild(input);\n    }\n  }\n\n  getBody().appendChild(form);\n  form.submit();\n  getBody().removeChild(form);\n}\n","/* @flow */\n\nexport const KEY_CODES = {\n  ENTER: 13,\n  SPACE: 32,\n};\n\nexport const ATTRIBUTES = {\n  UID: \"data-uid\",\n};\n\nexport const UID_HASH_LENGTH = 30;\n\n/* eslint-disable no-control-regex*/\nexport const invalidProtocolRegex: RegExp =\n  /([^\\w]*)(javascript|data|vbscript)/im;\nexport const htmlEntitiesRegex: RegExp = /&#(\\w+)(^\\w|;)?/g;\nexport const htmlCtrlEntityRegex: RegExp = /&(newline|tab);/gi;\nexport const ctrlCharactersRegex: RegExp =\n  /[\\u0000-\\u001F\\u007F-\\u009F\\u2000-\\u200D\\uFEFF]/gim;\nexport const urlSchemeRegex: RegExp = /^.+(:|&colon;)/gim;\nexport const relativeFirstCharacters = [\".\", \"/\"];\nexport const BLANK_URL = \"about:blank\";\n/* eslint-enable no-control-regex*/\n","/* @flow */\n\nimport { uniqueID, getGlobal, inlineMemoize } from \"./util\";\nimport { isLocalStorageEnabled } from \"./dom\";\n\ntype Getter<T> = <T>(handler: (Object) => T) => T;\n\nexport type Storage = {|\n  getState: Getter<*>,\n  getID: () => string,\n  isStateFresh: () => boolean,\n  getSessionState: Getter<*>,\n  getSessionID: () => string,\n|};\n\nconst DEFAULT_SESSION_STORAGE = 20 * 60 * 1000;\n\nexport function getStorage({\n  name,\n  lifetime = DEFAULT_SESSION_STORAGE,\n  // a sticky session id helps to identify sdk sessions that were created by other sdks\n  // like the situation where the Braintree SDK loads the PP SDK\n  stickySessionId,\n}: {|\n  name: string,\n  lifetime?: number,\n  stickySessionId?: string,\n|}): Storage {\n  return inlineMemoize(\n    getStorage,\n    () => {\n      const STORAGE_KEY = `__${name}_storage__`;\n      const newStateID = uniqueID();\n\n      let accessedStorage;\n\n      function getState<T>(handler: (storage: Object) => T): T {\n        const localStorageEnabled = isLocalStorageEnabled();\n        let storage;\n\n        if (accessedStorage) {\n          storage = accessedStorage;\n        }\n\n        if (!storage && localStorageEnabled) {\n          const rawStorage = window.localStorage.getItem(STORAGE_KEY);\n\n          if (rawStorage) {\n            storage = JSON.parse(rawStorage);\n          }\n        }\n\n        if (!storage) {\n          storage = getGlobal()[STORAGE_KEY];\n        }\n\n        if (!storage) {\n          storage = {\n            id: newStateID,\n          };\n        }\n\n        if (!storage.id) {\n          storage.id = newStateID;\n        }\n\n        accessedStorage = storage;\n\n        const result = handler(storage);\n\n        if (localStorageEnabled) {\n          window.localStorage.setItem(STORAGE_KEY, JSON.stringify(storage));\n        } else {\n          getGlobal()[STORAGE_KEY] = storage;\n        }\n\n        accessedStorage = null;\n\n        return result;\n      }\n\n      function getID(): string {\n        return getState((storage) => storage.id);\n      }\n\n      function isStateFresh(): boolean {\n        return getID() === newStateID;\n      }\n\n      function getSession<T>(handler: (state: Object) => T): T {\n        return getState((storage) => {\n          let session = storage.__session__;\n          const now = Date.now();\n\n          if (session && now - session.created > lifetime) {\n            session = null;\n          }\n\n          if (!session) {\n            session = {\n              guid: stickySessionId || uniqueID(),\n              created: now,\n            };\n          }\n\n          storage.__session__ = session;\n\n          return handler(session);\n        });\n      }\n\n      function getSessionState<T>(handler: (state: Object) => T): T {\n        return getSession((session) => {\n          session.state = session.state || {};\n          return handler(session.state);\n        });\n      }\n\n      function getSessionID(): string {\n        return getSession((session) => session.guid);\n      }\n\n      return {\n        getState,\n        getID,\n        isStateFresh,\n        getSessionState,\n        getSessionID,\n      };\n    },\n    [{ name, lifetime }]\n  );\n}\n","/* @flow */\n\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise/src\";\nimport { type SameDomainWindowType } from \"@krakenjs/cross-domain-utils/src\";\n\ntype RequestOptionsType = {|\n  url: string,\n  method?: string,\n  headers?: { [key: string]: string },\n  json?: $ReadOnlyArray<mixed> | Object,\n  data?: { [key: string]: string },\n  body?: string,\n  win?: SameDomainWindowType,\n  timeout?: number,\n|};\n\ntype ResponseType = {|\n  status: number,\n  headers: { [string]: string },\n  body: Object,\n|};\n\nconst HEADERS = {\n  CONTENT_TYPE: \"content-type\",\n  ACCEPT: \"accept\",\n};\n\nconst headerBuilders = [];\n\nfunction parseHeaders(rawHeaders: string = \"\"): { [string]: string } {\n  const result = {};\n  for (const line of rawHeaders.trim().split(\"\\n\")) {\n    const [key, ...values] = line.split(\":\");\n    result[key.toLowerCase()] = values.join(\":\").trim();\n  }\n  return result;\n}\n\nexport function request({\n  url,\n  method = \"get\",\n  headers = {},\n  json,\n  data,\n  body,\n  win = window,\n  timeout = 0,\n}: RequestOptionsType): ZalgoPromise<ResponseType> {\n  return new ZalgoPromise((resolve, reject) => {\n    if ((json && data) || (json && body) || (data && json)) {\n      throw new Error(\n        `Only options.json or options.data or options.body should be passed`\n      );\n    }\n\n    const normalizedHeaders = {};\n\n    for (const key of Object.keys(headers)) {\n      normalizedHeaders[key.toLowerCase()] = headers[key];\n    }\n\n    if (json) {\n      normalizedHeaders[HEADERS.CONTENT_TYPE] =\n        normalizedHeaders[HEADERS.CONTENT_TYPE] || \"application/json\";\n    } else if (data || body) {\n      normalizedHeaders[HEADERS.CONTENT_TYPE] =\n        normalizedHeaders[HEADERS.CONTENT_TYPE] ||\n        \"application/x-www-form-urlencoded; charset=utf-8\";\n    }\n\n    normalizedHeaders[HEADERS.ACCEPT] =\n      normalizedHeaders[HEADERS.ACCEPT] || \"application/json\";\n\n    for (const headerBuilder of headerBuilders) {\n      const builtHeaders = headerBuilder();\n\n      for (const key of Object.keys(builtHeaders)) {\n        normalizedHeaders[key.toLowerCase()] = builtHeaders[key];\n      }\n    }\n\n    const xhr = new win.XMLHttpRequest();\n\n    xhr.addEventListener(\n      \"load\",\n      function xhrLoad(): void {\n        const responseHeaders = parseHeaders(this.getAllResponseHeaders());\n\n        if (!this.status) {\n          return reject(\n            new Error(\n              `Request to ${method.toLowerCase()} ${url} failed: no response status code.`\n            )\n          );\n        }\n\n        const contentType = responseHeaders[\"content-type\"];\n        const isJSON =\n          contentType &&\n          (contentType.indexOf(\"application/json\") === 0 ||\n            contentType.indexOf(\"text/json\") === 0);\n        let responseBody = this.responseText;\n\n        try {\n          responseBody = JSON.parse(responseBody);\n        } catch (err) {\n          if (isJSON) {\n            return reject(new Error(`Invalid json: ${this.responseText}.`));\n          }\n        }\n\n        const res = {\n          status: this.status,\n          headers: responseHeaders,\n          body: responseBody,\n        };\n\n        return resolve(res);\n      },\n      false\n    );\n\n    xhr.addEventListener(\n      \"error\",\n      (evt) => {\n        reject(\n          new Error(\n            `Request to ${method.toLowerCase()} ${url} failed: ${evt.toString()}.`\n          )\n        );\n      },\n      false\n    );\n\n    xhr.open(method, url, true);\n\n    for (const key in normalizedHeaders) {\n      if (normalizedHeaders.hasOwnProperty(key)) {\n        xhr.setRequestHeader(key, normalizedHeaders[key]);\n      }\n    }\n\n    if (json) {\n      body = JSON.stringify(json);\n    } else if (data) {\n      body = Object.keys(data)\n        .map((key) => {\n          return `${encodeURIComponent(key)}=${\n            data ? encodeURIComponent(data[key]) : \"\"\n          }`;\n        })\n        .join(\"&\");\n    }\n\n    xhr.timeout = timeout;\n    xhr.ontimeout = function xhrTimeout() {\n      reject(\n        new Error(`Request to ${method.toLowerCase()} ${url} has timed out`)\n      );\n    };\n\n    xhr.send(body);\n  });\n}\n\nexport function addHeaderBuilder(method: () => { [string]: string }) {\n  headerBuilders.push(method);\n}\n","/* @flow */\n\nexport function isPerc(str: string): boolean {\n  return typeof str === \"string\" && /^[0-9]+%$/.test(str);\n}\n\nexport function isPx(str: string): boolean {\n  return typeof str === \"string\" && /^[0-9]+px$/.test(str);\n}\n\nexport function toNum(val: string | number): number {\n  if (typeof val === \"number\") {\n    return val;\n  }\n\n  const match = val.match(/^([0-9]+)(px|%)$/);\n\n  if (!match) {\n    throw new Error(`Could not match css value from ${val}`);\n  }\n\n  return parseInt(match[1], 10);\n}\n\nexport function toPx(val: number | string): string {\n  return `${toNum(val)}px`;\n}\n\nexport function toCSS(val: number | string): string {\n  if (typeof val === \"number\") {\n    return toPx(val);\n  }\n\n  return isPerc(val) ? val : toPx(val);\n}\n\nexport function percOf(num: number, perc: string): number {\n  return parseInt((num * toNum(perc)) / 100, 10);\n}\n\nexport function normalizeDimension(dim: string | number, max: number): number {\n  if (typeof dim === \"number\") {\n    return dim;\n  } else if (isPerc(dim)) {\n    return percOf(max, dim);\n  } else if (isPx(dim)) {\n    return toNum(dim);\n  } else {\n    throw new Error(`Can not normalize dimension: ${dim}`);\n  }\n}\n","import { getPerformance, isIE } from '@krakenjs/belter/src';\n\nconst namespaced = name => `__paypal_messaging_performance__${name}`;\n\nexport const performance = getPerformance();\n\nexport const PERFORMANCE_MEASURE_KEYS = {\n    // the duration of time between beginning the first message render,\n    // to when zoid fires its Ready event\n    FIRST_RENDER_DELAY: 'firstRenderDelay',\n    // the duration of time between beginning the first modal render,\n    // to when zoid fires its Ready event\n    FIRST_MODAL_RENDER_DELAY: 'firstModalRenderDelay',\n\n    // the duration of time between beginning setup of messages & modals on\n    // the parent page, to when zoid fires its Ready event\n    SCRIPT_LOAD_DELAY: 'scriptLoadDelay',\n\n    // (PerformanceTiming.domContentLoadedEventStart is DEPRECATED, PerformanceNavigationTiming.domContentLoadedEventStart is not)\n    // the timestamp before the DOMContentLoaded event for the parent page\n    DOM_CONTENT_LOADED_EVENT_START: 'domContentLoadedEventStart',\n    // (PerformanceTiming.loadEventStart is DEPRECATED, PerformanceNavigationTiming.loadEventStart is not)\n    // when the load event was sent for the parent page\n    LOAD_EVENT_START: 'loadEventStart'\n};\n\nexport function getRequestDuration() {\n    // determine how long it took the iframe to load the banner message content\n    if (typeof performance?.getEntries !== 'function') {\n        return -1;\n    }\n\n    const validateMetric = metric => typeof metric === 'number' && metric > 0;\n\n    const requests = performance\n        .getEntries()\n        .filter(\n            ({ name, entryType }) =>\n                (entryType === 'navigation' || entryType === 'resource') &&\n                `${name}`.indexOf('/credit-presentment/smart/message') > -1\n        );\n\n    const [{ requestStart, responseStart }] = [...requests.slice(-1), {}];\n    // This measures the \"Waiting (Time To First Byte)\" for the request;\n    // how long we've spent waiting for a response after sending the request\n    return validateMetric(requestStart) && validateMetric(responseStart) ? responseStart - requestStart : -1;\n    // NOTE: PerformanceNavigationTiming.requestStart and PerformanceNavigationTiming.responseStart are DEPRECATED\n    // A suitable alternative that measures the value found in the Network tab of Dev Tools could not be found.\n    // https://w3c.github.io/navigation-timing/timestamp-diagram.svg\n}\n\nexport function getPerformanceMeasure(name) {\n    return performance?.getEntriesByName(namespaced(name))[0]?.duration ?? -1;\n}\n\nexport function getNavigationTiming(name) {\n    const entry = performance?.getEntriesByType('navigation')[0];\n\n    return entry?.[name] ?? -1;\n}\n\nexport function clearPerformance() {\n    if (performance) {\n        Object.values(PERFORMANCE_MEASURE_KEYS).forEach(name => {\n            performance.clearMarks(namespaced(name));\n            performance.clearMeasures(namespaced(name));\n        });\n    }\n}\n\nexport function addPerformanceMeasure(name, { startMark, endMark, repeat } = {}) {\n    if (performance) {\n        const existing = getPerformanceMeasure(name);\n\n        // Do not track additional values for existing marks\n        if (existing !== -1) {\n            if (!repeat) {\n                return;\n            }\n\n            performance.clearMeasures(namespaced(name));\n            performance.clearMarks(namespaced(name));\n        }\n\n        /* eslint-disable no-unused-expressions, flowtype/no-unused-expressions */\n        isIE()\n            ? performance.measure(namespaced(name))\n            : performance.measure(\n                  namespaced(name),\n                  startMark ? namespaced(startMark) : undefined,\n                  endMark ? namespaced(endMark) : undefined\n              );\n        /* eslint-enable no-unused-expressions, flowtype/no-unused-expressions */\n        performance.mark(namespaced(name));\n    }\n}\n","/* @flow */\nimport { sfvcScreens } from \"./screenHeights\";\n\nexport function getUserAgent(): string {\n  return window.navigator.mockUserAgent || window.navigator.userAgent;\n}\n\nconst TABLET_PATTERN =\n  /ip(a|ro)d|silk|xoom|playbook|tablet|kindle|Nexus 7|GT-P10|SC-01C|SHW-M180S|SM-T320|SGH-T849|SCH-I800|SHW-M180L|SPH-P100|SGH-I987|zt180|HTC( Flyer|_Flyer)|Sprint ATP51|ViewPad7|pandigital(sprnova|nova)|Ideos S7|Dell Streak 7|Advent Vega|A101IT|A70BHT|MID7015|Next2|nook|FOLIO|MB511.*RUTEM|Mac OS.*Silk/i;\n\nexport function isDevice(userAgent?: string = getUserAgent()): boolean {\n  if (\n    userAgent.match(\n      /Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i\n    )\n  ) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function isTablet(userAgent?: string = getUserAgent()): boolean {\n  return TABLET_PATTERN.test(userAgent);\n}\n\nexport function isWebView(ua?: string = getUserAgent()): boolean {\n  return (\n    /(iPhone|iPod|iPad|Macintosh).*AppleWebKit(?!.*Safari)|.*WKWebView/i.test(\n      ua\n    ) ||\n    /\\bwv\\b/.test(ua) ||\n    /Android.*Version\\/(\\d)\\.(\\d)/i.test(ua)\n  );\n}\n\nexport function isStandAlone(): boolean {\n  return (\n    window.navigator.standalone === true ||\n    window.matchMedia(\"(display-mode: standalone)\").matches\n  );\n}\n\nexport function isFacebookWebView(ua?: string = getUserAgent()): boolean {\n  return /FBAN/.test(ua) || /FBAV/.test(ua);\n}\n\nexport function isFirefox(ua?: string = getUserAgent()): boolean {\n  return /Firefox/i.test(ua);\n}\n\nexport function isFirefoxIOS(ua?: string = getUserAgent()): boolean {\n  return /FxiOS/i.test(ua);\n}\n\nexport function isEdgeIOS(ua?: string = getUserAgent()): boolean {\n  return /EdgiOS/i.test(ua);\n}\n\nexport function isOperaMini(ua?: string = getUserAgent()): boolean {\n  return /Opera Mini/i.test(ua);\n}\n\nexport function isAndroid(ua?: string = getUserAgent()): boolean {\n  return /Android/.test(ua);\n}\n\nexport function isIos(ua?: string = getUserAgent()): boolean {\n  return /iPhone|iPod|iPad/.test(ua);\n}\n\nexport function isIOS14(ua?: string = getUserAgent()): boolean {\n  return /iPhone.*OS.*(1)?(?:(1)[0-4]| [0-9])_/.test(ua);\n}\n\nexport function isGoogleSearchApp(ua?: string = getUserAgent()): boolean {\n  return /\\bGSA\\b/.test(ua);\n}\n\nexport function isQQBrowser(ua?: string = getUserAgent()): boolean {\n  return /QQBrowser/.test(ua);\n}\n\nexport function isIosWebview(ua?: string = getUserAgent()): boolean {\n  if (isIos(ua)) {\n    if (isGoogleSearchApp(ua)) {\n      return true;\n    }\n    return /.+AppleWebKit(?!.*Safari)|.*WKWebView/.test(ua);\n  }\n  return false;\n}\n\nexport function isSFVC(ua?: string = getUserAgent()): boolean {\n  if (isIos(ua)) {\n    const height = window.innerHeight;\n    const scale =\n      Math.round((window.screen.width / window.innerWidth) * 100) / 100;\n    const computedHeight = Math.round(height * scale);\n\n    let device = null;\n    if (isIOS14(ua)) {\n      device = sfvcScreens[window.outerHeight];\n    } else {\n      if (scale !== 1) {\n        return true;\n      }\n\n      device = sfvcScreens[window.outerHeight];\n    }\n\n    if (!device) {\n      return true;\n    }\n\n    if (scale > 1 && device.zoomHeight && device.zoomHeight[scale]) {\n      return device.zoomHeight[scale].indexOf(computedHeight) !== -1;\n    } else {\n      return (\n        device.textSizeHeights.indexOf(computedHeight) !== -1 ||\n        device.textSizeHeightsNoTabs.indexOf(computedHeight) !== -1\n      );\n    }\n  }\n  return false;\n}\n\nexport function isSFVCorSafari(ua?: string = getUserAgent()): boolean {\n  if (isIos(ua)) {\n    const sfvc = isSFVC(ua);\n\n    const device = isIOS14(ua) ? sfvcScreens[window.outerHeight] : null;\n\n    if (!device) {\n      return false;\n    }\n\n    const height = window.innerHeight;\n    const scale =\n      Math.round((window.screen.width / window.innerWidth) * 100) / 100;\n\n    const computedHeight = Math.round(height * scale);\n    const possibleSafariSizes = device.maybeSafari;\n\n    let maybeSafari = false;\n    if (\n      scale > 1 &&\n      possibleSafariSizes[scale] &&\n      possibleSafariSizes[scale].indexOf(computedHeight) !== -1\n    ) {\n      maybeSafari = true;\n    }\n\n    return sfvc || maybeSafari;\n  }\n  return false;\n}\n\nexport function isAndroidWebview(ua?: string = getUserAgent()): boolean {\n  if (isAndroid(ua)) {\n    return /Version\\/[\\d.]+/.test(ua) && !isOperaMini(ua);\n  }\n  return false;\n}\n\nexport function isIE(): boolean {\n  if (window.document.documentMode) {\n    return true;\n  }\n\n  return Boolean(\n    window.navigator &&\n      window.navigator.userAgent &&\n      /Edge|MSIE|rv:11/i.test(window.navigator.userAgent)\n  );\n}\n\nexport function isIECompHeader(): boolean {\n  const mHttp = window.document.querySelector(\n    'meta[http-equiv=\"X-UA-Compatible\"]'\n  );\n  const mContent = window.document.querySelector('meta[content=\"IE=edge\"]');\n  if (mHttp && mContent) {\n    return true;\n  }\n  return false;\n}\n\nexport function isElectron(): boolean {\n  if (\n    typeof process !== \"undefined\" &&\n    process.versions &&\n    process.versions.electron\n  ) {\n    return true;\n  }\n  return false;\n}\n\nexport function isIEIntranet(): boolean {\n  // This status check only works for older versions of IE with document.documentMode set\n\n  if (window.document.documentMode) {\n    try {\n      const status = window.status;\n\n      window.status = \"testIntranetMode\";\n\n      if (window.status === \"testIntranetMode\") {\n        window.status = status;\n\n        return true;\n      }\n\n      return false;\n    } catch (err) {\n      return false;\n    }\n  }\n\n  return false;\n}\n\nexport function isMacOsCna(): boolean {\n  const userAgent = getUserAgent();\n  return /Macintosh.*AppleWebKit(?!.*Safari)/i.test(userAgent);\n}\n\nexport function supportsPopups(ua?: string = getUserAgent()): boolean {\n  return !(\n    isWebView(ua) ||\n    isIosWebview(ua) ||\n    isAndroidWebview(ua) ||\n    isOperaMini(ua) ||\n    isFirefoxIOS(ua) ||\n    isEdgeIOS(ua) ||\n    isFacebookWebView(ua) ||\n    isQQBrowser(ua) ||\n    isElectron() ||\n    isMacOsCna() ||\n    isStandAlone()\n  );\n}\n\nexport function isChrome(ua?: string = getUserAgent()): boolean {\n  return (\n    /Chrome|Chromium|CriOS/.test(ua) && !/SamsungBrowser|Silk|EdgA/.test(ua)\n  );\n}\n\nexport function isSafari(ua?: string = getUserAgent()): boolean {\n  return /Safari/.test(ua) && !isChrome(ua) && !/Silk|FxiOS|EdgiOS/.test(ua);\n}\n\nexport function isApplePaySupported(): boolean {\n  try {\n    if (\n      window.ApplePaySession &&\n      window.ApplePaySession.supportsVersion(3) &&\n      window.ApplePaySession.canMakePayments()\n    ) {\n      return true;\n    }\n  } catch (e) {\n    return false;\n  }\n\n  return false;\n}\n\nexport function isCrossSiteTrackingEnabled(expectedCookieKey: string): boolean {\n  return window.document.cookie.indexOf(expectedCookieKey) === -1;\n}\n","import arrayIncludes from 'core-js-pure/stable/array/includes';\nimport objectEntries from 'core-js-pure/stable/object/entries';\n\n/**\n * One way diff that returns an object with key/values\n * that are different from original to updated\n * @param {Object} original First object\n * @param {Object} updated Second object\n * @returns {Object} Diff object\n */\nexport function objectDiff(original, updated) {\n    return objectEntries(updated).reduce((accumulator, [key, val]) => {\n        // If key does not exist on original object and check against key with value of undefined or null\n        if (!original[key] && original[key] !== val) {\n            return {\n                ...accumulator,\n                [key]: val\n            };\n        }\n        if (typeof val !== 'object' || val === null) {\n            if (val !== original[key]) {\n                return {\n                    ...accumulator,\n                    [key]: val\n                };\n            }\n            return accumulator;\n        }\n        if (Array.isArray(val)) {\n            if (Array.isArray(original[key])) {\n                const diff = val.filter(x => !arrayIncludes(original[key], x));\n                if (diff.length > 0) {\n                    return {\n                        ...accumulator,\n                        [key]: diff\n                    };\n                }\n                return accumulator;\n            }\n            return {\n                ...accumulator,\n                [key]: val\n            };\n        }\n\n        const diff = objectDiff(original[key], val);\n        if (Object.keys(diff).length > 0) {\n            return {\n                ...accumulator,\n                [key]: diff\n            };\n        }\n\n        return accumulator;\n    }, {});\n}\n\n/**\n * Deep clone an object\n * @param {Object} a Any object\n * @returns {Object} Cloned object\n */\nexport function objectClone(a) {\n    return objectEntries(a).reduce((accumulator, [key, val]) => {\n        if (Array.isArray(val)) {\n            return {\n                ...accumulator,\n                [key]: [...val]\n            };\n        }\n        if (typeof val === 'object') {\n            return {\n                ...accumulator,\n                [key]: objectClone(val)\n            };\n        }\n\n        return {\n            ...accumulator,\n            [key]: val\n        };\n    }, {});\n}\n\n/**\n * Create a new object with the second object merged into the first\n * @param {Object} a Base object\n * @param {Object} b Object to be merged in\n * @returns {Object} Merged object\n */\nexport function objectMerge(a, b) {\n    const clone = objectClone(a);\n\n    return (function deepMerge(targetObject, mergingObject) {\n        return objectEntries(mergingObject).reduce((accumulator, [key, val]) => {\n            // Just overwrite if val is an array\n            if (Array.isArray(val)) {\n                return {\n                    ...accumulator,\n                    [key]: [...val]\n                };\n            }\n\n            // Overwrite if non-existent on targetObject or not an object\n            if (\n                typeof val === 'object' &&\n                val !== null &&\n                (!targetObject[key] || typeof targetObject[key] !== 'object' || Array.isArray(targetObject[key]))\n            ) {\n                return {\n                    ...accumulator,\n                    [key]: objectClone(val)\n                };\n            }\n\n            // Set value to deep merge of 2 objects\n            if (typeof val === 'object' && val !== null) {\n                return {\n                    ...accumulator,\n                    [key]: deepMerge(targetObject[key], val)\n                };\n            }\n\n            // Set new key value\n            return {\n                ...accumulator,\n                [key]: val\n            };\n        }, targetObject);\n    })(clone, b);\n}\n\n/**\n * Flatten object to array of deep key value strings\n * @param {Object} options Object of options\n * @param {String} prefix Prefix for current option property\n * @returns {Array<String>} Array of options as string\n */\nexport function objectFlattenToArray(options, prefix = '', delimiter = ':') {\n    return objectEntries(options).reduce((accumulator, [key, val]) => {\n        switch (typeof val) {\n            case 'object': {\n                return [...accumulator, ...objectFlattenToArray(val, `${prefix}${key}.`)];\n            }\n            case 'string':\n            default: {\n                return [...accumulator, `${prefix}${key}${delimiter}${val}`];\n            }\n        }\n    }, []);\n}\n\n/**\n * Search an object for a specific prop path\n * @param {Object} object Object to find specific prop\n * @param {String} propString String representation of nested props\n * @returns {*} Prop value or undefined\n */\nexport function objectGet(object, propString) {\n    const props = propString.split('.');\n    return props.reduce(\n        (accumulator, prop) =>\n            typeof accumulator === 'object' || typeof accumulator === 'function' ? accumulator[prop] : undefined,\n        object\n    );\n}\n\n/**\n * Set a nested property on an object\n * @param {Object} object Object to set specific prop\n * @param {String} propString String representation of nested props\n * @param {*} value Value to set\n * @returns {Object} The original object\n */\nexport function objectSet(object, propString, value) {\n    const props = propString.split('.');\n    const lastProp = props.pop();\n\n    const targetObj = props.reduce((accumulator, prop) => {\n        accumulator[prop] = accumulator[prop] || {};\n        return accumulator[prop];\n    }, object);\n\n    targetObj[lastProp] = value;\n\n    return object;\n}\n\n/**\n * Convert a string representation of an object path and value to an object\n * @param {String} option Object string path representation\n * @param {*} attributeValue Value to set on the object path\n * @param {String} delimiter Object nesting delimiter\n * @returns {Object} New nested object with provided value\n */\nexport function flattenedToObject(option, attributeValue, delimiter = '-') {\n    const firstIndex = option.indexOf(delimiter);\n\n    if (firstIndex === -1) {\n        return { [option]: attributeValue };\n    }\n\n    const key = option.slice(0, firstIndex);\n    const val = option.slice(firstIndex + 1);\n\n    return { [key]: flattenedToObject(val, attributeValue, delimiter) };\n}\n","/* @flow */\n\nexport const SUPPORTED_BROWSERS = {\n  msie: \"11\",\n  firefox: \"30\",\n  chrome: \"27\",\n  safari: \"7\",\n  opera: \"16\",\n  msedge: \"12\",\n  samsungBrowser: \"2.1\",\n  silk: \"59.3\",\n  ucbrowser: \"10.0.0.488\",\n  vivaldi: \"1.91\",\n};\n\nconst SANDBOX_ALIAS =\n  \"AZDxjDScFpQtjWTOUtWKbyN_bDt4OgqaF4eYXlewfBP4-8aqX3PiV8e1GWU6liB2CUXlkA59kJXE7M6R\";\n\nexport const CLIENT_ID_ALIAS = {\n  sandbox: SANDBOX_ALIAS,\n  sb: SANDBOX_ALIAS,\n  test: SANDBOX_ALIAS,\n};\n\nexport const URI = {\n  LOGGER: `/xoplatform/logger/api/logger`,\n  AUTH: `/v1/oauth2/token`,\n  ORDER: `/v2/checkout/orders`,\n};\n","/* @flow */\n\nimport {\n  getCurrentScriptUID,\n  ATTRIBUTES,\n  parseQuery,\n  getBrowserLocales,\n  base64decode,\n  values,\n  getCurrentScript,\n  memoize,\n  stringifyError,\n  getScript,\n} from \"@krakenjs/belter/src\";\nimport {\n  COUNTRY,\n  SDK_SETTINGS,\n  SDK_QUERY_KEYS,\n  INTENT,\n  COMMIT,\n  VAULT,\n  CURRENCY,\n  FUNDING,\n  CARD,\n  COUNTRY_LANGS,\n  DEFAULT_INTENT,\n  DEFAULT_CURRENCY,\n  DEFAULT_VAULT,\n  QUERY_BOOL,\n  LANG,\n  type LocaleType,\n  DEFAULT_SALE_COMMIT,\n  DEFAULT_NONSALE_COMMIT,\n  PAGE_TYPES,\n} from \"@paypal/sdk-constants/src\";\n\nimport { getPath, getDefaultNamespace, getSDKHost } from \"./global\";\nimport { CLIENT_ID_ALIAS } from \"./config\";\nimport { getComputedLocales } from \"./utils\";\n\ntype GetSDKScript = () => HTMLScriptElement;\n\nconst buildScriptNotFoundError = (host, path, error) => {\n  const errorString = error ? stringifyError(error) : \"\";\n\n  return new Error(\n    `PayPal Payments SDK script not found on page! Expected to find <script src=\"https://${host}${path}\">\\n\\n${errorString}`\n  );\n};\n\nexport const getSDKScript: GetSDKScript = memoize(() => {\n  if (__TEST__) {\n    const script = getScript({\n      host: getSDKHost(),\n      path: getPath(),\n      reverse: true,\n    });\n    if (!script) {\n      throw buildScriptNotFoundError(getSDKHost(), getPath());\n    }\n    return script;\n  }\n\n  try {\n    return getCurrentScript();\n  } catch (error) {\n    throw buildScriptNotFoundError(getSDKHost(), getPath(), error);\n  }\n});\n\ntype GetSDKAttributes = () => { [string]: string };\n\nexport const getSDKAttributes: GetSDKAttributes = memoize(() => {\n  const sdkScript = getSDKScript();\n  const result = {};\n  for (const attr of sdkScript.attributes) {\n    if (attr.name.indexOf(\"data-\") === 0) {\n      result[attr.name] = attr.value;\n    }\n  }\n  result[ATTRIBUTES.UID] = getCurrentScriptUID();\n  return result;\n});\n\nexport function getSDKAttribute<T: string | void>(\n  name: $Values<typeof SDK_SETTINGS>,\n  def: T\n): T {\n  // $FlowFixMe\n  return getSDKAttributes()[name] || def;\n}\n\nexport function getSDKQueryParams(): { [string]: string } {\n  const script = getSDKScript();\n  return parseQuery(script.src.split(\"?\")[1] || \"\");\n}\n\ntype GetSDKQueryParam =\n  // eslint-disable-next-line no-undef\n  (<T: string>($Values<typeof SDK_QUERY_KEYS>) => T | void) &\n    // eslint-disable-next-line no-undef\n    (<T: string>($Values<typeof SDK_QUERY_KEYS>, T) => T);\n\nexport const getSDKQueryParam: GetSDKQueryParam = <T>(name: string, def: T) => {\n  // $FlowFixMe\n  return getSDKQueryParams()[name] || def;\n};\n\nexport function getScriptUrl(): string {\n  const src = getSDKScript().getAttribute(\"src\");\n  if (!src) {\n    throw new Error(`Can not find src for sdk script`);\n  }\n  return src;\n}\n\nexport function getSDKQueryParamBool<T: boolean>(\n  name: $Values<typeof SDK_QUERY_KEYS>,\n  def?: T\n): T {\n  return (\n    // $FlowFixMe\n    getSDKQueryParam(name, def ? def.toString() : QUERY_BOOL.FALSE) ===\n    QUERY_BOOL.TRUE\n  );\n}\n\nexport function getClientID(): string {\n  const clientID = getSDKQueryParam(SDK_QUERY_KEYS.CLIENT_ID);\n\n  if (!clientID) {\n    throw new Error(\n      `Expected ${SDK_QUERY_KEYS.CLIENT_ID} parameter in sdk url`\n    );\n  }\n\n  if (CLIENT_ID_ALIAS[clientID]) {\n    return CLIENT_ID_ALIAS[clientID];\n  }\n\n  return clientID;\n}\n\nexport function getMerchantID(): $ReadOnlyArray<string> {\n  const merchantIDString = getSDKQueryParam(SDK_QUERY_KEYS.MERCHANT_ID);\n\n  if (merchantIDString === \"*\") {\n    // get multiple merchant ids or emails from data-merchant-id\n    const merchantIDAttribute = getSDKAttribute(SDK_SETTINGS.MERCHANT_ID);\n\n    if (!merchantIDAttribute) {\n      throw new Error(\n        `Must pass ${SDK_SETTINGS.MERCHANT_ID} when ${SDK_QUERY_KEYS.MERCHANT_ID}=* passed in url`\n      );\n    }\n\n    const merchantID = merchantIDAttribute.split(\",\");\n\n    if (merchantID.length <= 1) {\n      throw new Error(\n        `Must pass multiple merchant ids to ${SDK_SETTINGS.MERCHANT_ID}. If passing a single id, pass ${SDK_QUERY_KEYS.MERCHANT_ID}=XYZ in url`\n      );\n    }\n\n    // check duplicates\n    const hasDuplicate = merchantID.some(\n      (val, i) => merchantID && merchantID.indexOf(val) !== i\n    );\n\n    if (hasDuplicate) {\n      throw new Error(\n        `Duplicates ${SDK_SETTINGS.MERCHANT_ID}. Must pass unique merchant ids to ${SDK_SETTINGS.MERCHANT_ID}.`\n      );\n    }\n    return merchantID;\n  }\n\n  if (merchantIDString) {\n    return merchantIDString.split(\",\");\n  }\n\n  return [];\n}\n\nexport function getIntent(): $Values<typeof INTENT> {\n  return getSDKQueryParam(SDK_QUERY_KEYS.INTENT, DEFAULT_INTENT);\n}\n\nexport function getCommit(): $Values<typeof COMMIT> {\n  return getSDKQueryParamBool(\n    SDK_QUERY_KEYS.COMMIT,\n    getIntent() === INTENT.CAPTURE\n      ? DEFAULT_SALE_COMMIT\n      : DEFAULT_NONSALE_COMMIT\n  );\n}\n\nexport function getVault(): $Values<typeof VAULT> {\n  return getSDKQueryParamBool(SDK_QUERY_KEYS.VAULT, DEFAULT_VAULT);\n}\n\nexport function getCurrency(): $Values<typeof CURRENCY> {\n  return getSDKQueryParam(SDK_QUERY_KEYS.CURRENCY, DEFAULT_CURRENCY);\n}\n\nexport function getEnableFunding(): $ReadOnlyArray<?$Values<typeof FUNDING>> {\n  const funding = getSDKQueryParam(SDK_QUERY_KEYS.ENABLE_FUNDING);\n  if (funding) {\n    return funding.split(\",\");\n  }\n  return [];\n}\n\nexport function getDisableFunding(): $ReadOnlyArray<?$Values<typeof FUNDING>> {\n  const funding = getSDKQueryParam(SDK_QUERY_KEYS.DISABLE_FUNDING);\n  if (funding) {\n    return funding.split(\",\");\n  }\n  return [];\n}\n\nexport function getDisableCard(): $ReadOnlyArray<?$Values<typeof CARD>> {\n  const funding = getSDKQueryParam(SDK_QUERY_KEYS.DISABLE_CARD);\n  if (funding) {\n    return funding.split(\",\");\n  }\n  return [];\n}\n\nexport function getBuyerCountry(): ?$Values<typeof COUNTRY> {\n  return getSDKQueryParam(SDK_QUERY_KEYS.BUYER_COUNTRY);\n}\n\nexport function getNamespace(): string {\n  return getSDKAttribute(SDK_SETTINGS.NAMESPACE) || getDefaultNamespace();\n}\n\nexport function getClientToken(): ?string {\n  return getSDKAttribute(SDK_SETTINGS.CLIENT_TOKEN);\n}\n\nexport function getAmount(): ?string {\n  const amount = getSDKAttribute(SDK_SETTINGS.AMOUNT);\n  if (amount && !amount.match(/^\\d+\\.\\d\\d$/)) {\n    throw new Error(`Invalid amount: ${amount}`);\n  }\n  return amount;\n}\n\nexport function getUserIDToken(): ?string {\n  return getSDKAttribute(SDK_SETTINGS.USER_ID_TOKEN);\n}\n\nexport function getClientAccessToken(): ?string {\n  const clientToken = getClientToken();\n\n  if (clientToken) {\n    return JSON.parse(base64decode(clientToken)).paypal.accessToken;\n  }\n}\n\nexport function getPartnerAttributionID(): ?string {\n  return getSDKAttribute(SDK_SETTINGS.PARTNER_ATTRIBUTION_ID);\n}\n\nexport function getMerchantRequestedPopupsDisabled(): boolean {\n  return getSDKAttribute(SDK_SETTINGS.POPUPS_DISABLED) === \"true\";\n}\n\nexport function getPageType(): ?string {\n  const pageType = getSDKAttribute(SDK_SETTINGS.PAGE_TYPE, \"\");\n  const validPageType =\n    values(PAGE_TYPES).indexOf(pageType.toLowerCase()) !== -1;\n\n  if (!validPageType && pageType.length) {\n    throw new Error(`Invalid page type, '${pageType}'`);\n  }\n  return pageType.toLowerCase();\n}\n\nexport function getLocale(): LocaleType {\n  const locale = getSDKQueryParam(SDK_QUERY_KEYS.LOCALE);\n\n  if (locale) {\n    return getComputedLocales(locale);\n  }\n\n  for (let { country, lang } of getBrowserLocales()) {\n    country = country && COUNTRY[country];\n    lang = lang && LANG[lang.toUpperCase()];\n\n    if (\n      country &&\n      lang &&\n      COUNTRY_LANGS[country] &&\n      COUNTRY_LANGS[country].indexOf(lang) !== -1\n    ) {\n      return { country, lang };\n    } else if (lang) {\n      // We infer country from language if there is only one possible country match\n      const possibleCountries = Object.keys(COUNTRY_LANGS).filter((c) =>\n        COUNTRY_LANGS[c].some((l) => l === lang)\n      );\n\n      if (possibleCountries.length === 1) {\n        const possibleCountry = possibleCountries[0];\n        return { country: possibleCountry, lang };\n      }\n    }\n  }\n\n  for (const { country } of getBrowserLocales()) {\n    if (COUNTRY_LANGS.hasOwnProperty(country)) {\n      // $FlowFixMe\n      return { country, lang: COUNTRY_LANGS[country][0] };\n    }\n  }\n\n  return {\n    lang: LANG.EN,\n    country: COUNTRY.US,\n  };\n}\n\nexport function getCSPNonce(): string {\n  return getSDKAttribute(SDK_SETTINGS.CSP_NONCE) || \"\";\n}\n\nexport function getEnableThreeDomainSecure(): boolean {\n  return getSDKAttributes().hasOwnProperty(SDK_SETTINGS.ENABLE_3DS);\n}\n\nexport function getSDKIntegrationSource(): ?string {\n  return getSDKAttribute(SDK_SETTINGS.SDK_INTEGRATION_SOURCE);\n}\n\nexport function getUserExperienceFlow(): ?string {\n  return getSDKAttribute(SDK_SETTINGS.USER_EXPERIENCE_FLOW);\n}\n\nexport function getSDKToken(): ?string {\n  return getSDKAttribute(SDK_SETTINGS.SDK_TOKEN);\n}\n\n// whether in zoid window\nexport function isChildWindow(): boolean {\n  return Boolean(window.xprops);\n}\n\n// istanbul ignore next\nexport function getUserAccessToken(): ?string {\n  // pass\n}\n\n// istanbul ignore next\nexport function getUserAuthCode(): ?string {\n  // pass\n}\n\n// Remove\n// istanbul ignore next\nexport function getCountry(): $Values<typeof COUNTRY> {\n  return getLocale().country;\n}\n\n// Remove\n// istanbul ignore next\nexport function getLang(): $Values<typeof LANG> {\n  return getLocale().lang;\n}\n","/* @flow */\n\nimport {\n  ENV,\n  PROTOCOL,\n  COMPONENTS,\n  PLATFORM,\n  type FundingEligibilityType,\n} from \"@paypal/sdk-constants/src\";\nimport { isDevice } from \"@krakenjs/belter/src\";\n\nimport type { Experimentation } from \"./types\";\n\nexport function getSDKHost(): string {\n  return __SDK_HOST__;\n}\n\nexport function getProtocol(): $Values<typeof PROTOCOL> {\n  return typeof __PROTOCOL__ !== \"undefined\" ? __PROTOCOL__ : PROTOCOL.HTTPS;\n}\n\nexport function getHost(): string {\n  return __HOST__;\n}\n\nexport function getHostName(): string {\n  return __HOSTNAME__;\n}\n\nexport function getPort(): number {\n  return __PORT__;\n}\n\nexport function getPath(): string {\n  return __PATH__;\n}\n\nexport function getEnv(): $Values<typeof ENV> {\n  return __ENV__;\n}\n\nexport function getPayPalDomain(): string {\n  return __PAYPAL_DOMAIN__;\n}\n\nexport function getPayPalAPIDomain(): string {\n  return __PAYPAL_API_DOMAIN__;\n}\n\nexport function getDefaultServiceStageHost(): ?string {\n  if (\n    typeof __SERVICE_STAGE_HOST__ !== \"undefined\" &&\n    __SERVICE_STAGE_HOST__ !== null\n  ) {\n    return __SERVICE_STAGE_HOST__;\n  }\n}\n\nexport function getDefaultStageHost(): ?string {\n  if (typeof __STAGE_HOST__ !== \"undefined\" && __STAGE_HOST__ !== null) {\n    return __STAGE_HOST__;\n  }\n}\n\nexport function getDefaultAPIStageHost(): ?string {\n  const serviceStageHost = getDefaultServiceStageHost();\n  const stageHost = getDefaultStageHost();\n\n  if (serviceStageHost) {\n    return serviceStageHost;\n  } else if (stageHost) {\n    return stageHost;\n  }\n}\n\nexport function getStageHost(): ?string {\n  return getDefaultStageHost();\n}\n\nexport function getAPIStageHost(): ?string {\n  const defaultAPIStageHost = getDefaultAPIStageHost();\n\n  if (defaultAPIStageHost) {\n    return defaultAPIStageHost.replace(\"www.\", \"api.\");\n  }\n}\n\nexport function getVersion(): string {\n  return __VERSION__;\n}\n\nexport function getCorrelationID(): string {\n  return __CORRELATION_ID__;\n}\n\nexport function getDefaultNamespace(): string {\n  return __NAMESPACE__;\n}\n\nexport function getDebug(): boolean {\n  return __DEBUG__;\n}\n\nexport function getComponents(): $ReadOnlyArray<$Values<typeof COMPONENTS>> {\n  return __COMPONENTS__;\n}\n\nexport function getFundingEligibility(): FundingEligibilityType {\n  return __FUNDING_ELIGIBILITY__;\n}\n\nexport function getPlatform(): $Values<typeof PLATFORM> {\n  return isDevice() ? PLATFORM.MOBILE : PLATFORM.DESKTOP;\n}\n\n// Experiment Variable\nexport function getDisableSetCookie(): boolean {\n  if (typeof __DISABLE_SET_COOKIE__ !== \"undefined\") {\n    return __DISABLE_SET_COOKIE__;\n  }\n\n  return false;\n}\n\nexport function getExperimentation(): Experimentation | null {\n  if (typeof __EXPERIMENTATION__ !== \"undefined\") {\n    if (__EXPERIMENTATION__) {\n      const experimation: Experimentation = {};\n      if (__EXPERIMENTATION__.__EXPERIENCE__) {\n        experimation.experience = __EXPERIMENTATION__.__EXPERIENCE__;\n      }\n      if (__EXPERIMENTATION__.__TREATMENT__) {\n        experimation.treatment = __EXPERIMENTATION__.__TREATMENT__;\n      }\n      return experimation;\n    }\n  }\n\n  return null;\n}\n","/* @flow */\n\nexport const LOG_LEVEL = {\n  DEBUG: (\"debug\": \"debug\"),\n  INFO: (\"info\": \"info\"),\n  WARN: (\"warn\": \"warn\"),\n  ERROR: (\"error\": \"error\"),\n};\n\nexport const PROTOCOL = {\n  FILE: \"file:\",\n};\n","/* @flow */\n\nimport { LOG_LEVEL } from \"./constants\";\n\nexport const AUTO_FLUSH_LEVEL = [LOG_LEVEL.WARN, LOG_LEVEL.ERROR];\n\nexport const LOG_LEVEL_PRIORITY = [\n  LOG_LEVEL.ERROR,\n  LOG_LEVEL.WARN,\n  LOG_LEVEL.INFO,\n  LOG_LEVEL.DEBUG,\n];\n\nexport const FLUSH_INTERVAL = 60 * 1000;\n\nexport const DEFAULT_LOG_LEVEL: $Values<typeof LOG_LEVEL> = __DEBUG__\n  ? LOG_LEVEL.DEBUG\n  : LOG_LEVEL.WARN;\n","/* @flow */\n\nimport { type SameDomainWindowType } from \"@krakenjs/cross-domain-utils/src\";\n\nimport type { Payload } from \"./types\";\n\ntype CanUseBeaconOptions = {|\n  headers: { [string]: string },\n  enableSendBeacon: boolean,\n|};\n\nconst canUseSendBeacon = ({\n  headers,\n  enableSendBeacon,\n}: CanUseBeaconOptions): boolean => {\n  const hasHeaders = headers && Object.keys(headers).length;\n  if (\n    window &&\n    window.navigator.sendBeacon &&\n    !hasHeaders &&\n    enableSendBeacon &&\n    window.Blob\n  ) {\n    return true;\n  }\n\n  return false;\n};\n\ntype SendBeaconOptions = {|\n  win: SameDomainWindowType,\n  url: string,\n  data: JSON,\n  useBlob: boolean,\n|};\n\nconst sendBeacon = ({\n  win = window,\n  url,\n  data,\n  useBlob = true,\n}: SendBeaconOptions): boolean => {\n  try {\n    const json = JSON.stringify(data);\n\n    if (!win.navigator.sendBeacon) {\n      throw new Error(`No sendBeacon available`);\n    }\n\n    if (useBlob) {\n      const blob = new Blob([json], { type: \"application/json\" });\n      return win.navigator.sendBeacon(url, blob);\n    }\n\n    return win.navigator.sendBeacon(url, json);\n  } catch (e) {\n    return false;\n  }\n};\n\nconst extendIfDefined = (target: Payload, source: Payload) => {\n  for (const key in source) {\n    if (source.hasOwnProperty(key)) {\n      target[key] = source[key];\n    }\n  }\n};\n\nexport { canUseSendBeacon, extendIfDefined, sendBeacon };\n","/* @flow */\n\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise/src\";\nimport {\n  isBrowser,\n  promiseDebounce,\n  noop,\n  safeInterval,\n  objFilter,\n} from \"@krakenjs/belter/src\";\n\nimport {\n  DEFAULT_LOG_LEVEL,\n  LOG_LEVEL_PRIORITY,\n  AUTO_FLUSH_LEVEL,\n  FLUSH_INTERVAL,\n} from \"./config\";\nimport { LOG_LEVEL, PROTOCOL } from \"./constants\";\nimport { extendIfDefined } from \"./util\";\nimport { type Transport, getHTTPTransport } from \"./http\";\nimport type { MetricPayload, Payload } from \"./types\";\n\ntype LoggerOptions = {|\n  url?: string,\n  prefix?: string,\n  logLevel?: $Values<typeof LOG_LEVEL>,\n  transport?: Transport,\n  flushInterval?: number,\n  enableSendBeacon?: boolean,\n|};\n\ntype ClientPayload = Payload;\ntype Log = (name: string, payload?: ClientPayload) => LoggerType; // eslint-disable-line no-use-before-define\ntype Track = (payload: ClientPayload) => LoggerType; // eslint-disable-line no-use-before-define\ntype LogMetric = (payload: MetricPayload) => LoggerType; // eslint-disable-line no-use-before-define\ntype LogEvent = {|\n  level: $Values<typeof LOG_LEVEL>,\n  event: string,\n  payload: Payload,\n|};\n\ntype Builder = (Payload) => ClientPayload;\ntype AddBuilder = (Builder) => LoggerType; // eslint-disable-line no-use-before-define\n\nexport type LoggerType = {|\n  debug: Log,\n  info: Log,\n  warn: Log,\n  error: Log,\n\n  track: Track,\n  metric: LogMetric,\n\n  flush: () => ZalgoPromise<void>,\n  immediateFlush: () => ZalgoPromise<void>,\n\n  addPayloadBuilder: AddBuilder,\n  addMetaBuilder: AddBuilder,\n  addTrackingBuilder: AddBuilder,\n  addHeaderBuilder: AddBuilder,\n\n  setTransport: (Transport) => LoggerType,\n  configure: (LoggerOptions) => LoggerType,\n\n  __buffer__: {|\n    get events(): $ReadOnlyArray<LogEvent>,\n    get tracking(): $ReadOnlyArray<Payload>,\n    get metrics(): $ReadOnlyArray<MetricPayload>,\n  |},\n|};\n\nexport function Logger({\n  url,\n  prefix,\n  logLevel = DEFAULT_LOG_LEVEL,\n  transport = getHTTPTransport(),\n  flushInterval = FLUSH_INTERVAL,\n  enableSendBeacon = false,\n}: LoggerOptions): LoggerType {\n  let events: Array<LogEvent> = [];\n  let tracking: Array<Payload> = [];\n  let metrics: Array<MetricPayload> = [];\n\n  const payloadBuilders: Array<Builder> = [];\n  const metaBuilders: Array<Builder> = [];\n  const trackingBuilders: Array<Builder> = [];\n  const headerBuilders: Array<Builder> = [];\n\n  function print(\n    level: $Values<typeof LOG_LEVEL>,\n    event: string,\n    payload: Payload\n  ) {\n    if (!isBrowser() || !window.console || !window.console.log) {\n      return;\n    }\n\n    if (\n      LOG_LEVEL_PRIORITY.indexOf(level) > LOG_LEVEL_PRIORITY.indexOf(logLevel)\n    ) {\n      return;\n    }\n\n    const args = [event];\n\n    args.push(payload);\n\n    if (payload.error || payload.warning) {\n      args.push(\"\\n\\n\", payload.error || payload.warning);\n    }\n\n    try {\n      if (window.console[level] && window.console[level].apply) {\n        window.console[level].apply(window.console, args);\n      } else if (window.console.log && window.console.log.apply) {\n        window.console.log.apply(window.console, args);\n      }\n    } catch (err) {\n      // pass\n    }\n  }\n\n  function immediateFlush(): ZalgoPromise<void> {\n    return ZalgoPromise.try(() => {\n      if (!isBrowser() || window.location.protocol === PROTOCOL.FILE) {\n        return;\n      }\n\n      if (!events.length && !tracking.length && !metrics.length) {\n        return;\n      }\n\n      const meta = {};\n      for (const builder of metaBuilders) {\n        extendIfDefined(meta, builder(meta));\n      }\n\n      const headers = {};\n      for (const builder of headerBuilders) {\n        extendIfDefined(headers, builder(headers));\n      }\n\n      let res;\n\n      if (url) {\n        res = transport({\n          method: \"POST\",\n          url,\n          headers,\n          json: {\n            events,\n            meta,\n            tracking,\n            metrics,\n          },\n          enableSendBeacon,\n        }).catch(noop);\n      }\n\n      events = [];\n      tracking = [];\n      metrics = [];\n\n      return ZalgoPromise.resolve(res).then(noop);\n    });\n  }\n\n  const flush = promiseDebounce(immediateFlush);\n\n  function enqueue(\n    level: $Values<typeof LOG_LEVEL>,\n    event: string,\n    payload: Payload\n  ) {\n    events.push({\n      level,\n      event,\n      payload,\n    });\n\n    if (AUTO_FLUSH_LEVEL.indexOf(level) !== -1) {\n      flush();\n    }\n  }\n\n  function log(\n    level: $Values<typeof LOG_LEVEL>,\n    event: string,\n    payload = {}\n  ): LoggerType {\n    if (!isBrowser()) {\n      return logger; // eslint-disable-line no-use-before-define\n    }\n\n    if (prefix) {\n      event = `${prefix}_${event}`;\n    }\n\n    const logPayload: Payload = {\n      ...objFilter(payload),\n      timestamp: Date.now().toString(),\n    };\n\n    for (const builder of payloadBuilders) {\n      extendIfDefined(logPayload, builder(logPayload));\n    }\n\n    enqueue(level, event, logPayload);\n    print(level, event, logPayload);\n\n    return logger; // eslint-disable-line no-use-before-define\n  }\n\n  function addBuilder(builders, builder): LoggerType {\n    builders.push(builder);\n    return logger; // eslint-disable-line no-use-before-define\n  }\n\n  function addPayloadBuilder(builder): LoggerType {\n    return addBuilder(payloadBuilders, builder);\n  }\n\n  function addMetaBuilder(builder): LoggerType {\n    return addBuilder(metaBuilders, builder);\n  }\n\n  function addTrackingBuilder(builder): LoggerType {\n    return addBuilder(trackingBuilders, builder);\n  }\n\n  function addHeaderBuilder(builder): LoggerType {\n    return addBuilder(headerBuilders, builder);\n  }\n\n  function debug(event, payload): LoggerType {\n    return log(LOG_LEVEL.DEBUG, event, payload);\n  }\n\n  function info(event, payload): LoggerType {\n    return log(LOG_LEVEL.INFO, event, payload);\n  }\n\n  function warn(event, payload): LoggerType {\n    return log(LOG_LEVEL.WARN, event, payload);\n  }\n\n  function error(event, payload): LoggerType {\n    return log(LOG_LEVEL.ERROR, event, payload);\n  }\n\n  function track(payload = {}): LoggerType {\n    if (!isBrowser()) {\n      return logger; // eslint-disable-line no-use-before-define\n    }\n\n    const trackingPayload: Payload = objFilter(payload);\n\n    for (const builder of trackingBuilders) {\n      extendIfDefined(trackingPayload, builder(trackingPayload));\n    }\n\n    print(LOG_LEVEL.DEBUG, \"track\", trackingPayload);\n    tracking.push(trackingPayload);\n\n    return logger; // eslint-disable-line no-use-before-define\n  }\n\n  function metric(metricPayload: MetricPayload): LoggerType {\n    if (!isBrowser()) {\n      return logger; // eslint-disable-line no-use-before-define\n    }\n\n    print(\n      LOG_LEVEL.DEBUG,\n      `metric.${metricPayload.metricNamespace}`,\n      metricPayload.dimensions || {}\n    );\n\n    metrics.push(metricPayload);\n\n    return logger; // eslint-disable-line no-use-before-define\n  }\n\n  function setTransport(newTransport: Transport): LoggerType {\n    transport = newTransport;\n    return logger; // eslint-disable-line no-use-before-define\n  }\n\n  function configure(opts: LoggerOptions): LoggerType {\n    if (opts.url) {\n      url = opts.url;\n    }\n\n    if (opts.prefix) {\n      prefix = opts.prefix;\n    }\n\n    if (opts.logLevel) {\n      logLevel = opts.logLevel;\n    }\n\n    if (opts.transport) {\n      transport = opts.transport;\n    }\n\n    if (opts.flushInterval) {\n      flushInterval = opts.flushInterval;\n    }\n\n    if (opts.enableSendBeacon) {\n      enableSendBeacon = opts.enableSendBeacon;\n    }\n\n    return logger; // eslint-disable-line no-use-before-define\n  }\n\n  if (isBrowser()) {\n    safeInterval(flush, flushInterval);\n  }\n\n  if (typeof window === \"object\") {\n    window.addEventListener(\"beforeunload\", () => {\n      immediateFlush();\n    });\n\n    window.addEventListener(\"unload\", () => {\n      immediateFlush();\n    });\n\n    window.addEventListener(\"pagehide\", () => {\n      immediateFlush();\n    });\n  }\n\n  const logger = {\n    debug,\n    info,\n    warn,\n    error,\n    track,\n    metric,\n    flush,\n    immediateFlush,\n    addPayloadBuilder,\n    addMetaBuilder,\n    addTrackingBuilder,\n    addHeaderBuilder,\n    setTransport,\n    configure,\n\n    // exposed primarily for testing\n    // exposes these buffers as readonly getters only\n    __buffer__: {\n      get events(): $ReadOnlyArray<LogEvent> {\n        return events;\n      },\n      get tracking(): $ReadOnlyArray<Payload> {\n        return tracking;\n      },\n      get metrics(): $ReadOnlyArray<MetricPayload> {\n        return metrics;\n      },\n    },\n  };\n\n  // mark the __buffer__ prop as readonly\n  Object.defineProperty(logger, \"__buffer__\", { writable: false });\n\n  return logger;\n}\n","/* @flow */\n\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise/src\";\nimport { request, noop } from \"@krakenjs/belter/src\";\nimport {\n  isSameDomain,\n  assertSameDomain,\n  type CrossDomainWindowType,\n} from \"@krakenjs/cross-domain-utils/src\";\n\nimport { canUseSendBeacon, sendBeacon } from \"./util\";\n\nexport type TransportOptions = {|\n  url: string,\n  method: string,\n  headers: { [string]: string },\n  json: Object,\n  enableSendBeacon?: boolean,\n|};\n\nexport type Transport = (TransportOptions) => ZalgoPromise<void>;\n\nexport function getHTTPTransport(httpWin?: CrossDomainWindowType): Transport {\n  return ({\n    url,\n    method,\n    headers,\n    json,\n    enableSendBeacon = false,\n  }: TransportOptions): ZalgoPromise<void> => {\n    return ZalgoPromise.try(() => {\n      const httpWindow = httpWin ? httpWin : window;\n      const win = isSameDomain(httpWindow)\n        ? assertSameDomain(httpWindow)\n        : window;\n      let beaconResult = false;\n\n      if (canUseSendBeacon({ headers, enableSendBeacon })) {\n        beaconResult = sendBeacon({ win, url, data: json, useBlob: true });\n      }\n\n      return beaconResult\n        ? beaconResult\n        : request({ win, url, method, headers, json });\n    }).then(noop);\n  };\n}\n","/* @flow */\n\nimport { Logger, type LoggerType } from \"@krakenjs/beaver-logger/src\";\nimport { memoize } from \"@krakenjs/belter/src\";\n\nimport { getDisableSetCookie } from \"./global\";\nimport { getPayPalLoggerUrl } from \"./domains\";\n\ntype GetLogger = () => LoggerType;\n\nexport const getLogger: GetLogger = memoize(() => {\n  const disableSetCookieQuery = \"disableSetCookie=true\";\n\n  const loggerUrl = getDisableSetCookie()\n    ? `${getPayPalLoggerUrl()}?${disableSetCookieQuery}`\n    : getPayPalLoggerUrl();\n\n  return Logger({\n    url: loggerUrl,\n  });\n});\n","/* @flow */\n\nimport { ENV } from \"@paypal/sdk-constants/src\";\nimport {\n  getDomain,\n  getActualDomain,\n  isCurrentDomain,\n} from \"@krakenjs/cross-domain-utils/src\";\n\nimport {\n  getProtocol,\n  getStageHost,\n  getPayPalDomain,\n  getPayPalAPIDomain,\n} from \"./global\";\nimport { URI } from \"./config\";\n\nexport function getPayPalLoggerDomain(): string {\n  if (__ENV__ === ENV.LOCAL) {\n    const stageHost = getStageHost();\n\n    if (!stageHost) {\n      throw new Error(`No stage host found`);\n    }\n\n    return `${getProtocol()}://${stageHost}`;\n  }\n\n  return getPayPalDomain();\n}\n\nexport function buildPayPalUrl(path: string = \"\"): string {\n  return __TEST__ && __WEB__\n    ? `${getActualDomain()}${path}`\n    : `${getPayPalDomain()}${path}`;\n}\n\nexport function buildPayPalAPIUrl(path: string = \"\"): string {\n  const paypalAPIDomain = isCurrentDomain(getPayPalDomain())\n    ? getPayPalDomain()\n    : getPayPalAPIDomain();\n\n  return __TEST__ && __WEB__\n    ? `${getActualDomain()}${path}`\n    : `${paypalAPIDomain}${path}`;\n}\n\nexport function getPayPalLoggerUrl(): string {\n  return buildPayPalUrl(URI.LOGGER);\n}\n\nexport function getAuthAPIUrl(): string {\n  return buildPayPalAPIUrl(URI.AUTH);\n}\n\nexport function getOrderAPIUrl(): string {\n  return buildPayPalAPIUrl(URI.ORDER);\n}\n\nexport function getPayPalDomainRegex(): RegExp {\n  if (__ENV__ === ENV.LOCAL) {\n    return /.*loca.*/;\n  }\n  // eslint-disable-next-line security/detect-unsafe-regex\n  return /\\.paypal\\.(com|cn)(:\\d+)?$/;\n}\n\nexport function getVenmoDomainRegex(): RegExp {\n  // eslint-disable-next-line security/detect-unsafe-regex\n  return /http.*(\\.|\\/)venmo\\.com(:\\d*)?$/;\n}\n\nexport function isPayPalDomain(): boolean {\n  return Boolean(getDomain().match(getPayPalDomainRegex()));\n}\n\nexport function isPayPalTrustedDomain(): boolean {\n  return (\n    Boolean(getDomain().match(getPayPalDomainRegex())) ||\n    Boolean(getDomain().match(getVenmoDomainRegex()))\n  );\n}\n","/* @flow */\n\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise/src\";\nimport { memoize, request, base64encode } from \"@krakenjs/belter/src\";\nimport { FPTI_KEY, SDK_QUERY_KEYS, UNKNOWN } from \"@paypal/sdk-constants/src\";\n\nimport { getOrderAPIUrl, getAuthAPIUrl } from \"./domains\";\nimport { getLogger } from \"./logger\";\nimport {\n  getIntent,\n  getCurrency,\n  getPartnerAttributionID,\n  getMerchantID,\n} from \"./script\";\nimport { FPTI_CONTEXT_TYPE, FPTI_TRANSITION } from \"./constants\";\n\ntype ApplicationContext = {||};\n\nexport type OrderCreateRequest = {|\n  intent?: \"CAPTURE\" | \"AUTHORIZE\",\n  application_context?: ApplicationContext,\n  purchase_units: $ReadOnlyArray<{|\n    amount: {|\n      currency_code: string,\n      value: string,\n    |},\n    payee?: {|\n      merchant_id?: string,\n      email_address?: string,\n    |},\n  |}>,\n|};\n\nexport type OrderCaptureResponse = {||};\nexport type OrderGetResponse = {||};\nexport type OrderAuthorizeResponse = {||};\n\ntype CreateAccessToken = (string) => ZalgoPromise<string>;\n\nexport const createAccessToken: CreateAccessToken = memoize((clientID) => {\n  getLogger().info(`rest_api_create_access_token`);\n\n  const basicAuth = base64encode(`${clientID}:`);\n\n  return request({\n    method: `post`,\n    url: getAuthAPIUrl(),\n    headers: {\n      Authorization: `Basic ${basicAuth}`,\n    },\n    data: {\n      grant_type: `client_credentials`,\n    },\n  }).then(({ body }) => {\n    if (body && body.error === \"invalid_client\") {\n      throw new Error(\n        `Auth Api invalid client id: ${clientID}:\\n\\n${JSON.stringify(\n          body,\n          null,\n          4\n        )}`\n      );\n    }\n\n    if (!body || !body.access_token) {\n      throw new Error(\n        `Auth Api response error:\\n\\n${JSON.stringify(body, null, 4)}`\n      );\n    }\n\n    return body.access_token;\n  });\n});\n\ntype OrderCreateOptions = {|\n  fptiState?: string,\n|};\n\nconst getDefaultApplicationContext = (): ApplicationContext => {\n  // $FlowFixMe\n  return {};\n};\n\nexport function createOrder(\n  clientID: string,\n  order: OrderCreateRequest,\n  { fptiState = \"\" }: OrderCreateOptions = {}\n): ZalgoPromise<string> {\n  getLogger().info(`rest_api_create_order_token`);\n\n  if (!clientID) {\n    throw new Error(`Client ID not passed`);\n  }\n\n  if (!order) {\n    throw new Error(`Expected order details to be passed`);\n  }\n\n  const currency = getCurrency();\n  const intent = getIntent();\n  const merchantID = getMerchantID();\n\n  order = { ...order };\n\n  if (order.intent && order.intent.toLowerCase() !== intent) {\n    throw new Error(\n      `Unexpected intent: ${\n        order.intent\n      } passed to order.create. Please ensure you are passing /sdk/js?${\n        SDK_QUERY_KEYS.INTENT\n      }=${order.intent.toLowerCase()} in the paypal script tag.`\n    );\n  }\n\n  // $FlowFixMe\n  order = { ...order, intent: intent.toUpperCase() };\n\n  order.purchase_units = order.purchase_units.map((unit) => {\n    if (unit.amount.currency_code && unit.amount.currency_code !== currency) {\n      throw new Error(\n        `Unexpected currency: ${unit.amount.currency_code} passed to order.create. Please ensure you are passing /sdk/js?${SDK_QUERY_KEYS.CURRENCY}=${unit.amount.currency_code} in the paypal script tag.`\n      );\n    }\n    const payee = unit.payee;\n\n    if (payee) {\n      if (!merchantID) {\n        throw new Error(\n          `Pass ${SDK_QUERY_KEYS.MERCHANT_ID}=XYZ in the paypal script tag. Pass ${SDK_QUERY_KEYS.MERCHANT_ID}=${UNKNOWN} if you do not have access to the merchant id`\n        );\n      }\n    }\n\n    return {\n      ...unit,\n      payee,\n      amount: { ...unit.amount, currency_code: currency },\n    };\n  });\n\n  order.application_context =\n    order.application_context || getDefaultApplicationContext();\n\n  return createAccessToken(clientID)\n    .then((accessToken): ZalgoPromise<Object> => {\n      const headers: Object = {\n        Authorization: `Bearer ${accessToken}`,\n        \"PayPal-Partner-Attribution-Id\": getPartnerAttributionID(),\n      };\n\n      return request({\n        method: `post`,\n        url: getOrderAPIUrl(),\n        headers,\n        json: order,\n      });\n    })\n    .then(({ body }): string => {\n      if (!body || !body.id) {\n        throw new Error(\n          `Order Api response error:\\n\\n${JSON.stringify(body, null, 4)}`\n        );\n      }\n\n      getLogger().track({\n        [FPTI_KEY.STATE]: fptiState,\n        [FPTI_KEY.TRANSITION]: FPTI_TRANSITION.CREATE_ORDER,\n        [FPTI_KEY.CONTEXT_TYPE]: FPTI_CONTEXT_TYPE.ORDER_ID,\n        [FPTI_KEY.TOKEN]: body.id,\n        [FPTI_KEY.CONTEXT_ID]: body.id,\n      });\n\n      return body.id;\n    });\n}\n","/* @flow */\n\nimport {\n  memoize,\n  eventEmitter,\n  type EventEmitterType,\n} from \"@krakenjs/belter/src\";\n\nexport const getEventEmitter: () => EventEmitterType = memoize(eventEmitter);\n","export const OFFER = {\n    PAY_LATER_LONG_TERM: 'PAY_LATER_LONG_TERM',\n    PAY_LATER_SHORT_TERM: 'PAY_LATER_SHORT_TERM',\n    PAY_LATER_PAY_IN_1: 'PAY_LATER_PAY_IN_1',\n    PAYPAL_CREDIT_INSTALLMENTS: 'PAYPAL_CREDIT_INSTALLMENTS',\n    PAYPAL_CREDIT_NO_INTEREST: 'PAYPAL_CREDIT_NO_INTEREST'\n};\n\nexport const TAG = {\n    MESSAGE: 'paypal-message',\n    MODAL: 'paypal-credit-modal',\n    TREATEMENTS: 'paypal-credit-treatments'\n};\n","/* eslint-disable eslint-comments/disable-enable-pair, no-else-return */\nimport arrayFrom from 'core-js-pure/stable/array/from';\n\nimport { getStorage as getBelterStorage } from '@krakenjs/belter/src';\nimport { SDK_QUERY_KEYS, SDK_SETTINGS } from '@paypal/sdk-constants/src';\nimport {\n    getClientID,\n    getMerchantID,\n    getSDKScript,\n    getEnv as getSDKEnv,\n    getFundingEligibility,\n    getSDKMeta,\n    getSDKAttributes,\n    getSDKQueryParam,\n    getCSPNonce,\n    getNamespace as getSDKNamespace,\n    getDefaultNamespace as getDefaultSDKNamespace,\n    getSessionID as getSDKSessionID,\n    getStorageID as getSDKStorageID,\n    getStorageState as getSDKStorageState,\n    getPayPalDomain as getSDKPayPalDomain,\n    getDisableSetCookie as getSDKDisableCookie\n} from '@paypal/sdk-client/src';\n\nimport { TAG } from './constants';\n\nexport function getDisableSetCookie() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKDisableCookie();\n    } else {\n        return false;\n    }\n}\n\n// SDK helper functions with standalone build polyfills\nexport function getEnv() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKEnv();\n    } else {\n        return __ENV__;\n    }\n}\n\nexport function getMerchantConfig() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        // TODO: remove getFundingEligibility call and try catch after globals swap\n        try {\n            return __MESSAGING_GLOBALS__?.merchantProfile?.hash;\n        } catch {\n            return getFundingEligibility()?.paylater?.merchantConfigHash;\n        }\n    } else {\n        return undefined;\n    }\n}\n\nexport function getAccount() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        // TODO: Should we pass both up if they exist so that nodeweb can create a partner context?\n        return getMerchantID().join(',') || `client-id:${getClientID()}`;\n    } else {\n        return undefined;\n    }\n}\n\nexport function getNonce() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getCSPNonce();\n    } else {\n        return undefined;\n    }\n}\n\n// Partner accounts should always integrate using client id so no need to prefix it with 'client-id:'\nexport function getPartnerAccount() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getMerchantID()[0] && `client-id:${getClientID()}`;\n    } else {\n        return undefined;\n    }\n}\n\nconst { currentScript } = typeof document !== 'undefined' ? document : {};\nexport function getScript() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKScript();\n    } else {\n        return (\n            currentScript ||\n            document.querySelector('script[src$=\"messaging.js\"]') ||\n            document.querySelector('script[src$=\"merchant.js\"]')\n        );\n    }\n}\n\nexport function getCurrency() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        // Returns 'currency' query param without default to USD\n        return getSDKQueryParam(SDK_QUERY_KEYS.CURRENCY);\n    } else {\n        return undefined;\n    }\n}\n\nexport function getMeta() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKMeta();\n    } else {\n        return undefined;\n    }\n}\n\nexport function getScriptAttributes() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKAttributes();\n    } else {\n        return {};\n    }\n}\n\nexport function getDefaultNamespace() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getDefaultSDKNamespace();\n    } else {\n        return 'paypal';\n    }\n}\n\nexport function getNamespace() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKNamespace();\n    } else {\n        return getScript()?.getAttribute('data-pp-namespace') || getDefaultNamespace();\n    }\n}\n\nexport function getLibraryVersion() {\n    return __MESSAGES__.__VERSION__;\n}\n\nexport function isZoidComponent() {\n    // Merchants may use `zoid` to place our components inside an IFrame\n    // so we ensure that we check for the tags of our components\n    return Object.values(TAG).some(tag => window.name.startsWith(`__zoid__${tag.replace(/-/g, '_')}`));\n}\n\nexport function getStorage() {\n    return getBelterStorage({ name: getNamespace() });\n}\n\n// Use SDK methods when available, otherwise manually fetch storage via belter\n// see: https://github.com/paypal/paypal-sdk-client/blob/master/src/session.js\nexport function getSessionID() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKSessionID();\n    } else {\n        return getStorage().getSessionID();\n    }\n}\n\n// Retrieves storageID. NOTE: Creates new ID if not already in local storage.\nexport function getOrCreateDeviceID() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKStorageID();\n    } else {\n        return getStorage().getID();\n    }\n}\n\nexport function updateStorage(values) {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKStorageState(storage => Object.assign(storage, values));\n    } else {\n        return getStorage().getState(storage => Object.assign(storage, values));\n    }\n}\n\n// Check if the current script is in the process of being destroyed since\n// the MutationObservers can fire before the SDK destroy lifecycle hook\nexport const isScriptBeingDestroyed = () => {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        const currentSdkScript = getScript();\n        // URL API not supported in IE11, but anchor tags have parsed href properties\n        const location = document.createElement('a');\n        location.href = currentSdkScript.src;\n\n        // Ensure that there are currently no other SDK scripts that might be in the process of destroying this script\n        return arrayFrom(document.querySelectorAll(`script[src*=\"${location.host}/sdk/js\"]`)).some(\n            script =>\n                script !== currentSdkScript &&\n                script.getAttribute(SDK_SETTINGS.NAMESPACE) === currentSdkScript.getAttribute(SDK_SETTINGS.NAMESPACE)\n        );\n    } else {\n        return false;\n    }\n};\n\nexport function getPayPalDomain() {\n    if (getEnv() !== 'production' && getEnv() !== 'sandbox') {\n        const testEnviroment = window.__TEST_ENV__ ?? __MESSAGES__.__TEST_ENV__;\n\n        if (testEnviroment) {\n            return testEnviroment;\n        }\n\n        // eslint-disable-next-line security/detect-unsafe-regex\n        if (window.location.origin.match(/\\.paypal\\.com(:\\d+)?$/)) {\n            return window.location.origin;\n        }\n    }\n\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKPayPalDomain();\n    } else {\n        const domain = __MESSAGES__.__DOMAIN__[`__${getEnv().toUpperCase()}__`];\n\n        if (domain) {\n            return domain;\n        }\n\n        throw new Error('Missing PayPal Domain');\n    }\n}\n\nexport function getStageTag() {\n    if (__MESSAGES__.__STAGE_TAG__) {\n        if (__MESSAGES__.__STAGE_TAG__ === 'local') {\n            return window.location.origin;\n        } else {\n            return __MESSAGES__.__STAGE_TAG__;\n        }\n    } else {\n        return undefined;\n    }\n}\nexport function getDevTouchpoint() {\n    const devTouchpoint = window.__DEV_TOUCHPOINT__ ?? __MESSAGES__.__DEV_TOUCHPOINT__;\n    if (devTouchpoint && getEnv() !== 'production' && getEnv() !== 'sandbox') {\n        return true;\n    } else {\n        return undefined; // Prevent the zoid query param\n    }\n}\nexport function getFeatures() {\n    if (getDisableSetCookie()) {\n        return 'disable-set-cookie';\n    } else {\n        return undefined;\n    }\n}\n","import { isZoidComponent } from './sdk';\n/**\n * Messaging debug log. When the query param \"pp_debug\" is used on a page with a message and set to \"true\", a series of logs will appear\n * within the browser's developer tools console.\n * @param {string} message - The name of the parameter you are logging out. Also often times includes the parameter to be logged\n * within a template string.\n * @param {object} debugObj - Optional argument used in cases where the property you wish to log is an object. i.e.\n * an HTML element. ppDebug('Script:', { debugObj: script }).\n * @param {boolean} inZoid - Optional argument. Set inZoid to true if you wish to log inside of the iframe. i.e. ppDebug('Sample message', {inZoid: true}). Not using this\n * argument defaults inZoid to false.\n */\nexport function ppDebug(message, { inZoid, debugObj } = {}) {\n    if (/(\\?|&)pp_debug=true(&|$)/.test(window.location.search) && !!inZoid === isZoidComponent()) {\n        // eslint-disable-next-line no-console\n        console.warn('PayPal Messages Debug:', message, debugObj ?? '');\n    }\n}\n","import arrayFind from 'core-js-pure/stable/array/find';\nimport arrayFrom from 'core-js-pure/stable/array/from';\nimport arrayFlatMap from 'core-js-pure/stable/array/flat-map';\nimport arrayIncludes from 'core-js-pure/stable/array/includes';\nimport stringStartsWith from 'core-js-pure/stable/string/starts-with';\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\n\nimport { curry } from './functional';\nimport { objectMerge, flattenedToObject } from './objects';\nimport { ppDebug } from './debug';\n\nexport const getWindowFromElement = node => node?.ownerDocument?.defaultView;\n\nexport const getTopWindow = () => {\n    try {\n        // Try to access body which will throw an error if cross domain\n        return window.top.document.body && window.top;\n    } catch (err) {\n        return undefined;\n    }\n};\n\n/**\n * Check if object is an HTMLElement instance\n * @param {HTMLElement} el Element to check\n * @returns {Boolean} Is an HTMLElement\n */\nexport function isElement(el) {\n    return typeof HTMLElement === 'object'\n        ? el instanceof HTMLElement\n        : el && typeof el === 'object' && el !== null && el.nodeType === 1 && typeof el.nodeName === 'string';\n}\n\n/**\n * Return options object from valid container data attributes\n * @param {HTMLElement} container Container element with data attributes\n * @returns {Object} Options object\n */\nexport function getInlineOptions(container) {\n    // Allows for data attributes dependent on camel casing to function properly.\n    const attributeNameOverride = {\n        buyercountry: 'buyerCountry',\n        merchantid: 'merchantId',\n        cspnonce: 'cspNonce',\n        ectoken: 'ecToken',\n        customerid: 'customerId',\n        fontfamily: 'fontFamily',\n        fontsource: 'fontSource',\n        onclick: 'onClick',\n        onapply: 'onApply',\n        onrender: 'onRender',\n        'style-text-fontfamily': 'style-text-fontFamily',\n        'style-text-fontsource': 'style-text-fontSource'\n    };\n\n    const inlineEventHandlers = ['onclick', 'onapply', 'onrender'];\n\n    const getOptionValue = (name, value) => {\n        if (stringStartsWith(value, '[')) {\n            try {\n                return flattenedToObject(name, JSON.parse(value.replace(/'/g, '\"')));\n            } catch (err) {} // eslint-disable-line no-empty\n        }\n        return flattenedToObject(name, value);\n    };\n\n    const dataOptions = arrayFrom(container.attributes)\n        .filter(({ nodeName }) => stringStartsWith(nodeName, 'data-pp-'))\n        .reduce((accumulator, { nodeName, nodeValue }) => {\n            if (nodeValue) {\n                const attributeName = nodeName.replace('data-pp-', '');\n                const value = arrayIncludes(inlineEventHandlers, attributeName)\n                    ? // eslint-disable-next-line no-new-func\n                      new Function(nodeValue)\n                    : nodeValue;\n\n                return objectMerge(\n                    accumulator,\n                    getOptionValue(attributeNameOverride[attributeName] ?? attributeName, value)\n                );\n            }\n\n            return accumulator;\n        }, {});\n\n    if (\n        !container.firstElementChild ||\n        container.firstElementChild.tagName !== 'SCRIPT' ||\n        container.firstElementChild.getAttribute('type') !== 'text/template'\n    ) {\n        return dataOptions;\n    }\n\n    // For custom banners with inline markup\n    const markup = container.firstElementChild.textContent.trim();\n    container.removeChild(container.firstElementChild);\n\n    return objectMerge(dataOptions, { style: { markup } });\n}\n\n/**\n * Search for the first element of specified class name\n * @param {HTMLElement} container Container to search for element\n * @param {String} className Base element class name without prefix\n * @returns {HTMLElement} Matched element\n */\nexport const getElement = curry(\n    (prefix, container, className) => container.getElementsByClassName(`${prefix}__${className}`)[0]\n);\n\n/**\n * Create a new style element and prepend it to the container\n * @param {HTMLElement} container Container element to prepend new style\n * @param {String} text Text content of the style element\n * @returns {void}\n */\nexport const prependStyle = curry((container, text) => {\n    const elem = document.createElement('style');\n    elem.textContent = text;\n    container.insertBefore(elem, container.firstChild);\n});\n\n/**\n * Append text data into the container element\n * @param {HTMLElement} container Container element to append text\n * @param {any} obj Various inputs representing text to be appended\n * @returns {void}\n */\nexport const appendText = curry((container, obj) => {\n    if (Array.isArray(obj)) {\n        obj.forEach(elem => container.appendChild(elem));\n    } else if (obj instanceof HTMLElement) {\n        container.appendChild(obj);\n    } else if (typeof obj === 'string') {\n        const span = document.createElement('span');\n        span.innerHTML = obj;\n        container.appendChild(span);\n    } else if (obj === false) {\n        container.parentNode.removeChild(container);\n    }\n});\n\n/**\n * Append text data into the container element\n * @param {HTMLElement} container Container element to append text\n * @param {any} obj Various inputs representing text to be appended\n * @returns {void}\n */\nexport const prependText = curry((container, obj) => {\n    if (Array.isArray(obj)) {\n        [...obj].reverse().forEach(elem => container.insertBefore(elem, container.firstChild));\n    } else if (obj instanceof HTMLElement) {\n        container.insertBefore(obj, container.firstChild);\n    } else if (typeof obj === 'string') {\n        const span = document.createElement('span');\n        span.innerHTML = obj;\n        container.insertBefore(span, container.firstChild);\n    } else if (obj === false) {\n        container.parentNode.removeChild(container);\n    }\n});\n\n/**\n * Append a new image into the container element\n * @param {HTMLElement} container Container element to append image\n * @param {String} url Image src attribute\n * @param {String} alt Image alt attribute\n * @param {String} srcset Image srcset attribute\n * @returns {void}\n */\nexport const appendImage = curry((container, url, alt = 'PayPal Credit', srcset = '') => {\n    if (Array.isArray(url)) {\n        url.forEach(logo => appendImage(container, logo, alt));\n    } else if (typeof url === 'string') {\n        const logo = new Image();\n        logo.alt = alt;\n        logo.className = 'message__logo';\n        logo.src = url;\n\n        if (srcset) {\n            logo.srcset = srcset;\n        }\n\n        container.appendChild(logo);\n    } else if (typeof url === 'object') {\n        const {\n            src,\n            dimensions: [width, height]\n        } = url;\n\n        const logo = new Image();\n        logo.src = src;\n        logo.alt = alt;\n\n        const svgWrapper = document.createElement('div');\n        svgWrapper.className = 'message__logo message__logo--svg';\n\n        const canvas = document.createElement('canvas');\n        canvas.height = height;\n        canvas.width = width;\n\n        svgWrapper.appendChild(logo);\n        svgWrapper.appendChild(canvas);\n        container.appendChild(svgWrapper);\n    } else {\n        container.parentNode.removeChild(container);\n    }\n}, 2); // Need to manually set curry arity because of default parameters and transpiling\n\n/**\n * Ensure element is ready to be worked with. Necessary since\n * creating an iframe is asynchronous\n * @param {HTMLElement} element HTML Element\n * @returns {Promise<void>} Promise resolves when element is ready\n */\nexport const waitForElementReady = element =>\n    new ZalgoPromise(resolve => {\n        if (element.tagName === 'IFRAME' && element.contentWindow.document.readyState !== 'complete') {\n            element.addEventListener('load', resolve);\n        } else {\n            resolve();\n        }\n    });\n\n/**\n * Check if an element is within the current viewport\n * @param {HTMLElement} container DOM element\n * @returns {boolean} Visible or not visible\n */\nexport function isInViewport(container) {\n    const containerRect = container.getBoundingClientRect();\n    const containerWindow = getWindowFromElement(container);\n\n    const bannerY = (containerRect.top + containerRect.bottom) / 2;\n    const bannerX = (containerRect.left + containerRect.right) / 2;\n\n    if (bannerY > containerWindow.innerHeight || bannerY < 0) {\n        return false;\n    }\n    if (bannerX > containerWindow.innerWidth || bannerX < 0) {\n        return false;\n    }\n\n    return true;\n}\n\n/**\n * Check if an element is visually hidden on a page\n * @param {HTMLElement} container DOM element\n * @returns {boolean} Hidden or not hidden\n */\nexport function isHidden(container) {\n    const containerWindow = getWindowFromElement(container);\n\n    if (typeof containerWindow.getComputedStyle === 'function') {\n        const containerStyles = containerWindow.getComputedStyle(container);\n        if (\n            containerStyles.getPropertyValue('display') === 'none' ||\n            containerStyles.getPropertyValue('visibility') === 'hidden' ||\n            containerStyles.getPropertyValue('clip') !== 'auto'\n        )\n            return true;\n    }\n\n    const containerRect = container.getBoundingClientRect();\n    if (\n        containerRect.left > containerWindow.document.body.scrollWidth ||\n        containerRect.right < 0 ||\n        containerRect.top > containerWindow.document.body.scrollHeight ||\n        containerRect.bottom < 0\n    )\n        return true;\n\n    return container.offsetWidth === 0 || container.offsetHeight === 0;\n}\n\nexport function getAllBySelector(selector) {\n    if (typeof selector === 'string') {\n        return arrayFrom(document.querySelectorAll(selector));\n    }\n\n    if (isElement(selector)) {\n        return [selector];\n    }\n\n    if (Array.isArray(selector) && selector.every(isElement)) {\n        return arrayFlatMap(selector, getAllBySelector);\n    }\n\n    return [];\n}\n\n/**\n * Check if an element is completely within the bounds of another element\n * @param {HTMLElement} parentEl Parent element.\n * @param {HTMLElement} childEl Element to check if inside of parent.\n * @returns {boolean}\n */\nexport const elementContains = (parentEl, childEl) => {\n    if (\n        (parentEl?.nodeType !== Node.ELEMENT_NODE && !(parentEl instanceof Window)) ||\n        childEl?.nodeType !== Node.ELEMENT_NODE\n    ) {\n        return false;\n    }\n\n    const parentBounds =\n        parentEl instanceof Window\n            ? {\n                  top: 0,\n                  left: 0,\n                  bottom: parentEl.innerHeight,\n                  right: parentEl.innerWidth\n              }\n            : parentEl.getBoundingClientRect();\n    const childBounds = childEl.getBoundingClientRect();\n\n    return (\n        parentBounds.top <= childBounds.top &&\n        parentBounds.bottom >= childBounds.bottom &&\n        parentBounds.left <= childBounds.left &&\n        parentBounds.right >= childBounds.right\n    );\n};\n\n/**\n * Check if an element is completely outside the bounds of another element\n * @param {HTMLElement} parentEl Parent element.\n * @param {HTMLElement} childEl Element to check if outside of parent.\n * @returns {boolean}\n */\n\nexport const elementOutside = (parentEl, childEl) => {\n    if (\n        (parentEl?.nodeType !== Node.ELEMENT_NODE && !(parentEl instanceof Window)) ||\n        childEl?.nodeType !== Node.ELEMENT_NODE\n    ) {\n        return false;\n    }\n\n    const parentBounds =\n        parentEl instanceof Window\n            ? {\n                  top: 0,\n                  left: 0,\n                  bottom: parentEl.innerHeight,\n                  right: parentEl.innerWidth\n              }\n            : parentEl.getBoundingClientRect();\n    const childBounds = childEl.getBoundingClientRect();\n\n    return (\n        childBounds.left >= parentBounds.right ||\n        childBounds.right <= parentBounds.left ||\n        childBounds.bottom <= parentBounds.top ||\n        childBounds.top >= parentBounds.bottom\n    );\n};\n\n/**\n * Get the computed page root element that serves as the best wrapping element\n * that encompasses the entire content on the page without overflowing content\n * @param {HTMLElement} baseElement Element from which to create a path to determine the root\n * @returns {HTMLElement}\n */\nexport const getRoot = baseElement => {\n    const elementWindow = getWindowFromElement(baseElement);\n\n    const domPath = [];\n    {\n        let el = baseElement;\n        // Loop up the DOM tree to the root html node\n        while (el?.parentNode.nodeType === Node.ELEMENT_NODE) {\n            // Skip elements that are collapsed due to various CSS rules\n            // which causes an issue with determining the root element\n            if (el.parentNode.offsetHeight !== 0) {\n                domPath.push(el.parentNode);\n            }\n            el = el.parentNode;\n        }\n    }\n\n    domPath.reverse();\n    let biggestEl = domPath[0];\n\n    const computedRoot = arrayFind(domPath, (el, index, elements) => {\n        // We are searching for the element that contains the page scrolling.\n        // Some merchant sites will use height 100% on elements such as html and body\n        // that cause the intersection observer to hide elements below the fold.\n\n        const height = el.offsetHeight;\n        const child = elements[index + 1];\n        // Check if the next element is bigger than the current element and if so, save it and move on to the next element in the array\n        if (child && height <= child.offsetHeight) {\n            biggestEl = child;\n            return false;\n        }\n\n        const biggestElHeight = biggestEl.offsetHeight;\n        // window.innerHeight has a variable value on mobile based on the URL bar so\n        // we are looking for the element that is larger than the window\n        // TODO: This could potentially provide a false positive if a merchant is using height 100vh\n        // we are also checking to see if the height of the element we're currently on is also bigger or equal to\n        // the biggest element's height in the array.\n        if (height > elementWindow.innerHeight && height >= biggestElHeight) {\n            return true;\n        }\n\n        // Use array index instead of parentNode be default because collapsed\n        // elements may have been filtered out and should not be used for calculations\n        const parent = elements[index - 1] ?? el.parentNode; // First element should be <html> and will have a parent of document\n\n        // Ensure that the selected root is the larger of the parent\n        // and contains the child otherwise there may not be a proper page wrapper\n        // e.g. https://www.acwholesalers.com\n        if (child && child.offsetHeight < height && elementContains(parent, el)) {\n            return true;\n        }\n\n        return false;\n    });\n\n    // If the root element is entirely within the viewport then return undefined\n    // so that the viewport is used as the root. This helps with position fixed\n    // containers that may have content outside of the root element.\n    const root = elementContains(elementWindow, computedRoot) ? undefined : computedRoot;\n\n    ppDebug('Root:', {\n        debugObj: root || 'undefined. Viewport is used as the root.'\n    });\n\n    return root;\n};\n","/* @flow */\n\nimport { NODE_TYPE } from './constants';\n\nexport type NodePropsType = {\n    [string] : any // eslint-disable-line flowtype/no-weak-types\n};\n\nexport type EmptyProps = {||};\n\nexport type NodeRenderer<N, O> = (N) => O;\nexport type NodeRendererFactory<L, N, O> = (L) => NodeRenderer<N, O>;\n\ntype Primitive = string | boolean | number;\ntype NullablePrimitive = Primitive | null | void;\n\nexport type NodeType = ElementNode | TextNode | FragmentNode | ComponentNode<*>; // eslint-disable-line no-use-before-define\nexport type ChildNodeType = ElementNode | TextNode | ComponentNode<*>; // eslint-disable-line no-use-before-define\nexport type ChildType = ChildNodeType | Primitive | $ReadOnlyArray<ChildType>;\nexport type ChildrenType = $ReadOnlyArray<ChildNodeType>;\nexport type NullableChildType = $ReadOnlyArray<ChildType> | ChildNodeType | NullablePrimitive;\nexport type NullableChildrenType = $ReadOnlyArray<NullableChildrenType | ChildNodeType | NullablePrimitive>;\n\nexport type ComponentFunctionType<P> = (P, ChildrenType) => NullableChildType;\n\nexport type CreateElementNode = <P>(string, P, ...NullableChildrenType) => ElementNode; // eslint-disable-line no-undef, no-use-before-define\nexport type CreateComponentNode = <P>(ComponentFunctionType<P>, P, ...NullableChildrenType) => ComponentNode<*>; // eslint-disable-line no-undef, no-use-before-define\nexport type CreateNullComponentNode = <P>(ComponentFunctionType<P>, null, ...NullableChildrenType) => ComponentNode<*>; // eslint-disable-line no-undef, no-use-before-define\n\nexport type CreateNode = CreateNullComponentNode & CreateComponentNode & CreateElementNode;\n\nfunction renderChildren<T>(children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>>, renderer : NodeRenderer<*, *>) : $ReadOnlyArray<T> { // eslint-disable-line no-use-before-define\n    const result = [];\n\n    for (const child of children) {\n        const renderedChild = child.render(renderer);\n\n        if (!renderedChild) {\n            continue;\n        } else if (Array.isArray(renderedChild)) {\n            for (const subchild of renderedChild) {\n                if (subchild) {\n                    result.push(subchild);\n                }\n            }\n        } else {\n            result.push(renderedChild);\n        }\n    }\n\n    return result;\n}\n\nexport class ElementNode {\n    type : (typeof NODE_TYPE.ELEMENT) = NODE_TYPE.ELEMENT;\n\n    name : string;\n    props : NodePropsType;\n    children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>>; // eslint-disable-line no-use-before-define\n    onRender : ?<T>(T) => void; // eslint-disable-line no-undef\n\n    constructor(name : string, props : NodePropsType, children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>>) { // eslint-disable-line no-use-before-define\n        this.name = name;\n        this.props = props || {};\n        this.children = children;\n\n        const onRender = this.props.onRender;\n        if (typeof onRender === 'function') {\n            this.onRender = onRender;\n            delete props.onRender;\n        }\n    }\n\n    render<T>(renderer : NodeRenderer<*, *>) : T {\n        const el = renderer(this);\n        if (this.onRender) {\n            this.onRender(el);\n        }\n        return el;\n    }\n\n    renderChildren<T>(renderer : NodeRenderer<*, *>) : $ReadOnlyArray<T> {\n        return renderChildren(this.children, renderer);\n    }\n}\n\nexport class FragmentNode {\n    type : (typeof NODE_TYPE.FRAGMENT) = NODE_TYPE.FRAGMENT;\n\n    children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>>; // eslint-disable-line no-use-before-define\n\n    constructor(children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>>) { // eslint-disable-line no-use-before-define\n        this.children = children;\n    }\n\n    render<T>(renderer : NodeRenderer<*, *>) : $ReadOnlyArray<T> {\n        return renderChildren(this.children, renderer);\n    }\n}\n\nexport class TextNode {\n    type : (typeof NODE_TYPE.TEXT) = NODE_TYPE.TEXT;\n\n    text : string;\n\n    constructor(text : string) {\n        this.text = text;\n    }\n\n    render<T>(renderer : NodeRenderer<*, *>) : T {\n        return renderer(this);\n    }\n}\n\n// eslint-disable-next-line no-unused-vars\nexport class ComponentNode<P = null> {\n    type : (typeof NODE_TYPE.COMPONENT) = NODE_TYPE.COMPONENT;\n\n    component : ComponentFunctionType<NodePropsType>;\n    props : NodePropsType;\n    // eslint-disable-next-line no-use-before-define\n    children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>>;\n\n    constructor(component : ComponentFunctionType<NodePropsType>, props : NodePropsType, children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>>) {\n        this.component = component;\n        this.props = props || {};\n        this.children = children;\n\n        this.props.children = children;\n    }\n\n    renderComponent(renderer : NodeRenderer<*, *>) : * {\n        const child = normalizeChild(this.component(this.props, this.children)); // eslint-disable-line no-use-before-define\n        if (child) {\n            return child.render(renderer);\n        }\n    }\n\n    render<T>(renderer : NodeRenderer<*, *>) : T {\n        return renderer(this);\n    }\n\n    renderChildren<T>(renderer : NodeRenderer<*, *>) : $ReadOnlyArray<T> {\n        return renderChildren(this.children, renderer);\n    }\n}\n\nfunction normalizeChildren(children : NullableChildrenType) : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>> {\n    const result = [];\n\n    for (const child of children) {\n        if (!child) {\n            continue;\n        } else if (typeof child === 'string' || typeof child === 'number') {\n            result.push(new TextNode(child.toString()));\n        } else if (typeof child === 'boolean') {\n            continue;\n        } else if (Array.isArray(child)) {\n            for (const subchild of normalizeChildren(child)) {\n                result.push(subchild);\n            }\n        } else if (child && (child.type === NODE_TYPE.ELEMENT || child.type === NODE_TYPE.TEXT || child.type === NODE_TYPE.COMPONENT)) {\n            result.push(child);\n        } else {\n            throw new TypeError(`Unrecognized node type: ${ typeof child }`);\n        }\n    }\n\n    return result;\n}\n\nfunction normalizeChild(child) : ElementNode | TextNode | ComponentNode<*> | FragmentNode | void {\n    const children = normalizeChildren(Array.isArray(child) ? child : [ child ]);\n\n    if (children.length === 1) {\n        return children[0];\n    } else if (children.length > 1) {\n        return new FragmentNode(children);\n    }\n}\n\nexport const node : CreateNode = <P>(element, props : P, ...children) => {\n    children = normalizeChildren(children);\n\n    if (typeof element === 'string') {\n        // $FlowFixMe\n        return new ElementNode(element, props, children);\n    }\n\n    if (typeof element === 'function') {\n        // $FlowFixMe\n        return new ComponentNode<*>(element, props, children);\n    }\n\n    throw new TypeError(`Expected jsx element to be a string or a function`);\n};\n\nexport const Fragment : ComponentFunctionType<null> = (props, children) => {\n    return children;\n};\n","/* @flow */\n\nexport const NODE_TYPE = {\n    ELEMENT:   ('element' : 'element'),\n    TEXT:      ('text' : 'text'),\n    COMPONENT: ('component' : 'component'),\n    FRAGMENT:  ('fragment' : 'fragment')\n};\n","/* @flow */\n\nimport { ComponentNode, TextNode, type NodeRenderer, ElementNode } from '../node';\nimport { NODE_TYPE } from '../constants';\nimport { uniqueID } from '../util';\n\ntype DomNodeRenderer = NodeRenderer<ElementNode, HTMLElement>;\ntype DomTextRenderer = NodeRenderer<TextNode, Text>;\ntype DomComponentRenderer = NodeRenderer<ComponentNode<*>, HTMLElement | TextNode | $ReadOnlyArray<HTMLElement | TextNode> | void>;\ntype DomRenderer = DomComponentRenderer & DomNodeRenderer & DomTextRenderer;\n\nconst ELEMENT_TAG = {\n    HTML:    'html',\n    IFRAME:  'iframe',\n    SCRIPT:  'script',\n    SVG:     'svg',\n    DEFAULT: 'default'\n};\n\nconst ELEMENT_PROP = {\n    ID:         'id',\n    INNER_HTML: 'innerHTML',\n    EL:         'el',\n    XLINK_HREF: 'xlink:href'\n};\n\nconst ELEMENT_DEFAULT_XML_NAMESPACE : {| [$Values<typeof ELEMENT_TAG>] : string |} = {\n    [ ELEMENT_TAG.SVG ]: 'http://www.w3.org/2000/svg'\n};\n\nconst ATTRIBUTE_DEFAULT_XML_NAMESPACE : {| [$Values<typeof ELEMENT_PROP>] : string |} = {\n    [ ELEMENT_PROP.XLINK_HREF ]: 'http://www.w3.org/1999/xlink'\n};\n\nfunction fixScripts(el : HTMLElement | Element, doc : Document = window.document) {\n    for (const script of el.querySelectorAll('script')) {\n        const parentNode = script.parentNode;\n\n        if (!parentNode) {\n            continue;\n        }\n\n        const newScript = doc.createElement('script');\n        newScript.text = script.textContent;\n        parentNode.replaceChild(newScript, script);\n    }\n}\n\nfunction createElement(doc : Document, node : ElementNode) : HTMLElement | Element {\n    if (node.props[ELEMENT_PROP.EL]) {\n        return node.props[ELEMENT_PROP.EL];\n    } else {\n        return doc.createElement(node.name);\n    }\n}\n\nfunction createElementWithXMLNamespace(doc : Document, node : ElementNode, xmlNamespace : string) : HTMLElement | Element {\n    return doc.createElementNS(xmlNamespace, node.name);\n}\n\nfunction createTextElement(doc : Document, node : TextNode) : Text {\n    return doc.createTextNode(node.text);\n}\n\nfunction addProps(el : HTMLElement | Element, node) {\n    const props = node.props;\n\n    for (const prop of Object.keys(props)) {\n        const val = props[prop];\n\n        if (val === null || typeof val === 'undefined' || prop === ELEMENT_PROP.EL || prop === ELEMENT_PROP.INNER_HTML) {\n            continue;\n        }\n\n        if (prop.match(/^on[A-Z][a-z]/) && typeof val === 'function') {\n            el.addEventListener(prop.slice(2).toLowerCase(), val);\n        } else if (typeof val === 'string' || typeof val === 'number') {\n            const xmlNamespace = ATTRIBUTE_DEFAULT_XML_NAMESPACE[prop];\n            if (xmlNamespace) {\n                el.setAttributeNS(xmlNamespace, prop, val.toString());\n            } else {\n                el.setAttribute(prop, val.toString());\n            }\n        } else if (typeof val === 'boolean') {\n            if (val === true) {\n                el.setAttribute(prop, '');\n            }\n        }\n    }\n\n    if (el.tagName.toLowerCase() === ELEMENT_TAG.IFRAME && !props.id) {\n        el.setAttribute(ELEMENT_PROP.ID, `jsx-iframe-${ uniqueID() }`);\n    }\n}\nconst ADD_CHILDREN : { [string] : (HTMLElement | Element, ElementNode, DomNodeRenderer) => void } = {\n\n    [ ELEMENT_TAG.IFRAME ]: (el, node) => {\n        const firstChild = node.children[0];\n\n        if (node.children.length !== 1 || !(firstChild && firstChild.type === NODE_TYPE.ELEMENT) || firstChild.name !== ELEMENT_TAG.HTML) {\n            throw new Error(`Expected only single html element node as child of ${ ELEMENT_TAG.IFRAME } element`);\n        }\n    \n        el.addEventListener('load', () => {\n\n            // $FlowFixMe\n            const win = el.contentWindow;\n    \n            if (!win) {\n                throw new Error(`Expected frame to have contentWindow`);\n            }\n\n            const doc = win.document;\n            const docElement = doc.documentElement;\n\n            while (docElement.children && docElement.children.length) {\n                docElement.removeChild(docElement.children[0]);\n            }\n\n            // eslint-disable-next-line no-use-before-define\n            const child : HTMLElement = firstChild.render(dom({ doc }));\n        \n            while (child.children.length) {\n                docElement.appendChild(child.children[0]);\n            }\n        });\n    },\n\n    [ ELEMENT_TAG.SCRIPT ]: (el, node) => {\n        const firstChild = node.children[0];\n\n        if (node.children.length !== 1 || !(firstChild && firstChild.type === NODE_TYPE.TEXT)) {\n            throw new Error(`Expected only single text node as child of ${ ELEMENT_TAG.SCRIPT } element`);\n        }\n        \n        // $FlowFixMe\n        el.text = firstChild.text;\n    },\n\n    [ ELEMENT_TAG.DEFAULT ]: (el, node, renderer) => {\n        for (const child of node.renderChildren(renderer)) {\n            el.appendChild(child);\n        }\n    }\n};\n\nfunction addChildren(el : HTMLElement | Element, node : ElementNode, doc : Document, renderer : DomNodeRenderer) {\n    if (node.props.hasOwnProperty(ELEMENT_PROP.INNER_HTML)) {\n\n        if (node.children.length) {\n            throw new Error(`Expected no children to be passed when ${ ELEMENT_PROP.INNER_HTML } prop is set`);\n        }\n\n        const html = node.props[ELEMENT_PROP.INNER_HTML];\n\n        if (typeof html !== 'string') {\n            throw new TypeError(`${ ELEMENT_PROP.INNER_HTML } prop must be string`);\n        }\n\n        if (node.name === ELEMENT_TAG.SCRIPT) {\n            // $FlowFixMe\n            el.text = html;\n        } else {\n            el.innerHTML = html;\n            fixScripts(el, doc);\n        }\n\n    } else {\n        const addChildrenToElement = ADD_CHILDREN[node.name] || ADD_CHILDREN[ELEMENT_TAG.DEFAULT];\n        addChildrenToElement(el, node, renderer);\n    }\n}\n\ntype DomOptions = {|\n    doc? : Document\n|};\n\nconst getDefaultDomOptions = () : DomOptions => {\n    // $FlowFixMe\n    return {};\n};\n\nexport function dom(opts? : DomOptions = getDefaultDomOptions()) : DomRenderer {\n    const { doc = document } = opts;\n    \n    const xmlNamespaceDomRenderer = (node : ElementNode, xmlNamespace : string) : HTMLElement => {\n        if (node.type === NODE_TYPE.COMPONENT) {\n            return node.renderComponent(childNode => xmlNamespaceDomRenderer(childNode, xmlNamespace));\n        }\n        \n        if (node.type === NODE_TYPE.TEXT) {\n            // $FlowFixMe\n            return createTextElement(doc, node);\n        }\n        \n        if (node.type === NODE_TYPE.ELEMENT) {\n            const el = createElementWithXMLNamespace(doc, node, xmlNamespace);\n            addProps(el, node);\n            addChildren(el, node, doc, childNode => xmlNamespaceDomRenderer(childNode, xmlNamespace));\n            // $FlowFixMe\n            return el;\n        }\n\n        throw new TypeError(`Unhandleable node`);\n    };\n    \n    const domRenderer : DomRenderer = (node) => {\n        if (node.type === NODE_TYPE.COMPONENT) {\n            return node.renderComponent(domRenderer);\n        }\n        \n        if (node.type === NODE_TYPE.TEXT) {\n            // $FlowFixMe\n            return createTextElement(doc, node);\n        }\n        \n        if (node.type === NODE_TYPE.ELEMENT) {\n            const xmlNamespace = ELEMENT_DEFAULT_XML_NAMESPACE[node.name.toLowerCase()];\n\n            if (xmlNamespace) {\n                // $FlowFixMe\n                return xmlNamespaceDomRenderer(node, xmlNamespace);\n            }\n\n            const el = createElement(doc, node);\n            addProps(el, node);\n            addChildren(el, node, doc, domRenderer);\n            // $FlowFixMe\n            return el;\n        }\n\n        throw new TypeError(`Unhandleable node`);\n    };\n\n    return domRenderer;\n}\n","/* @flow */\n\nconst ALPHA_CHARS = '0123456789abcdef';\n\nexport function uniqueID() : string {\n    return 'xxxxxxxxxx'.replace(/./g, () => ALPHA_CHARS.charAt(Math.floor(Math.random() * ALPHA_CHARS.length)));\n}\n\n// eslint-disable-next-line flowtype/no-weak-types\nexport function isDefined(val : any) : boolean %checks {\n    return (val !== null && typeof val !== 'undefined');\n}\n","/** @jsx node */\nimport arrayFind from 'core-js-pure/stable/array/find';\nimport arrayIncludes from 'core-js-pure/stable/array/includes';\nimport stringIncludes from 'core-js-pure/stable/string/includes';\nimport objectAssign from 'core-js-pure/stable/object/assign';\nimport objectEntries from 'core-js-pure/stable/object/entries';\nimport { node, dom } from '@krakenjs/jsx-pragmatic/src';\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\n\nimport { partial, memoize } from './functional';\nimport { getStorage } from './sdk';\nimport { OFFER } from './constants';\n\n/**\n * Create a state object and pass back a reference and update function\n * @param {Object} initialState Initial object to store in state\n * @returns {[Object, Function]} State object reference and update function\n */\nexport function createState(initialState = {}) {\n    const state = { ...initialState };\n    return [state, partial(objectAssign, state)];\n}\n\nexport function getDataByTag(data, tag) {\n    let selected = arrayFind(data, ([, tags]) => arrayIncludes(tags, tag));\n    if (selected) {\n        return selected[0];\n    }\n\n    if (stringIncludes(tag, '.')) {\n        const [fallbackTag] = tag.split('.', 1);\n        selected = arrayFind(data, ([, tags]) => arrayIncludes(tags, fallbackTag));\n        if (selected) {\n            return selected[0];\n        }\n    }\n\n    selected = arrayFind(data, ([, tags]) => arrayIncludes(tags, 'default'));\n    if (selected) {\n        return selected[0];\n    }\n\n    return '';\n}\n\nexport function request(method, url, { data, headers, withCredentials } = {}) {\n    return new ZalgoPromise((resolve, reject) => {\n        const xhttp = new XMLHttpRequest();\n\n        if (withCredentials) {\n            // Necessary to send cookies with cross-origin requests\n            xhttp.withCredentials = true;\n        }\n\n        // eslint-disable-next-line unicorn/prefer-add-event-listener\n        xhttp.onreadystatechange = () => {\n            if (xhttp.readyState === 4) {\n                const responseHeaders = xhttp\n                    .getAllResponseHeaders()\n                    .trim() // Remove trailing newline characters\n                    .split('\\n')\n                    .reduce((accumulator, header) => {\n                        const [key, val] = header.trim().split(': ');\n                        return {\n                            ...accumulator,\n                            // IE11 uses capitalized header names\n                            [key.toLowerCase()]: val\n                        };\n                    }, {});\n\n                switch (xhttp.status) {\n                    case 200:\n                        resolve({\n                            headers: responseHeaders,\n                            data:\n                                responseHeaders['content-type'] &&\n                                stringIncludes(responseHeaders['content-type'], 'application/json')\n                                    ? JSON.parse(xhttp.responseText)\n                                    : xhttp.responseText\n                        });\n                        break;\n                    case 204:\n                        resolve({ headers: responseHeaders });\n                        break;\n                    default:\n                        reject(new Error('Request failed'));\n                }\n            }\n        };\n\n        xhttp.open(method, url, true);\n\n        if (headers) {\n            objectEntries(headers).forEach(([header, value]) => {\n                xhttp.setRequestHeader(header, value);\n            });\n        }\n\n        xhttp.send(typeof data === 'object' ? JSON.stringify(data) : data);\n    });\n}\n\nexport function parseObjFromEncoding(encodedStr) {\n    // equivalent to JSON.parse(fromBinary(atob(encodedStr))) as in initScript\n    const binary = atob(encodedStr);\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < bytes.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    // need to use .apply instead of spread operator so IE can understand\n    const decodedStr = String.fromCharCode.apply(null, new Uint16Array(bytes.buffer));\n    return JSON.parse(decodedStr);\n}\n\nexport function createEvent(name) {\n    if (typeof Event === 'function') {\n        return new Event(name);\n    }\n\n    // IE11 support\n    const event = document.createEvent('Event');\n    event.initEvent(name, true, true);\n\n    return event;\n}\n\nexport const dynamicImport = memoize(url => {\n    return new ZalgoPromise(resolve => {\n        const script = document.createElement('script');\n        script.src = url;\n        script.addEventListener('load', () => {\n            document.body.removeChild(script);\n            resolve();\n        });\n\n        if (document.readyState === 'loading') {\n            window.addEventListener('DOMContentLoaded', () => document.body.appendChild(script));\n        } else {\n            document.body.appendChild(script);\n        }\n    });\n});\n\n// // Date.now() altered on some sites: https://www.hydropool.com\nexport const getCurrentTime = () => new Date().getTime();\n\n// Memoized so that the 2 return functions can be called from different modules\nexport const viewportHijack = memoize(() => {\n    const viewport =\n        document.querySelector('meta[name=\"viewport\"]') ||\n        (<meta name=\"viewport\" content=\"\" />).render(dom({ doc: document }));\n\n    // Ensure a viewport exists in the DOM\n    if (!viewport.parentNode) {\n        document.head.appendChild(viewport);\n    }\n\n    return [\n        // We store state on the DOM elements themselves because we do not want multiple SDK scripts\n        // with their own states causing an error preventing elements from being updated as needed\n        () => {\n            if (viewport.__pp_prev_content__) {\n                // Viewport has already been hijacked - do nothing for now\n                // This can happen when multiple messages are clicked before the modal loads\n                return;\n            }\n\n            viewport.__pp_prev_content__ = viewport.getAttribute('content') ?? '';\n            viewport.setAttribute(\n                'content',\n                'width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, minimal-ui, shrink-to-fit=no'\n            );\n\n            document.body.__pp_prev_overflow__ = document.body.style.overflow ?? '';\n            document.body.__pp_prev_msOverflowStyle__ = document.body.style.msOverflowStyle ?? '';\n            document.body.style.setProperty('overflow', 'hidden');\n            document.body.style.setProperty('-ms-overflow-style', 'scrollbar');\n        },\n        () => {\n            viewport.setAttribute('content', viewport.__pp_prev_content__);\n            delete viewport.__pp_prev_content__;\n\n            document.body.style.setProperty('overflow', document.body.__pp_prev_overflow__);\n            document.body.style.setProperty('-ms-overflow-style', document.body.__pp_prev_msOverflowStyle__);\n            delete document.body.__pp_prev_overflow__;\n            delete document.body.__pp_prev_msOverflowStyle__;\n        }\n    ];\n});\n\n// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#improving_scrolling_performance_with_passive_listeners\nexport const getEventListenerPassiveOptionIfSupported = () => {\n    let passiveIfSupported = false;\n\n    try {\n        // Create dummy event listener so that if supported, the object will be crawled\n        // for the passive flag telling us that the option is supported in this browser\n        window.addEventListener(\n            '__test__',\n            null,\n            Object.defineProperty({}, 'passive', {\n                // eslint-disable-next-line getter-return\n                get() {\n                    passiveIfSupported = { passive: true };\n                }\n            })\n        );\n    } catch (err) {} // eslint-disable-line no-empty\n\n    return passiveIfSupported;\n};\n\nexport function getStandardProductOffer(offer) {\n    if (typeof offer === 'undefined') {\n        return 'NONE';\n    }\n\n    switch (offer.toUpperCase()) {\n        case 'LT_NQEZ':\n        case 'LT_NQGZ':\n        case 'LT_MQEZ':\n        case 'LT_MQEZ_RB':\n        case 'LT_MQGZ':\n        case 'LT_SQEZ':\n        case 'LT_SQEZ_RB':\n        case 'LT_SQGZ':\n        case OFFER.PAY_LATER_LONG_TERM:\n        case 'GPL:EQZ':\n        case 'GPL:GTZ':\n        case 'GPLQ:EQZ':\n        case 'GPLQ:GTZ':\n        case 'GPL:EQZ:NON-DE':\n        case 'GPL:GTZ:NON-DE':\n        case 'GPLQ:EQZ:NON-DE':\n        case 'GPLQ:GTZ:NON-DE':\n            return OFFER.PAY_LATER_LONG_TERM;\n        case OFFER.PAY_LATER_SHORT_TERM:\n        case 'GPL':\n        case 'GPLQ':\n        case 'GPLNQ':\n        case 'GPLNQ_RANGE':\n        case 'PL':\n        case 'PLQ':\n        case 'SHORT_TERM:Q':\n        case 'SHORT_TERM:NQ':\n        case 'SHORT_TERM:NO_AMOUNT':\n            return OFFER.PAY_LATER_SHORT_TERM;\n        case OFFER.PAY_LATER_PAY_IN_1:\n        case 'PI30':\n        case 'PI30Q':\n        case 'PI30NQ':\n        case 'PI30:NON-DE':\n        case 'PI30Q:NON-DE':\n        case 'PI30NQ:NON-DE':\n            return OFFER.PAY_LATER_PAY_IN_1;\n        case 'EZP':\n        case 'EZP:ANY:EQZ':\n        case 'EZP:ANY:GTZ':\n        case 'PALA:MULTI:EQZ':\n        case 'PALA:MULTI:GTZ':\n        case 'PALA:SINGLE:EQZ':\n        case 'PALA:SINGLE:GTZ':\n        case OFFER.PAYPAL_CREDIT_INSTALLMENTS:\n        case 'INST':\n        case 'INST:ANY:EQZ':\n        case 'INST:ANY:GTZ':\n        case 'PALAQ:ANY:EQZ':\n        case 'PALAQ:ANY:GTZ':\n            return OFFER.PAYPAL_CREDIT_INSTALLMENTS;\n        case OFFER.PAYPAL_CREDIT_NO_INTEREST:\n        case 'NI':\n        case 'NI:NON-US':\n        case 'NIQ':\n        case 'NIQ:NON-US':\n            return OFFER.PAYPAL_CREDIT_NO_INTEREST;\n        default:\n            return undefined;\n    }\n}\n\n/**\n * Get value of cookie name\n * @param name - name of cookie\n * @returns object of cookie value(s)\n */\nexport function getCookieByName(name) {\n    const cookieVal = decodeURIComponent(\n        // decode the cookie value\n        // get all cookies\n        document.cookie\n            .split('; ')\n            // separate the string into an array of cookies\n            // find the cookie by name\n            .find(cookieStr => cookieStr.startsWith(`${name}=`))\n            ?.slice(5) ?? ''\n        // use only the value of the cookie\n    );\n\n    // use URLSearchParams to parse the value string into entries,\n    // and create an object from those entries\n    // disable ESLint rule since we do not support IE anymore\n    // eslint-disable-next-line compat/compat\n    return Object.keys(cookieVal).length === 0 ? null : Object.fromEntries(new URLSearchParams(cookieVal).entries());\n    // check length of cookieVal obj to make sure keys exist.\n}\n\n// get the ts cookie from local storage\nexport function getTsCookieFromStorage() {\n    return getStorage().getState(storage => storage?.ts) ?? getCookieByName('ts_c');\n}\n","import objectKeys from 'core-js-pure/stable/object/keys';\nimport objectAssign from 'core-js-pure/stable/object/assign';\nimport Map from 'core-js-pure/stable/map';\nimport { eventEmitter } from '@krakenjs/belter/src';\n\nimport { getLibraryVersion, getPayPalDomain } from './sdk';\nimport { createState } from './miscellaneous';\n\n// Following the global naming convention of zoid and prevent collision with merchant.js\nconst NAMESPACE = `__paypal_messages_${getLibraryVersion().replace(/[.-]/g, '_')}__`;\n\nconst createDefaultState = () => ({\n    index: 1,\n    config: {},\n    messagesMap: new Map()\n});\n\nexport const createGlobalState = () => {\n    const [globalState, setGlobalState] = createState(window[NAMESPACE] || createDefaultState());\n\n    globalState.setGlobalState = setGlobalState;\n\n    Object.defineProperty(window, NAMESPACE, {\n        value: globalState,\n        enumerable: false,\n        configurable: true,\n        writable: false\n    });\n\n    return window[NAMESPACE];\n};\nexport const destroyGlobalState = () => {\n    if (window[NAMESPACE]) {\n        objectKeys(window[NAMESPACE]).forEach(key => delete window[NAMESPACE][key]);\n        objectAssign(window[NAMESPACE], createDefaultState());\n\n        delete window[NAMESPACE];\n    }\n};\nexport const getGlobalState = () => window[NAMESPACE] ?? createGlobalState();\nexport const setGlobalState = newState => getGlobalState().setGlobalState(newState);\n\nexport const nextIndex = () => {\n    const currentIndex = getGlobalState().index;\n\n    setGlobalState({ index: currentIndex + 1 });\n\n    return currentIndex;\n};\n\nexport const createTitleGenerator = () => {\n    let count = 0;\n    return title => {\n        count += 1;\n        return `${title} ${count}`;\n    };\n};\n\n/**\n * Create a URL of the requested type from Webpack global variables\n * @param {String} type URL type\n * @returns {String} URL of requested type\n */\nexport function getGlobalUrl(type) {\n    return `${getPayPalDomain()}${__MESSAGES__.__URI__[`__${type.toUpperCase()}__`]}`;\n}\n\n// Return a getter function as opposed to the value itself so that it can be lazy loaded within\n// the SDK lifecycle to guard against unintentionally using state from previous SDK instances\nexport const createGlobalVariableGetter = (variable, fn) => () => {\n    if (!getGlobalState()[variable]) {\n        setGlobalState({\n            [variable]: fn()\n        });\n    }\n\n    return getGlobalState()[variable];\n};\n\nexport const globalEvent = eventEmitter();\n","import { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\n\nimport { globalEvent } from './global';\n\nexport const awaitTreatments = new ZalgoPromise(resolve => globalEvent.once('treatments', resolve));\n\nexport const awaitFirstRender = new ZalgoPromise(resolve => globalEvent.once('render', resolve));\n\nexport const awaitFirstModalRender = new ZalgoPromise(resolve => globalEvent.once('modal-render', resolve));\n\nexport const awaitWindowLoad = new ZalgoPromise(resolve =>\n    typeof document !== 'undefined' && document.readyState !== 'complete'\n        ? window.addEventListener('load', resolve)\n        : resolve()\n);\n\nexport const awaitDOMContentLoaded = new ZalgoPromise(resolve =>\n    typeof document !== 'undefined' && document.readyState === 'loading'\n        ? window.addEventListener('DOMContentLoaded', resolve)\n        : resolve()\n);\n","import objectKeys from 'core-js-pure/stable/object/keys';\nimport arrayIncludes from 'core-js-pure/stable/array/includes';\nimport { Logger, LOG_LEVEL } from '@krakenjs/beaver-logger/src';\n\nimport { getGlobalUrl } from './global';\nimport { request } from './miscellaneous';\n\nimport { getLibraryVersion, getDisableSetCookie } from './sdk';\n\nexport const logger = Logger({\n    // Url to send logs to\n    url: getGlobalUrl('LOGGER'),\n    // Prefix to prepend to all events\n    prefix: 'paypal_messages',\n    // Log level to display in the browser console\n    logLevel: LOG_LEVEL.WARN,\n    // Interval to flush logs to server\n    flushInterval: 10 * 1000,\n    // Override transport so we can use withCredentials\n    transport: ({ url, method, json, headers }) => {\n        // Because there is no way to remove payload builders from beaver-logger\n        // Filter the meta object to remove inactive banner meta commonly caused by SPAs\n        const eventsIndexes = json.events.reduce(\n            (accumulator, { payload: { index, refIndex } }) => [...accumulator, index, refIndex],\n            []\n        );\n\n        const trackingIndexes = json.tracking.reduce(\n            (accumulator, { index, refIndex }) => [...accumulator, index, refIndex],\n            []\n        );\n\n        const activeIndexes = eventsIndexes.concat(trackingIndexes);\n\n        const trimmedMeta = objectKeys(json.meta)\n            .filter(index => arrayIncludes(activeIndexes, index) || index === 'global')\n            .reduce(\n                (accumulator, index) => ({\n                    ...accumulator,\n                    [index]: json.meta[index]\n                }),\n                {}\n            );\n\n        const urlWithCookieParams = getDisableSetCookie()\n            ? `${url}?disableSetCookie=true&features=disable-set-cookie`\n            : url;\n\n        return request(method, urlWithCookieParams, {\n            headers: {\n                'content-type': 'application/json',\n                ...headers\n            },\n            data: {\n                meta: trimmedMeta,\n                events: json.events,\n                tracking: json.tracking\n            },\n            withCredentials: true\n        });\n    }\n});\n\nlogger.addMetaBuilder(() => {\n    return {\n        global: {\n            integration_type: __MESSAGES__.__TARGET__,\n            messaging_version: getLibraryVersion()\n        }\n    };\n});\n\nlogger.addPayloadBuilder(payload => {\n    // Remove properties holding DOM element references that are\n    // only useful in the context of the browser console window\n    delete payload.container; // eslint-disable-line no-param-reassign\n    delete payload.selector; // eslint-disable-line no-param-reassign\n\n    return {};\n});\n\nlogger.addTrackingBuilder(() => {\n    return {\n        // Send a timestamp with every tracking event so they can be correctly ordered\n        timestamp: new Date().getTime()\n    };\n});\n","/* @flow */\n\nimport { type CrossDomainWindowType, type SameDomainWindowType } from '@krakenjs/cross-domain-utils/src';\nimport { WeakMap } from '@krakenjs/cross-domain-safe-weakmap/src';\nimport { getOrSet, getCurrentScriptUID } from '@krakenjs/belter/src';\n\nexport function getGlobalKey() : string {\n    if (__POST_ROBOT__.__SCRIPT_NAMESPACE__) {\n        return `${ __POST_ROBOT__.__GLOBAL_KEY__ }_${ getCurrentScriptUID() }`;\n    } else {\n        return __POST_ROBOT__.__GLOBAL_KEY__;\n    }\n}\n\nexport function getGlobal(win : SameDomainWindowType = window) : Object {\n    const globalKey = getGlobalKey();\n\n    if (win !== window) {\n        return win[globalKey];\n    }\n    const global : Object = win[globalKey] = win[globalKey] || {};\n    return global;\n}\n\nexport function deleteGlobal() {\n    const globalKey = getGlobalKey();\n    delete window[globalKey];\n}\n\ntype ObjectGetter = () => Object;\nconst getObj : ObjectGetter = () => ({});\n\ntype GetOrSet<T> = ((string, () => T) => T) & ((string, () => void) => void);\n\ntype GlobalStore<T> = {|\n    get : ((string, T) => T) & ((string, void) => T | void),\n    set : (string, T) => T,\n    has : (string) => boolean,\n    del : (string) => void,\n    getOrSet : GetOrSet<T>,\n    reset : () => void,\n    keys : () => $ReadOnlyArray<string>\n|};\n\nexport function globalStore<T : mixed>(key? : string = 'store', defStore? : ObjectGetter = getObj) : GlobalStore<T> {\n    return getOrSet(getGlobal(), key, () => {\n        let store = defStore();\n\n        return {\n            has: (storeKey) => {\n                return store.hasOwnProperty(storeKey);\n            },\n            get: (storeKey, defVal) => {\n                // $FlowFixMe\n                return store.hasOwnProperty(storeKey) ? store[storeKey] : defVal;\n            },\n            set: (storeKey, val) => {\n                store[storeKey] = val;\n                return val;\n            },\n            del: (storeKey) => {\n                delete store[storeKey];\n            },\n            getOrSet: (storeKey, getter) => {\n                // $FlowFixMe\n                return getOrSet(store, storeKey, getter);\n            },\n            reset: () => {\n                store = defStore();\n            },\n            keys: () => {\n                return Object.keys(store);\n            }\n        };\n    });\n}\n\nexport class WildCard {}\n\nexport function getWildcard() : WildCard {\n    const global = getGlobal();\n    global.WINDOW_WILDCARD = global.WINDOW_WILDCARD || new WildCard();\n    return global.WINDOW_WILDCARD;\n}\n\ntype WindowStore<T> = {|\n    get : ((CrossDomainWindowType | WildCard, T) => T) & ((CrossDomainWindowType | WildCard, void) => T | void),\n    set : (CrossDomainWindowType | WildCard, T) => T,\n    has : (CrossDomainWindowType | WildCard) => boolean,\n    del : (CrossDomainWindowType | WildCard) => void,\n    getOrSet : (CrossDomainWindowType | WildCard, () => T) => T\n|};\n\nexport function windowStore<T>(key? : string = 'store', defStore? : ObjectGetter = getObj) : WindowStore<T> {\n    return globalStore('windowStore').getOrSet(key, () => {\n        const winStore = new WeakMap();\n\n        const getStore = (win : CrossDomainWindowType | WildCard) : ObjectGetter => {\n            return winStore.getOrSet(win, defStore);\n        };\n    \n        return {\n            has: (win) => {\n                const store = getStore(win);\n                return store.hasOwnProperty(key);\n            },\n            get: (win, defVal) => {\n                const store = getStore(win);\n                // $FlowFixMe\n                return store.hasOwnProperty(key) ? store[key] : defVal;\n            },\n            set: (win, val) => {\n                const store = getStore(win);\n                store[key] = val;\n                return val;\n            },\n            del: (win) => {\n                const store = getStore(win);\n                delete store[key];\n            },\n            getOrSet: (win, getter) => {\n                const store = getStore(win);\n                return getOrSet(store, key, getter);\n            }\n        };\n    });\n}\n","/* @flow */\n\nimport { getAncestor, type CrossDomainWindowType } from '@krakenjs/cross-domain-utils/src';\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { uniqueID } from '@krakenjs/belter/src';\n\nimport { MESSAGE_NAME, WILDCARD } from '../conf';\nimport { windowStore, globalStore, getGlobal } from '../global';\nimport type { OnType, SendType, CancelableType } from '../types';\n\nfunction getInstanceID() : string {\n    return globalStore('instance').getOrSet('instanceID', uniqueID);\n}\n\nfunction getHelloPromise(win : CrossDomainWindowType) : ZalgoPromise<{| domain : string |}> {\n    const helloPromises = windowStore('helloPromises');\n    return helloPromises.getOrSet(win, () => new ZalgoPromise());\n}\n\nfunction resolveHelloPromise(win : CrossDomainWindowType, { domain }) : ZalgoPromise<{| domain : string |}> {\n    const helloPromises = windowStore('helloPromises');\n    const existingPromise = helloPromises.get(win);\n    if (existingPromise) {\n        existingPromise.resolve({ domain });\n    }\n    const newPromise = ZalgoPromise.resolve({ domain });\n    helloPromises.set(win, newPromise);\n    return newPromise;\n}\n\nfunction listenForHello({ on } : {| on : OnType |}) : CancelableType {\n    return on(MESSAGE_NAME.HELLO, { domain: WILDCARD }, ({ source, origin }) => {\n        resolveHelloPromise(source, { domain: origin });\n        return { instanceID: getInstanceID() };\n    });\n}\n\nexport function sayHello(win : CrossDomainWindowType, { send } : {| send : SendType |}) : ZalgoPromise<{| win : CrossDomainWindowType, domain : string, instanceID : string |}> {\n    return send(win, MESSAGE_NAME.HELLO, { instanceID: getInstanceID() }, { domain: WILDCARD, timeout: -1 })\n        .then(({ origin, data: { instanceID } }) => {\n            resolveHelloPromise(win, { domain: origin });\n            return { win, domain: origin, instanceID };\n        });\n}\n\nexport function getWindowInstanceID(win : CrossDomainWindowType, { send } : {| send : SendType |}) : ZalgoPromise<string> {\n    return windowStore('windowInstanceIDPromises').getOrSet(win, () => {\n        return sayHello(win, { send }).then(({ instanceID }) => instanceID);\n    });\n}\n\nexport function initHello({ on, send } : {| on : OnType, send : SendType |}) : CancelableType {\n    return globalStore('builtinListeners').getOrSet('helloListener', () => {\n        const listener = listenForHello({ on });\n\n        const parent = getAncestor();\n        if (parent) {\n            sayHello(parent, { send }).catch(err => {\n                // $FlowFixMe\n                if (__TEST__ && getGlobal(parent)) {\n                    throw err;\n                }\n            });\n        }\n\n        return listener;\n    });\n}\n\nexport function awaitWindowHello(win : CrossDomainWindowType, timeout : number = 5000, name : string = 'Window') : ZalgoPromise<{| domain : string |}> {\n    let promise = getHelloPromise(win);\n\n    if (timeout !== -1) {\n        promise = promise.timeout(timeout, new Error(`${ name } did not load after ${ timeout }ms`));\n    }\n\n    return promise;\n}\n","/* @flow */\n\nexport const MESSAGE_TYPE = {\n    REQUEST:  ('postrobot_message_request' : 'postrobot_message_request'),\n    RESPONSE: ('postrobot_message_response' : 'postrobot_message_response'),\n    ACK:      ('postrobot_message_ack' : 'postrobot_message_ack')\n};\n\nexport const MESSAGE_ACK = {\n    SUCCESS: ('success' : 'success'),\n    ERROR:   ('error' : 'error')\n};\n\nexport const MESSAGE_NAME = {\n    METHOD:      ('postrobot_method' : 'postrobot_method'),\n    HELLO:       ('postrobot_hello' : 'postrobot_hello'),\n    OPEN_TUNNEL: ('postrobot_open_tunnel' : 'postrobot_open_tunnel')\n};\n\nexport const SEND_STRATEGY = {\n    POST_MESSAGE: ('postrobot_post_message' : 'postrobot_post_message'),\n    BRIDGE:       ('postrobot_bridge' : 'postrobot_bridge'),\n    GLOBAL:       ('postrobot_global' : 'postrobot_global')\n};\n\nexport const BRIDGE_NAME_PREFIX = '__postrobot_bridge__';\nexport const POSTROBOT_PROXY =    '__postrobot_proxy__';\n\nexport const WILDCARD = '*';\n\nexport const SERIALIZATION_TYPE = {\n    CROSS_DOMAIN_ZALGO_PROMISE: ('cross_domain_zalgo_promise' : 'cross_domain_zalgo_promise'),\n    CROSS_DOMAIN_FUNCTION:      ('cross_domain_function' : 'cross_domain_function'),\n    CROSS_DOMAIN_WINDOW:        ('cross_domain_window' : 'cross_domain_window')\n};\n\nexport const METHOD = {\n    GET:  ('get' : 'get'),\n    POST: ('post' : 'post')\n};\n","/* @flow */\n\nimport { type CrossDomainWindowType } from '@krakenjs/cross-domain-utils/src';\n\nimport { windowStore } from '../global';\n\nexport function markWindowKnown(win : CrossDomainWindowType) {\n    const knownWindows = windowStore('knownWindows');\n    knownWindows.set(win, true);\n}\n\nexport function isWindowKnown(win : CrossDomainWindowType) : boolean {\n    const knownWindows = windowStore('knownWindows');\n    return knownWindows.get(win, false);\n}\n","/* @flow */\n\nimport { TYPE } from './constants';\nimport type { CustomSerializedType } from './types';\n\nexport function isSerializedType(item : mixed) : boolean {\n    return (typeof item === 'object' && item !== null && typeof item.__type__ === 'string');\n}\n\nexport function determineType(val : mixed) : $Values<typeof TYPE> | void {\n    if (typeof val === 'undefined') {\n        return TYPE.UNDEFINED;\n    }\n\n    if (val === null) {\n        return TYPE.NULL;\n    }\n\n    if (Array.isArray(val)) {\n        return TYPE.ARRAY;\n    }\n\n    if (typeof val === 'function') {\n        return TYPE.FUNCTION;\n    }\n\n    if (typeof val === 'object') {\n\n        if (val instanceof Error) {\n            return TYPE.ERROR;\n        }\n\n        if (typeof val.then === 'function') {\n            return TYPE.PROMISE;\n        }\n\n        // $FlowFixMe method-unbinding\n        if (Object.prototype.toString.call(val) === '[object RegExp]') {\n            return TYPE.REGEX;\n        }\n\n        // $FlowFixMe method-unbinding\n        if (Object.prototype.toString.call(val) === '[object Date]') {\n            return TYPE.DATE;\n        }\n\n        return TYPE.OBJECT;\n    }\n\n    if (typeof val === 'string') {\n        return TYPE.STRING;\n    }\n\n    if (typeof val === 'number') {\n        return TYPE.NUMBER;\n    }\n\n    if (typeof val === 'boolean') {\n        return TYPE.BOOLEAN;\n    }\n}\n\nexport function serializeType<T : string, V : mixed>(type : T, val : V) : CustomSerializedType<T, V> {\n    return {\n        __type__: type,\n        __val__:  val\n    };\n}\n","/* @flow */\n\nexport const TYPE = {\n    FUNCTION:  ('function' : 'function'),\n    ERROR:     ('error' : 'error'),\n    PROMISE:   ('promise' : 'promise'),\n    REGEX:     ('regex' : 'regex'),\n    DATE:      ('date' : 'date'),\n    ARRAY:     ('array' : 'array'),\n    OBJECT:    ('object' : 'object'),\n    STRING:    ('string' : 'string'),\n    NUMBER:    ('number' : 'number'),\n    BOOLEAN:   ('boolean' : 'boolean'),\n    NULL:      ('null' : 'null'),\n    UNDEFINED: ('undefined' : 'undefined')\n};\n","/* @flow */\n\nimport { TYPE } from './constants';\nimport type { Thenable, CustomSerializedType, NativeSerializedType } from './types';\nimport { determineType, isSerializedType } from './common';\nimport {\n    serializeFunction,\n    serializeError, type SerializedError,\n    serializePromise,\n    serializeRegex, type SerializedRegex,\n    serializeDate, type SerializedDate,\n    serializeArray,\n    serializeObject,\n    serializeString,\n    serializeNumber,\n    serializeBoolean,\n    serializeNull,\n    serializeUndefined\n} from './serializers';\n\ntype NativeSerializer<V : mixed, S : mixed, T : $Values<typeof TYPE>> = (value : V, key : string) => NativeSerializedType<T, S>;\ntype CustomSerializer<V : mixed, S : mixed, T : string> = (value : V, key : string) => CustomSerializedType<T, S>;\ntype PrimitiveSerializer<V : mixed, S : mixed> = (value : V, key : string) => S;\ntype CustomOrPrimitiveSerializer<V : mixed, T : string> = CustomSerializer<V, *, T> | PrimitiveSerializer<V, *>;\ntype NativeOrCustomOrPrimitiveSerializer<V : mixed, S : mixed, T : string> = NativeSerializer<V, S, T> | CustomOrPrimitiveSerializer<V, T>;\n\ntype Serializers = {|\n    function? : CustomOrPrimitiveSerializer<Function, typeof TYPE.FUNCTION>,\n    error? : NativeOrCustomOrPrimitiveSerializer<Error, SerializedError, typeof TYPE.ERROR>,\n    promise? : CustomOrPrimitiveSerializer<Thenable, typeof TYPE.PROMISE>,\n    regex? : NativeOrCustomOrPrimitiveSerializer<RegExp, SerializedRegex, typeof TYPE.REGEX>,\n    date? : NativeOrCustomOrPrimitiveSerializer<Date, SerializedDate, typeof TYPE.DATE>,\n    array? : CustomOrPrimitiveSerializer<$ReadOnlyArray<mixed>, typeof TYPE.ARRAY>,\n    object? : CustomOrPrimitiveSerializer<Object, typeof TYPE.OBJECT>,\n    string? : CustomOrPrimitiveSerializer<string, typeof TYPE.STRING>,\n    number? : CustomOrPrimitiveSerializer<number, typeof TYPE.NUMBER>,\n    boolean? : CustomOrPrimitiveSerializer<boolean, typeof TYPE.BOOLEAN>,\n    null? : CustomOrPrimitiveSerializer<null, typeof TYPE.NULL>,\n    undefined? : CustomOrPrimitiveSerializer<void, typeof TYPE.UNDEFINED>\n|};\n\nconst SERIALIZER : Serializers = {\n    [ TYPE.FUNCTION ]:  serializeFunction,\n    [ TYPE.ERROR ]:     serializeError,\n    [ TYPE.PROMISE ]:   serializePromise,\n    [ TYPE.REGEX ]:     serializeRegex,\n    [ TYPE.DATE ]:      serializeDate,\n    [ TYPE.ARRAY ]:     serializeArray,\n    [ TYPE.OBJECT ]:    serializeObject,\n    [ TYPE.STRING ]:    serializeString,\n    [ TYPE.NUMBER ]:    serializeNumber,\n    [ TYPE.BOOLEAN ]:   serializeBoolean,\n    [ TYPE.NULL ]:      serializeNull,\n    [ TYPE.UNDEFINED ]: serializeUndefined\n};\n\n// $FlowFixMe\nconst defaultSerializers : Serializers = {};\n\nexport function serialize<T : mixed>(obj : T, serializers : Serializers = defaultSerializers) : string {\n\n    function replacer(key) : ?mixed {\n        const val = this[key];\n\n        if (isSerializedType(this)) {\n            return val;\n        }\n        \n        const type = determineType(val);\n\n        if (!type) {\n            return val;\n        }\n\n        // $FlowFixMe\n        const serializer = serializers[type] || SERIALIZER[type];\n\n        if (!serializer) {\n            return val;\n        }\n\n        return serializer(val, key);\n    }\n\n    const result = JSON.stringify(obj, replacer);\n\n    if (typeof result === 'undefined') {\n        return TYPE.UNDEFINED;\n    }\n\n    return result;\n}\n","/* @flow */\n\nexport type SerializedFunction = void;\n\nexport function serializeFunction() : SerializedFunction {\n    // pass\n}\n\nexport function deserializeFunction() {\n    throw new Error(`Function serialization is not implemented; nothing to deserialize`);\n}\n","/* @flow */\n\nimport { serializeType } from '../common';\nimport { TYPE } from '../constants';\nimport type { NativeSerializedType } from '../types';\n\nimport { serializeObject } from './object';\n\nexport type SerializedError = {|\n    message : string,\n    stack : string,\n    code : string | number | void,\n    data : mixed\n|};\n\n// $FlowFixMe\nexport function serializeError({ message, stack, code, data } : Error) : NativeSerializedType<typeof TYPE.ERROR, SerializedError> {\n    return serializeType(TYPE.ERROR, { message, stack, code, data });\n}\n\nexport function deserializeError({ message, stack, code, data } : SerializedError) : Error {\n    const error = new Error(message);\n    // $FlowFixMe\n    error.code = code;\n\n    if (data) {\n        // $FlowFixMe\n        error.data = serializeObject(data);\n    }\n\n    error.stack = `${ stack }\\n\\n${ error.stack }`;\n    return error;\n}\n","/* @flow */\n\nimport type { Thenable } from '../types';\n\nexport type SerializedPromise = void;\n\nexport function serializePromise() : SerializedPromise {\n    // pass\n}\n\nexport function deserializePromise() : Thenable {\n    throw new Error(`Promise serialization is not implemented; nothing to deserialize`);\n}\n","/* @flow */\n\nimport { serializeType } from '../common';\nimport { TYPE } from '../constants';\nimport type { NativeSerializedType } from '../types';\n\nexport type SerializedRegex = string;\n\nexport function serializeRegex(val : RegExp) : NativeSerializedType<typeof TYPE.REGEX, SerializedRegex> {\n    return serializeType(TYPE.REGEX, val.source);\n}\n\nexport function deserializeRegex(val : string) : RegExp {\n    // eslint-disable-next-line security/detect-non-literal-regexp\n    return new RegExp(val);\n}\n","/* @flow */\n\nimport { serializeType } from '../common';\nimport { TYPE } from '../constants';\nimport type { NativeSerializedType } from '../types';\n\nexport type SerializedDate = string;\n\nexport function serializeDate(val : Date) : NativeSerializedType<typeof TYPE.DATE, SerializedDate> {\n    return serializeType(TYPE.DATE, val.toJSON());\n}\n\nexport function deserializeDate(val : string) : Date {\n    return new Date(val);\n}\n","/* @flow */\n\nexport type SerializedArray<T : mixed = mixed> = $ReadOnlyArray<T>;\n\nexport function serializeArray<T : mixed>(val : $ReadOnlyArray<T>) : SerializedArray<T> {\n    return val;\n}\n\nexport function deserializeArray<T : mixed>(val : SerializedArray<T>) : $ReadOnlyArray<T> {\n    return val;\n}\n","/* @flow */\n\nexport type SerializedObject = Object;\n\nexport function serializeObject(val : Object) : SerializedObject {\n    return val;\n}\n\nexport function deserializeObject(val : SerializedObject) : Object {\n    return val;\n}\n","/* @flow */\n\nexport type SerializedString = string;\n\nexport function serializeString(val : string) : SerializedString {\n    return val;\n}\n\nexport function deserializeString(val : SerializedString) : string {\n    return val;\n}\n","/* @flow */\n\nexport type SerializedNumber = number;\n\nexport function serializeNumber(val : number) : SerializedNumber {\n    return val;\n}\n\nexport function deserializeNumber(val : SerializedNumber) : number {\n    return val;\n}\n","/* @flow */\n\nexport type SerializedBoolean = boolean;\n\nexport function serializeBoolean(val : boolean) : SerializedBoolean {\n    return val;\n}\n\nexport function deserializeBoolean(val : SerializedBoolean) : boolean {\n    return val;\n}\n","/* @flow */\n\nexport type SerializedNull = null;\n\nexport function serializeNull(val : null) : SerializedNull {\n    return val;\n}\n\nexport function deserializeNull(val : SerializedNull) : null {\n    return val;\n}\n","/* @flow */\n\nimport type { NativeSerializedType } from '../types';\nimport { serializeType } from '../common';\nimport { TYPE } from '../constants';\n\nexport type SerializedUndefined = void;\n\nexport function serializeUndefined(val : void) : NativeSerializedType<typeof TYPE.UNDEFINED, SerializedUndefined> {\n    return serializeType(TYPE.UNDEFINED, val);\n}\n\nexport function deserializeUndefined() : void {\n    // pass\n}\n","/* @flow */\n\nimport type { Thenable } from './types';\nimport { TYPE } from './constants';\nimport { determineType, isSerializedType } from './common';\nimport {\n    deserializeFunction,\n    deserializeError, type SerializedError,\n    deserializePromise,\n    deserializeRegex, type SerializedRegex,\n    deserializeDate, type SerializedDate,\n    deserializeArray,\n    deserializeObject,\n    deserializeString,\n    deserializeNumber,\n    deserializeBoolean,\n    deserializeNull,\n    deserializeUndefined\n} from './serializers';\n\ntype Deserializer<V : mixed, S : mixed> = (serializedValue : S, key : string) => V;\ntype PrimitiveDeserializer<V, S = V> = (serializedValue : S, key : string) => V;\n\ntype Deserializers = {\n    function? : Deserializer<Function, *>,\n    error? : Deserializer<Error, SerializedError>,\n    promise? : Deserializer<Thenable, *>,\n    regex? : Deserializer<RegExp, SerializedRegex>,\n    date? : Deserializer<Date, SerializedDate>,\n    array? : PrimitiveDeserializer<$ReadOnlyArray<mixed>>,\n    object? : PrimitiveDeserializer<Object>,\n    string? : PrimitiveDeserializer<string>,\n    number? : PrimitiveDeserializer<number>,\n    boolean? : PrimitiveDeserializer<boolean>,\n    null? : PrimitiveDeserializer<null>,\n    [string] : Deserializer<mixed, *>,\n    undefined? : PrimitiveDeserializer<void>\n};\n\n// $FlowFixMe\nconst DESERIALIZER : Deserializers = {\n    [ TYPE.FUNCTION ]:  deserializeFunction,\n    [ TYPE.ERROR ]:     deserializeError,\n    [ TYPE.PROMISE ]:   deserializePromise,\n    [ TYPE.REGEX ]:     deserializeRegex,\n    [ TYPE.DATE ]:      deserializeDate,\n    [ TYPE.ARRAY ]:     deserializeArray,\n    [ TYPE.OBJECT ]:    deserializeObject,\n    [ TYPE.STRING ]:    deserializeString,\n    [ TYPE.NUMBER ]:    deserializeNumber,\n    [ TYPE.BOOLEAN ]:   deserializeBoolean,\n    [ TYPE.NULL ]:      deserializeNull,\n    [ TYPE.UNDEFINED ]: deserializeUndefined\n};\n\n// $FlowFixMe\nconst defaultDeserializers : Deserializers = {};\n\nexport function deserialize<T : mixed | null | void>(str : string, deserializers : Deserializers = defaultDeserializers) : T {\n    if (str === TYPE.UNDEFINED) {\n        // $FlowFixMe\n        return;\n    }\n\n    function replacer(key, val) : ?mixed {\n        if (isSerializedType(this)) {\n            return val;\n        }\n\n        let type;\n        let value;\n\n        if (isSerializedType(val)) {\n            type = val.__type__;\n            value = val.__val__;\n        } else {\n            type = determineType(val);\n            value = val;\n        }\n\n        if (!type) {\n            return value;\n        }\n\n        // $FlowFixMe\n        const deserializer = deserializers[type] || DESERIALIZER[type];\n\n        if (!deserializer) {\n            return value;\n        }\n\n        return deserializer(value, key);\n    }\n\n    return JSON.parse(str, replacer);\n}\n","/* @flow */\n/* eslint no-use-before-define: off */\n\nimport { isSameDomain, isWindowClosed, type CrossDomainWindowType, closeWindow,\n    type DomainMatcher, getOpener, WINDOW_TYPE, isWindow, assertSameDomain, getFrameForWindow } from '@krakenjs/cross-domain-utils/src';\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { uniqueID, memoizePromise, noop, submitForm } from '@krakenjs/belter/src';\nimport { serializeType, type CustomSerializedType } from '@krakenjs/universal-serialize/src';\n\nimport { SERIALIZATION_TYPE, METHOD } from '../conf';\nimport { windowStore, globalStore } from '../global';\nimport { getWindowInstanceID } from '../lib';\nimport { linkWindow } from '../bridge';\nimport type { SendType } from '../types';\n\nfunction cleanupProxyWindows() {\n    const idToProxyWindow = globalStore('idToProxyWindow');\n    for (const id of idToProxyWindow.keys()) {\n        // $FlowFixMe\n        if (idToProxyWindow.get(id).shouldClean()) {\n            idToProxyWindow.del(id);\n        }\n    }\n}\n\ntype SetLocationOptions = {|\n    method? : $Values<typeof METHOD>,\n    body? : {|\n        [string] : string | boolean\n    |}\n|};\n\ntype SerializedWindowType = {|\n    id : string,\n    getType : () => ZalgoPromise<$Values<typeof WINDOW_TYPE>>,\n    close : () => ZalgoPromise<void>,\n    focus : () => ZalgoPromise<void>,\n    isClosed : () => ZalgoPromise<boolean>,\n    setLocation : (url : string, opts? : SetLocationOptions) => ZalgoPromise<void>,\n    getName : () => ZalgoPromise<?string>,\n    setName : (string) => ZalgoPromise<void>,\n    getInstanceID : () => ZalgoPromise<string>\n|};\n\nfunction getSerializedWindow(winPromise : ZalgoPromise<CrossDomainWindowType>, { send, id = uniqueID() } : {| send : SendType, id? : string |}) : SerializedWindowType {\n\n    let windowNamePromise = winPromise.then(win => {\n        if (isSameDomain(win)) {\n            return assertSameDomain(win).name;\n        }\n    });\n\n    const windowTypePromise = winPromise.then(window => {\n        if (!isWindowClosed(window)) {\n            return getOpener(window) ? WINDOW_TYPE.POPUP : WINDOW_TYPE.IFRAME;\n        } else {\n            throw new Error(`Window is closed, can not determine type`);\n        }\n    });\n\n    windowNamePromise.catch(noop);\n    windowTypePromise.catch(noop);\n\n    const getName = () => winPromise.then(win => {\n        if (isWindowClosed(win)) {\n            return;\n        }\n\n        if (isSameDomain(win)) {\n            return assertSameDomain(win).name;\n        }\n\n        return windowNamePromise;\n    });\n\n    const getDefaultSetLocationOptions = () => {\n        // $FlowFixMe\n        return {};\n    };\n\n    const setLocation = (href : string, opts? : SetLocationOptions = getDefaultSetLocationOptions()) => winPromise.then(win => {\n        const domain = `${ window.location.protocol }//${ window.location.host }`;\n        const { method = METHOD.GET, body } = opts;\n\n        if (href.indexOf('/') === 0) {\n            href = `${ domain }${ href }`;\n        } else if (!href.match(/^https?:\\/\\//) && href.indexOf(domain) !== 0) {\n            throw new Error(`Expected url to be http or https url, or absolute path, got ${ JSON.stringify(href) }`);\n        }\n\n        if (method === METHOD.POST) {\n            return getName().then(name => {\n                if (!name) {\n                    throw new Error(`Can not post to window without target name`);\n                }\n\n                submitForm({\n                    url:    href,\n                    target: name,\n                    method,\n                    body\n                });\n            });\n        } else if (method === METHOD.GET) {\n            if (isSameDomain(win)) {\n                try {\n                    if (win.location && typeof win.location.replace === 'function') {\n                        // $FlowFixMe\n                        win.location.replace(href);\n                        return;\n                    }\n                } catch (err) {\n                    // pass\n                }\n            }\n\n            win.location = href;\n\n        } else {\n            throw new Error(`Unsupported method: ${ method }`);\n        }\n    });\n\n    return {\n        id,\n        getType: () => {\n            return windowTypePromise;\n        },\n        getInstanceID: memoizePromise(() => winPromise.then(win => getWindowInstanceID(win, { send }))),\n        close:         () => winPromise.then(closeWindow),\n        getName,\n        focus:         () => winPromise.then(win => {\n            win.focus();\n        }),\n        isClosed: () => winPromise.then(win => {\n            return isWindowClosed(win);\n        }),\n        setLocation,\n        setName: (name) => winPromise.then(win => {\n            if (__POST_ROBOT__.__IE_POPUP_SUPPORT__) {\n                linkWindow({ win, name });\n            }\n\n            const sameDomain = isSameDomain(win);\n            const frame = getFrameForWindow(win);\n\n            if (!sameDomain) {\n                throw new Error(`Can not set name for cross-domain window: ${ name }`);\n            }\n\n            assertSameDomain(win).name = name;\n            if (frame) {\n                frame.setAttribute('name', name);\n            }\n\n            windowNamePromise = ZalgoPromise.resolve(name);\n        })\n    };\n}\n\nexport class ProxyWindow {\n\n    id : string;\n    isProxyWindow : true = true;\n    serializedWindow : SerializedWindowType;\n    actualWindow : ?CrossDomainWindowType;\n    actualWindowPromise : ZalgoPromise<CrossDomainWindowType>;\n    send : SendType;\n    name : string;\n\n    constructor({ send, win, serializedWindow } : {| win? : CrossDomainWindowType, serializedWindow? : SerializedWindowType, send : SendType |}) {\n        this.actualWindowPromise = new ZalgoPromise();\n        this.serializedWindow = serializedWindow || getSerializedWindow(this.actualWindowPromise, { send });\n\n        globalStore('idToProxyWindow').set(this.getID(), this);\n        if (win) {\n            this.setWindow(win, { send });\n        }\n    }\n\n    getID() : string {\n        return this.serializedWindow.id;\n    }\n\n    getType() : ZalgoPromise<$Values<typeof WINDOW_TYPE>> {\n        return this.serializedWindow.getType();\n    }\n\n    isPopup() : ZalgoPromise<boolean> {\n        return this.getType().then(type => {\n            return type === WINDOW_TYPE.POPUP;\n        });\n    }\n\n    setLocation(href : string, opts? : SetLocationOptions) : ZalgoPromise<ProxyWindow> {\n        return this.serializedWindow.setLocation(href, opts).then(() => this);\n    }\n\n    getName() : ZalgoPromise<?string> {\n        return this.serializedWindow.getName();\n    }\n\n    setName(name : string) : ZalgoPromise<ProxyWindow> {\n        return this.serializedWindow.setName(name).then(() => this);\n    }\n\n    close() : ZalgoPromise<ProxyWindow> {\n        return this.serializedWindow.close().then(() => this);\n    }\n\n    focus() : ZalgoPromise<ProxyWindow> {\n        const isPopupPromise = this.isPopup();\n        const getNamePromise = this.getName();\n\n        const reopenPromise = ZalgoPromise.hash({ isPopup: isPopupPromise, name: getNamePromise }).then(({ isPopup, name }) => {\n            if (isPopup && name) {\n                window.open('', name, 'noopener');\n            }\n        });\n        const focusPromise = this.serializedWindow.focus();\n\n        return ZalgoPromise.all([\n            reopenPromise,\n            focusPromise\n        ]).then(() => this);\n    }\n\n    isClosed() : ZalgoPromise<boolean> {\n        return this.serializedWindow.isClosed();\n    }\n\n    getWindow() : ?CrossDomainWindowType {\n        return this.actualWindow;\n    }\n\n    setWindow(win : CrossDomainWindowType, { send } : {| send : SendType |}) {\n        this.actualWindow = win;\n        this.actualWindowPromise.resolve(this.actualWindow);\n        this.serializedWindow = getSerializedWindow(this.actualWindowPromise, { send, id: this.getID() });\n        windowStore('winToProxyWindow').set(win, this);\n    }\n\n    awaitWindow() : ZalgoPromise<CrossDomainWindowType> {\n        return this.actualWindowPromise;\n    }\n\n    matchWindow(win : CrossDomainWindowType, { send } : {| send : SendType |}) : ZalgoPromise<boolean> {\n        return ZalgoPromise.try(() => {\n            if (this.actualWindow) {\n                return win === this.actualWindow;\n            }\n\n            return ZalgoPromise.hash({\n                proxyInstanceID:       this.getInstanceID(),\n                knownWindowInstanceID: getWindowInstanceID(win, { send })\n            }).then(({ proxyInstanceID, knownWindowInstanceID }) => {\n                const match = proxyInstanceID === knownWindowInstanceID;\n\n                if (match) {\n                    this.setWindow(win, { send });\n                }\n\n                return match;\n            });\n        });\n    }\n\n    unwrap() : CrossDomainWindowType | ProxyWindow {\n        return this.actualWindow || this;\n    }\n\n    getInstanceID() : ZalgoPromise<string> {\n        return this.serializedWindow.getInstanceID();\n    }\n\n    shouldClean() : boolean {\n        return Boolean(this.actualWindow && isWindowClosed(this.actualWindow));\n    }\n\n    serialize() : SerializedWindowType {\n        return this.serializedWindow;\n    }\n\n    static unwrap(win : CrossDomainWindowType | ProxyWindow) : CrossDomainWindowType | ProxyWindow {\n        return ProxyWindow.isProxyWindow(win)\n            // $FlowFixMe\n            ? win.unwrap()\n            : win;\n    }\n\n    static serialize(win : CrossDomainWindowType | ProxyWindow, { send } : {| send : SendType |}) : SerializedWindowType {\n        cleanupProxyWindows();\n        return ProxyWindow.toProxyWindow(win, { send }).serialize();\n    }\n\n    static deserialize(serializedWindow : SerializedWindowType, { send } : {| send : SendType |}) : ProxyWindow {\n        cleanupProxyWindows();\n        return globalStore('idToProxyWindow').get(serializedWindow.id) || new ProxyWindow({ serializedWindow, send });\n    }\n\n    static isProxyWindow(obj : CrossDomainWindowType | ProxyWindow) : boolean {\n        // $FlowFixMe\n        return Boolean(obj && !isWindow(obj) && obj.isProxyWindow);\n    }\n\n    static toProxyWindow(win : CrossDomainWindowType | ProxyWindow, { send } : {| send : SendType |}) : ProxyWindow {\n        cleanupProxyWindows();\n\n        if (ProxyWindow.isProxyWindow(win)) {\n            // $FlowFixMe\n            return win;\n        }\n\n        // $FlowFixMe\n        const actualWindow : CrossDomainWindowType = win;\n\n        return windowStore('winToProxyWindow').get(actualWindow) || new ProxyWindow({ win: actualWindow, send });\n    }\n}\n\nexport type SerializedWindow = CustomSerializedType<typeof SERIALIZATION_TYPE.CROSS_DOMAIN_WINDOW, SerializedWindowType>;\n\nexport function serializeWindow(destination : CrossDomainWindowType | ProxyWindow, domain : DomainMatcher, win : CrossDomainWindowType, { send } : {| send : SendType |}) : SerializedWindow {\n    return serializeType(SERIALIZATION_TYPE.CROSS_DOMAIN_WINDOW, ProxyWindow.serialize(win, { send }));\n}\n\nexport function deserializeWindow(source : CrossDomainWindowType | ProxyWindow, origin : string, win : SerializedWindowType, { send } : {| send : SendType |}) : ProxyWindow {\n    return ProxyWindow.deserialize(win, { send });\n}\n","/* @flow */\n\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { getDomain, isSameDomain, isOpener, isSameTopWindow, matchDomain, getUserAgent, getDomainFromUrl, type CrossDomainWindowType } from '@krakenjs/cross-domain-utils/src';\nimport { noop } from '@krakenjs/belter/src';\n\nimport { BRIDGE_NAME_PREFIX } from '../conf';\nimport { windowStore } from '../global';\n\nexport function needsBridgeForBrowser() : boolean {\n\n    if (getUserAgent(window).match(/MSIE|trident|edge\\/12|edge\\/13/i)) {\n        return true;\n    }\n\n    return false;\n}\n\nexport function needsBridgeForWin(win : CrossDomainWindowType) : boolean {\n\n    if (!isSameTopWindow(window, win)) {\n        return true;\n    }\n\n    return false;\n}\n\nexport function needsBridgeForDomain(domain : ?string, win : ?CrossDomainWindowType) : boolean {\n\n    if (domain) {\n        if (getDomain() !== getDomainFromUrl(domain)) {\n            return true;\n        }\n    } else if (win) {\n        if (!isSameDomain(win))  {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function needsBridge({ win, domain } : {| win? : CrossDomainWindowType, domain? : string |}) : boolean {\n\n    if (!needsBridgeForBrowser()) {\n        return false;\n    }\n\n    if (domain && !needsBridgeForDomain(domain, win)) {\n        return false;\n    }\n\n    if (win && !needsBridgeForWin(win)) {\n        return false;\n    }\n\n    return true;\n}\n\nexport function getBridgeName(domain : string) : string {\n\n    domain = domain || getDomainFromUrl(domain);\n\n    const sanitizedDomain = domain.replace(/[^a-zA-Z0-9]+/g, '_');\n\n    const id = `${ BRIDGE_NAME_PREFIX }_${ sanitizedDomain }`;\n\n    return id;\n}\n\nexport function isBridge() : boolean {\n    return Boolean(window.name && window.name === getBridgeName(getDomain()));\n}\n\nexport const documentBodyReady : ZalgoPromise<HTMLBodyElement> = new ZalgoPromise(resolve => {\n\n    if (window.document && window.document.body) {\n        return resolve(window.document.body);\n    }\n\n    const interval = setInterval(() => {\n        if (window.document && window.document.body) {\n            clearInterval(interval);\n            return resolve(window.document.body);\n        }\n    }, 10);\n});\n\nexport function registerRemoteWindow(win : CrossDomainWindowType) {\n    const remoteWindowPromises = windowStore('remoteWindowPromises');\n    remoteWindowPromises.getOrSet(win, () => new ZalgoPromise());\n}\n\nexport function findRemoteWindow(win : CrossDomainWindowType) : ZalgoPromise<(remoteWin : CrossDomainWindowType, message : string, remoteDomain : string) => void> {\n    const remoteWindowPromises = windowStore('remoteWindowPromises');\n    const remoteWinPromise = remoteWindowPromises.get(win);\n\n    if (!remoteWinPromise) {\n        throw new Error(`Remote window promise not found`);\n    }\n\n    return remoteWinPromise;\n}\n\ntype SendMessageType = {|\n    (string) : void,\n    fireAndForget : (string) => void\n|};\n\nexport function registerRemoteSendMessage(win : CrossDomainWindowType, domain : string, sendMessage : SendMessageType) {\n    const sendMessageWrapper = (remoteWin : CrossDomainWindowType, remoteDomain : string, message : string) => {\n        if (remoteWin !== win) {\n            throw new Error(`Remote window does not match window`);\n        }\n\n        if (!matchDomain(remoteDomain, domain)) {\n            throw new Error(`Remote domain ${ remoteDomain } does not match domain ${ domain }`);\n        }\n\n        sendMessage.fireAndForget(message);\n    };\n\n    findRemoteWindow(win).resolve(sendMessageWrapper);\n}\n\nexport function rejectRemoteSendMessage(win : CrossDomainWindowType, err : Error) {\n    findRemoteWindow(win).reject(err).catch(noop);\n}\n\nexport function sendBridgeMessage(win : CrossDomainWindowType, domain : string, message : string) : ZalgoPromise<void> {\n\n    const messagingChild  = isOpener(window, win);\n    const messagingParent = isOpener(win, window);\n\n    if (!messagingChild && !messagingParent) {\n        throw new Error(`Can only send messages to and from parent and popup windows`);\n    }\n\n    return findRemoteWindow(win).then(sendMessage => {\n        return sendMessage(win, domain, message);\n    });\n}\n","/* @flow */\n\nimport { matchDomain, getDomain, type CrossDomainWindowType, type DomainMatcher } from '@krakenjs/cross-domain-utils/src';\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { uniqueID, isRegex, arrayFrom } from '@krakenjs/belter/src';\nimport { serializeType, type CustomSerializedType } from '@krakenjs/universal-serialize/src';\n\nimport { MESSAGE_NAME, WILDCARD, SERIALIZATION_TYPE } from '../conf';\nimport { windowStore, globalStore } from '../global';\nimport type { OnType, SendType, CancelableType } from '../types';\n\nimport { ProxyWindow } from './window';\n\ntype StoredMethod = {|\n    name : string,\n    domain : DomainMatcher,\n    val : Function,\n    source : CrossDomainWindowType | ProxyWindow\n|};\n\nfunction addMethod(id : string, val : Function, name : string, source : CrossDomainWindowType | ProxyWindow, domain : DomainMatcher) {\n    const methodStore = windowStore('methodStore');\n    const proxyWindowMethods = globalStore('proxyWindowMethods');\n    \n    if (ProxyWindow.isProxyWindow(source)) {\n        proxyWindowMethods.set(id, { val, name, domain, source });\n    } else {\n        proxyWindowMethods.del(id);\n        // $FlowFixMe\n        const methods = methodStore.getOrSet(source, () => ({}));\n        methods[id] = { domain, name, val, source };\n    }\n}\n\nfunction lookupMethod(source : CrossDomainWindowType, id : string) : ?StoredMethod {\n    const methodStore = windowStore('methodStore');\n    const proxyWindowMethods = globalStore('proxyWindowMethods');\n    const methods = methodStore.getOrSet(source, () => ({}));\n    return methods[id] || proxyWindowMethods.get(id);\n}\n\nfunction stringifyArguments(args : $ReadOnlyArray<mixed> = []) : string {\n    return arrayFrom(args).map(arg => {\n        if (typeof arg === 'string') {\n            return `'${ arg }'`;\n        }\n        if (arg === undefined) {\n            return 'undefined';\n        }\n        if (arg === null) {\n            return 'null';\n        }\n        if (typeof arg === 'boolean') {\n            return arg.toString();\n        }\n        if (Array.isArray(arg)) {\n            return '[ ... ]';\n        }\n        if (typeof arg === 'object') {\n            return '{ ... }';\n        }\n        if (typeof arg === 'function') {\n            return '() => { ... }';\n        }\n        return `<${ typeof arg }>`;\n    }).join(', ');\n}\n\nfunction listenForFunctionCalls({ on, send } : {| on : OnType, send : SendType |}) : CancelableType {\n    return globalStore('builtinListeners').getOrSet('functionCalls', () => {\n        return on(MESSAGE_NAME.METHOD, { domain: WILDCARD }, ({ source, origin, data } : {| source : CrossDomainWindowType, origin : string, data : Object |}) => {\n            const { id, name } = data;\n\n            const meth = lookupMethod(source, id);\n    \n            if (!meth) {\n                throw new Error(`Could not find method '${ name }' with id: ${ data.id } in ${ getDomain(window) }`);\n            }\n\n            const { source: methodSource, domain, val } = meth;\n            \n            return ZalgoPromise.try(() => {\n                if (!matchDomain(domain, origin)) {\n                    // $FlowFixMe\n                    throw new Error(`Method '${ data.name }' domain ${ JSON.stringify(isRegex(meth.domain) ? meth.domain.source : meth.domain) } does not match origin ${ origin } in ${ getDomain(window) }`);\n                }\n                \n                if (ProxyWindow.isProxyWindow(methodSource)) {\n                    // $FlowFixMe\n                    return methodSource.matchWindow(source, { send }).then(match => {\n                        if (!match) {\n                            throw new Error(`Method call '${ data.name }' failed - proxy window does not match source in ${ getDomain(window) }`);\n                        }\n                    });\n                }\n            }).then(() => {\n                return val.apply({ source, origin }, data.args);\n            }, err => {\n                return ZalgoPromise.try(() => {\n                    if (val.onError) {\n                        return val.onError(err);\n                    }\n                }).then(() => {\n                    // $FlowFixMe\n                    if (err.stack) {\n                        // $FlowFixMe\n                        err.stack = `Remote call to ${ name }(${ stringifyArguments(data.args) }) failed\\n\\n${ err.stack }`;\n                    }\n\n                    throw err;\n                });\n            }).then(result => {\n                return { result, id, name };\n            });\n        });\n    });\n}\n\nexport type SerializedFunction = CustomSerializedType<typeof SERIALIZATION_TYPE.CROSS_DOMAIN_FUNCTION, {|\n    id : string,\n    name : string\n|}>;\n\n// eslint-disable-next-line flowtype/require-exact-type\ntype SerializableFunction<T> = {\n    () : ZalgoPromise<T> | T,\n    __id__? : string,\n    __name__? : string\n};\n\nexport function serializeFunction<T>(destination : CrossDomainWindowType | ProxyWindow, domain : DomainMatcher, val : SerializableFunction<T>, key : string, { on, send } : {| on : OnType, send : SendType |}) : SerializedFunction {\n    listenForFunctionCalls({ on, send });\n    \n    const id = val.__id__ || uniqueID();\n    destination = ProxyWindow.unwrap(destination);\n    let name = val.__name__ || val.name || key;\n\n    if (typeof name === 'string' && typeof name.indexOf === 'function' && name.indexOf('anonymous::') === 0) {\n        name = name.replace('anonymous::', `${ key }::`);\n    }\n\n    if (ProxyWindow.isProxyWindow(destination)) {\n        addMethod(id, val, name, destination, domain);\n\n        // $FlowFixMe\n        destination.awaitWindow().then(win => {\n            addMethod(id, val, name, win, domain);\n        });\n    } else {\n        addMethod(id, val, name, destination, domain);\n    }\n\n    return serializeType(SERIALIZATION_TYPE.CROSS_DOMAIN_FUNCTION, { id, name });\n}\n\nexport function deserializeFunction<T>(source : CrossDomainWindowType | ProxyWindow, origin : string, { id, name } : {| id : string, name : string |}, { send } : {| send : SendType |}) : (...args : $ReadOnlyArray<mixed>) => ZalgoPromise<T> {\n    const getDeserializedFunction = (opts? : Object = {}) => {\n        function crossDomainFunctionWrapper<X : mixed>() : ZalgoPromise<X> {\n            let originalStack;\n    \n            if (__DEBUG__) {\n                originalStack = (new Error(`Original call to ${ name }():`)).stack;\n            }\n    \n            return ProxyWindow.toProxyWindow(source, { send }).awaitWindow().then(win => {\n                const meth = lookupMethod(win, id);\n    \n                if (meth && meth.val !== crossDomainFunctionWrapper) {\n                    return meth.val.apply({ source: window, origin: getDomain() }, arguments);\n                } else {\n                    // $FlowFixMe[method-unbinding]\n                    const args = Array.prototype.slice.call(arguments);\n\n                    if (opts.fireAndForget) {\n                        return send(win, MESSAGE_NAME.METHOD, { id, name, args }, { domain: origin, fireAndForget: true });\n                    } else {\n                        return send(win, MESSAGE_NAME.METHOD, { id, name, args }, { domain: origin, fireAndForget: false })\n                            .then(res => res.data.result);\n                    }\n                }\n    \n            }).catch(err => {\n                // $FlowFixMe\n                if (__DEBUG__ && originalStack && err.stack) {\n                    // $FlowFixMe\n                    err.stack = `Remote call to ${ name }(${ stringifyArguments(arguments) }) failed\\n\\n${ err.stack }\\n\\n${ originalStack }`;\n                }\n                throw err;\n            });\n        }\n\n        crossDomainFunctionWrapper.__name__ = name;\n        crossDomainFunctionWrapper.__origin__ = origin;\n        crossDomainFunctionWrapper.__source__ = source;\n        crossDomainFunctionWrapper.__id__ = id;\n\n        crossDomainFunctionWrapper.origin = origin;\n\n        return crossDomainFunctionWrapper;\n    };\n\n    const crossDomainFunctionWrapper = getDeserializedFunction();\n    crossDomainFunctionWrapper.fireAndForget = getDeserializedFunction({ fireAndForget: true });\n\n    return crossDomainFunctionWrapper;\n}\n","/* @flow */\n\nimport { type CrossDomainWindowType, isWindow, type DomainMatcher } from '@krakenjs/cross-domain-utils/src';\nimport { TYPE, serialize, deserialize, type Thenable } from '@krakenjs/universal-serialize/src';\n\nimport { SERIALIZATION_TYPE } from '../conf';\nimport type { OnType, SendType } from '../types';\n\nimport { serializeFunction, deserializeFunction, type SerializedFunction } from './function';\nimport { serializePromise, deserializePromise, type SerializedPromise } from './promise';\nimport { serializeWindow, deserializeWindow, type SerializedWindow, ProxyWindow } from './window';\n\nexport function serializeMessage<T : mixed>(destination : CrossDomainWindowType | ProxyWindow, domain : DomainMatcher, obj : T, { on, send } : {| on : OnType, send : SendType |}) : string {\n    return serialize(obj, {\n        [ TYPE.PROMISE ]:  (val : Thenable, key : string) : SerializedPromise => serializePromise(destination, domain, val, key, { on, send }),\n        [ TYPE.FUNCTION ]: (val : Function, key : string) : SerializedFunction => serializeFunction(destination, domain, val, key, { on, send }),\n        [ TYPE.OBJECT ]:   (val : CrossDomainWindowType) : Object | SerializedWindow => {\n            return (isWindow(val) || ProxyWindow.isProxyWindow(val)) ? serializeWindow(destination, domain, val, { send }) : val;\n        }\n    });\n}\n\nexport function deserializeMessage<T : mixed>(source : CrossDomainWindowType | ProxyWindow, origin : string, message : string, { send } : {| on : OnType, send : SendType |}) : T {\n    return deserialize(message, {\n        [ SERIALIZATION_TYPE.CROSS_DOMAIN_ZALGO_PROMISE ]: (serializedPromise)  => deserializePromise(source, origin, serializedPromise),\n        [ SERIALIZATION_TYPE.CROSS_DOMAIN_FUNCTION ]:      (serializedFunction) => deserializeFunction(source, origin, serializedFunction, { send }),\n        [ SERIALIZATION_TYPE.CROSS_DOMAIN_WINDOW ]:        (serializedWindow)   => deserializeWindow(source, origin, serializedWindow, { send })\n    });\n}\n","/* @flow */\n\nimport { type CrossDomainWindowType, type DomainMatcher } from '@krakenjs/cross-domain-utils/src';\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { serializeType, type CustomSerializedType, type Thenable } from '@krakenjs/universal-serialize/src';\n\nimport { SERIALIZATION_TYPE } from '../conf';\nimport type { OnType, SendType } from '../types';\n\nimport { serializeFunction, type SerializedFunction } from './function';\nimport { ProxyWindow } from './window';\n\nexport type SerializedPromise = CustomSerializedType<typeof SERIALIZATION_TYPE.CROSS_DOMAIN_ZALGO_PROMISE, {|\n    then : SerializedFunction\n|}>;\n\nexport function serializePromise(destination : CrossDomainWindowType | ProxyWindow, domain : DomainMatcher, val : Thenable, key : string, { on, send } : {| on : OnType, send : SendType |}) : SerializedPromise {\n    return serializeType(SERIALIZATION_TYPE.CROSS_DOMAIN_ZALGO_PROMISE, {\n        then: serializeFunction(destination, domain, (resolve, reject) => val.then(resolve, reject), key, { on, send })\n    });\n}\n\nexport function deserializePromise<T>(source : CrossDomainWindowType | ProxyWindow, origin : string, { then } : {| then : Function |}) : ZalgoPromise<T> {\n    return new ZalgoPromise(then);\n}\n","/* @flow */\n\nimport { isSameDomain, isSameTopWindow, isActuallySameDomain, getActualDomain,\n    getDomain, type CrossDomainWindowType, PROTOCOL } from '@krakenjs/cross-domain-utils/src';\n\nimport { SEND_STRATEGY, WILDCARD } from '../../conf';\nimport { needsGlobalMessagingForBrowser } from '../../lib';\nimport { getGlobal } from '../../global';\nimport { sendBridgeMessage, needsBridgeForBrowser, isBridge } from '../../bridge';\n\ntype SendStrategies = {|\n    [$Values<typeof SEND_STRATEGY>] : (CrossDomainWindowType, string, string) => void\n|};\n\nexport const SEND_MESSAGE_STRATEGIES : SendStrategies = {};\n\nSEND_MESSAGE_STRATEGIES[SEND_STRATEGY.POST_MESSAGE] = (win : CrossDomainWindowType, serializedMessage : string, domain : string) => {\n    if (domain.indexOf(PROTOCOL.FILE) === 0) {\n        domain = WILDCARD;\n    }\n\n    if (__TEST__) {\n        if (needsGlobalMessagingForBrowser() && isSameTopWindow(window, win) === false) {\n            return;\n        }\n\n        if (domain.indexOf(PROTOCOL.MOCK) === 0) {\n            if (!isActuallySameDomain(win)) {\n                throw new Error(`Attempting to send message to mock domain ${ domain }, but window is actually cross-domain`);\n            }\n\n            // $FlowFixMe\n            const windowDomain = getDomain(win);\n                \n            if (windowDomain !== domain) {\n                throw new Error(`Mock domain target ${ domain } does not match window domain ${ windowDomain }`);\n            }\n\n            // $FlowFixMe\n            domain = getActualDomain(win);\n\n        }\n    }\n\n    win.postMessage(serializedMessage, domain);\n};\n\nif (__POST_ROBOT__.__IE_POPUP_SUPPORT__) {\n\n    SEND_MESSAGE_STRATEGIES[SEND_STRATEGY.BRIDGE] = (win : CrossDomainWindowType, serializedMessage : string, domain : string) => {\n\n        if (!needsBridgeForBrowser() && !isBridge()) {\n            throw new Error(`Bridge not needed for browser`);\n        }\n\n        if (isSameDomain(win)) {\n            throw new Error(`Post message through bridge disabled between same domain windows`);\n        }\n\n        if (isSameTopWindow(window, win) !== false) {\n            throw new Error(`Can only use bridge to communicate between two different windows, not between frames`);\n        }\n\n        sendBridgeMessage(win, domain, serializedMessage);\n    };\n}\n\nif (__POST_ROBOT__.__IE_POPUP_SUPPORT__ || __POST_ROBOT__.__GLOBAL_MESSAGE_SUPPORT__) {\n    \n    SEND_MESSAGE_STRATEGIES[SEND_STRATEGY.GLOBAL] = (win : CrossDomainWindowType, serializedMessage : string) => {\n\n        if (!needsGlobalMessagingForBrowser()) {\n            throw new Error(`Global messaging not needed for browser`);\n        }\n\n        if (!isSameDomain(win)) {\n            throw new Error(`Post message through global disabled between different domain windows`);\n        }\n\n        if (isSameTopWindow(window, win) !== false) {\n            throw new Error(`Can only use global to communicate between two different windows, not between frames`);\n        }\n\n        // $FlowFixMe\n        const foreignGlobal = getGlobal(win);\n\n        if (!foreignGlobal) {\n            throw new Error(`Can not find postRobot global on foreign window`);\n        }\n\n        foreignGlobal.receiveMessage({\n            source: window,\n            origin: getDomain(),\n            data:   serializedMessage\n        });\n    };\n}\n","/* @flow */\n\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { isWindowClosed, type CrossDomainWindowType } from '@krakenjs/cross-domain-utils/src';\nimport { stringifyError, noop } from '@krakenjs/belter/src';\n\nimport { serializeMessage } from '../../serialize';\nimport { windowStore, getGlobalKey } from '../../global';\nimport type { Message, PackedMessages } from '../types';\nimport type { OnType, SendType } from '../../types';\n\nimport { SEND_MESSAGE_STRATEGIES } from './strategies';\n\nfunction packMessages(messages : $ReadOnlyArray<Message>) : PackedMessages {\n    return {\n        [ getGlobalKey() ]: messages\n    };\n}\n\nexport function sendMessage(win : CrossDomainWindowType, domain : string, message : Message, { on, send } : {| on : OnType, send : SendType |}) : ZalgoPromise<void> {\n    return ZalgoPromise.try(() => {\n        const messageBuffer = windowStore();\n\n        const domainBuffer = messageBuffer.getOrSet(win, () => ({}));\n\n        domainBuffer.buffer = domainBuffer.buffer || [];\n        domainBuffer.buffer.push(message);\n\n        domainBuffer.flush = domainBuffer.flush || ZalgoPromise.flush().then(() => {\n            if (isWindowClosed(win)) {\n                throw new Error('Window is closed');\n            }\n\n            const serializedMessage = serializeMessage(win, domain, packMessages(domainBuffer.buffer || []), { on, send });\n            delete domainBuffer.buffer;\n\n            const strategies = Object.keys(SEND_MESSAGE_STRATEGIES);\n            const errors = [];\n\n            for (const strategyName of strategies) {\n                try {\n                    SEND_MESSAGE_STRATEGIES[strategyName](win, serializedMessage, domain);\n                } catch (err) {\n                    errors.push(err);\n                }\n            }\n\n            if (errors.length === strategies.length) {\n                throw new Error(`All post-robot messaging strategies failed:\\n\\n${ errors.map((err, i) => `${ i }. ${ stringifyError(err) }`).join('\\n\\n') }`);\n            }\n        });\n\n        return domainBuffer.flush.then(() => {\n            delete domainBuffer.flush;\n        });\n    }).then(noop);\n}\n","/* @flow */\n\nimport { type ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { matchDomain, type CrossDomainWindowType, type DomainMatcher } from '@krakenjs/cross-domain-utils/src';\nimport { isRegex, getOrSet, noop } from '@krakenjs/belter/src';\n\nimport { getWildcard, type WildCard, globalStore, windowStore } from '../global';\nimport { WILDCARD } from '../conf';\nimport { ProxyWindow } from '../serialize/window';\n\nexport function resetListeners() {\n    const responseListeners = globalStore('responseListeners');\n    const erroredResponseListeners = globalStore('erroredResponseListeners');\n    responseListeners.reset();\n    erroredResponseListeners.reset();\n}\n\nconst __DOMAIN_REGEX__ = '__domain_regex__';\n\nexport type RequestListenerType = {|\n    handler : ({| source : CrossDomainWindowType, origin : string, data : mixed |}) => (mixed | ZalgoPromise<mixed>),\n    handleError : (err : mixed) => void\n|};\n\nexport type ResponseListenerType = {|\n    name : string,\n    win : CrossDomainWindowType,\n    domain : DomainMatcher,\n    promise : ZalgoPromise<*>,\n    ack? : ?boolean,\n    cancelled? : ?boolean\n|};\n\nexport function addResponseListener(hash : string, listener : ResponseListenerType) {\n    const responseListeners = globalStore('responseListeners');\n    responseListeners.set(hash, listener);\n}\n\nexport function getResponseListener(hash : string) : ?ResponseListenerType {\n    const responseListeners = globalStore('responseListeners');\n    return responseListeners.get(hash);\n}\n\nexport function deleteResponseListener(hash : string) {\n    const responseListeners = globalStore('responseListeners');\n    responseListeners.del(hash);\n}\n\nexport function cancelResponseListeners() {\n    const responseListeners = globalStore('responseListeners');\n    for (const hash of responseListeners.keys()) {\n        const listener = responseListeners.get(hash);\n        if (listener) {\n            listener.cancelled = true;\n        }\n        responseListeners.del(hash);\n    }\n}\n\nexport function markResponseListenerErrored(hash : string) {\n    const erroredResponseListeners = globalStore('erroredResponseListeners');\n    erroredResponseListeners.set(hash, true);\n}\n\nexport function isResponseListenerErrored(hash : string) : boolean {\n    const erroredResponseListeners = globalStore('erroredResponseListeners');\n    return erroredResponseListeners.has(hash);\n}\n\nexport function getRequestListener({ name, win, domain } : {| name : string, win : ?(CrossDomainWindowType | WildCard), domain : ?(string | RegExp) |}) : ?RequestListenerType {\n    const requestListeners = windowStore('requestListeners');\n\n    if (win === WILDCARD) {\n        win = null;\n    }\n\n    if (domain === WILDCARD) {\n        domain = null;\n    }\n\n    if (!name) {\n        throw new Error(`Name required to get request listener`);\n    }\n\n    for (const winQualifier of [ win, getWildcard() ]) {\n        if (!winQualifier) {\n            continue;\n        }\n\n        const nameListeners = requestListeners.get(winQualifier);\n\n        if (!nameListeners) {\n            continue;\n        }\n\n        const domainListeners = nameListeners[name];\n\n        if (!domainListeners) {\n            continue;\n        }\n\n        if (domain && typeof domain === 'string') {\n            if (domainListeners[domain]) {\n                return domainListeners[domain];\n            }\n\n            if (domainListeners[__DOMAIN_REGEX__]) {\n                for (const { regex, listener } of domainListeners[__DOMAIN_REGEX__]) {\n                    if (matchDomain(regex, domain)) {\n                        return listener;\n                    }\n                }\n            }\n        }\n\n        if (domainListeners[WILDCARD]) {\n            return domainListeners[WILDCARD];\n        }\n    }\n}\n\n// eslint-disable-next-line complexity\nexport function addRequestListener({ name, win: winCandidate, domain } : {| name : string, win : ?(CrossDomainWindowType | WildCard | ProxyWindow), domain : ?DomainMatcher |}, listener : RequestListenerType) : {| cancel : () => void |} {\n    const requestListeners = windowStore('requestListeners');\n\n    if (!name || typeof name !== 'string') {\n        throw new Error(`Name required to add request listener`);\n    }\n\n    // $FlowFixMe\n    if (winCandidate && winCandidate !== WILDCARD && ProxyWindow.isProxyWindow(winCandidate)) {\n        // $FlowFixMe\n        const proxyWin : ProxyWindow = winCandidate;\n\n        const requestListenerPromise = proxyWin.awaitWindow().then(actualWin => {\n            return addRequestListener({ name, win: actualWin, domain }, listener);\n        });\n\n        return {\n            cancel: () => {\n                requestListenerPromise.then(requestListener => requestListener.cancel(), noop);\n            }\n        };\n    }\n\n    // $FlowFixMe\n    let win : ?(CrossDomainWindowType | WildCard) = winCandidate;\n\n    if (Array.isArray(win)) {\n        const listenersCollection = [];\n\n        for (const item of win) {\n            listenersCollection.push(addRequestListener({ name, domain, win: item }, listener));\n        }\n\n        return {\n            cancel() {\n                for (const cancelListener of listenersCollection) {\n                    cancelListener.cancel();\n                }\n            }\n        };\n    }\n\n    if (Array.isArray(domain)) {\n        const listenersCollection = [];\n\n        for (const item of domain) {\n            listenersCollection.push(addRequestListener({ name, win, domain: item }, listener));\n        }\n\n        return {\n            cancel() {\n                for (const cancelListener of listenersCollection) {\n                    cancelListener.cancel();\n                }\n            }\n        };\n    }\n\n    const existingListener = getRequestListener({ name, win, domain });\n\n    if (!win || win === WILDCARD) {\n        win = getWildcard();\n    }\n\n    domain = domain || WILDCARD;\n    const strDomain = domain.toString();\n\n    if (existingListener) {\n        if (win && domain) {\n            throw new Error(`Request listener already exists for ${ name } on domain ${ domain.toString() } for ${ win === getWildcard() ? 'wildcard' : 'specified' } window`);\n        } else if (win) {\n            throw new Error(`Request listener already exists for ${ name } for ${ win === getWildcard() ? 'wildcard' : 'specified' } window`);\n        } else if (domain) {\n            throw new Error(`Request listener already exists for ${ name } on domain ${ domain.toString() }`);\n        } else {\n            throw new Error(`Request listener already exists for ${ name }`);\n        }\n    }\n\n    const winNameListeners = requestListeners.getOrSet(win, () => ({}));\n    const winNameDomainListeners = getOrSet(winNameListeners, name, () => ({}));\n\n    let winNameDomainRegexListeners;\n    let winNameDomainRegexListener;\n\n    if (isRegex(domain)) {\n        winNameDomainRegexListeners = getOrSet(winNameDomainListeners, __DOMAIN_REGEX__, () => []);\n        winNameDomainRegexListener = { regex: domain, listener };\n        winNameDomainRegexListeners.push(winNameDomainRegexListener);\n    } else {\n        winNameDomainListeners[strDomain] = listener;\n    }\n\n    return {\n        cancel() {\n            delete winNameDomainListeners[strDomain];\n\n            if (winNameDomainRegexListener) {\n                winNameDomainRegexListeners.splice(winNameDomainRegexListeners.indexOf(winNameDomainRegexListener, 1));\n\n                if (!winNameDomainRegexListeners.length) {\n                    delete winNameDomainListeners[__DOMAIN_REGEX__];\n                }\n            }\n\n            if (!Object.keys(winNameDomainListeners).length) {\n                delete winNameListeners[name];\n            }\n\n            if (win && !Object.keys(winNameListeners).length) {\n                requestListeners.del(win);\n            }\n        }\n    };\n}\n","/* @flow */\n\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { isWindowClosed, type CrossDomainWindowType, getDomain, isSameTopWindow, PROTOCOL  } from '@krakenjs/cross-domain-utils/src';\nimport { addEventListener, noop } from '@krakenjs/belter/src';\n\nimport type { Message } from '../types';\nimport { MESSAGE_TYPE } from '../../conf';\nimport { markWindowKnown, needsGlobalMessagingForBrowser } from '../../lib';\nimport { deserializeMessage } from '../../serialize';\nimport { getGlobal, globalStore, getGlobalKey } from '../../global';\nimport type { OnType, SendType, MessageEvent, CancelableType } from '../../types';\n\nimport { handleRequest, handleResponse, handleAck } from './types';\n\nfunction deserializeMessages(message : string, source : CrossDomainWindowType, origin : string, { on, send } : {| on : OnType, send : SendType |}) : ?$ReadOnlyArray<Message> {\n    let parsedMessage;\n\n    try {\n        parsedMessage = deserializeMessage(source, origin, message, { on, send });\n    } catch (err) {\n        return;\n    }\n\n    if (!parsedMessage) {\n        return;\n    }\n\n    if (typeof parsedMessage !== 'object' || parsedMessage === null) {\n        return;\n    }\n\n    const parseMessages = parsedMessage[getGlobalKey()];\n\n    if (!Array.isArray(parseMessages)) {\n        return;\n    }\n\n    return parseMessages;\n}\n\nexport function receiveMessage(event : MessageEvent, { on, send } : {| on : OnType, send : SendType |}) {\n    const receivedMessages = globalStore('receivedMessages');\n\n    try {\n        if (!window || window.closed || !event.source) {\n            return;\n        }\n    } catch (err) {\n        return;\n    }\n\n    let { source, origin, data } = event;\n\n    if (__TEST__) {\n        if (isWindowClosed(source)) {\n            return;\n        }\n\n        // $FlowFixMe\n        origin = getDomain(source);\n    }\n\n    const messages = deserializeMessages(data, source, origin, { on, send });\n\n    if (!messages) {\n        return;\n    }\n\n    markWindowKnown(source);\n\n    for (const message of messages) {\n        if (receivedMessages.has(message.id)) {\n            return;\n        }\n\n        receivedMessages.set(message.id, true);\n\n        if (isWindowClosed(source) && !message.fireAndForget) {\n            return;\n        }\n\n        if (message.origin.indexOf(PROTOCOL.FILE) === 0) {\n            origin = `${ PROTOCOL.FILE }//`;\n        }\n\n        try {\n            if (message.type === MESSAGE_TYPE.REQUEST) {\n                handleRequest(source, origin, message, { on, send });\n            } else if (message.type === MESSAGE_TYPE.RESPONSE) {\n                handleResponse(source, origin, message);\n            } else if (message.type === MESSAGE_TYPE.ACK) {\n                handleAck(source, origin, message);\n            }\n        } catch (err) {\n            setTimeout(() => {\n                throw err;\n            }, 0);\n        }\n    }\n}\n\nexport function setupGlobalReceiveMessage({ on, send } : {| on : OnType, send : SendType |}) {\n    const global = getGlobal();\n    global.receiveMessage = global.receiveMessage || (message => receiveMessage(message, { on, send }));\n}\n\ntype ListenerEvent = {|\n    source : CrossDomainWindowType,\n    origin : string,\n    data : string,\n    sourceElement : CrossDomainWindowType,\n    originalEvent? : {| origin : string |}\n|};\n\nexport function messageListener(event : ListenerEvent, { on, send } : {| on : OnType, send : SendType |}) {\n    ZalgoPromise.try(() => {\n        try {\n            noop(event.source);\n        } catch (err) {\n            return;\n        }\n\n        const source = event.source || event.sourceElement;\n        let origin = event.origin || (event.originalEvent && event.originalEvent.origin);\n        const data = event.data;\n\n        if (origin === 'null') {\n            origin = `${ PROTOCOL.FILE }//`;\n        }\n\n        if (!source) {\n            return;\n        }\n\n        if (!origin) {\n            throw new Error(`Post message did not have origin domain`);\n        }\n\n        if (__TEST__) {\n            if (needsGlobalMessagingForBrowser() && isSameTopWindow(source, window) === false) {\n                return;\n            }\n        }\n\n        receiveMessage({ source, origin, data }, { on, send });\n    });\n}\n\nexport function listenForMessages({ on, send } : {| on : OnType, send : SendType |}) : CancelableType {\n    return globalStore().getOrSet('postMessageListener', () => {\n        return addEventListener(window, 'message', event => {\n            // $FlowFixMe\n            messageListener(event, { on, send });\n        });\n    });\n}\n\nexport function stopListenForMessages() {\n    const listener = globalStore().get('postMessageListener');\n    if (listener) {\n        listener.cancel();\n    }\n}\n","/* @flow */\n\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { getDomain, isWindowClosed, matchDomain, stringifyDomainPattern, type CrossDomainWindowType } from '@krakenjs/cross-domain-utils/src';\nimport { noop, stringifyError, uniqueID } from '@krakenjs/belter/src';\n\nimport { MESSAGE_TYPE, MESSAGE_ACK, MESSAGE_NAME } from '../../conf';\nimport { sendMessage } from '../send';\nimport { getRequestListener, getResponseListener, deleteResponseListener, isResponseListenerErrored } from '../listeners';\nimport type { RequestMessage, AckResponseMessage, ResponseMessage } from '../types';\nimport type { OnType, SendType } from '../../types';\n\nexport function handleRequest(source : CrossDomainWindowType, origin : string, message : RequestMessage, { on, send } : {| on : OnType, send : SendType |}) : ZalgoPromise<void> {\n\n    const options = getRequestListener({ name: message.name, win: source, domain: origin });\n\n    const logName = (message.name === MESSAGE_NAME.METHOD && message.data && typeof message.data.name === 'string') ? `${ message.data.name }()` : message.name;\n\n    if (__DEBUG__) {\n        // eslint-disable-next-line no-console\n        console.info('receive::req', logName, origin, '\\n\\n', message.data);\n    }\n\n    function sendAck() : ZalgoPromise<void> {\n        return ZalgoPromise.flush().then(() => {\n            if (message.fireAndForget || isWindowClosed(source)) {\n                return;\n            }\n\n            try {\n                return sendMessage(source, origin, {\n                    id:     uniqueID(),\n                    origin: getDomain(window),\n                    type:   MESSAGE_TYPE.ACK,\n                    hash:   message.hash,\n                    name:   message.name\n                }, { on, send });\n            } catch (err) {\n                throw new Error(`Send ack message failed for ${ logName } in ${ getDomain() }\\n\\n${ stringifyError(err) }`);\n            }\n        });\n    }\n\n\n    function sendResponse(ack : $Values<typeof MESSAGE_ACK>, data : ?Object, error : ?mixed) : ZalgoPromise<void> {\n        return ZalgoPromise.flush().then(() => {\n            if (message.fireAndForget || isWindowClosed(source)) {\n                return;\n            }\n\n            if (__DEBUG__) {\n                if (ack === MESSAGE_ACK.SUCCESS) {\n                    console.info('respond::res', logName, origin, '\\n\\n', data);  // eslint-disable-line no-console\n                } else if (ack === MESSAGE_ACK.ERROR) {\n                    console.error('respond::err', logName, origin, '\\n\\n', error); // eslint-disable-line no-console\n                }\n            }\n\n            try {\n                return sendMessage(source, origin, {\n                    id:     uniqueID(),\n                    origin: getDomain(window),\n                    type:   MESSAGE_TYPE.RESPONSE,\n                    hash:   message.hash,\n                    name:   message.name,\n                    ack,\n                    data,\n                    error\n                }, { on, send });\n            } catch (err) {\n                throw new Error(`Send response message failed for ${ logName } in ${ getDomain() }\\n\\n${ stringifyError(err) }`);\n            }\n        });\n    }\n\n    \n    return ZalgoPromise.all([\n        sendAck(),\n\n        ZalgoPromise.try(() => {\n\n            if (!options) {\n                throw new Error(`No handler found for post message: ${ message.name } from ${ origin } in ${ window.location.protocol }//${ window.location.host }${ window.location.pathname }`);\n            }\n\n            const data = message.data;\n\n            return options.handler({ source, origin, data });\n\n        }).then(data => {\n            return sendResponse(MESSAGE_ACK.SUCCESS, data);\n\n        }, error => {\n            return sendResponse(MESSAGE_ACK.ERROR, null, error);\n        })\n\n    ]).then(noop).catch(err => {\n        if (options && options.handleError) {\n            return options.handleError(err);\n        } else {\n            throw err;\n        }\n    });\n}\n\nexport function handleAck(source : CrossDomainWindowType, origin : string, message : AckResponseMessage) {\n\n    if (isResponseListenerErrored(message.hash)) {\n        return;\n    }\n\n    const options = getResponseListener(message.hash);\n\n    if (!options) {\n        throw new Error(`No handler found for post message ack for message: ${ message.name } from ${ origin } in ${ window.location.protocol }//${ window.location.host }${ window.location.pathname }`);\n    }\n\n    try {\n        if (!matchDomain(options.domain, origin)) {\n            throw new Error(`Ack origin ${ origin } does not match domain ${ options.domain.toString() }`);\n        }\n    \n        if (source !== options.win) {\n            throw new Error(`Ack source does not match registered window`);\n        }\n    } catch (err) {\n        options.promise.reject(err);\n    }\n\n    options.ack = true;\n}\n\nexport function handleResponse(source : CrossDomainWindowType, origin : string, message : ResponseMessage) : void | ZalgoPromise<void> {\n\n    if (isResponseListenerErrored(message.hash)) {\n        return;\n    }\n\n    const options = getResponseListener(message.hash);\n\n    if (!options) {\n        throw new Error(`No handler found for post message response for message: ${ message.name } from ${ origin } in ${ window.location.protocol }//${ window.location.host }${ window.location.pathname }`);\n    }\n\n    if (!matchDomain(options.domain, origin)) {\n        throw new Error(`Response origin ${ origin } does not match domain ${ stringifyDomainPattern(options.domain) }`);\n    }\n\n    if (source !== options.win) {\n        throw new Error(`Response source does not match registered window`);\n    }\n\n    deleteResponseListener(message.hash);\n\n    const logName = (message.name === MESSAGE_NAME.METHOD && message.data && typeof message.data.name === 'string') ? `${ message.data.name }()` : message.name;\n\n    if (message.ack === MESSAGE_ACK.ERROR) {\n        if (__DEBUG__) {\n            console.error('receive::err', logName, origin, '\\n\\n', message.error); // eslint-disable-line no-console\n        }\n\n        options.promise.reject(message.error);\n\n    } else if (message.ack === MESSAGE_ACK.SUCCESS) {\n        if (__DEBUG__) {\n            console.info('receive::res', logName, origin, '\\n\\n', message.data); // eslint-disable-line no-console\n        }\n\n        options.promise.resolve({ source, origin, data: message.data });\n    }\n}\n","/* @flow */\n\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\n\nimport { addRequestListener } from '../drivers';\nimport { WILDCARD } from '../conf';\nimport type { ServerOptionsType, HandlerType, CancelableType } from '../types';\n\nconst getDefaultServerOptions = () : ServerOptionsType => {\n    // $FlowFixMe\n    return {};\n};\n\nexport function on(name : string, options : ServerOptionsType | HandlerType, handler : ?HandlerType) : CancelableType {\n\n    if (!name) {\n        throw new Error('Expected name');\n    }\n\n    options = options || getDefaultServerOptions();\n    if (typeof options === 'function') {\n        handler = options;\n        options = getDefaultServerOptions();\n    }\n\n    if (!handler) {\n        throw new Error('Expected handler');\n    }\n\n    const winOrProxyWin = options.window;\n    const domain = options.domain || WILDCARD;\n\n    const successHandler = handler || options.handler;\n    const errorHandler = options.errorHandler || (err => {\n        throw err;\n    });\n\n    const requestListener = addRequestListener({ name, win: winOrProxyWin, domain }, {\n        handler:     successHandler,\n        handleError: errorHandler\n    });\n\n    return {\n        cancel() {\n            requestListener.cancel();\n        }\n    };\n}\n\ntype CancelableZalgoPromise<T> = ZalgoPromise<T> & {|\n    cancel : () => void\n|};\n\nexport function once(name : string, options? : ServerOptionsType | HandlerType, handler? : HandlerType) : CancelableZalgoPromise<{| source : mixed, origin : string, data : Object |}> {\n    \n    options = options || getDefaultServerOptions();\n    if (typeof options === 'function') {\n        handler = options;\n        options = getDefaultServerOptions();\n    }\n\n    const promise = new ZalgoPromise();\n    let listener; // eslint-disable-line prefer-const\n\n    options.errorHandler = (err) => {\n        listener.cancel();\n        promise.reject(err);\n    };\n\n    listener = on(name, options, event => {\n        listener.cancel();\n        promise.resolve(event);\n        if (handler) {\n            return handler(event);\n        }\n    });\n\n    // $FlowFixMe\n    promise.cancel = listener.cancel;\n\n    // $FlowFixMe\n    return promise;\n}\n","/* @flow */\n\nimport { getUserAgent } from '@krakenjs/cross-domain-utils/src';\n\nexport function needsGlobalMessagingForBrowser() : boolean {\n\n    if (getUserAgent(window).match(/MSIE|rv:11|trident|edge\\/12|edge\\/13/i)) {\n        return true;\n    }\n\n    return false;\n}\n","/* @flow */\n\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { isAncestor, isWindowClosed, getDomain, matchDomain, type CrossDomainWindowType, type DomainMatcher } from '@krakenjs/cross-domain-utils/src';\nimport { uniqueID, isRegex, noop, safeInterval, stringify, stringifyError } from '@krakenjs/belter/src';\n\n\nimport { CHILD_WINDOW_TIMEOUT, MESSAGE_TYPE, WILDCARD, MESSAGE_NAME, ACK_TIMEOUT, RES_TIMEOUT, ACK_TIMEOUT_KNOWN, RESPONSE_CYCLE_TIME } from '../conf';\nimport { sendMessage, addResponseListener, deleteResponseListener, markResponseListenerErrored, type ResponseListenerType } from '../drivers';\nimport { awaitWindowHello, sayHello, isWindowKnown } from '../lib';\nimport { windowStore } from '../global';\nimport { ProxyWindow } from '../serialize/window';\nimport type { SendType } from '../types';\n\nimport { on } from './on';\n\nfunction validateOptions(name : string, win : CrossDomainWindowType, domain : ?DomainMatcher) {\n    if (!name) {\n        throw new Error('Expected name');\n    }\n\n    if (domain) {\n        if (typeof domain !== 'string' && !Array.isArray(domain) && !isRegex(domain)) {\n            throw new TypeError(`Can not send ${ name }. Expected domain ${ JSON.stringify(domain) } to be a string, array, or regex`);\n        }\n    }\n\n    if (isWindowClosed(win)) {\n        throw new Error(`Can not send ${ name }. Target window is closed`);\n    }\n}\n\nfunction normalizeDomain(win : CrossDomainWindowType, targetDomain : DomainMatcher, actualDomain : ?string, { send } : {| send : SendType |}) : ZalgoPromise<string> {\n    return ZalgoPromise.try(() => {\n        if (typeof targetDomain === 'string') {\n            return targetDomain;\n        }\n\n        return ZalgoPromise.try(() => {\n            return actualDomain || sayHello(win, { send }).then(({ domain }) => domain);\n\n        }).then(normalizedDomain => {\n            if (!matchDomain(targetDomain, targetDomain)) {\n                throw new Error(`Domain ${ stringify(targetDomain) } does not match ${ stringify(targetDomain) }`);\n            }\n\n            return normalizedDomain;\n        });\n    });\n}\n\nexport const send : SendType = (winOrProxyWin, name, data, options) => {\n    options = options || {};\n    const domainMatcher = options.domain || WILDCARD;\n    const responseTimeout = options.timeout || RES_TIMEOUT;\n    const childTimeout = options.timeout || CHILD_WINDOW_TIMEOUT;\n    const fireAndForget = options.fireAndForget || false;\n\n    return ProxyWindow.toProxyWindow(winOrProxyWin, { send }).awaitWindow().then(win => {\n\n        // $FlowFixMe\n        return ZalgoPromise.try(() => {\n            validateOptions(name, win, domainMatcher);\n\n            if (isAncestor(window, win)) {\n                return awaitWindowHello(win, childTimeout);\n            }\n            \n        }).then(({ domain: actualDomain } = {}) => {\n\n            return normalizeDomain(win, domainMatcher, actualDomain, { send });\n        }).then(targetDomain => {\n            const domain = targetDomain;\n\n            const logName = (name === MESSAGE_NAME.METHOD && data && typeof data.name === 'string') ? `${ data.name }()` : name;\n\n            if (__DEBUG__) {\n                console.info('send::req', logName, domain, '\\n\\n', data); // eslint-disable-line no-console\n            }\n\n            const promise = new ZalgoPromise();\n            const hash = `${ name }_${ uniqueID() }`;\n\n            if (!fireAndForget) {\n                const responseListener : ResponseListenerType = { name, win, domain, promise };\n                addResponseListener(hash, responseListener);\n\n                const reqPromises = windowStore('requestPromises').getOrSet(win, () => []);\n                reqPromises.push(promise);\n\n                promise.catch(() => {\n                    markResponseListenerErrored(hash);\n                    deleteResponseListener(hash);\n                });\n\n                const totalAckTimeout = isWindowKnown(win) ? ACK_TIMEOUT_KNOWN : ACK_TIMEOUT;\n                const totalResTimeout = responseTimeout;\n\n                let ackTimeout = totalAckTimeout;\n                let resTimeout = totalResTimeout;\n            \n                const interval = safeInterval(() => {\n                    if (isWindowClosed(win)) {\n                        return promise.reject(new Error(`Window closed for ${ name } before ${ responseListener.ack ? 'response' : 'ack' }`));\n                    }\n\n                    if (responseListener.cancelled) {\n                        return promise.reject(new Error(`Response listener was cancelled for ${ name }`));\n                    }\n\n                    ackTimeout = Math.max(ackTimeout - RESPONSE_CYCLE_TIME, 0);\n                    if (resTimeout !== -1) {\n                        resTimeout = Math.max(resTimeout - RESPONSE_CYCLE_TIME, 0);\n                    }\n\n                    if (!responseListener.ack && ackTimeout === 0) {\n                        return promise.reject(new Error(`No ack for postMessage ${ logName } in ${ getDomain() } in ${ totalAckTimeout }ms`));\n\n                    } else if (resTimeout === 0) {\n                        return promise.reject(new Error(`No response for postMessage ${ logName } in ${ getDomain() } in ${ totalResTimeout }ms`));\n                    }\n                }, RESPONSE_CYCLE_TIME);\n\n                promise.finally(() => {\n                    interval.cancel();\n                    reqPromises.splice(reqPromises.indexOf(promise, 1));\n                }).catch(noop);\n            }\n\n            return sendMessage(win, domain, {\n                id:     uniqueID(),\n                origin: getDomain(window),\n                type:   MESSAGE_TYPE.REQUEST,\n                hash,\n                name,\n                data,\n                fireAndForget\n            }, { on, send }).then(() => {\n                return fireAndForget ? promise.resolve() : promise;\n            }, err => {\n                throw new Error(`Send request message failed for ${ logName } in ${ getDomain() }\\n\\n${ stringifyError(err) }`);\n            });\n        });\n    });\n};\n","/* @flow */\n\nexport const BRIDGE_TIMEOUT = 5000;\nexport const CHILD_WINDOW_TIMEOUT = 5000;\n\nexport const ACK_TIMEOUT = 2000;\nexport const ACK_TIMEOUT_KNOWN = 10000;\nexport const RES_TIMEOUT : number = __TEST__ ? 2000 : -1;\nexport const RESPONSE_CYCLE_TIME = 500;\n","/* @flow */\n\nimport type { CrossDomainWindowType, DomainMatcher } from '@krakenjs/cross-domain-utils/src';\n\nimport { initHello } from './lib';\nimport { listenForMessages, stopListenForMessages, receiveMessage, setupGlobalReceiveMessage, cancelResponseListeners } from './drivers';\nimport { getGlobal, deleteGlobal } from './global';\nimport { on, send } from './public';\nimport { setupBridge } from './bridge';\nimport { serializeMessage as internalSerializeMessage, deserializeMessage as internalDeserializeMessage, ProxyWindow } from './serialize';\n\nexport function serializeMessage<T>(destination : CrossDomainWindowType | ProxyWindow, domain : DomainMatcher, obj : T) : string {\n    return internalSerializeMessage(destination, domain, obj, { on, send });\n}\n\nexport function deserializeMessage<T : mixed>(source : CrossDomainWindowType | ProxyWindow, origin : string, message : string) : T {\n    return internalDeserializeMessage(source, origin, message, { on, send });\n}\n\nexport function createProxyWindow(win? : CrossDomainWindowType) : ProxyWindow {\n    return new ProxyWindow({ send, win });\n}\n\nexport function toProxyWindow(win : CrossDomainWindowType | ProxyWindow) : ProxyWindow {\n    return ProxyWindow.toProxyWindow(win, { send });\n}\n\nexport function setup() {\n    if (!getGlobal().initialized) {\n        getGlobal().initialized = true;\n    \n        setupGlobalReceiveMessage({ on, send });\n        listenForMessages({ on, send });\n    \n        if (__POST_ROBOT__.__IE_POPUP_SUPPORT__) {\n            setupBridge({ on, send, receiveMessage });\n        }\n\n        initHello({ on, send });\n    }\n}\n\nexport function destroy() {\n    cancelResponseListeners();\n    stopListenForMessages();\n    deleteGlobal();\n}\n","/* @flow */\n\nimport { type CrossDomainWindowType, isWindowClosed } from '@krakenjs/cross-domain-utils/src';\nimport { noop } from '@krakenjs/belter/src';\n\nimport { windowStore } from './global';\n\nexport function cleanUpWindow(win : CrossDomainWindowType) {\n    const requestPromises = windowStore('requestPromises');\n    for (const promise of requestPromises.get(win, [])) {\n        promise.reject(new Error(`Window ${ isWindowClosed(win) ? 'closed' : 'cleaned up' } before response`)).catch(noop);\n    }\n}\n","/* @flow */\n\nimport {\n  isSameDomain,\n  type CrossDomainWindowType,\n} from \"@krakenjs/cross-domain-utils/src\";\nimport { getCurrentScriptUID } from \"@krakenjs/belter/src\";\n\nexport function getGlobalKey(): string {\n  if (__ZOID__.__SCRIPT_NAMESPACE__) {\n    return `${__ZOID__.__GLOBAL_KEY__}_${getCurrentScriptUID()}`;\n  } else {\n    return __ZOID__.__GLOBAL_KEY__;\n  }\n}\n\nexport function getGlobal<T>(win: CrossDomainWindowType): T {\n  const globalKey = getGlobalKey();\n\n  if (!isSameDomain(win)) {\n    throw new Error(`Can not get global for window on different domain`);\n  }\n\n  if (!win[globalKey]) {\n    win[globalKey] = {};\n  }\n\n  return win[globalKey];\n}\n\nexport function tryGlobal<T, R>(\n  win: CrossDomainWindowType,\n  handler: (T) => R\n): ?R {\n  try {\n    return handler(getGlobal(win));\n  } catch (err) {\n    // pass\n  }\n}\n\nexport function destroyGlobal() {\n  const globalKey = getGlobalKey();\n  delete window[globalKey];\n}\n","/* @flow */\n\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise/src\";\nimport {\n  serializeMessage,\n  deserializeMessage,\n  toProxyWindow,\n  type ProxyWindow,\n} from \"@krakenjs/post-robot/src\";\nimport { uniqueID, base64encode, base64decode } from \"@krakenjs/belter/src\";\nimport type {\n  CrossDomainWindowType,\n  DomainMatcher,\n} from \"@krakenjs/cross-domain-utils/src\";\n\nimport { getGlobal } from \"./global\";\n\nexport type ProxyObject<T> = {|\n  get: () => ZalgoPromise<T>,\n|};\n\nexport function getProxyObject<T>(obj: T): ProxyObject<T> {\n  return {\n    get(): ZalgoPromise<T> {\n      return ZalgoPromise.try(() => {\n        // $FlowFixMe[object-this-reference]\n        if (this.source && this.source !== window) {\n          throw new Error(\n            `Can not call get on proxy object from a remote window`\n          );\n        }\n\n        return obj;\n      });\n    },\n  };\n}\n\nexport function basicSerialize<T>(data: T): string {\n  return base64encode(JSON.stringify(data));\n}\n\nexport function basicDeserialize<T>(serializedData: string): T {\n  return JSON.parse(base64decode(serializedData));\n}\n\nexport const REFERENCE_TYPE = {\n  UID: (\"uid\": \"uid\"),\n  RAW: (\"raw\": \"raw\"),\n};\n\nexport type UIDReferenceType = {|\n  type: typeof REFERENCE_TYPE.UID,\n  uid: string,\n|};\nexport type RawReferenceType<T> = {| type: typeof REFERENCE_TYPE.RAW, val: T |};\n\nexport type ReferenceType<T> = UIDReferenceType | RawReferenceType<T>;\n\nexport function getUIDRefStore<T>(win: CrossDomainWindowType): { [string]: T } {\n  const global = getGlobal(win);\n  global.references = global.references || {};\n  return global.references;\n}\n\nexport function getUIDRef<T>(val: T): ReferenceType<T> {\n  const uid = uniqueID();\n  const references = getUIDRefStore(window);\n  references[uid] = val;\n  return { type: REFERENCE_TYPE.UID, uid };\n}\n\nexport function getRawRef<T>(val: T): ReferenceType<T> {\n  return { type: REFERENCE_TYPE.RAW, val };\n}\n\nexport function getRefValue<T>(\n  win: CrossDomainWindowType,\n  ref: ReferenceType<T>\n): T {\n  if (ref.type === REFERENCE_TYPE.RAW) {\n    return ref.val;\n  }\n\n  if (ref.type === REFERENCE_TYPE.UID) {\n    const references = getUIDRefStore(win);\n    return references[ref.uid];\n  }\n\n  throw new Error(`Unsupported ref type: ${ref.type}`);\n}\n\nexport function cleanupRef<T>(\n  win: CrossDomainWindowType,\n  ref: ReferenceType<T>\n) {\n  if (ref.type === REFERENCE_TYPE.UID) {\n    const references = getUIDRefStore(win);\n    delete references[ref.uid];\n  }\n}\n\ntype Message<T, M> = {|\n  sender: {|\n    domain: string,\n  |},\n  metaData: M,\n  reference: ReferenceType<T>,\n|};\n\ntype CrossDomainSerializeOptions<T, M> = {|\n  data: T,\n  metaData: M,\n  sender: {|\n    domain: string,\n  |},\n  receiver: {|\n    win: ProxyWindow | CrossDomainWindowType,\n    domain: DomainMatcher,\n  |},\n  passByReference?: boolean,\n  basic?: boolean,\n|};\n\ntype CrossDomainSerializedMessage = {|\n  serializedData: string,\n  cleanReference: () => void,\n|};\n\nexport function crossDomainSerialize<T, M>({\n  data,\n  metaData,\n  sender,\n  receiver,\n  passByReference = false,\n  basic = false,\n}: CrossDomainSerializeOptions<T, M>): CrossDomainSerializedMessage {\n  const proxyWin = toProxyWindow(receiver.win);\n  const serializedMessage = basic\n    ? JSON.stringify(data)\n    : serializeMessage(proxyWin, receiver.domain, data);\n\n  const reference = passByReference\n    ? getUIDRef(serializedMessage)\n    : getRawRef(serializedMessage);\n\n  const message: Message<string, M> = {\n    sender: {\n      domain: sender.domain,\n    },\n    metaData,\n    reference,\n  };\n\n  const cleanReference = () => {\n    cleanupRef(window, reference);\n  };\n\n  return {\n    serializedData: basicSerialize(message),\n    cleanReference,\n  };\n}\n\ntype CrossDomainDeserializeOptions<M> = {|\n  data: string,\n  sender: {|\n    win: CrossDomainWindowType | (({| metaData: M |}) => CrossDomainWindowType),\n    domain?: string | (({| metaData: M |}) => string),\n  |},\n  basic?: boolean,\n|};\n\ntype CrossDomainDeserializedMessage<T, M> = {|\n  data: T,\n  metaData: M,\n  sender: {|\n    domain: string,\n    win: CrossDomainWindowType,\n  |},\n  reference: ReferenceType<string>,\n|};\n\nexport function crossDomainDeserialize<T, M>({\n  data,\n  sender,\n  basic = false,\n}: CrossDomainDeserializeOptions<M>): CrossDomainDeserializedMessage<T, M> {\n  const message: Message<string, M> = basicDeserialize(data);\n\n  const { reference, metaData } = message;\n\n  let win;\n  if (typeof sender.win === \"function\") {\n    win = sender.win({ metaData });\n  } else {\n    win = sender.win;\n  }\n\n  let domain;\n  if (typeof sender.domain === \"function\") {\n    domain = sender.domain({ metaData });\n  } else if (typeof sender.domain === \"string\") {\n    domain = sender.domain;\n  } else {\n    domain = message.sender.domain;\n  }\n\n  const serializedData = getRefValue(win, reference);\n  const deserializedData = basic\n    ? JSON.parse(serializedData)\n    : deserializeMessage(win, domain, serializedData);\n\n  return {\n    data: deserializedData,\n    metaData,\n    sender: { win, domain },\n    reference,\n  };\n}\n","/* @flow */\n\nimport { setup } from './setup';\nimport { setupBridge, openBridge, linkWindow, linkUrl, isBridge, needsBridge, needsBridgeForBrowser, hasBridge,\n    needsBridgeForWin, needsBridgeForDomain, destroyBridges } from './bridge';\n\nexport { ZalgoPromise as Promise } from '@krakenjs/zalgo-promise/src';\n\nexport * from './types';\nexport { ProxyWindow } from './serialize';\nexport { setup, destroy, serializeMessage, deserializeMessage, createProxyWindow, toProxyWindow } from './setup';\nexport { on, once, send } from './public';\nexport { markWindowKnown } from './lib';\nexport { cleanUpWindow } from './clean';\n\n// $FlowFixMe\nexport let bridge;\n\nif (__POST_ROBOT__.__IE_POPUP_SUPPORT__) {\n    bridge = { setupBridge, openBridge, linkWindow, linkUrl, isBridge, needsBridge,\n        needsBridgeForBrowser, hasBridge, needsBridgeForWin, needsBridgeForDomain, destroyBridges };\n}\n\nif (__POST_ROBOT__.__AUTO_SETUP__) {\n    setup();\n}\n","/* @flow */\n\nimport { WINDOW_TYPE } from \"@krakenjs/cross-domain-utils/src\";\n\nexport const ZOID = `zoid`;\n\nexport const POST_MESSAGE = {\n  DELEGATE: `${ZOID}_delegate`,\n  ALLOW_DELEGATE: `${ZOID}_allow_delegate`,\n};\n\nexport const COMPONENT_ERROR = {\n  NAVIGATED_AWAY: \"Window navigated away\",\n  COMPONENT_DESTROYED: \"Component destroyed\",\n  COMPONENT_CLOSED: \"Component closed\",\n  WINDOW_CLOSED: \"Detected component window close\",\n  POPUP_CLOSE: \"Detected popup close\",\n  IFRAME_CLOSE: \"Detected iframe close\",\n};\n\nexport const PROP_TYPE = {\n  STRING: (\"string\": \"string\"),\n  OBJECT: (\"object\": \"object\"),\n  FUNCTION: (\"function\": \"function\"),\n  BOOLEAN: (\"boolean\": \"boolean\"),\n  NUMBER: (\"number\": \"number\"),\n  ARRAY: (\"array\": \"array\"),\n};\n\nexport const WINDOW_REFERENCE = {\n  OPENER: (\"opener\": \"opener\"),\n  PARENT: (\"parent\": \"parent\"),\n  GLOBAL: (\"global\": \"global\"),\n  NAME: (\"name\": \"name\"),\n};\n\nexport const PROP_SERIALIZATION = {\n  JSON: (\"json\": \"json\"),\n  DOTIFY: (\"dotify\": \"dotify\"),\n  BASE64: (\"base64\": \"base64\"),\n};\n\nexport const CONTEXT = WINDOW_TYPE;\n\nexport const WILDCARD = \"*\";\n\nexport const DEFAULT_DIMENSIONS = {\n  WIDTH: \"300px\",\n  HEIGHT: \"150px\",\n};\n\nexport const EVENT = {\n  RENDER: \"zoid-render\",\n  RENDERED: \"zoid-rendered\",\n  PRERENDER: \"zoid-prerender\",\n  PRERENDERED: \"zoid-prerendered\",\n  DISPLAY: \"zoid-display\",\n  ERROR: \"zoid-error\",\n  CLOSE: \"zoid-close\",\n  DESTROY: \"zoid-destroy\",\n  PROPS: \"zoid-props\",\n  RESIZE: \"zoid-resize\",\n  FOCUS: \"zoid-focus\",\n};\n\nexport const METHOD = {\n  GET: (\"get\": \"get\"),\n  POST: (\"post\": \"post\"),\n};\n","/* @flow */\n\nimport { assertExists, memoize } from \"@krakenjs/belter/src\";\nimport {\n  isSameDomain,\n  getOpener,\n  getNthParentFromTop,\n  getAncestor,\n  getAllFramesInWindow,\n  getParent,\n  isTop,\n  findFrameByName,\n  getDomain,\n  assertSameDomain,\n  type CrossDomainWindowType,\n  getDistanceFromTop,\n} from \"@krakenjs/cross-domain-utils/src\";\n\nimport { ZOID, WINDOW_REFERENCE } from \"../constants\";\nimport type { InitialChildPayload, WindowRef } from \"../parent\";\n\nimport {\n  crossDomainDeserialize,\n  crossDomainSerialize,\n  REFERENCE_TYPE,\n  type ReferenceType,\n} from \"./serialize\";\nimport { tryGlobal } from \"./global\";\n\nfunction getWindowByRef(windowRef: WindowRef): CrossDomainWindowType {\n  if (windowRef.type === WINDOW_REFERENCE.OPENER) {\n    return assertExists(\"opener\", getOpener(window));\n  } else if (\n    windowRef.type === WINDOW_REFERENCE.PARENT &&\n    typeof windowRef.distance === \"number\"\n  ) {\n    return assertExists(\n      \"parent\",\n      getNthParentFromTop(window, windowRef.distance)\n    );\n  } else if (\n    windowRef.type === WINDOW_REFERENCE.GLOBAL &&\n    windowRef.uid &&\n    typeof windowRef.uid === \"string\"\n  ) {\n    const { uid } = windowRef;\n    const ancestor = getAncestor(window);\n\n    if (!ancestor) {\n      throw new Error(`Can not find ancestor window`);\n    }\n\n    for (const frame of getAllFramesInWindow(ancestor)) {\n      if (isSameDomain(frame)) {\n        const win = tryGlobal(\n          frame,\n          (global) => global.windows && global.windows[uid]\n        );\n\n        if (win) {\n          return win;\n        }\n      }\n    }\n  } else if (windowRef.type === WINDOW_REFERENCE.NAME) {\n    const { name } = windowRef;\n    return assertExists(\n      \"namedWindow\",\n      findFrameByName(assertExists(\"ancestor\", getAncestor(window)), name)\n    );\n  }\n\n  throw new Error(`Unable to find ${windowRef.type} parent component window`);\n}\n\nexport function buildChildWindowName({\n  name,\n  serializedPayload,\n}: {|\n  name: string,\n  serializedPayload: string,\n|}): string {\n  return `__${ZOID}__${name}__${serializedPayload}__`;\n}\n\nfunction parseWindowName(windowName: string): {|\n  name: string,\n  serializedInitialPayload: string,\n|} {\n  if (!windowName) {\n    throw new Error(`No window name`);\n  }\n\n  const [, zoidcomp, name, serializedInitialPayload] = windowName.split(\"__\");\n\n  if (zoidcomp !== ZOID) {\n    throw new Error(`Window not rendered by zoid - got ${zoidcomp}`);\n  }\n\n  if (!name) {\n    throw new Error(`Expected component name`);\n  }\n\n  if (!serializedInitialPayload) {\n    throw new Error(`Expected serialized payload ref`);\n  }\n\n  return { name, serializedInitialPayload };\n}\n\nexport type InitialParentPayload<P, X> = {|\n  parent: {|\n    domain: string,\n    win: CrossDomainWindowType,\n  |},\n  payload: InitialChildPayload<P, X>,\n  reference: ReferenceType<string>,\n|};\n\nconst parseInitialParentPayload = memoize(\n  <P, X>(windowName: string): InitialParentPayload<P, X> => {\n    const { serializedInitialPayload } = parseWindowName(windowName);\n\n    const {\n      data: payload,\n      sender: parent,\n      reference,\n    } = crossDomainDeserialize({\n      data: serializedInitialPayload,\n      sender: {\n        win: ({ metaData: { windowRef } }) => getWindowByRef(windowRef),\n      },\n    });\n\n    return {\n      parent,\n      payload,\n      reference,\n    };\n  }\n);\n\nexport function getInitialParentPayload<P, X>(): InitialParentPayload<P, X> {\n  return parseInitialParentPayload(window.name);\n}\n\nexport function isChildComponentWindow(name: string): boolean {\n  try {\n    return parseWindowName(window.name).name === name;\n  } catch (err) {\n    // pass\n  }\n\n  return false;\n}\n\nexport function getWindowRef(\n  targetWindow: CrossDomainWindowType,\n  currentWindow?: CrossDomainWindowType = window\n): ?WindowRef {\n  if (targetWindow === getParent(currentWindow)) {\n    return {\n      type: WINDOW_REFERENCE.PARENT,\n      distance: getDistanceFromTop(targetWindow),\n    };\n  }\n\n  if (targetWindow === getOpener(currentWindow)) {\n    return { type: WINDOW_REFERENCE.OPENER };\n  }\n\n  if (isSameDomain(targetWindow) && !isTop(targetWindow)) {\n    const windowName = assertSameDomain(targetWindow).name;\n    if (windowName) {\n      return { type: WINDOW_REFERENCE.NAME, name: windowName };\n    }\n  }\n}\n\ntype UpdateChildWindowNameWithRefOptions = {|\n  componentName: string,\n  parentComponentWindow: CrossDomainWindowType,\n|};\n\nexport function updateChildWindowNameWithRef({\n  componentName,\n  parentComponentWindow,\n}: UpdateChildWindowNameWithRefOptions): ?string {\n  const { serializedInitialPayload } = parseWindowName(window.name);\n\n  const { data, sender, reference, metaData } = crossDomainDeserialize({\n    data: serializedInitialPayload,\n    sender: {\n      win: parentComponentWindow,\n    },\n    basic: true,\n  });\n\n  if (\n    reference.type === REFERENCE_TYPE.UID ||\n    metaData.windowRef.type === WINDOW_REFERENCE.GLOBAL\n  ) {\n    const windowRef = getWindowRef(parentComponentWindow);\n\n    const { serializedData: serializedPayload } = crossDomainSerialize({\n      data,\n      metaData: {\n        windowRef,\n      },\n      sender: {\n        domain: sender.domain,\n      },\n      receiver: {\n        win: window,\n        domain: getDomain(),\n      },\n      basic: true,\n    });\n\n    const childWindowName = buildChildWindowName({\n      name: componentName,\n      serializedPayload,\n    });\n\n    window.name = childWindowName;\n    return childWindowName;\n  }\n}\n","/* @flow */\n\nimport {\n  getDomain,\n  isSameDomain,\n  matchDomain,\n  type CrossDomainWindowType,\n} from \"@krakenjs/cross-domain-utils/src\";\n\nimport type {\n  PropsDefinitionType,\n  PropsType,\n  ChildPropsType,\n} from \"../component/props\";\n\nimport type { ChildHelpers } from \"./index\";\n\nexport function normalizeChildProp<P, T, X>(\n  // $FlowFixMe\n  propsDef: PropsDefinitionType<P, X>,\n  props: PropsType<P>,\n  key: string,\n  value: ?T,\n  helpers: ChildHelpers<P, X>\n): ?T {\n  if (!propsDef.hasOwnProperty(key)) {\n    return value;\n  }\n\n  const prop = propsDef[key];\n\n  if (typeof prop.childDecorate === \"function\") {\n    const {\n      uid,\n      tag,\n      close,\n      focus,\n      onError,\n      onProps,\n      resize,\n      getParent,\n      getParentDomain,\n      show,\n      hide,\n      export: xport,\n      getSiblings,\n    } = helpers;\n    const decoratedValue = prop.childDecorate({\n      value,\n      uid,\n      tag,\n      close,\n      focus,\n      onError,\n      onProps,\n      resize,\n      getParent,\n      getParentDomain,\n      show,\n      hide,\n      export: xport,\n      getSiblings,\n    });\n\n    // $FlowFixMe\n    return decoratedValue;\n  }\n\n  return value;\n}\n\n// eslint-disable-next-line max-params\nexport function normalizeChildProps<P, X>(\n  parentComponentWindow: CrossDomainWindowType,\n  propsDef: PropsDefinitionType<P, X>,\n  props: PropsType<P>,\n  origin: string,\n  helpers: ChildHelpers<P, X>,\n  isUpdate: boolean = false\n): ChildPropsType<P, X> {\n  const result = {};\n\n  for (const key of Object.keys(props)) {\n    const prop = propsDef[key];\n\n    const trustedChild: boolean =\n      prop && prop.trustedDomains && prop.trustedDomains.length > 0\n        ? prop.trustedDomains.reduce((acc, val) => {\n            return acc || matchDomain(val, getDomain(window));\n          }, false)\n        : origin === getDomain(window) || isSameDomain(parentComponentWindow);\n\n    // let trustedDomains override sameDomain prop\n    if (prop && prop.sameDomain && !trustedChild) {\n      continue;\n    }\n\n    // sameDomain was not set and trusted domains must match\n    if (prop && prop.trustedDomains && !trustedChild) {\n      continue;\n    }\n\n    // $FlowFixMe\n    const value = normalizeChildProp(propsDef, props, key, props[key], helpers);\n\n    result[key] = value;\n    if (prop && prop.alias && !result[prop.alias]) {\n      result[prop.alias] = value;\n    }\n  }\n\n  if (!isUpdate) {\n    for (const key of Object.keys(propsDef)) {\n      if (!props.hasOwnProperty(key)) {\n        result[key] = normalizeChildProp(\n          propsDef,\n          props,\n          key,\n          undefined,\n          helpers\n        );\n      }\n    }\n  }\n\n  // $FlowFixMe\n  return result;\n}\n","/* @flow */\n/* eslint max-lines: 0 */\n\nimport {\n  isSameDomain,\n  matchDomain,\n  getAllFramesInWindow,\n  type CrossDomainWindowType,\n  onCloseWindow,\n  assertSameDomain,\n} from \"@krakenjs/cross-domain-utils/src\";\nimport {\n  markWindowKnown,\n  type CrossDomainFunctionType,\n} from \"@krakenjs/post-robot/src\";\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise/src\";\nimport { extend, onResize, elementReady, noop } from \"@krakenjs/belter/src\";\n\nimport {\n  getGlobal,\n  tryGlobal,\n  getInitialParentPayload,\n  updateChildWindowNameWithRef,\n} from \"../lib\";\nimport { CONTEXT } from \"../constants\";\nimport type {\n  NormalizedComponentOptionsType,\n  getSiblingsPropType,\n} from \"../component\";\nimport type { PropsType, ChildPropsType } from \"../component/props\";\nimport type { StringMatcherType } from \"../types\";\n\nimport { normalizeChildProps } from \"./props\";\n\nexport type ChildExportsType<P> = {|\n  updateProps: CrossDomainFunctionType<[PropsType<P>], void>,\n  close: CrossDomainFunctionType<[], void>,\n  name: string,\n|};\n\nexport type ChildHelpers<P, X> = {|\n  uid: string,\n  tag: string,\n  close: () => ZalgoPromise<void>,\n  focus: () => ZalgoPromise<void>,\n  resize: ({| width: ?number, height: ?number |}) => ZalgoPromise<void>,\n  onError: (mixed) => ZalgoPromise<void>,\n  onProps: ((PropsType<P>) => void) => {| cancel: () => void |},\n  getParent: () => CrossDomainWindowType,\n  getParentDomain: () => string,\n  show: () => ZalgoPromise<void>,\n  hide: () => ZalgoPromise<void>,\n  export: (X) => ZalgoPromise<void>,\n  getSiblings: getSiblingsPropType,\n|};\n\nfunction checkParentDomain(\n  allowedParentDomains: StringMatcherType,\n  domain: string\n) {\n  if (!matchDomain(allowedParentDomains, domain)) {\n    throw new Error(`Can not be rendered by domain: ${domain}`);\n  }\n}\n\nfunction focus(): ZalgoPromise<void> {\n  return ZalgoPromise.try(() => {\n    window.focus();\n  });\n}\n\nfunction destroy(): ZalgoPromise<void> {\n  return ZalgoPromise.try(() => {\n    window.close();\n  });\n}\n\n// Compares the first numerical value of the parent and child versions of zoid,\n// ensuring that an error is only thrown when major versions of Zoid do not match.\n// Additionally, zoid version strings should be in snake_case format (10_1_0, 10_2_0, 11_0_0, etc.)\nfunction versionCompatabilityCheck(\n  version1: string,\n  version2: string\n): boolean {\n  if (!/_/.test(version1) || !/_/.test(version2)) {\n    throw new Error(\n      `Versions are in an invalid format (${version1}, ${version2})`\n    );\n  }\n\n  return version1.split(\"_\")[0] === version2.split(\"_\")[0];\n}\n\nexport type ChildComponent<P, X> = {|\n  getProps: () => ChildPropsType<P, X>,\n  init: () => ZalgoPromise<void>,\n|};\n\nexport function childComponent<P, X, C>(\n  options: NormalizedComponentOptionsType<P, X, C>\n): ChildComponent<P, X> {\n  const { tag, propsDef, autoResize, allowedParentDomains } = options;\n\n  const onPropHandlers = [];\n\n  const { parent, payload } = getInitialParentPayload();\n  const { win: parentComponentWindow, domain: parentDomain } = parent;\n\n  let props: ChildPropsType<P, X>;\n  const exportsPromise = new ZalgoPromise();\n\n  const {\n    version,\n    uid,\n    exports: parentExports,\n    context,\n    props: initialProps,\n  } = payload;\n\n  if (!versionCompatabilityCheck(version, __ZOID__.__VERSION__)) {\n    throw new Error(\n      `Parent window has zoid version ${version}, child window has version ${__ZOID__.__VERSION__}`\n    );\n  }\n\n  const {\n    show,\n    hide,\n    close,\n    onError,\n    checkClose,\n    export: parentExport,\n    resize: parentResize,\n    init: parentInit,\n  } = parentExports;\n\n  const getParent = () => parentComponentWindow;\n  const getParentDomain = () => parentDomain;\n\n  const onProps = (handler: Function) => {\n    onPropHandlers.push(handler);\n    return {\n      cancel: () => {\n        onPropHandlers.splice(onPropHandlers.indexOf(handler), 1);\n      },\n    };\n  };\n\n  const resize = ({\n    width,\n    height,\n  }: {|\n    width: ?number,\n    height: ?number,\n  |}): ZalgoPromise<void> => {\n    return parentResize.fireAndForget({ width, height });\n  };\n\n  const xport = (xports: X): ZalgoPromise<void> => {\n    exportsPromise.resolve(xports);\n    return parentExport(xports);\n  };\n\n  const getSiblings = ({ anyParent } = {}) => {\n    const result = [];\n    const currentParent = props.parent;\n\n    if (typeof anyParent === \"undefined\") {\n      anyParent = !currentParent;\n    }\n\n    if (!anyParent && !currentParent) {\n      throw new Error(`No parent found for ${tag} child`);\n    }\n\n    for (const win of getAllFramesInWindow(window)) {\n      if (!isSameDomain(win)) {\n        continue;\n      }\n\n      const xprops: ChildPropsType<mixed, mixed> = assertSameDomain(win).xprops;\n\n      if (!xprops || getParent() !== xprops.getParent()) {\n        continue;\n      }\n\n      const winParent = xprops.parent;\n\n      if (!anyParent && currentParent) {\n        if (!winParent || winParent.uid !== currentParent.uid) {\n          continue;\n        }\n      }\n\n      const xports = tryGlobal(win, (global) => global.exports);\n\n      result.push({\n        props: xprops,\n        exports: xports,\n      });\n    }\n\n    return result;\n  };\n\n  const getHelpers = (): ChildHelpers<P, X> => {\n    return {\n      tag,\n      show,\n      hide,\n      close,\n      focus,\n      onError,\n      resize,\n      getSiblings,\n      onProps,\n      getParent,\n      getParentDomain,\n      uid,\n      export: xport,\n    };\n  };\n\n  const watchForClose = () => {\n    window.addEventListener(\"beforeunload\", () => {\n      checkClose.fireAndForget();\n    });\n\n    window.addEventListener(\"unload\", () => {\n      checkClose.fireAndForget();\n    });\n\n    onCloseWindow(parentComponentWindow, () => {\n      destroy();\n    });\n  };\n\n  const setProps = (\n    newProps: PropsType<P>,\n    origin: string,\n    isUpdate: boolean = false\n  ) => {\n    const helpers = getHelpers();\n    const normalizedProps = normalizeChildProps(\n      parentComponentWindow,\n      propsDef,\n      newProps,\n      origin,\n      helpers,\n      isUpdate\n    );\n\n    if (props) {\n      extend(props, normalizedProps);\n    } else {\n      props = normalizedProps;\n    }\n\n    for (const handler of onPropHandlers) {\n      handler(props);\n    }\n  };\n\n  const getAutoResize = (): ZalgoPromise<{|\n    width: boolean,\n    height: boolean,\n    element: ?HTMLElement,\n  |}> => {\n    const {\n      width = false,\n      height = false,\n      element: elementRef = \"body\",\n    } = autoResize;\n    return elementReady(elementRef)\n      .catch(noop)\n      .then((element) => {\n        return { width, height, element };\n      });\n  };\n\n  const watchForResize = (): ?ZalgoPromise<void> => {\n    return getAutoResize().then(({ width, height, element }) => {\n      if (!element || (!width && !height) || context === CONTEXT.POPUP) {\n        return;\n      }\n\n      onResize(\n        element,\n        ({ width: newWidth, height: newHeight }) => {\n          resize({\n            width: width ? newWidth : undefined,\n            height: height ? newHeight : undefined,\n          });\n        },\n        { width, height }\n      );\n    });\n  };\n\n  const updateProps = (newProps: PropsType<P>): ZalgoPromise<void> => {\n    return ZalgoPromise.try(() => setProps(newProps, parentDomain, true));\n  };\n\n  const init = () => {\n    return ZalgoPromise.try(() => {\n      let updatedChildName = \"\";\n      if (isSameDomain(parentComponentWindow)) {\n        updatedChildName =\n          updateChildWindowNameWithRef({\n            componentName: options.name,\n            parentComponentWindow,\n          }) || \"\";\n      }\n\n      getGlobal(window).exports = options.exports({\n        getExports: () => exportsPromise,\n      });\n\n      checkParentDomain(allowedParentDomains, parentDomain);\n      markWindowKnown(parentComponentWindow);\n      watchForClose();\n\n      return parentInit({\n        name: updatedChildName,\n        updateProps,\n        close: destroy,\n      });\n    })\n      .then(() => {\n        return watchForResize();\n      })\n      .catch((err) => {\n        onError(err);\n      });\n  };\n\n  const getProps = () => {\n    if (props) {\n      return props;\n    } else {\n      setProps(initialProps, parentDomain);\n      return props;\n    }\n  };\n\n  return {\n    init,\n    getProps,\n  };\n}\n","/* @flow */\n/* eslint max-lines: off */\n\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise/src\";\nimport { once, noop, type EventEmitterType } from \"@krakenjs/belter/src\";\nimport {\n  isWindow,\n  type CrossDomainWindowType,\n  type DomainMatcher,\n  isWindowClosed,\n  isSameDomain,\n} from \"@krakenjs/cross-domain-utils/src\";\nimport { ProxyWindow, toProxyWindow } from \"@krakenjs/post-robot/src\";\n\nimport type { CssDimensionsType } from \"../types\";\nimport { PROP_SERIALIZATION, PROP_TYPE } from \"../constants\";\n\nexport type EventHandlerType<T> = (T) => void | ZalgoPromise<void>;\nexport type Sibling = {|\n  props: mixed,\n  exports: mixed,\n|};\n\nexport type timeoutPropType = number;\nexport type windowPropType = CrossDomainWindowType | ProxyWindow;\nexport type cspNoncePropType = string;\nexport type uidPropType = string;\nexport type tagPropType = string;\nexport type closePropType = () => ZalgoPromise<void>;\nexport type focusPropType = () => ZalgoPromise<void>;\nexport type showPropType = () => ZalgoPromise<void>;\nexport type exportPropType<X> = (X) => ZalgoPromise<void>;\nexport type getSiblingsPropType = (opts?: {|\n  anyParent?: boolean,\n|}) => $ReadOnlyArray<Sibling>;\nexport type hidePropType = () => ZalgoPromise<void>;\nexport type resizePropType = ({|\n  width: ?number,\n  height: ?number,\n|}) => ZalgoPromise<void>;\nexport type getParentPropType = () => CrossDomainWindowType;\nexport type getParentDomainPropType = () => string;\n\nexport type onDisplayPropType = EventHandlerType<void>;\nexport type onRenderedPropType = EventHandlerType<void>;\nexport type onRenderPropType = EventHandlerType<void>;\nexport type onPrerenderedPropType = EventHandlerType<void>;\nexport type onPrerenderPropType = EventHandlerType<void>;\nexport type onClosePropType = EventHandlerType<void>;\nexport type onDestroyPropType = EventHandlerType<void>;\nexport type onResizePropType = EventHandlerType<void>;\nexport type onFocusPropType = EventHandlerType<void>;\nexport type onErrorPropType = EventHandlerType<mixed>;\n// eslint-disable-next-line no-use-before-define\nexport type onPropsPropType<P> = ((PropsType<P>) => void) => {|\n  cancel: () => void,\n|};\n\nexport type ParentPropType<P, X> = {|\n  uid: string,\n  // eslint-disable-next-line no-use-before-define\n  props: PropsType<P>,\n  export: exportPropType<X>,\n|};\n\nexport type PropsInputType<P> = {|\n  parent?: ParentPropType<mixed, mixed>,\n\n  timeout?: timeoutPropType,\n  window?: windowPropType,\n  cspNonce?: ?cspNoncePropType,\n\n  onDisplay?: onDisplayPropType,\n  onRendered?: onRenderedPropType,\n  onRender?: onRenderPropType,\n  onPrerendered?: onPrerenderedPropType,\n  onPrerender?: onPrerenderPropType,\n  onClose?: onClosePropType,\n  onDestroy?: onDestroyPropType,\n  onResize?: onResizePropType,\n  onFocus?: onFocusPropType,\n  onError?: onErrorPropType,\n  onProps?: onPropsPropType<P>,\n\n  ...P,\n|};\n\nexport type PropsType<P> = {|\n  timeout?: timeoutPropType,\n  window?: ?windowPropType,\n  cspNonce?: ?cspNoncePropType,\n  dimensions: CssDimensionsType,\n\n  onDisplay: onDisplayPropType,\n  onRendered: onRenderedPropType,\n  onRender: onRenderPropType,\n  onPrerendered: onPrerenderedPropType,\n  onPrerender: onPrerenderPropType,\n  onClose: onClosePropType,\n  onDestroy: onDestroyPropType,\n  onResize: onResizePropType,\n  onFocus: onFocusPropType,\n  onError: onErrorPropType,\n  onProps: onPropsPropType<P>,\n\n  ...P,\n|};\n\ntype onErrorChildPropType = (mixed) => ZalgoPromise<void>;\n\nexport type ChildPropsType<P, X> = {|\n  ...PropsType<P>,\n\n  parent?: ParentPropType<mixed, mixed>,\n  uid: uidPropType,\n  tag: tagPropType,\n  close: closePropType,\n  focus: focusPropType,\n  show: showPropType,\n  hide: hidePropType,\n  export: exportPropType<X>,\n  getParent: getParentPropType,\n  getParentDomain: getParentDomainPropType,\n  resize: resizePropType,\n  onError: onErrorChildPropType,\n  onProps: onPropsPropType<P>,\n  getSiblings: getSiblingsPropType,\n|};\n\nexport type PropDefinitionType<T, P, S: $Values<typeof PROP_TYPE>, X> = {|\n  type: S,\n  alias?: string,\n  value?: ({|\n    props: P,\n    state: Object,\n    close: () => ZalgoPromise<void>,\n    focus: () => ZalgoPromise<void>,\n    onError: (mixed) => ZalgoPromise<void>,\n    container: HTMLElement | void,\n    event: EventEmitterType,\n  |}) => ?T,\n  default?: ({|\n    props: P,\n    state: Object,\n    close: () => ZalgoPromise<void>,\n    focus: () => ZalgoPromise<void>,\n    onError: (mixed) => ZalgoPromise<void>,\n    container: HTMLElement | void,\n    event: EventEmitterType,\n  |}) => ?T,\n  decorate?: ({|\n    value: T,\n    props: PropsType<P>,\n    state: Object,\n    close: () => ZalgoPromise<void>,\n    focus: () => ZalgoPromise<void>,\n    onError: (mixed) => ZalgoPromise<void>,\n    container: HTMLElement | void,\n    event: EventEmitterType,\n  |}) => T,\n  childDecorate?: ({|\n    value: ?T,\n    uid: uidPropType,\n    tag: tagPropType,\n    close: closePropType,\n    focus: focusPropType,\n    onError: onErrorPropType,\n    onProps: onPropsPropType<P>,\n    resize: resizePropType,\n    getParentDomain: getParentDomainPropType,\n    getParent: getParentPropType,\n    show: showPropType,\n    hide: hidePropType,\n    export: exportPropType<X>,\n    getSiblings: getSiblingsPropType,\n  |}) => ?T,\n  required?: boolean,\n  queryParam?:\n    | boolean\n    | string\n    | (({| value: T |}) => string | ZalgoPromise<string>),\n  bodyParam?:\n    | boolean\n    | string\n    | (({| value: T |}) => string | ZalgoPromise<string>),\n  // eslint-disable-next-line no-undef\n  queryValue?: <R>({| value: T |}) => ZalgoPromise<R> | R | string,\n  // eslint-disable-next-line no-undef\n  bodyValue?: <R>({| value: T |}) => ZalgoPromise<R> | R | string,\n  sendToChild?: boolean,\n  allowDelegate?: boolean,\n  validate?: ({| value: T, props: PropsType<P> |}) => void,\n  sameDomain?: boolean,\n  serialization?: $Values<typeof PROP_SERIALIZATION>,\n  trustedDomains?: $ReadOnlyArray<DomainMatcher>,\n|};\n\nexport type BOOLEAN_DEFINITION_TYPE = typeof PROP_TYPE.BOOLEAN;\nexport type STRING_DEFINITION_TYPE = typeof PROP_TYPE.STRING;\nexport type NUMBER_DEFINITION_TYPE = typeof PROP_TYPE.NUMBER;\nexport type FUNCTION_DEFINITION_TYPE = typeof PROP_TYPE.FUNCTION;\nexport type ARRAY_DEFINITION_TYPE = typeof PROP_TYPE.ARRAY;\nexport type OBJECT_DEFINITION_TYPE = typeof PROP_TYPE.OBJECT;\n\nexport type DEFINITION_TYPE =\n  | BOOLEAN_DEFINITION_TYPE\n  | STRING_DEFINITION_TYPE\n  | NUMBER_DEFINITION_TYPE\n  | FUNCTION_DEFINITION_TYPE\n  | ARRAY_DEFINITION_TYPE\n  | OBJECT_DEFINITION_TYPE;\n\nexport type BooleanPropDefinitionType<T: boolean, P, X> = PropDefinitionType<\n  T,\n  P,\n  BOOLEAN_DEFINITION_TYPE,\n  X\n>;\nexport type StringPropDefinitionType<T: string, P, X> = PropDefinitionType<\n  T,\n  P,\n  STRING_DEFINITION_TYPE,\n  X\n>;\nexport type NumberPropDefinitionType<T: number, P, X> = PropDefinitionType<\n  T,\n  P,\n  NUMBER_DEFINITION_TYPE,\n  X\n>;\nexport type FunctionPropDefinitionType<T: Function, P, X> = PropDefinitionType<\n  T,\n  P,\n  FUNCTION_DEFINITION_TYPE,\n  X\n>;\nexport type ArrayPropDefinitionType<\n  // eslint-disable-next-line flowtype/no-mutable-array\n  T: Array<*> | $ReadOnlyArray<*>,\n  P,\n  X\n> = PropDefinitionType<T, P, ARRAY_DEFINITION_TYPE, X>;\nexport type ObjectPropDefinitionType<T: Object, P, X> = PropDefinitionType<\n  T,\n  P,\n  OBJECT_DEFINITION_TYPE,\n  X\n>;\n\nexport type MixedPropDefinitionType<P, X> =\n  | BooleanPropDefinitionType<*, P, X>\n  | StringPropDefinitionType<*, P, X>\n  | NumberPropDefinitionType<*, P, X>\n  | FunctionPropDefinitionType<*, P, X>\n  | ObjectPropDefinitionType<*, P, X>\n  | ArrayPropDefinitionType<*, P, X>;\n\nexport type UserPropsDefinitionType<P, X> = {|\n  [string]: MixedPropDefinitionType<P, X>,\n|};\n\nexport type BuiltInPropsDefinitionType<P, X> = {|\n  timeout: NumberPropDefinitionType<timeoutPropType, P, X>,\n  window: ObjectPropDefinitionType<windowPropType, P, X>,\n  close: FunctionPropDefinitionType<closePropType, P, X>,\n  focus: FunctionPropDefinitionType<focusPropType, P, X>,\n  resize: FunctionPropDefinitionType<resizePropType, P, X>,\n  uid: StringPropDefinitionType<uidPropType, P, X>,\n  tag: StringPropDefinitionType<tagPropType, P, X>,\n  cspNonce: StringPropDefinitionType<cspNoncePropType, P, X>,\n  getParent: FunctionPropDefinitionType<getParentPropType, P, X>,\n  getParentDomain: FunctionPropDefinitionType<getParentDomainPropType, P, X>,\n  hide: FunctionPropDefinitionType<hidePropType, P, X>,\n  show: FunctionPropDefinitionType<showPropType, P, X>,\n  export: FunctionPropDefinitionType<exportPropType<X>, P, X>,\n  getSiblings: FunctionPropDefinitionType<getSiblingsPropType, P, X>,\n\n  onDisplay: FunctionPropDefinitionType<onDisplayPropType, P, X>,\n  onRendered: FunctionPropDefinitionType<onRenderedPropType, P, X>,\n  onRender: FunctionPropDefinitionType<onRenderPropType, P, X>,\n  onPrerendered: FunctionPropDefinitionType<onPrerenderedPropType, P, X>,\n  onPrerender: FunctionPropDefinitionType<onPrerenderPropType, P, X>,\n  onClose: FunctionPropDefinitionType<onClosePropType, P, X>,\n  onDestroy: FunctionPropDefinitionType<onDestroyPropType, P, X>,\n  onResize: FunctionPropDefinitionType<onClosePropType, P, X>,\n  onFocus: FunctionPropDefinitionType<onFocusPropType, P, X>,\n  onError: FunctionPropDefinitionType<onErrorPropType, P, X>,\n  onProps: FunctionPropDefinitionType<onPropsPropType<P>, P, X>,\n|};\n\nexport type PropsDefinitionType<P, X> = {|\n  ...BuiltInPropsDefinitionType<P, X>,\n  [string]: MixedPropDefinitionType<P, X>,\n|};\n\nconst defaultNoop = () => noop;\n// eslint-disable-next-line flowtype/require-exact-type\nconst decorateOnce = <F: Function>({ value }: { value: F }): F => once(value);\n\nexport function getBuiltInProps<P, X>(): BuiltInPropsDefinitionType<P, X> {\n  return {\n    window: {\n      type: PROP_TYPE.OBJECT,\n      sendToChild: false,\n      required: false,\n      allowDelegate: true,\n      validate: ({ value }) => {\n        if (!isWindow(value) && !ProxyWindow.isProxyWindow(value)) {\n          throw new Error(`Expected Window or ProxyWindow`);\n        }\n\n        if (isWindow(value)) {\n          // $FlowFixMe\n          if (isWindowClosed(value)) {\n            throw new Error(`Window is closed`);\n          }\n\n          // $FlowFixMe\n          if (!isSameDomain(value)) {\n            throw new Error(`Window is not same domain`);\n          }\n        }\n      },\n      decorate: ({ value }) => {\n        return toProxyWindow(value);\n      },\n    },\n\n    timeout: {\n      type: PROP_TYPE.NUMBER,\n      required: false,\n      sendToChild: false,\n    },\n\n    cspNonce: {\n      type: PROP_TYPE.STRING,\n      required: false,\n    },\n\n    onDisplay: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      allowDelegate: true,\n      default: defaultNoop,\n      decorate: decorateOnce,\n    },\n\n    onRendered: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      default: defaultNoop,\n      decorate: decorateOnce,\n    },\n\n    onRender: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      default: defaultNoop,\n      decorate: decorateOnce,\n    },\n\n    onPrerendered: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      default: defaultNoop,\n      decorate: decorateOnce,\n    },\n\n    onPrerender: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      default: defaultNoop,\n      decorate: decorateOnce,\n    },\n\n    onClose: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      allowDelegate: true,\n      default: defaultNoop,\n      decorate: decorateOnce,\n    },\n\n    onDestroy: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      allowDelegate: true,\n      default: defaultNoop,\n      decorate: decorateOnce,\n    },\n\n    onResize: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      allowDelegate: true,\n      default: defaultNoop,\n    },\n\n    onFocus: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      allowDelegate: true,\n      default: defaultNoop,\n    },\n\n    close: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      childDecorate: ({ close }) => close,\n    },\n\n    focus: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      childDecorate: ({ focus }) => focus,\n    },\n\n    resize: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      childDecorate: ({ resize }) => resize,\n    },\n\n    uid: {\n      type: PROP_TYPE.STRING,\n      required: false,\n      sendToChild: false,\n      childDecorate: ({ uid }) => uid,\n    },\n\n    tag: {\n      type: PROP_TYPE.STRING,\n      required: false,\n      sendToChild: false,\n      childDecorate: ({ tag }) => tag,\n    },\n\n    getParent: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      childDecorate: ({ getParent }) => getParent,\n    },\n\n    getParentDomain: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      childDecorate: ({ getParentDomain }) => getParentDomain,\n    },\n\n    show: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      childDecorate: ({ show }) => show,\n    },\n\n    hide: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      childDecorate: ({ hide }) => hide,\n    },\n\n    export: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      childDecorate: ({ export: xport }) => xport,\n    },\n\n    onError: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      childDecorate: ({ onError }) => onError,\n    },\n\n    onProps: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      childDecorate: ({ onProps }) => onProps,\n    },\n\n    getSiblings: {\n      type: PROP_TYPE.FUNCTION,\n      required: false,\n      sendToChild: false,\n      childDecorate: ({ getSiblings }) => getSiblings,\n    },\n  };\n}\n\ntype PropCallback<P, X, R> = ((\n  string,\n  BooleanPropDefinitionType<boolean, P, X> | void,\n  boolean\n) => R) &\n  ((string, StringPropDefinitionType<string, P, X> | void, string) => R) &\n  ((string, NumberPropDefinitionType<number, P, X> | void, number) => R) &\n  ((string, FunctionPropDefinitionType<Function, P, X> | void, Function) => R) &\n  ((\n    string,\n    ArrayPropDefinitionType<$ReadOnlyArray<*> | $ReadOnlyArray<*>, P, X> | void,\n    $ReadOnlyArray<*> | $ReadOnlyArray<*>\n  ) => R) &\n  ((string, ObjectPropDefinitionType<Object, P, X> | void, Object) => R);\n\nexport function eachProp<P, X>(\n  props: PropsType<P>,\n  propsDef: PropsDefinitionType<P, X>,\n  handler: PropCallback<P, X, void>\n) {\n  // $FlowFixMe[cannot-spread-indexer]\n  for (const key of Object.keys({ ...props, ...propsDef })) {\n    const propDef = propsDef[key];\n    const value = props[key];\n\n    // $FlowFixMe[incompatible-call]\n    handler(key, propDef, value);\n  }\n}\n\nexport function mapProps<P, X, T>(\n  props: PropsType<P>,\n  propsDef: PropsDefinitionType<P, X>,\n  handler: PropCallback<P, X, T>\n): $ReadOnlyArray<T> {\n  const results = [];\n\n  eachProp(props, propsDef, (key, propDef, value) => {\n    // $FlowFixMe[incompatible-call]\n    const result = handler(key, propDef, value);\n    results.push(result);\n  });\n  return results;\n}\n","/* @flow */\n\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise/src\";\nimport { dotify, isDefined, base64encode, noop } from \"@krakenjs/belter/src\";\n\nimport {\n  eachProp,\n  mapProps,\n  type PropsInputType,\n  type PropsType,\n  type PropsDefinitionType,\n} from \"../component/props\";\nimport { PROP_SERIALIZATION, METHOD, PROP_TYPE } from \"../constants\";\n\nimport type { ParentHelpers } from \"./index\";\n\nexport function extendProps<P, X>(\n  propsDef: PropsDefinitionType<P, X>,\n  existingProps: PropsType<P>,\n  inputProps: PropsInputType<P>,\n  helpers: ParentHelpers<P>,\n  container: HTMLElement | void\n) {\n  const { state, close, focus, event, onError } = helpers;\n\n  // $FlowFixMe\n  eachProp(inputProps, propsDef, (key, propDef, val) => {\n    let valueDetermined = false;\n    let value = val;\n\n    const getDerivedValue = () => {\n      if (!propDef) {\n        return value;\n      }\n\n      const alias = propDef.alias;\n      if (alias && !isDefined(val) && isDefined(inputProps[alias])) {\n        value = inputProps[alias];\n      }\n\n      if (propDef.value) {\n        value = propDef.value({\n          props: existingProps,\n          state,\n          close,\n          focus,\n          event,\n          onError,\n          container,\n        });\n      }\n\n      if (propDef.default && !isDefined(value) && !isDefined(inputProps[key])) {\n        value = propDef.default({\n          props: existingProps,\n          state,\n          close,\n          focus,\n          event,\n          onError,\n          container,\n        });\n      }\n\n      if (isDefined(value)) {\n        if (\n          propDef.type === PROP_TYPE.ARRAY\n            ? !Array.isArray(value)\n            : typeof value !== propDef.type\n        ) {\n          throw new TypeError(`Prop is not of type ${propDef.type}: ${key}`);\n        }\n      } else {\n        if (propDef.required !== false && !isDefined(inputProps[key])) {\n          throw new Error(`Expected prop \"${key}\" to be defined`);\n        }\n      }\n\n      if (__DEBUG__ && isDefined(value) && propDef.validate) {\n        // $FlowFixMe\n        propDef.validate({ value, props: inputProps });\n      }\n\n      if (isDefined(value) && propDef.decorate) {\n        // $FlowFixMe\n        value = propDef.decorate({\n          // $FlowFixMe\n          value,\n          props: existingProps,\n          state,\n          close,\n          focus,\n          event,\n          onError,\n          container,\n        });\n      }\n\n      return value;\n    };\n\n    const getter = () => {\n      if (valueDetermined) {\n        return value;\n      }\n\n      valueDetermined = true;\n      return getDerivedValue();\n    };\n\n    Object.defineProperty(existingProps, key, {\n      configurable: true,\n      enumerable: true,\n      get: getter,\n    });\n  });\n\n  // $FlowFixMe\n  eachProp(existingProps, propsDef, noop);\n}\n\nexport function serializeProps<P, X>(\n  propsDef: PropsDefinitionType<P, X>,\n  props: PropsType<P>,\n  method: $Values<typeof METHOD>\n): ZalgoPromise<{ [string]: string | boolean }> {\n  const params = {};\n\n  return ZalgoPromise.all(\n    mapProps(props, propsDef, (key, propDef, value) => {\n      return ZalgoPromise.resolve().then(() => {\n        if (value === null || typeof value === \"undefined\" || !propDef) {\n          return;\n        }\n\n        const getParam = {\n          [METHOD.GET]: propDef.queryParam,\n          [METHOD.POST]: propDef.bodyParam,\n        }[method];\n\n        const getValue = {\n          [METHOD.GET]: propDef.queryValue,\n          [METHOD.POST]: propDef.bodyValue,\n        }[method];\n\n        if (!getParam) {\n          return;\n        }\n\n        return ZalgoPromise.hash({\n          finalParam: ZalgoPromise.try(() => {\n            if (typeof getParam === \"function\") {\n              // $FlowFixMe[incompatible-call]\n              return getParam({ value });\n            } else if (typeof getParam === \"string\") {\n              return getParam;\n            } else {\n              return key;\n            }\n          }),\n\n          finalValue: ZalgoPromise.try(() => {\n            if (typeof getValue === \"function\" && isDefined(value)) {\n              // $FlowFixMe[incompatible-call]\n              // $FlowFixMe[incompatible-return]\n              return getValue({ value });\n            } else {\n              // $FlowFixMe[incompatible-return]\n              return value;\n            }\n          }),\n        }).then(({ finalParam, finalValue }) => {\n          let result;\n\n          if (typeof finalValue === \"boolean\") {\n            result = finalValue.toString();\n          } else if (typeof finalValue === \"string\") {\n            result = finalValue.toString();\n          } else if (typeof finalValue === \"object\" && finalValue !== null) {\n            if (propDef.serialization === PROP_SERIALIZATION.JSON) {\n              result = JSON.stringify(finalValue);\n            } else if (propDef.serialization === PROP_SERIALIZATION.BASE64) {\n              result = base64encode(JSON.stringify(finalValue));\n            } else if (\n              propDef.serialization === PROP_SERIALIZATION.DOTIFY ||\n              !propDef.serialization\n            ) {\n              result = dotify(finalValue, key);\n\n              for (const dotkey of Object.keys(result)) {\n                params[dotkey] = result[dotkey];\n              }\n\n              return;\n            }\n          } else if (typeof finalValue === \"number\") {\n            result = finalValue.toString();\n          }\n\n          params[finalParam] = result;\n        });\n      });\n    })\n  ).then(() => {\n    return params;\n  });\n}\n","/* @flow */\n/* eslint max-lines: 0 */\n\nimport {\n  send,\n  bridge,\n  ProxyWindow,\n  toProxyWindow,\n  type CrossDomainFunctionType,\n  cleanUpWindow,\n} from \"@krakenjs/post-robot/src\";\nimport {\n  isSameDomain,\n  matchDomain,\n  getDomainFromUrl,\n  isBlankDomain,\n  getAncestor,\n  getDomain,\n  type CrossDomainWindowType,\n  getDistanceFromTop,\n  normalizeMockUrl,\n  assertSameDomain,\n  closeWindow,\n  onCloseWindow,\n  isWindowClosed,\n  isSameTopWindow,\n  type DomainMatcher,\n} from \"@krakenjs/cross-domain-utils/src\";\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise/src\";\nimport {\n  addEventListener,\n  uniqueID,\n  elementReady,\n  writeElementToWindow,\n  eventEmitter,\n  type EventEmitterType,\n  noop,\n  onResize,\n  extendUrl,\n  appendChild,\n  cleanup,\n  once,\n  stringifyError,\n  destroyElement,\n  getElementSafe,\n  showElement,\n  hideElement,\n  iframe,\n  memoize,\n  isElementClosed,\n  awaitFrameWindow,\n  popup,\n  normalizeDimension,\n  watchElementForClose,\n  isShadowElement,\n  insertShadowSlot,\n  extend,\n} from \"@krakenjs/belter/src\";\n\nimport {\n  ZOID,\n  POST_MESSAGE,\n  CONTEXT,\n  EVENT,\n  METHOD,\n  WINDOW_REFERENCE,\n  DEFAULT_DIMENSIONS,\n  COMPONENT_ERROR,\n} from \"../constants\";\nimport {\n  getGlobal,\n  getProxyObject,\n  crossDomainSerialize,\n  buildChildWindowName,\n  type ProxyObject,\n} from \"../lib\";\nimport type { PropsInputType, PropsType } from \"../component/props\";\nimport type { ChildExportsType } from \"../child\";\nimport type { CssDimensionsType, ContainerReferenceType } from \"../types\";\nimport type {\n  NormalizedComponentOptionsType,\n  AttributesType,\n} from \"../component\";\n\nimport { serializeProps, extendProps } from \"./props\";\n\nexport type RenderOptionsType<P> = {|\n  uid: string,\n  props: PropsType<P>,\n  tag: string,\n  context: $Values<typeof CONTEXT>,\n  close: (?string) => ZalgoPromise<void>,\n  focus: () => ZalgoPromise<void>,\n  doc: Document,\n  container?: HTMLElement,\n  dimensions: CssDimensionsType,\n  state: Object,\n  event: EventEmitterType,\n  frame: ?HTMLIFrameElement,\n  prerenderFrame: ?HTMLIFrameElement,\n|};\n\nexport type ParentExportsType<P, X> = {|\n  init: (ChildExportsType<P>) => ZalgoPromise<void>,\n  close: () => ZalgoPromise<void>,\n  checkClose: CrossDomainFunctionType<[], boolean>,\n  resize: CrossDomainFunctionType<\n    [{| width?: ?number, height?: ?number |}],\n    void\n  >,\n  onError: (mixed) => ZalgoPromise<void>,\n  show: () => ZalgoPromise<void>,\n  hide: () => ZalgoPromise<void>,\n  export: (X) => ZalgoPromise<void>,\n|};\n\nexport type WindowRef =\n  | {| type: typeof WINDOW_REFERENCE.OPENER |}\n  | {| type: typeof WINDOW_REFERENCE.PARENT, distance: number |}\n  | {| type: typeof WINDOW_REFERENCE.GLOBAL, uid: string |}\n  | {| type: typeof WINDOW_REFERENCE.NAME, name: string |};\n\nexport type InitialChildPayload<P, X> = {|\n  uid: string,\n  tag: string,\n  version: string,\n  context: $Values<typeof CONTEXT>,\n  childDomainMatch: DomainMatcher,\n  props: PropsType<P>,\n  exports: ParentExportsType<P, X>,\n|};\n\nexport type InitialChildPayloadMetadata = {|\n  windowRef: WindowRef,\n|};\n\nexport type StateType = Object;\n\nexport type ParentHelpers<P> = {|\n  state: StateType,\n  close: () => ZalgoPromise<void>,\n  focus: () => ZalgoPromise<void>,\n  resize: ({| width: ?number, height: ?number |}) => ZalgoPromise<void>,\n  onError: (mixed) => ZalgoPromise<void>,\n  updateProps: (PropsInputType<P>) => ZalgoPromise<void>,\n  event: EventEmitterType,\n  show: () => ZalgoPromise<void>,\n  hide: () => ZalgoPromise<void>,\n|};\n\nfunction getDefaultProps<P>(): PropsType<P> {\n  // $FlowFixMe\n  return {};\n}\n\ntype InternalState = {|\n  visible: boolean,\n|};\n\ntype Rerender = () => ZalgoPromise<void>;\n\ntype RenderContainerOptions = {|\n  context: $Values<typeof CONTEXT>,\n  proxyFrame: ?ProxyObject<HTMLIFrameElement>,\n  proxyPrerenderFrame: ?ProxyObject<HTMLIFrameElement>,\n  rerender: Rerender,\n|};\n\ntype ResolveInitPromise = () => ZalgoPromise<void>;\ntype RejectInitPromise = (mixed) => ZalgoPromise<void>;\ntype GetProxyContainer = (\n  container: ContainerReferenceType\n) => ZalgoPromise<ProxyObject<HTMLElement>>;\ntype Show = () => ZalgoPromise<void>;\ntype Hide = () => ZalgoPromise<void>;\ntype Close = () => ZalgoPromise<void>;\ntype OnError = (mixed) => ZalgoPromise<void>;\ntype RenderContainer = (\n  proxyContainer: ProxyObject<HTMLElement>,\n  RenderContainerOptions\n) => ZalgoPromise<?ProxyObject<HTMLElement>>;\ntype SetProxyWin = (ProxyWindow) => ZalgoPromise<void>;\ntype GetProxyWindow = () => ZalgoPromise<ProxyWindow>;\ntype OpenFrame = (\n  context: $Values<typeof CONTEXT>,\n  {| windowName: string |}\n) => ZalgoPromise<?ProxyObject<HTMLIFrameElement>>;\ntype OpenPrerenderFrame = (\n  context: $Values<typeof CONTEXT>\n) => ZalgoPromise<?ProxyObject<HTMLIFrameElement>>;\ntype Prerender = (\n  proxyPrerenderWin: ProxyWindow,\n  {| context: $Values<typeof CONTEXT> |}\n) => ZalgoPromise<void>;\ntype Open = (\n  context: $Values<typeof CONTEXT>,\n  {|\n    proxyWin: ProxyWindow,\n    proxyFrame: ?ProxyObject<HTMLIFrameElement>,\n    windowName: string,\n  |}\n) => ZalgoPromise<ProxyWindow>;\ntype OpenPrerender = (\n  context: $Values<typeof CONTEXT>,\n  proxyWin: ProxyWindow,\n  proxyPrerenderFrame: ?ProxyObject<HTMLIFrameElement>\n) => ZalgoPromise<ProxyWindow>;\ntype WatchForUnload = () => ZalgoPromise<void>;\ntype GetInternalState = () => ZalgoPromise<InternalState>;\ntype SetInternalState = (InternalState) => ZalgoPromise<InternalState>;\n\ntype ParentDelegateOverrides<P> = {|\n  props: PropsType<P>,\n  event: EventEmitterType,\n  close: Close,\n  onError: OnError,\n  getProxyContainer: GetProxyContainer,\n  show: Show,\n  hide: Hide,\n  renderContainer: RenderContainer,\n  getProxyWindow: GetProxyWindow,\n  setProxyWin: SetProxyWin,\n  openFrame: OpenFrame,\n  openPrerenderFrame: OpenPrerenderFrame,\n  prerender: Prerender,\n  open: Open,\n  openPrerender: OpenPrerender,\n  watchForUnload: WatchForUnload,\n  getInternalState: GetInternalState,\n  setInternalState: SetInternalState,\n  resolveInitPromise: ResolveInitPromise,\n  rejectInitPromise: RejectInitPromise,\n|};\n\ntype DelegateOverrides = {|\n  getProxyContainer: GetProxyContainer,\n  show: Show,\n  hide: Hide,\n  renderContainer: RenderContainer,\n  getProxyWindow: GetProxyWindow,\n  setProxyWin: SetProxyWin,\n  openFrame: OpenFrame,\n  openPrerenderFrame: OpenPrerenderFrame,\n  prerender: Prerender,\n  open: Open,\n  openPrerender: OpenPrerender,\n  watchForUnload: WatchForUnload,\n|};\n\ntype RenderOptions = {|\n  target: CrossDomainWindowType,\n  container: ContainerReferenceType,\n  context: $Values<typeof CONTEXT>,\n  rerender: Rerender,\n|};\n\ntype ParentComponent<P, X> = {|\n  init: () => void,\n  render: (RenderOptions) => ZalgoPromise<void>,\n  getProps: () => PropsType<P>,\n  setProps: (newProps: PropsInputType<P>, isUpdate?: boolean) => void,\n  export: (X) => ZalgoPromise<void>,\n  destroy: (err?: mixed) => ZalgoPromise<void>,\n  getHelpers: () => ParentHelpers<P>,\n  getDelegateOverrides: () => ZalgoPromise<DelegateOverrides>,\n  getExports: () => X,\n|};\n\nconst getDefaultOverrides = <P>(): ParentDelegateOverrides<P> => {\n  // $FlowFixMe\n  return {};\n};\n\ntype ParentOptions<P, X, C> = {|\n  uid: string,\n  options: NormalizedComponentOptionsType<P, X, C>,\n  overrides?: ParentDelegateOverrides<P>,\n  parentWin?: CrossDomainWindowType,\n|};\n\nexport function parentComponent<P, X, C>({\n  uid,\n  options,\n  overrides = getDefaultOverrides(),\n  parentWin = window,\n}: ParentOptions<P, X, C>): ParentComponent<P, X> {\n  const {\n    propsDef,\n    containerTemplate,\n    prerenderTemplate,\n    tag,\n    name,\n    attributes,\n    dimensions,\n    autoResize,\n    url,\n    domain: domainMatch,\n    validate,\n    exports: xports,\n  } = options;\n\n  const initPromise = new ZalgoPromise();\n  const handledErrors = [];\n  const clean = cleanup();\n  const state = {};\n  const inputProps = {};\n  let internalState = {\n    visible: true,\n  };\n  const event = overrides.event ? overrides.event : eventEmitter();\n  const props: PropsType<P> = overrides.props\n    ? overrides.props\n    : getDefaultProps();\n\n  let currentProxyWin: ?ProxyWindow;\n  let currentProxyContainer: ?ProxyObject<HTMLElement>;\n  let childComponent: ?ChildExportsType<P>;\n  let currentChildDomain: ?string;\n  let currentContainer: HTMLElement | void;\n  let isRenderFinished: boolean = false;\n\n  const onErrorOverride: ?OnError = overrides.onError;\n  let getProxyContainerOverride: ?GetProxyContainer =\n    overrides.getProxyContainer;\n  let showOverride: ?Show = overrides.show;\n  let hideOverride: ?Hide = overrides.hide;\n  const closeOverride: ?Close = overrides.close;\n  let renderContainerOverride: ?RenderContainer = overrides.renderContainer;\n  let getProxyWindowOverride: ?GetProxyWindow = overrides.getProxyWindow;\n  let setProxyWinOverride: ?SetProxyWin = overrides.setProxyWin;\n  let openFrameOverride: ?OpenFrame = overrides.openFrame;\n  let openPrerenderFrameOverride: ?OpenPrerenderFrame =\n    overrides.openPrerenderFrame;\n  let prerenderOverride: ?Prerender = overrides.prerender;\n  let openOverride: ?Open = overrides.open;\n  let openPrerenderOverride: ?OpenPrerender = overrides.openPrerender;\n  let watchForUnloadOverride: ?WatchForUnload = overrides.watchForUnload;\n  const getInternalStateOverride: ?GetInternalState =\n    overrides.getInternalState;\n  const setInternalStateOverride: ?SetInternalState =\n    overrides.setInternalState;\n\n  const getDimensions = (): CssDimensionsType => {\n    if (typeof dimensions === \"function\") {\n      return dimensions({ props });\n    }\n    return dimensions;\n  };\n\n  const resolveInitPromise = () => {\n    return ZalgoPromise.try(() => {\n      if (overrides.resolveInitPromise) {\n        return overrides.resolveInitPromise();\n      }\n\n      return initPromise.resolve();\n    });\n  };\n\n  const rejectInitPromise = (err: mixed) => {\n    return ZalgoPromise.try(() => {\n      if (overrides.rejectInitPromise) {\n        return overrides.rejectInitPromise(err);\n      }\n\n      return initPromise.reject(err);\n    });\n  };\n\n  const getPropsForChild = (\n    initialChildDomain: string\n  ): ZalgoPromise<PropsType<P>> => {\n    const result = {};\n\n    for (const key of Object.keys(props)) {\n      const prop = propsDef[key];\n\n      if (prop && prop.sendToChild === false) {\n        continue;\n      }\n\n      const trustedChild: boolean =\n        prop && prop.trustedDomains && prop.trustedDomains.length > 0\n          ? prop.trustedDomains.reduce((acc, val) => {\n              return acc || matchDomain(val, initialChildDomain);\n            }, false)\n          : matchDomain(initialChildDomain, getDomain(window));\n\n      // let trustedDomains override sameDomain prop\n      if (prop && prop.sameDomain && !trustedChild) {\n        continue;\n      }\n\n      // sameDomain was not set and trusted domains must match\n      if (prop && prop.trustedDomains && !trustedChild) {\n        continue;\n      }\n\n      result[key] = props[key];\n    }\n\n    // $FlowFixMe\n    return ZalgoPromise.hash(result);\n  };\n\n  const setupEvents = () => {\n    event.on(EVENT.RENDER, () => props.onRender());\n    event.on(EVENT.PRERENDER, () => props.onPrerender());\n    event.on(EVENT.DISPLAY, () => props.onDisplay());\n    event.on(EVENT.RENDERED, () => props.onRendered());\n    event.on(EVENT.PRERENDERED, () => props.onPrerendered());\n    event.on(EVENT.CLOSE, () => props.onClose());\n    event.on(EVENT.DESTROY, () => props.onDestroy());\n    event.on(EVENT.RESIZE, () => props.onResize());\n    event.on(EVENT.FOCUS, () => props.onFocus());\n    event.on(EVENT.PROPS, (newProps) => props.onProps(newProps));\n    event.on(EVENT.ERROR, (err) => {\n      if (props && props.onError) {\n        return props.onError(err);\n      } else {\n        return rejectInitPromise(err).then(() => {\n          setTimeout(() => {\n            throw err;\n          }, 1);\n        });\n      }\n    });\n\n    clean.register(event.reset);\n  };\n\n  const getInternalState = () => {\n    return ZalgoPromise.try(() => {\n      if (getInternalStateOverride) {\n        return getInternalStateOverride();\n      }\n\n      return internalState;\n    });\n  };\n\n  const setInternalState = (newInternalState) => {\n    return ZalgoPromise.try(() => {\n      if (setInternalStateOverride) {\n        return setInternalStateOverride(newInternalState);\n      }\n\n      internalState = { ...internalState, ...newInternalState };\n      return internalState;\n    });\n  };\n\n  const getProxyWindow = (): ZalgoPromise<ProxyWindow> => {\n    if (getProxyWindowOverride) {\n      return getProxyWindowOverride();\n    }\n\n    return ZalgoPromise.try(() => {\n      const windowProp = props.window;\n\n      if (windowProp) {\n        const proxyWin = toProxyWindow(windowProp);\n        clean.register(() => windowProp.close());\n        return proxyWin;\n      }\n\n      return new ProxyWindow({ send });\n    });\n  };\n\n  const setProxyWin = (proxyWin: ProxyWindow): ZalgoPromise<void> => {\n    if (setProxyWinOverride) {\n      return setProxyWinOverride(proxyWin);\n    }\n\n    return ZalgoPromise.try(() => {\n      currentProxyWin = proxyWin;\n    });\n  };\n\n  const show = (): ZalgoPromise<void> => {\n    if (showOverride) {\n      return showOverride();\n    }\n\n    return ZalgoPromise.hash({\n      setState: setInternalState({ visible: true }),\n      showElement: currentProxyContainer\n        ? currentProxyContainer.get().then(showElement)\n        : null,\n    }).then(noop);\n  };\n\n  const hide = (): ZalgoPromise<void> => {\n    if (hideOverride) {\n      return hideOverride();\n    }\n\n    return ZalgoPromise.hash({\n      setState: setInternalState({ visible: false }),\n      showElement: currentProxyContainer\n        ? currentProxyContainer.get().then(hideElement)\n        : null,\n    }).then(noop);\n  };\n\n  const getUrl = (): string => {\n    if (typeof url === \"function\") {\n      return url({ props });\n    }\n\n    return url;\n  };\n\n  const getAttributes = (): AttributesType => {\n    if (typeof attributes === \"function\") {\n      return attributes({ props });\n    }\n\n    return attributes;\n  };\n\n  const buildQuery = (): ZalgoPromise<{| [string]: string | boolean |}> => {\n    return serializeProps(propsDef, props, METHOD.GET);\n  };\n\n  const buildBody = (): ZalgoPromise<{| [string]: string | boolean |}> => {\n    return serializeProps(propsDef, props, METHOD.POST);\n  };\n\n  const buildUrl = (): ZalgoPromise<string> => {\n    return buildQuery().then((query) => {\n      return extendUrl(normalizeMockUrl(getUrl()), { query });\n    });\n  };\n\n  const getInitialChildDomain = (): string => {\n    return getDomainFromUrl(getUrl());\n  };\n\n  const getDomainMatcher = (): DomainMatcher => {\n    if (domainMatch) {\n      return domainMatch;\n    }\n\n    return getInitialChildDomain();\n  };\n\n  const openFrame = (\n    context: $Values<typeof CONTEXT>,\n    { windowName }: {| windowName: string |}\n  ): ZalgoPromise<?ProxyObject<HTMLIFrameElement>> => {\n    if (openFrameOverride) {\n      return openFrameOverride(context, { windowName });\n    }\n\n    return ZalgoPromise.try(() => {\n      if (context === CONTEXT.IFRAME && __ZOID__.__IFRAME_SUPPORT__) {\n        // $FlowFixMe\n        const attrs = {\n          name: windowName,\n          title: name,\n          ...getAttributes().iframe,\n        };\n\n        return getProxyObject(iframe({ attributes: attrs }));\n      }\n    });\n  };\n\n  const openPrerenderFrame = (\n    context: $Values<typeof CONTEXT>\n  ): ZalgoPromise<?ProxyObject<HTMLIFrameElement>> => {\n    if (openPrerenderFrameOverride) {\n      return openPrerenderFrameOverride(context);\n    }\n\n    return ZalgoPromise.try(() => {\n      if (context === CONTEXT.IFRAME && __ZOID__.__IFRAME_SUPPORT__) {\n        // $FlowFixMe\n        const attrs = {\n          name: `__${ZOID}_prerender_frame__${name}_${uniqueID()}__`,\n          title: `prerender__${name}`,\n          ...getAttributes().iframe,\n        };\n        return getProxyObject(\n          iframe({\n            attributes: attrs,\n          })\n        );\n      }\n    });\n  };\n\n  const openPrerender = (\n    context: $Values<typeof CONTEXT>,\n    proxyWin: ProxyWindow,\n    proxyPrerenderFrame: ?ProxyObject<HTMLIFrameElement>\n  ): ZalgoPromise<ProxyWindow> => {\n    if (openPrerenderOverride) {\n      return openPrerenderOverride(context, proxyWin, proxyPrerenderFrame);\n    }\n\n    return ZalgoPromise.try(() => {\n      if (context === CONTEXT.IFRAME && __ZOID__.__IFRAME_SUPPORT__) {\n        if (!proxyPrerenderFrame) {\n          throw new Error(`Expected proxy frame to be passed`);\n        }\n\n        return proxyPrerenderFrame.get().then((prerenderFrame) => {\n          clean.register(() => destroyElement(prerenderFrame));\n\n          return awaitFrameWindow(prerenderFrame)\n            .then((prerenderFrameWindow) => {\n              return assertSameDomain(prerenderFrameWindow);\n            })\n            .then((win) => {\n              return toProxyWindow(win);\n            });\n        });\n      } else if (context === CONTEXT.POPUP && __ZOID__.__POPUP_SUPPORT__) {\n        return proxyWin;\n      } else {\n        throw new Error(`No render context available for ${context}`);\n      }\n    });\n  };\n\n  const focus = (): ZalgoPromise<void> => {\n    return ZalgoPromise.try(() => {\n      if (currentProxyWin) {\n        return ZalgoPromise.all([\n          event.trigger(EVENT.FOCUS),\n          currentProxyWin.focus(),\n        ]).then(noop);\n      }\n    });\n  };\n\n  const getCurrentWindowReferenceUID = (): string => {\n    const global = getGlobal(window);\n    global.windows = global.windows || {};\n    global.windows[uid] = window;\n    clean.register(() => {\n      delete global.windows[uid];\n    });\n    return uid;\n  };\n\n  const getWindowRef = (\n    target: CrossDomainWindowType,\n    initialChildDomain: string,\n    context: $Values<typeof CONTEXT>,\n    proxyWin: ProxyWindow\n  ): WindowRef => {\n    if (initialChildDomain === getDomain(window)) {\n      return {\n        type: WINDOW_REFERENCE.GLOBAL,\n        uid: getCurrentWindowReferenceUID(),\n      };\n    }\n\n    if (target !== window) {\n      throw new Error(\n        `Can not construct cross-domain window reference for different target window`\n      );\n    }\n\n    if (props.window) {\n      const actualComponentWindow = proxyWin.getWindow();\n      if (!actualComponentWindow) {\n        throw new Error(\n          `Can not construct cross-domain window reference for lazy window prop`\n        );\n      }\n\n      if (getAncestor(actualComponentWindow) !== window) {\n        throw new Error(\n          `Can not construct cross-domain window reference for window prop with different ancestor`\n        );\n      }\n    }\n\n    if (context === CONTEXT.POPUP) {\n      return { type: WINDOW_REFERENCE.OPENER };\n    } else if (context === CONTEXT.IFRAME) {\n      return {\n        type: WINDOW_REFERENCE.PARENT,\n        distance: getDistanceFromTop(window),\n      };\n    }\n\n    throw new Error(`Can not construct window reference for child`);\n  };\n\n  const runTimeout = (): ZalgoPromise<void> => {\n    return ZalgoPromise.try(() => {\n      const timeout = props.timeout;\n\n      if (timeout) {\n        return initPromise.timeout(\n          timeout,\n          new Error(`Loading component timed out after ${timeout} milliseconds`)\n        );\n      }\n    });\n  };\n\n  const initChild = (\n    childDomain: string,\n    childExports: ChildExportsType<P>\n  ): ZalgoPromise<void> => {\n    return ZalgoPromise.try(() => {\n      currentChildDomain = childDomain;\n      childComponent = childExports;\n\n      currentProxyWin\n        ?.isPopup()\n        .then((isPopup) => {\n          if (childExports?.name !== \"\" && isPopup) {\n            currentProxyWin?.setName(childExports?.name);\n          }\n        })\n        .finally(() => {\n          resolveInitPromise();\n          clean.register(() => childExports.close.fireAndForget().catch(noop));\n        });\n    });\n  };\n\n  const resize = ({\n    width,\n    height,\n  }: {|\n    width?: ?number,\n    height?: ?number,\n  |}): ZalgoPromise<void> => {\n    return ZalgoPromise.try(() => {\n      event.trigger(EVENT.RESIZE, { width, height });\n    });\n  };\n\n  const destroy = (err: mixed): ZalgoPromise<void> => {\n    // eslint-disable-next-line promise/no-promise-in-callback\n    return ZalgoPromise.try(() => {\n      return event.trigger(EVENT.DESTROY);\n    })\n      .catch(noop)\n      .then(() => {\n        return clean.all(err);\n      })\n      .then(() => {\n        const error = err || new Error(COMPONENT_ERROR.COMPONENT_DESTROYED);\n        if (\n          (currentContainer && isElementClosed(currentContainer)) ||\n          error.message === COMPONENT_ERROR.NAVIGATED_AWAY\n        ) {\n          initPromise.resolve();\n        } else {\n          initPromise.asyncReject(error);\n        }\n      });\n  };\n\n  const close = memoize((err?: mixed): ZalgoPromise<void> => {\n    return ZalgoPromise.try(() => {\n      if (closeOverride) {\n        // $FlowFixMe\n        const source = closeOverride.__source__;\n\n        if (isWindowClosed(source)) {\n          return;\n        }\n\n        return closeOverride();\n      }\n\n      return ZalgoPromise.try(() => {\n        return event.trigger(EVENT.CLOSE);\n      }).then(() => {\n        return destroy(err || new Error(COMPONENT_ERROR.COMPONENT_CLOSED));\n      });\n    });\n  });\n\n  const open = (\n    context: $Values<typeof CONTEXT>,\n    {\n      proxyWin,\n      proxyFrame,\n      windowName,\n    }: {|\n      proxyWin: ProxyWindow,\n      proxyFrame: ?ProxyObject<HTMLIFrameElement>,\n      windowName: string,\n    |}\n  ): ZalgoPromise<ProxyWindow> => {\n    if (openOverride) {\n      return openOverride(context, { proxyWin, proxyFrame, windowName });\n    }\n\n    return ZalgoPromise.try(() => {\n      if (context === CONTEXT.IFRAME && __ZOID__.__IFRAME_SUPPORT__) {\n        if (!proxyFrame) {\n          throw new Error(`Expected proxy frame to be passed`);\n        }\n\n        return proxyFrame.get().then((frame) => {\n          return awaitFrameWindow(frame).then((win) => {\n            clean.register(() => destroyElement(frame));\n            clean.register(() => cleanUpWindow(win));\n            return win;\n          });\n        });\n      } else if (context === CONTEXT.POPUP && __ZOID__.__POPUP_SUPPORT__) {\n        let {\n          width = DEFAULT_DIMENSIONS.WIDTH,\n          height = DEFAULT_DIMENSIONS.HEIGHT,\n        } = getDimensions();\n\n        width = normalizeDimension(width, window.outerWidth);\n        height = normalizeDimension(height, window.outerWidth);\n\n        // $FlowFixMe\n        const attrs = {\n          name: windowName,\n          width,\n          height,\n          ...getAttributes().popup,\n        };\n\n        const win = popup(\"\", attrs);\n\n        clean.register(() => closeWindow(win));\n        clean.register(() => cleanUpWindow(win));\n\n        return win;\n      } else {\n        throw new Error(`No render context available for ${context}`);\n      }\n    }).then((win) => {\n      proxyWin.setWindow(win, { send });\n      return proxyWin.setName(windowName).then(() => {\n        return proxyWin;\n      });\n    });\n  };\n\n  const watchForUnload = () => {\n    return ZalgoPromise.try(() => {\n      const unloadWindowListener = addEventListener(\n        window,\n        \"unload\",\n        once(() => {\n          destroy(new Error(COMPONENT_ERROR.NAVIGATED_AWAY));\n        })\n      );\n\n      const closeParentWindowListener = onCloseWindow(parentWin, destroy, 3000);\n      clean.register(closeParentWindowListener.cancel);\n      clean.register(unloadWindowListener.cancel);\n\n      if (watchForUnloadOverride) {\n        return watchForUnloadOverride();\n      }\n    });\n  };\n\n  const watchForClose = (\n    proxyWin: ProxyWindow,\n    context: $Values<typeof CONTEXT>\n  ): ZalgoPromise<void> => {\n    let cancelled = false;\n\n    clean.register(() => {\n      cancelled = true;\n    });\n\n    return ZalgoPromise.delay(2000)\n      .then(() => {\n        return proxyWin.isClosed();\n      })\n      .then((isClosed) => {\n        if (!cancelled) {\n          if (context === CONTEXT.POPUP && isClosed) {\n            return close(new Error(COMPONENT_ERROR.POPUP_CLOSE));\n          }\n\n          const isCurrentContainerClosed: boolean = Boolean(\n            currentContainer && isElementClosed(currentContainer)\n          );\n\n          if (\n            context === CONTEXT.IFRAME &&\n            isClosed &&\n            (isCurrentContainerClosed || isRenderFinished)\n          ) {\n            return close(new Error(COMPONENT_ERROR.IFRAME_CLOSE));\n          }\n\n          return watchForClose(proxyWin, context);\n        }\n      });\n  };\n\n  const checkWindowClose = (proxyWin: ProxyWindow): ZalgoPromise<boolean> => {\n    let closed = false;\n\n    return proxyWin\n      .isClosed()\n      .then((isClosed) => {\n        if (isClosed) {\n          closed = true;\n          return close(new Error(COMPONENT_ERROR.WINDOW_CLOSED));\n        }\n\n        return ZalgoPromise.delay(200)\n          .then(() => proxyWin.isClosed())\n          .then((secondIsClosed) => {\n            if (secondIsClosed) {\n              closed = true;\n              return close(new Error(COMPONENT_ERROR.WINDOW_CLOSED));\n            }\n          });\n      })\n      .then(() => {\n        return closed;\n      });\n  };\n\n  const onError = (err: mixed): ZalgoPromise<void> => {\n    if (onErrorOverride) {\n      return onErrorOverride(err);\n    }\n\n    return ZalgoPromise.try(() => {\n      if (handledErrors.indexOf(err) !== -1) {\n        return;\n      }\n\n      handledErrors.push(err);\n      initPromise.asyncReject(err);\n\n      return event.trigger(EVENT.ERROR, err);\n    });\n  };\n\n  const exportsPromise: ZalgoPromise<X> = new ZalgoPromise();\n\n  const getExports = (): X => {\n    return xports({\n      getExports: () => exportsPromise,\n    });\n  };\n\n  const xport = (actualExports: X): ZalgoPromise<void> => {\n    return ZalgoPromise.try(() => {\n      exportsPromise.resolve(actualExports);\n    });\n  };\n\n  initChild.onError = onError;\n\n  const buildParentExports = (win: ProxyWindow): ParentExportsType<P, X> => {\n    const checkClose = () => checkWindowClose(win);\n    function init(childExports: ChildExportsType<P>): ZalgoPromise<void> {\n      return initChild(this.origin, childExports);\n    }\n    return {\n      init,\n      close,\n      checkClose,\n      resize,\n      onError,\n      show,\n      hide,\n      export: xport,\n    };\n  };\n\n  const buildInitialChildPayload = ({\n    proxyWin,\n    initialChildDomain,\n    childDomainMatch,\n    context,\n  }: {|\n    proxyWin: ProxyWindow,\n    initialChildDomain: string,\n    childDomainMatch: DomainMatcher,\n    context: $Values<typeof CONTEXT>,\n  |} = {}): ZalgoPromise<InitialChildPayload<P, X>> => {\n    return getPropsForChild(initialChildDomain).then((childProps) => {\n      return {\n        uid,\n        context,\n        tag,\n        childDomainMatch,\n        version: __ZOID__.__VERSION__,\n        props: childProps,\n        exports: buildParentExports(proxyWin),\n      };\n    });\n  };\n\n  const buildSerializedChildPayload = ({\n    proxyWin,\n    initialChildDomain,\n    childDomainMatch,\n    target = window,\n    context,\n  }: {|\n    proxyWin: ProxyWindow,\n    initialChildDomain: string,\n    childDomainMatch: DomainMatcher,\n    target: CrossDomainWindowType,\n    context: $Values<typeof CONTEXT>,\n  |} = {}): ZalgoPromise<string> => {\n    return buildInitialChildPayload({\n      proxyWin,\n      initialChildDomain,\n      childDomainMatch,\n      context,\n    }).then((childPayload) => {\n      const { serializedData, cleanReference } = crossDomainSerialize({\n        data: childPayload,\n        metaData: {\n          windowRef: getWindowRef(\n            target,\n            initialChildDomain,\n            context,\n            proxyWin\n          ),\n        },\n        sender: {\n          domain: getDomain(window),\n        },\n        receiver: {\n          win: proxyWin,\n          domain: childDomainMatch,\n        },\n        passByReference: initialChildDomain === getDomain(),\n      });\n\n      clean.register(cleanReference);\n      return serializedData;\n    });\n  };\n\n  const buildWindowName = ({\n    proxyWin,\n    initialChildDomain,\n    childDomainMatch,\n    target,\n    context,\n  }: {|\n    proxyWin: ProxyWindow,\n    initialChildDomain: string,\n    childDomainMatch: DomainMatcher,\n    target: CrossDomainWindowType,\n    context: $Values<typeof CONTEXT>,\n  |}): ZalgoPromise<string> => {\n    return buildSerializedChildPayload({\n      proxyWin,\n      initialChildDomain,\n      childDomainMatch,\n      target,\n      context,\n    }).then((serializedPayload) => {\n      return buildChildWindowName({ name, serializedPayload });\n    });\n  };\n\n  const renderTemplate = (\n    renderer: (RenderOptionsType<P>) => ?HTMLElement,\n    {\n      context,\n      container,\n      doc,\n      frame,\n      prerenderFrame,\n    }: {|\n      context: $Values<typeof CONTEXT>,\n      container?: HTMLElement,\n      doc: Document,\n      frame?: ?HTMLIFrameElement,\n      prerenderFrame?: ?HTMLIFrameElement,\n    |}\n  ): ?HTMLElement => {\n    return renderer({\n      uid,\n      container,\n      context,\n      doc,\n      frame,\n      prerenderFrame,\n      focus,\n      close,\n      state,\n      props,\n      tag,\n      dimensions: getDimensions(),\n      event,\n    });\n  };\n\n  const prerender = (\n    proxyPrerenderWin: ProxyWindow,\n    { context }: {| context: $Values<typeof CONTEXT> |}\n  ): ZalgoPromise<void> => {\n    if (prerenderOverride) {\n      return prerenderOverride(proxyPrerenderWin, { context });\n    }\n\n    return ZalgoPromise.try(() => {\n      if (!prerenderTemplate) {\n        return;\n      }\n\n      event.trigger(EVENT.PRERENDER);\n\n      let prerenderWindow = proxyPrerenderWin.getWindow();\n\n      if (\n        !prerenderWindow ||\n        !isSameDomain(prerenderWindow) ||\n        !isBlankDomain(prerenderWindow)\n      ) {\n        return;\n      }\n\n      prerenderWindow = assertSameDomain(prerenderWindow);\n\n      const doc = prerenderWindow.document;\n      const el = renderTemplate(prerenderTemplate, { context, doc });\n\n      if (!el) {\n        return;\n      }\n\n      if (el.ownerDocument !== doc) {\n        throw new Error(\n          `Expected prerender template to have been created with document from child window`\n        );\n      }\n\n      writeElementToWindow(prerenderWindow, el);\n\n      let { width = false, height = false, element = \"body\" } = autoResize;\n      element = getElementSafe(element, doc);\n\n      if (element && (width || height)) {\n        const prerenderResizeListener = onResize(\n          element,\n          ({ width: newWidth, height: newHeight }) => {\n            resize({\n              width: width ? newWidth : undefined,\n              height: height ? newHeight : undefined,\n            });\n          },\n          { width, height, win: prerenderWindow }\n        );\n\n        event.on(EVENT.RENDERED, prerenderResizeListener.cancel);\n      }\n      event.trigger(EVENT.PRERENDERED);\n    });\n  };\n  const renderContainer: RenderContainer = (\n    proxyContainer: ProxyObject<HTMLElement>,\n    {\n      proxyFrame,\n      proxyPrerenderFrame,\n      context,\n      rerender,\n    }: RenderContainerOptions\n  ): ZalgoPromise<?ProxyObject<HTMLElement>> => {\n    if (renderContainerOverride) {\n      return renderContainerOverride(proxyContainer, {\n        proxyFrame,\n        proxyPrerenderFrame,\n        context,\n        rerender,\n      });\n    }\n\n    return ZalgoPromise.hash({\n      container: proxyContainer.get(),\n      // $FlowFixMe\n      frame: proxyFrame ? proxyFrame.get() : null,\n      // $FlowFixMe\n      prerenderFrame: proxyPrerenderFrame ? proxyPrerenderFrame.get() : null,\n      internalState: getInternalState(),\n    }).then(\n      ({ container, frame, prerenderFrame, internalState: { visible } }) => {\n        const innerContainer = renderTemplate(containerTemplate, {\n          context,\n          container,\n          frame,\n          prerenderFrame,\n          doc: document,\n        });\n        if (innerContainer) {\n          if (!visible) {\n            hideElement(innerContainer);\n          }\n          appendChild(container, innerContainer);\n          const containerWatcher = watchElementForClose(innerContainer, () => {\n            const removeError = new Error(\n              `Detected container element removed from DOM`\n            );\n            return ZalgoPromise.delay(1).then(() => {\n              if (isElementClosed(innerContainer)) {\n                close(removeError);\n              } else {\n                clean.all(removeError);\n                return rerender().then(resolveInitPromise, rejectInitPromise);\n              }\n            });\n          });\n\n          clean.register(() => containerWatcher.cancel());\n          clean.register(() => destroyElement(innerContainer));\n          currentProxyContainer = getProxyObject(innerContainer);\n          return currentProxyContainer;\n        }\n      }\n    );\n  };\n\n  const getBridgeUrl = (): ?string => {\n    if (typeof options.bridgeUrl === \"function\") {\n      return options.bridgeUrl({ props });\n    }\n\n    return options.bridgeUrl;\n  };\n\n  const openBridge = (\n    proxyWin: ProxyWindow,\n    initialChildDomain: string,\n    context: $Values<typeof CONTEXT>\n  ): ?ZalgoPromise<?CrossDomainWindowType> => {\n    if (__POST_ROBOT__.__IE_POPUP_SUPPORT__) {\n      return ZalgoPromise.try(() => {\n        return proxyWin.awaitWindow();\n      }).then((win) => {\n        if (\n          !bridge ||\n          !bridge.needsBridge({ win, domain: initialChildDomain }) ||\n          bridge.hasBridge(initialChildDomain, initialChildDomain)\n        ) {\n          return;\n        }\n\n        const bridgeUrl = getBridgeUrl();\n\n        if (!bridgeUrl) {\n          throw new Error(`Bridge needed to render ${context}`);\n        }\n\n        const bridgeDomain = getDomainFromUrl(bridgeUrl);\n        bridge.linkUrl(win, initialChildDomain);\n        return bridge.openBridge(normalizeMockUrl(bridgeUrl), bridgeDomain);\n      });\n    }\n  };\n\n  const getHelpers = (): ParentHelpers<P> => {\n    return {\n      state,\n      event,\n      close,\n      focus,\n      resize,\n      onError,\n      // eslint-disable-next-line no-use-before-define\n      updateProps,\n      show,\n      hide,\n    };\n  };\n\n  const getProps = () => props;\n\n  const getDefaultPropsInput = (): PropsInputType<P> => {\n    // $FlowFixMe\n    return {};\n  };\n\n  const setProps = (\n    newInputProps: PropsInputType<P> = getDefaultPropsInput()\n  ) => {\n    if (__DEBUG__ && validate) {\n      validate({ props: newInputProps });\n    }\n\n    const container = currentContainer;\n    const helpers = getHelpers();\n    extend(inputProps, newInputProps);\n\n    // $FlowFixMe\n    extendProps(propsDef, props, inputProps, helpers, container);\n  };\n\n  const updateProps = (newProps: PropsInputType<P>): ZalgoPromise<void> => {\n    setProps(newProps);\n\n    return initPromise.then(() => {\n      const child = childComponent;\n      const proxyWin = currentProxyWin;\n      const childDomain = currentChildDomain;\n\n      if (!child || !proxyWin || !childDomain) {\n        return;\n      }\n\n      return getPropsForChild(childDomain).then((childProps) => {\n        return child.updateProps(childProps).catch((err) => {\n          return checkWindowClose(proxyWin).then((closed) => {\n            if (!closed) {\n              throw err;\n            }\n          });\n        });\n      });\n    });\n  };\n\n  const getProxyContainer: GetProxyContainer = (\n    container: ContainerReferenceType\n  ): ZalgoPromise<ProxyObject<HTMLElement>> => {\n    if (getProxyContainerOverride) {\n      return getProxyContainerOverride(container);\n    }\n\n    return ZalgoPromise.try(() => {\n      return elementReady(container);\n    }).then((containerElement) => {\n      if (isShadowElement(containerElement)) {\n        containerElement = insertShadowSlot(containerElement);\n      }\n\n      currentContainer = containerElement;\n      return getProxyObject(containerElement);\n    });\n  };\n\n  const delegate = (\n    context: $Values<typeof CONTEXT>,\n    target: CrossDomainWindowType\n  ): ZalgoPromise<DelegateOverrides> => {\n    const delegateProps = {};\n    for (const propName of Object.keys(props)) {\n      const propDef = propsDef[propName];\n      if (propDef && propDef.allowDelegate) {\n        delegateProps[propName] = props[propName];\n      }\n    }\n\n    const childOverridesPromise = send(\n      target,\n      `${POST_MESSAGE.DELEGATE}_${name}`,\n      {\n        uid,\n        overrides: {\n          props: delegateProps,\n          event,\n          close,\n          onError,\n          getInternalState,\n          setInternalState,\n          resolveInitPromise,\n          rejectInitPromise,\n        },\n      }\n    )\n      .then(({ data: { parent } }) => {\n        const parentComp: ParentComponent<P, X> = parent;\n\n        clean.register((err) => {\n          if (!isWindowClosed(target)) {\n            return parentComp.destroy(err);\n          }\n        });\n        return parentComp.getDelegateOverrides();\n      })\n      .catch((err) => {\n        throw new Error(\n          `Unable to delegate rendering. Possibly the component is not loaded in the target window.\\n\\n${stringifyError(\n            err\n          )}`\n        );\n      });\n\n    getProxyContainerOverride = (...args) =>\n      childOverridesPromise.then((childOverrides) =>\n        childOverrides.getProxyContainer(...args)\n      );\n    renderContainerOverride = (...args) =>\n      childOverridesPromise.then((childOverrides) =>\n        childOverrides.renderContainer(...args)\n      );\n    showOverride = (...args) =>\n      childOverridesPromise.then((childOverrides) =>\n        childOverrides.show(...args)\n      );\n    hideOverride = (...args) =>\n      childOverridesPromise.then((childOverrides) =>\n        childOverrides.hide(...args)\n      );\n    watchForUnloadOverride = (...args) =>\n      childOverridesPromise.then((childOverrides) =>\n        childOverrides.watchForUnload(...args)\n      );\n\n    if (context === CONTEXT.IFRAME && __ZOID__.__IFRAME_SUPPORT__) {\n      getProxyWindowOverride = (...args) =>\n        childOverridesPromise.then((childOverrides) =>\n          childOverrides.getProxyWindow(...args)\n        );\n      openFrameOverride = (...args) =>\n        childOverridesPromise.then((childOverrides) =>\n          childOverrides.openFrame(...args)\n        );\n      openPrerenderFrameOverride = (...args) =>\n        childOverridesPromise.then((childOverrides) =>\n          childOverrides.openPrerenderFrame(...args)\n        );\n      prerenderOverride = (...args) =>\n        childOverridesPromise.then((childOverrides) =>\n          childOverrides.prerender(...args)\n        );\n      openOverride = (...args) =>\n        childOverridesPromise.then((childOverrides) =>\n          childOverrides.open(...args)\n        );\n      openPrerenderOverride = (...args) =>\n        childOverridesPromise.then((childOverrides) =>\n          childOverrides.openPrerender(...args)\n        );\n    } else if (context === CONTEXT.POPUP && __ZOID__.__POPUP_SUPPORT__) {\n      setProxyWinOverride = (...args) =>\n        childOverridesPromise.then((childOverrides) =>\n          childOverrides.setProxyWin(...args)\n        );\n    }\n\n    return childOverridesPromise;\n  };\n\n  const getDelegateOverrides = (): ZalgoPromise<DelegateOverrides> => {\n    return ZalgoPromise.try(() => {\n      return {\n        getProxyContainer,\n        show,\n        hide,\n        renderContainer,\n        getProxyWindow,\n        watchForUnload,\n        openFrame,\n        openPrerenderFrame,\n        prerender,\n        open,\n        openPrerender,\n        setProxyWin,\n      };\n    });\n  };\n\n  const checkAllowRender = (\n    target: CrossDomainWindowType,\n    childDomainMatch: DomainMatcher,\n    container: ContainerReferenceType\n  ) => {\n    if (target === window) {\n      return;\n    }\n\n    if (!isSameTopWindow(window, target)) {\n      throw new Error(`Can only renderTo an adjacent frame`);\n    }\n\n    const origin = getDomain();\n\n    if (!matchDomain(childDomainMatch, origin) && !isSameDomain(target)) {\n      throw new Error(\n        `Can not render remotely to ${childDomainMatch.toString()} - can only render to ${origin}`\n      );\n    }\n\n    if (container && typeof container !== \"string\") {\n      throw new Error(\n        `Container passed to renderTo must be a string selector, got ${typeof container} }`\n      );\n    }\n  };\n\n  const init = () => {\n    setupEvents();\n  };\n\n  const render = ({\n    target,\n    container,\n    context,\n    rerender,\n  }: RenderOptions): ZalgoPromise<void> => {\n    return ZalgoPromise.try(() => {\n      const initialChildDomain = getInitialChildDomain();\n      const childDomainMatch = getDomainMatcher();\n\n      checkAllowRender(target, childDomainMatch, container);\n\n      const delegatePromise = ZalgoPromise.try(() => {\n        if (target !== window) {\n          return delegate(context, target);\n        }\n      });\n\n      const windowProp = props.window;\n\n      const watchForUnloadPromise = watchForUnload();\n\n      const buildBodyPromise = buildBody();\n      const onRenderPromise = event.trigger(EVENT.RENDER);\n\n      const getProxyContainerPromise = getProxyContainer(container);\n      const getProxyWindowPromise = getProxyWindow();\n\n      const finalSetPropsPromise = getProxyContainerPromise.then(() => {\n        return setProps();\n      });\n\n      const buildUrlPromise = finalSetPropsPromise.then(() => {\n        return buildUrl();\n      });\n\n      const buildWindowNamePromise = getProxyWindowPromise.then((proxyWin) => {\n        return buildWindowName({\n          proxyWin,\n          initialChildDomain,\n          childDomainMatch,\n          target,\n          context,\n        });\n      });\n\n      const openFramePromise = buildWindowNamePromise.then((windowName) =>\n        openFrame(context, { windowName })\n      );\n      const openPrerenderFramePromise = openPrerenderFrame(context);\n\n      const renderContainerPromise = ZalgoPromise.hash({\n        proxyContainer: getProxyContainerPromise,\n        proxyFrame: openFramePromise,\n        proxyPrerenderFrame: openPrerenderFramePromise,\n      })\n        .then(({ proxyContainer, proxyFrame, proxyPrerenderFrame }) => {\n          return renderContainer(proxyContainer, {\n            context,\n            proxyFrame,\n            proxyPrerenderFrame,\n            rerender,\n          });\n        })\n        .then((proxyContainer) => {\n          return proxyContainer;\n        });\n\n      const openPromise = ZalgoPromise.hash({\n        windowName: buildWindowNamePromise,\n        proxyFrame: openFramePromise,\n        proxyWin: getProxyWindowPromise,\n      }).then(({ windowName, proxyWin, proxyFrame }) => {\n        return windowProp\n          ? proxyWin\n          : open(context, { windowName, proxyWin, proxyFrame });\n      });\n\n      const openPrerenderPromise = ZalgoPromise.hash({\n        proxyWin: openPromise,\n        proxyPrerenderFrame: openPrerenderFramePromise,\n      }).then(({ proxyWin, proxyPrerenderFrame }) => {\n        return openPrerender(context, proxyWin, proxyPrerenderFrame);\n      });\n\n      const setStatePromise = openPromise.then((proxyWin) => {\n        currentProxyWin = proxyWin;\n        return setProxyWin(proxyWin);\n      });\n\n      const prerenderPromise = ZalgoPromise.hash({\n        proxyPrerenderWin: openPrerenderPromise,\n        state: setStatePromise,\n      }).then(({ proxyPrerenderWin }) => {\n        return prerender(proxyPrerenderWin, { context });\n      });\n\n      const setWindowNamePromise = ZalgoPromise.hash({\n        proxyWin: openPromise,\n        windowName: buildWindowNamePromise,\n      }).then(({ proxyWin, windowName }) => {\n        if (windowProp) {\n          return proxyWin.setName(windowName);\n        }\n      });\n\n      const getMethodPromise = ZalgoPromise.hash({\n        body: buildBodyPromise,\n      }).then(({ body }) => {\n        if (options.method) {\n          return options.method;\n        }\n\n        if (Object.keys(body).length) {\n          return METHOD.POST;\n        }\n\n        return METHOD.GET;\n      });\n\n      const loadUrlPromise = ZalgoPromise.hash({\n        proxyWin: openPromise,\n        windowUrl: buildUrlPromise,\n        body: buildBodyPromise,\n        method: getMethodPromise,\n        windowName: setWindowNamePromise,\n        prerender: prerenderPromise,\n      }).then(({ proxyWin, windowUrl, body, method }) => {\n        return proxyWin.setLocation(windowUrl, { method, body });\n      });\n\n      const watchForClosePromise = openPromise.then((proxyWin) => {\n        watchForClose(proxyWin, context);\n      });\n\n      const onDisplayPromise = ZalgoPromise.hash({\n        container: renderContainerPromise,\n        prerender: prerenderPromise,\n      }).then(() => {\n        return event.trigger(EVENT.DISPLAY);\n      });\n\n      const openBridgePromise = openPromise.then((proxyWin) => {\n        return openBridge(proxyWin, initialChildDomain, context);\n      });\n\n      const runTimeoutPromise = loadUrlPromise.then(() => {\n        return runTimeout();\n      });\n\n      const onRenderedPromise = initPromise.then(() => {\n        isRenderFinished = true;\n        return event.trigger(EVENT.RENDERED);\n      });\n\n      return ZalgoPromise.hash({\n        initPromise,\n        buildUrlPromise,\n        onRenderPromise,\n        getProxyContainerPromise,\n        openFramePromise,\n        openPrerenderFramePromise,\n        renderContainerPromise,\n        openPromise,\n        openPrerenderPromise,\n        setStatePromise,\n        prerenderPromise,\n        loadUrlPromise,\n        buildWindowNamePromise,\n        setWindowNamePromise,\n        watchForClosePromise,\n        onDisplayPromise,\n        openBridgePromise,\n        runTimeoutPromise,\n        onRenderedPromise,\n        delegatePromise,\n        watchForUnloadPromise,\n        finalSetPropsPromise,\n      });\n    })\n      .catch((err) => {\n        return ZalgoPromise.all([onError(err), destroy(err)]).then(\n          () => {\n            throw err;\n          },\n          () => {\n            throw err;\n          }\n        );\n      })\n      .then(noop);\n  };\n\n  return {\n    init,\n    render,\n    destroy,\n    getProps,\n    setProps,\n    export: xport,\n    getHelpers,\n    getDelegateOverrides,\n    getExports,\n  };\n}\n","/* @flow */\n/* eslint react/no-deprecated: off, react/no-find-dom-node: off, react/display-name: off, react/no-did-mount-set-state: off, react/destructuring-assignment: off, react/prop-types: off */\n\nimport { extend, noop } from \"@krakenjs/belter/src\";\n\nimport type { ComponentDriverType } from \"../component\";\nimport { CONTEXT } from \"../constants\";\n\ndeclare class ReactClassType {}\ndeclare class __ReactComponent {}\n\ntype ReactElementType = {||};\n\ntype ReactType = {|\n  Component: __ReactComponent,\n  createClass: ({|\n    render: () => ReactElementType,\n    componentDidMount: () => void,\n    componentDidUpdate: () => void,\n  |}) => typeof ReactClassType,\n  createElement: (\n    string,\n    ?{ [string]: mixed },\n    ...children: $ReadOnlyArray<ReactElementType>\n  ) => ReactElementType,\n|};\n\ntype ReactDomType = {|\n  findDOMNode: (typeof ReactClassType) => HTMLElement,\n|};\n\ntype ReactLibraryType = {|\n  React: ReactType,\n  ReactDOM: ReactDomType,\n|};\n\nexport const react: ComponentDriverType<\n  *,\n  ReactLibraryType,\n  typeof ReactClassType,\n  *,\n  *\n> = {\n  register: (tag, propsDef, init, { React, ReactDOM }) => {\n    // $FlowFixMe\n    return class extends React.Component {\n      render(): ReactElementType {\n        return React.createElement(\"div\", null);\n      }\n\n      componentDidMount() {\n        // $FlowFixMe\n        const el = ReactDOM.findDOMNode(this);\n        const parent = init(extend({}, this.props));\n        parent.render(el, CONTEXT.IFRAME);\n        this.setState({ parent });\n      }\n\n      componentDidUpdate() {\n        if (this.state && this.state.parent) {\n          this.state.parent.updateProps(extend({}, this.props)).catch(noop);\n        }\n      }\n    };\n  },\n};\n","/* @flow */\n\nimport { noop, dasherizeToCamel } from \"@krakenjs/belter/src\";\n\nimport type { ComponentDriverType } from \"../component\";\nimport { CONTEXT } from \"../constants\";\n\ntype VueComponent = {|\n  render: (Function) => Element,\n  inheritAttrs: boolean,\n  mounted: () => void,\n  watch: {|\n    $attrs: {|\n      deep: boolean,\n      handler: () => void,\n    |},\n  |},\n|};\n\ntype RegisteredVueComponent = {||};\n\ntype VueType = {|\n  component: (string, VueComponent) => RegisteredVueComponent,\n|};\n\nfunction propsToCamelCase(props: Object): Object {\n  return Object.keys(props).reduce((acc, key) => {\n    const value = props[key];\n    // In vue `style` is a reserved prop name\n    if (key === \"style-object\" || key === \"styleObject\") {\n      acc.style = value;\n      // To keep zoid as generic as possible, passing in the original prop name as well\n      acc.styleObject = value;\n    } else if (key.includes(\"-\")) {\n      acc[dasherizeToCamel(key)] = value;\n    } else {\n      acc[key] = value;\n    }\n    return acc;\n  }, {});\n}\n\nexport const vue: ComponentDriverType<\n  *,\n  VueType,\n  RegisteredVueComponent,\n  *,\n  *\n> = {\n  register: (tag, propsDef, init, Vue) => {\n    return Vue.component(tag, {\n      render(createElement): Element {\n        return createElement(\"div\");\n      },\n\n      inheritAttrs: false,\n\n      mounted() {\n        // $FlowFixMe[object-this-reference]\n        const el = this.$el;\n        // $FlowFixMe[object-this-reference]\n        this.parent = init({ ...propsToCamelCase(this.$attrs) });\n        // $FlowFixMe[object-this-reference]\n        this.parent.render(el, CONTEXT.IFRAME);\n      },\n\n      watch: {\n        $attrs: {\n          handler: function handler() {\n            if (this.parent && this.$attrs) {\n              this.parent.updateProps({ ...this.$attrs }).catch(noop);\n            }\n          },\n          deep: true,\n        },\n      },\n    });\n  },\n};\n","/* @flow */\nimport { dasherizeToCamel, noop } from \"@krakenjs/belter/src\";\n\nimport type { ComponentDriverType } from \"../component\";\nimport { CONTEXT } from \"../constants\";\n\nfunction propsToCamelCase(props: Object): Object {\n  return Object.keys(props).reduce((acc, key) => {\n    const value = props[key];\n    // In vue `style` is a reserved prop name\n    if (key === \"style-object\" || key === \"styleObject\") {\n      acc.style = value;\n      // To keep zoid as generic as possible, passing in the original prop name as well\n      acc.styleObject = value;\n    } else if (key.includes(\"-\")) {\n      acc[dasherizeToCamel(key)] = value;\n    } else {\n      acc[key] = value;\n    }\n    return acc;\n  }, {});\n}\n\nexport const vue3: ComponentDriverType<*, *, *, *, *> = {\n  register: (tag, propsDef, init) => {\n    return {\n      template: `<div></div>`,\n\n      inheritAttrs: false,\n\n      mounted() {\n        // $FlowFixMe[object-this-reference]\n        const el = this.$el;\n        // $FlowFixMe[object-this-reference]\n        this.parent = init({ ...propsToCamelCase(this.$attrs) });\n        // $FlowFixMe[object-this-reference]\n        this.parent.render(el, CONTEXT.IFRAME);\n      },\n\n      watch: {\n        $attrs: {\n          handler: function handler() {\n            if (this.parent && this.$attrs) {\n              this.parent.updateProps({ ...this.$attrs }).catch(noop);\n            }\n          },\n          deep: true,\n        },\n      },\n    };\n  },\n};\n","/* @flow */\n\nimport { dasherizeToCamel, replaceObject, noop } from \"@krakenjs/belter/src\";\n\nimport type { ComponentDriverType } from \"../component\";\nimport { CONTEXT } from \"../constants\";\n\ntype AngularModule = {|\n  directive: (\n    string,\n    () => {|\n      scope: { [string]: \"=\" | \"@\" },\n      restrict: string,\n      controller: $ReadOnlyArray<string | Function>,\n    |}\n  ) => AngularModule,\n|};\n\ntype Angular = {|\n  module: (string, $ReadOnlyArray<string>) => AngularModule,\n|};\n\nexport const angular: ComponentDriverType<*, Angular, AngularModule, *, *> = {\n  register: (tag, propsDef, init, ng) => {\n    const module = ng.module(tag, []).directive(dasherizeToCamel(tag), () => {\n      const scope = {};\n\n      for (const key of Object.keys(propsDef)) {\n        scope[key] = \"=\";\n      }\n\n      scope.props = \"=\";\n\n      return {\n        scope,\n\n        restrict: \"E\",\n\n        controller: [\n          \"$scope\",\n          \"$element\",\n          ($scope, $element) => {\n            function safeApply() {\n              if (\n                $scope.$root.$$phase !== \"$apply\" &&\n                $scope.$root.$$phase !== \"$digest\"\n              ) {\n                try {\n                  $scope.$apply();\n                } catch (err) {\n                  // pass\n                }\n              }\n            }\n\n            const getProps = () => {\n              return replaceObject($scope.props, (item) => {\n                if (typeof item === \"function\") {\n                  return function angularWrapped(): mixed {\n                    // $FlowFixMe\n                    const result = item.apply(this, arguments);\n                    safeApply();\n                    return result;\n                  };\n                }\n                return item;\n              });\n            };\n\n            const instance = init(getProps());\n            instance.render($element[0], CONTEXT.IFRAME);\n\n            $scope.$watch(() => {\n              instance.updateProps(getProps()).catch(noop);\n            });\n          },\n        ],\n      };\n    });\n\n    return module;\n  },\n};\n","/* @flow */\n/* eslint new-cap: 0 */\n\nimport { replaceObject } from \"@krakenjs/belter/src\";\n\nimport type { ComponentDriverType } from \"../component\";\nimport { CONTEXT } from \"../constants\";\n\ntype Angular2Injection = {||};\n\ntype Angular2Component = {||};\n\ntype Angular2Module = {| annotations: Object, name: string |};\n\ntype Angular2 = {|\n  Component: ({|\n    selector: string,\n    template: string,\n    inputs: $ReadOnlyArray<string>,\n  |}) => {|\n    Class: ({|\n      constructor: $ReadOnlyArray<Angular2Injection | Function>,\n      ngOnInit: () => void,\n      ngDoCheck: () => void,\n    |}) => Angular2Component,\n  |},\n  NgModule: ({|\n    declarations: $ReadOnlyArray<*>,\n    exports: $ReadOnlyArray<*>,\n  |}) => {|\n    Class: ({| constructor: () => void |}) => Angular2Module,\n  |},\n  ElementRef: Angular2Injection,\n  NgZone: Angular2Injection,\n  Inject: Function,\n|};\n\nconst equals = (obj1, obj2) => {\n  const checked = {};\n\n  for (const key in obj1) {\n    if (obj1.hasOwnProperty(key)) {\n      checked[key] = true;\n\n      if (obj1[key] !== obj2[key]) {\n        return false;\n      }\n    }\n  }\n\n  for (const key in obj2) {\n    if (!checked[key]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nexport const angular2: ComponentDriverType<*, Angular2, Angular2Module, *, *> =\n  {\n    register: (\n      tag,\n      propsDef,\n      init,\n      { Component: AngularComponent, NgModule, ElementRef, NgZone, Inject }\n    ) => {\n      class ComponentInstance {\n        elementRef: Object;\n        internalProps: Object;\n        parent: Object;\n        props: Object;\n        zone: Object;\n        _props: Object;\n\n        static annotations: $ReadOnlyArray<*>;\n        static parameters: $ReadOnlyArray<*>;\n\n        constructor(elementRef, zone) {\n          this._props = {};\n          this.elementRef = elementRef;\n          this.zone = zone;\n        }\n\n        getProps(): Object {\n          return replaceObject(\n            { ...this.internalProps, ...this.props },\n            (item) => {\n              if (typeof item === \"function\") {\n                const { zone } = this;\n                return function angular2Wrapped(): void {\n                  // $FlowFixMe\n                  return zone.run(() => item.apply(this, arguments));\n                };\n              }\n              return item;\n            }\n          );\n        }\n\n        ngOnInit() {\n          const targetElement = this.elementRef.nativeElement;\n          this.parent = init(this.getProps());\n          this.parent.render(targetElement, CONTEXT.IFRAME);\n        }\n\n        ngDoCheck() {\n          if (this.parent && !equals(this._props, this.props)) {\n            this._props = { ...this.props };\n            this.parent.updateProps(this.getProps());\n          }\n        }\n      }\n\n      ComponentInstance.parameters = [\n        [new Inject(ElementRef)],\n        [new Inject(NgZone)],\n      ];\n\n      ComponentInstance.annotations = [\n        new AngularComponent({\n          selector: tag,\n          template: `<div></div>`,\n          inputs: [\"props\"],\n        }),\n      ];\n\n      class ModuleInstance {\n        static annotations: $ReadOnlyArray<*>;\n      }\n\n      ModuleInstance.annotations = [\n        new NgModule({\n          declarations: [ComponentInstance],\n          exports: [ComponentInstance],\n        }),\n      ];\n\n      return ModuleInstance;\n    },\n  };\n","/* @flow */\n/* eslint react/react-in-jsx-scope: off */\n\nimport { destroyElement, toCSS } from \"@krakenjs/belter/src\";\n\nimport { type RenderOptionsType } from \"../../parent/parent\";\nimport { EVENT } from \"../../constants\";\n\nconst CLASS = {\n  VISIBLE: \"zoid-visible\",\n  INVISIBLE: \"zoid-invisible\",\n};\n\nexport function defaultContainerTemplate<P>({\n  uid,\n  frame,\n  prerenderFrame,\n  doc,\n  props,\n  event,\n  dimensions,\n}: RenderOptionsType<P>): ?HTMLElement {\n  const { width, height } = dimensions;\n\n  if (__ZOID__.__DEFAULT_CONTAINER__) {\n    if (!frame || !prerenderFrame) {\n      return;\n    }\n\n    const div = doc.createElement(\"div\");\n    div.setAttribute(\"id\", uid);\n    const style = doc.createElement(\"style\");\n    if (props.cspNonce) {\n      style.setAttribute(\"nonce\", props.cspNonce);\n    }\n\n    style.appendChild(\n      doc.createTextNode(`\n            #${uid} {\n                display: inline-block;\n                position: relative;\n                width: ${width};\n                height: ${height};\n            }\n\n            #${uid} > iframe {\n                display: inline-block;\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                transition: opacity .2s ease-in-out;\n            }\n\n            #${uid} > iframe.${CLASS.INVISIBLE} {\n                opacity: 0;\n            }\n\n            #${uid} > iframe.${CLASS.VISIBLE} {\n                opacity: 1;\n        }\n        `)\n    );\n\n    div.appendChild(frame);\n    div.appendChild(prerenderFrame);\n    div.appendChild(style);\n\n    prerenderFrame.classList.add(CLASS.VISIBLE);\n    frame.classList.add(CLASS.INVISIBLE);\n\n    event.on(EVENT.RENDERED, () => {\n      prerenderFrame.classList.remove(CLASS.VISIBLE);\n      prerenderFrame.classList.add(CLASS.INVISIBLE);\n\n      frame.classList.remove(CLASS.INVISIBLE);\n      frame.classList.add(CLASS.VISIBLE);\n\n      setTimeout(() => {\n        destroyElement(prerenderFrame);\n      }, 1);\n    });\n\n    event.on(EVENT.RESIZE, ({ width: newWidth, height: newHeight }) => {\n      if (typeof newWidth === \"number\") {\n        div.style.width = toCSS(newWidth);\n      }\n\n      if (typeof newHeight === \"number\") {\n        div.style.height = toCSS(newHeight);\n      }\n    });\n\n    return div;\n  }\n}\n","/* @flow */\n/* eslint react/react-in-jsx-scope: off */\n\nimport { type RenderOptionsType } from \"../../parent/parent\";\n\nexport function defaultPrerenderTemplate<P>({\n  doc,\n  props,\n}: RenderOptionsType<P>): ?HTMLElement {\n  if (__ZOID__.__DEFAULT_PRERENDER__) {\n    const html = doc.createElement(\"html\");\n    const body = doc.createElement(\"body\");\n    const style = doc.createElement(\"style\");\n    const spinner = doc.createElement(\"div\");\n    spinner.classList.add(\"spinner\");\n\n    if (props.cspNonce) {\n      style.setAttribute(\"nonce\", props.cspNonce);\n    }\n\n    html.appendChild(body);\n    body.appendChild(spinner);\n    body.appendChild(style);\n    style.appendChild(\n      doc.createTextNode(`\n            html, body {\n                width: 100%;\n                height: 100%;\n            }\n\n            .spinner {\n                position: fixed;\n                max-height: 60vmin;\n                max-width: 60vmin;\n                height: 40px;\n                width: 40px;\n                top: 50%;\n                left: 50%;\n                box-sizing: border-box;\n                border: 3px solid rgba(0, 0, 0, .2);\n                border-top-color: rgba(33, 128, 192, 0.8);\n                border-radius: 100%;\n                animation: rotation .7s infinite linear;\n            }\n\n            @keyframes rotation {\n                from {\n                    transform: translateX(-50%) translateY(-50%) rotate(0deg);\n                }\n                to {\n                    transform: translateX(-50%) translateY(-50%) rotate(359deg);\n                }\n            }\n        `)\n    );\n\n    return html;\n  }\n}\n","/* @flow */\n/* eslint max-lines: 0 */\n\nimport {\n  setup as setupPostRobot,\n  on,\n  send,\n  bridge,\n  toProxyWindow,\n  destroy as destroyPostRobot,\n} from \"@krakenjs/post-robot/src\";\nimport { ZalgoPromise } from \"@krakenjs/zalgo-promise/src\";\nimport {\n  isWindow,\n  getDomain,\n  matchDomain,\n  type CrossDomainWindowType,\n  type DomainMatcher,\n} from \"@krakenjs/cross-domain-utils/src\";\nimport {\n  noop,\n  isElement,\n  cleanup,\n  memoize,\n  identity,\n  extend,\n  uniqueID,\n} from \"@krakenjs/belter/src\";\n\nimport { childComponent, type ChildComponent } from \"../child\";\nimport {\n  type RenderOptionsType,\n  type ParentHelpers,\n  parentComponent,\n} from \"../parent/parent\";\nimport {\n  ZOID,\n  CONTEXT,\n  POST_MESSAGE,\n  WILDCARD,\n  METHOD,\n  PROP_TYPE,\n} from \"../constants\";\nimport { react, angular, vue, vue3, angular2 } from \"../drivers\";\nimport {\n  getGlobal,\n  destroyGlobal,\n  getInitialParentPayload,\n  isChildComponentWindow,\n} from \"../lib\";\nimport type {\n  CssDimensionsType,\n  StringMatcherType,\n  ContainerReferenceType,\n} from \"../types\";\n\nimport { validateOptions } from \"./validate\";\nimport {\n  defaultContainerTemplate,\n  defaultPrerenderTemplate,\n} from \"./templates\";\nimport {\n  getBuiltInProps,\n  type UserPropsDefinitionType,\n  type PropsDefinitionType,\n  type PropsInputType,\n  type PropsType,\n  type ParentPropType,\n  type exportPropType,\n  type DEFINITION_TYPE,\n} from \"./props\";\n\ntype LoggerPayload = { [string]: ?string | ?boolean };\n\n// eslint-disable-next-line flowtype/require-exact-type\ntype Logger = {\n  info: (event: string, payload?: LoggerPayload) => any, // eslint-disable-line flowtype/no-weak-types\n};\n\n/*  Component\n    ---------\n\n    This is the spec for the component. The idea is, when I call zoid.create(), it will create a new instance\n    of Component with the blueprint needed to set up ParentComponents and ChildComponents.\n\n    This is the one portion of code which is required by -- and shared to -- both the parent and child windows, and\n    contains all of the configuration needed for them to set themselves up.\n*/\n\ntype Attributes = {|\n  iframe?: { [string]: string },\n  popup?: { [string]: string },\n|};\n\nexport type ExportsConfigDefinition = {|\n  [string]: {|\n    type: DEFINITION_TYPE,\n  |},\n|};\n\nexport type ExportsMapperDefinition<X> = ({|\n  getExports: () => ZalgoPromise<X>,\n|}) => X;\n\nexport type ExportsDefinition<X> =\n  | ExportsConfigDefinition\n  | ExportsMapperDefinition<X>;\n\nexport type ComponentOptionsType<P, X, C> = {|\n  tag: string,\n\n  url: string | (({| props: PropsType<P> |}) => string),\n  domain?: DomainMatcher,\n  bridgeUrl?: string,\n  method?: $Values<typeof METHOD>,\n\n  props?: UserPropsDefinitionType<P, X>,\n\n  dimensions?:\n    | CssDimensionsType\n    | (({| props: PropsType<P> |}) => CssDimensionsType),\n  autoResize?: {| width?: boolean, height?: boolean, element?: string |},\n\n  allowedParentDomains?: StringMatcherType,\n\n  attributes?: Attributes | (({| props: PropsType<P> |}) => Attributes),\n\n  eligible?: ({| props: PropsInputType<P> |}) => {|\n    eligible: boolean,\n    reason?: string,\n  |},\n\n  defaultContext?: $Values<typeof CONTEXT>,\n\n  containerTemplate?: (RenderOptionsType<P>) => ?HTMLElement,\n  prerenderTemplate?: (RenderOptionsType<P>) => ?HTMLElement,\n\n  validate?: ({| props: PropsInputType<P> |}) => void,\n\n  logger?: Logger,\n\n  children?: () => C,\n\n  exports?: ExportsDefinition<X>,\n|};\n\nexport type AttributesType = {|\n  iframe?: { [string]: string },\n  popup?: { [string]: string },\n|};\n\ntype AutoResizeType = {|\n  width?: boolean,\n  height?: boolean,\n  element?: string,\n|};\n\nexport type NormalizedComponentOptionsType<P, X, C> = {|\n  tag: string,\n  name: string,\n\n  url: string | (({| props: PropsType<P> |}) => string),\n  domain: ?DomainMatcher,\n  bridgeUrl: ?string,\n  method: ?$Values<typeof METHOD>,\n\n  propsDef: PropsDefinitionType<P, X>,\n  dimensions:\n    | CssDimensionsType\n    | (({| props: PropsType<P> |}) => CssDimensionsType),\n  autoResize: AutoResizeType,\n\n  allowedParentDomains: StringMatcherType,\n\n  attributes: AttributesType | (({| props: PropsType<P> |}) => AttributesType),\n\n  eligible: ({| props: PropsInputType<P> |}) => {|\n    eligible: boolean,\n    reason?: string,\n  |},\n\n  defaultContext: $Values<typeof CONTEXT>,\n\n  containerTemplate: (RenderOptionsType<P>) => ?HTMLElement,\n  prerenderTemplate: ?(RenderOptionsType<P>) => ?HTMLElement,\n\n  validate: ?({| props: PropsInputType<P> |}) => void,\n  logger: Logger,\n\n  children: () => C,\n\n  exports: ExportsMapperDefinition<X>,\n|};\n\nexport type ZoidComponentInstance<P, X = void, C = void> = {|\n  ...ParentHelpers<P>,\n  ...X,\n  ...C,\n  isEligible: () => boolean,\n  clone: () => ZoidComponentInstance<P, X, C>,\n  render: (\n    container?: ContainerReferenceType,\n    context?: $Values<typeof CONTEXT>\n  ) => ZalgoPromise<void>,\n  renderTo: (\n    target: CrossDomainWindowType,\n    container?: ContainerReferenceType,\n    context?: $Values<typeof CONTEXT>\n  ) => ZalgoPromise<void>,\n|};\n\n// eslint-disable-next-line flowtype/require-exact-type\nexport type ZoidComponent<P, X = void, C = void> = {\n  (props?: PropsInputType<P> | void): ZoidComponentInstance<P, X, C>,\n  // eslint-disable-next-line no-undef\n  driver: <T>(string, mixed) => T,\n  isChild: () => boolean,\n  xprops?: PropsType<P>,\n  canRenderTo: (CrossDomainWindowType) => ZalgoPromise<boolean>,\n  instances: $ReadOnlyArray<ZoidComponentInstance<P, X, C>>,\n};\n\nconst getDefaultAttributes = (): AttributesType => {\n  // $FlowFixMe\n  return {};\n};\n\nconst getDefaultAutoResize = (): AutoResizeType => {\n  // $FlowFixMe\n  return {};\n};\n\nconst getDefaultExports = <X>(): (() => X) => {\n  // $FlowFixMe\n  return noop;\n};\n\nconst getDefaultDimensions = (): CssDimensionsType => {\n  // $FlowFixMe\n  return {};\n};\n\nfunction normalizeOptions<P, X, C>(\n  options: ComponentOptionsType<P, X, C>\n): NormalizedComponentOptionsType<P, X, C> {\n  const {\n    tag,\n    url,\n    domain,\n    bridgeUrl,\n    props = {},\n    dimensions = getDefaultDimensions(),\n    autoResize = getDefaultAutoResize(),\n    allowedParentDomains = WILDCARD,\n    attributes = getDefaultAttributes(),\n    defaultContext = CONTEXT.IFRAME,\n    containerTemplate = __ZOID__.__DEFAULT_CONTAINER__\n      ? defaultContainerTemplate\n      : null,\n    prerenderTemplate = __ZOID__.__DEFAULT_PRERENDER__\n      ? defaultPrerenderTemplate\n      : null,\n    validate,\n    eligible = () => ({ eligible: true }),\n    logger = { info: noop },\n    exports: xportsDefinition = getDefaultExports(),\n    method,\n    children = (): C => {\n      // $FlowFixMe\n      return {};\n    },\n  } = options;\n\n  const name = tag.replace(/-/g, \"_\");\n\n  // $FlowFixMe[incompatible-type]\n  // $FlowFixMe[cannot-spread-inexact]\n  const propsDef: PropsDefinitionType<P, X> = {\n    ...getBuiltInProps(),\n    ...props,\n  };\n\n  if (!containerTemplate) {\n    throw new Error(`Container template required`);\n  }\n\n  const xports =\n    typeof xportsDefinition === \"function\"\n      ? xportsDefinition\n      : ({ getExports }): X => {\n          const result = {};\n\n          for (const key of Object.keys(xportsDefinition)) {\n            const { type } = xportsDefinition[key];\n            const valuePromise = getExports().then((res) => {\n              // $FlowFixMe\n              return res[key];\n            });\n\n            if (type === PROP_TYPE.FUNCTION) {\n              result[key] = (...args) =>\n                valuePromise.then((value) => value(...args));\n            } else {\n              result[key] = valuePromise;\n            }\n          }\n\n          // $FlowFixMe\n          return result;\n        };\n\n  return {\n    name,\n    tag,\n    url,\n    domain,\n    bridgeUrl,\n    method,\n    propsDef,\n    dimensions,\n    autoResize,\n    allowedParentDomains,\n    attributes,\n    defaultContext,\n    containerTemplate,\n    prerenderTemplate,\n    validate,\n    logger,\n    eligible,\n    children,\n    exports: xports,\n  };\n}\n\nlet cleanInstances = cleanup();\nconst cleanZoid = cleanup();\n\nexport type Component<P, X, C> = {|\n  init: (props?: PropsInputType<P> | void) => ZoidComponentInstance<P, X, C>,\n  instances: $ReadOnlyArray<ZoidComponentInstance<P, X, C>>,\n  driver: (string, mixed) => mixed,\n  isChild: () => boolean,\n  canRenderTo: (CrossDomainWindowType) => ZalgoPromise<boolean>,\n  registerChild: () => ?ChildComponent<P, X>,\n|};\n\nexport function component<P, X, C>(\n  opts: ComponentOptionsType<P, X, C>\n): Component<P, X, C> {\n  if (__DEBUG__) {\n    validateOptions(opts);\n  }\n\n  const options = normalizeOptions(opts);\n\n  const { name, tag, defaultContext, propsDef, eligible, children } = options;\n\n  const global = getGlobal(window);\n  const driverCache = {};\n  const instances = [];\n\n  const isChild = (): boolean => {\n    if (isChildComponentWindow(name)) {\n      const { payload } = getInitialParentPayload();\n      if (\n        payload.tag === tag &&\n        matchDomain(payload.childDomainMatch, getDomain())\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  const registerChild = memoize((): ?ChildComponent<P, X> => {\n    if (isChild()) {\n      if (window.xprops) {\n        delete global.components[tag];\n        throw new Error(\n          `Can not register ${name} as child - child already registered`\n        );\n      }\n\n      const child = childComponent(options);\n      child.init();\n      return child;\n    }\n  });\n\n  const listenForDelegate = () => {\n    const allowDelegateListener = on(\n      `${POST_MESSAGE.ALLOW_DELEGATE}_${name}`,\n      () => {\n        return true;\n      }\n    );\n\n    const delegateListener = on(\n      `${POST_MESSAGE.DELEGATE}_${name}`,\n      ({ source, data: { uid, overrides } }) => {\n        return {\n          parent: parentComponent({\n            uid,\n            options,\n            overrides,\n            parentWin: source,\n          }),\n        };\n      }\n    );\n\n    cleanZoid.register(allowDelegateListener.cancel);\n    cleanZoid.register(delegateListener.cancel);\n  };\n\n  const canRenderTo = (win: CrossDomainWindowType): ZalgoPromise<boolean> => {\n    return send(win, `${POST_MESSAGE.ALLOW_DELEGATE}_${name}`)\n      .then(({ data }) => {\n        return data;\n      })\n      .catch(() => {\n        return false;\n      });\n  };\n\n  const getDefaultContainer = (\n    context: $Values<typeof CONTEXT>,\n    container?: ContainerReferenceType\n  ): ContainerReferenceType => {\n    if (container) {\n      if (typeof container !== \"string\" && !isElement(container)) {\n        throw new TypeError(`Expected string or element selector to be passed`);\n      }\n\n      return container;\n    }\n\n    if (context === CONTEXT.POPUP) {\n      return \"body\";\n    }\n\n    throw new Error(`Expected element to be passed to render iframe`);\n  };\n\n  const getDefaultContext = (\n    props: PropsInputType<P>,\n    context: ?$Values<typeof CONTEXT>\n  ): ZalgoPromise<$Values<typeof CONTEXT>> => {\n    return ZalgoPromise.try(() => {\n      if (props.window) {\n        return toProxyWindow(props.window).getType();\n      }\n\n      if (context) {\n        if (context !== CONTEXT.IFRAME && context !== CONTEXT.POPUP) {\n          throw new Error(`Unrecognized context: ${context}`);\n        }\n\n        return context;\n      }\n\n      return defaultContext;\n    });\n  };\n\n  const getDefaultInputProps = (): PropsInputType<P> => {\n    // $FlowFixMe\n    return {};\n  };\n\n  const init = (\n    inputProps?: PropsInputType<P> | void\n  ): ZoidComponentInstance<P, X, C> => {\n    // eslint-disable-next-line prefer-const\n    let instance;\n\n    const uid = `${ZOID}-${tag}-${uniqueID()}`;\n    const props = inputProps || getDefaultInputProps();\n\n    const { eligible: eligibility, reason } = eligible({ props });\n    const isEligible = () => eligibility;\n\n    const onDestroy = props.onDestroy;\n    props.onDestroy = (...args) => {\n      if (instance && eligibility) {\n        instances.splice(instances.indexOf(instance), 1);\n      }\n\n      if (onDestroy) {\n        return onDestroy(...args);\n      }\n    };\n\n    const parent = parentComponent({\n      uid,\n      options,\n    });\n\n    parent.init();\n\n    if (eligibility) {\n      parent.setProps(props);\n    } else {\n      if (props.onDestroy) {\n        props.onDestroy();\n      }\n    }\n\n    cleanInstances.register((err) => {\n      return parent.destroy(err || new Error(`zoid destroyed all components`));\n    });\n\n    const clone = ({ decorate = identity } = {}) => {\n      return init(decorate(props));\n    };\n\n    const getChildren = (): C => {\n      // $FlowFixMe\n      const childComponents: {| [string]: ZoidComponent<mixed> |} = children();\n      const result = {};\n\n      for (const childName of Object.keys(childComponents)) {\n        const Child: ZoidComponent<mixed> = childComponents[childName];\n\n        result[childName] = (childInputProps) => {\n          const parentProps: PropsType<P> = parent.getProps();\n          const parentExport: exportPropType<X> = parent.export;\n\n          const childParent: ParentPropType<P, X> = {\n            uid,\n            props: parentProps,\n            export: parentExport,\n          };\n\n          const childProps: PropsInputType<mixed> = {\n            ...childInputProps,\n            parent: childParent,\n          };\n\n          return Child(childProps);\n        };\n      }\n\n      // $FlowFixMe\n      return result;\n    };\n\n    const render = (target, container, context) => {\n      return ZalgoPromise.try(() => {\n        if (!eligibility) {\n          const err = new Error(reason || `${name} component is not eligible`);\n\n          return parent.destroy(err).then(() => {\n            throw err;\n          });\n        }\n\n        if (!isWindow(target)) {\n          throw new Error(`Must pass window to renderTo`);\n        }\n\n        return getDefaultContext(props, context);\n      })\n        .then((finalContext) => {\n          container = getDefaultContainer(finalContext, container);\n\n          if (target !== window && typeof container !== \"string\") {\n            throw new Error(\n              `Must pass string element when rendering to another window`\n            );\n          }\n\n          return parent.render({\n            target,\n            container,\n            context: finalContext,\n            rerender: () => {\n              const newInstance = clone();\n              extend(instance, newInstance);\n              return newInstance.renderTo(target, container, context);\n            },\n          });\n        })\n        .catch((err) => {\n          return parent.destroy(err).then(() => {\n            throw err;\n          });\n        });\n    };\n\n    instance = {\n      ...parent.getExports(),\n      ...parent.getHelpers(),\n      ...getChildren(),\n      isEligible,\n      clone,\n      render: (container, context) => render(window, container, context),\n      renderTo: (target, container, context) =>\n        render(target, container, context),\n    };\n\n    if (eligibility) {\n      instances.push(instance);\n    }\n\n    return instance;\n  };\n\n  const driver = (driverName: string, dep: mixed): mixed => {\n    if (__ZOID__.__FRAMEWORK_SUPPORT__) {\n      const drivers = { react, angular, vue, vue3, angular2 };\n\n      if (!drivers[driverName]) {\n        throw new Error(`Could not find driver for framework: ${driverName}`);\n      }\n\n      if (!driverCache[driverName]) {\n        driverCache[driverName] = drivers[driverName].register(\n          tag,\n          propsDef,\n          init,\n          dep\n        );\n      }\n\n      return driverCache[driverName];\n    } else {\n      throw new Error(`Driver support not enabled`);\n    }\n  };\n\n  registerChild();\n  listenForDelegate();\n\n  global.components = global.components || {};\n  if (global.components[tag]) {\n    throw new Error(\n      `Can not register multiple components with the same tag: ${tag}`\n    );\n  }\n  global.components[tag] = true;\n\n  return {\n    init,\n    instances,\n    driver,\n    isChild,\n    canRenderTo,\n    registerChild,\n  };\n}\n\nexport type ComponentDriverType<P, L, D, X, C> = {|\n  register: (\n    string,\n    PropsDefinitionType<P, X>,\n    (PropsInputType<P>) => ZoidComponentInstance<P, X, C>,\n    L\n  ) => D,\n|};\n\nexport type ZoidProps<P> = PropsType<P>;\n\n// eslint-disable-next-line no-undef\nexport type CreateZoidComponent = <P, X, C>(\n  // eslint-disable-next-line no-undef\n  options: ComponentOptionsType<P, X, C>\n  // eslint-disable-next-line no-undef\n) => ZoidComponent<P, X, C>;\n\nexport const create: CreateZoidComponent = <P, X, C>(\n  options: ComponentOptionsType<P, X, C>\n): ZoidComponent<P, X, C> => {\n  setupPostRobot();\n\n  const comp = component(options);\n\n  const init = (props?: PropsInputType<P> | void) => comp.init(props);\n  init.driver = (name, dep) => comp.driver(name, dep);\n  init.isChild = () => comp.isChild();\n  init.canRenderTo = (win) => comp.canRenderTo(win);\n  init.instances = comp.instances;\n\n  const child = comp.registerChild();\n  if (child) {\n    window.xprops = init.xprops = child.getProps();\n  }\n\n  return init;\n};\n\nexport function destroyComponents(err?: mixed): ZalgoPromise<void> {\n  if (bridge) {\n    bridge.destroyBridges();\n  }\n\n  const destroyPromise = cleanInstances.all(err);\n  cleanInstances = cleanup();\n  return destroyPromise;\n}\n\nexport const destroyAll = destroyComponents;\n\nexport function destroy(err?: mixed): ZalgoPromise<void> {\n  destroyAll();\n  destroyGlobal();\n  destroyPostRobot();\n  return cleanZoid.all(err);\n}\n","import arrayIncludes from 'core-js-pure/stable/array/includes';\nimport numberIsNaN from 'core-js-pure/stable/number/is-nan';\nimport stringStartsWith from 'core-js-pure/stable/string/starts-with';\nimport { logger, memoize, getEnv } from '../../../utils';\nimport { OFFER } from '../../../utils/constants';\n\nexport const Types = {\n    ANY: 'ANY',\n    STRING: 'STRING',\n    BOOLEAN: 'BOOLEAN',\n    NUMBER: 'NUMBER',\n    FUNCTION: 'FUNCTION',\n    ARRAY: 'ARRAY',\n    OBJECT: 'OBJECT'\n};\n\nexport function validateType(expectedType, val) {\n    switch (expectedType) {\n        case Types.STRING:\n            return typeof val === 'string';\n        case Types.BOOLEAN:\n            return typeof val === 'boolean';\n        case Types.NUMBER:\n            return typeof val === 'number' && !numberIsNaN(val);\n        case Types.FUNCTION:\n            return typeof val === 'function';\n        case Types.ARRAY:\n            return Array.isArray(val);\n        case Types.OBJECT:\n            return !Array.isArray(val) && typeof val === 'object' && val !== null;\n        case Types.ANY:\n            return true;\n        default:\n            return false;\n    }\n}\n\n// Formalized validation logger helper functions\nconst logInvalid = memoize((location, message) =>\n    logger.warn('invalid_option_value', {\n        description: message,\n        location\n    })\n);\nconst logInvalidType = (location, expectedType, val) => {\n    const valType = Array.isArray(val) ? 'array' : typeof val;\n    logInvalid(\n        location,\n        `Expected type \"${expectedType.toLowerCase()}\" but instead received \"${valType}\" (${JSON.stringify(val)}).`\n    );\n};\nconst logInvalidOption = (location, options, val) =>\n    logInvalid(location, `Expected one of [\"${options.join('\", \"').replace(/\\|[\\w|]+/g, '')}\"] but received \"${val}\".`);\n\nexport default {\n    account: ({ props: { account } }) => {\n        if (!validateType(Types.STRING, account)) {\n            logInvalidType('account', Types.STRING, account);\n        } else if (getEnv() === 'local' && stringStartsWith(account, 'DEV_')) {\n            return account;\n        } else if (account.length !== 13 && account.length !== 10 && !stringStartsWith(account, 'client-id:')) {\n            logInvalid('account', 'Ensure the correct Merchant Account ID has been entered.');\n        } else {\n            return account;\n        }\n\n        return undefined;\n    },\n    merchantId: ({ props: { merchantId } }) => {\n        if (typeof merchantId !== 'undefined') {\n            if (!validateType(Types.STRING, merchantId)) {\n                logInvalidType('merchantId', Types.STRING, merchantId);\n            } else {\n                const isInvalid = merchantId.split(',').some(id => id.length !== 13 && id.length !== 10);\n                if (isInvalid) {\n                    logInvalid('merchantId', 'Ensure the correct Merchant ID has been entered.');\n                }\n                return merchantId;\n            }\n        }\n        return undefined;\n    },\n    customerId: ({ props: { customerId } }) => {\n        if (typeof customerId !== 'undefined') {\n            if (!validateType(Types.STRING, customerId)) {\n                logInvalidType('customerId', Types.STRING, customerId);\n            } else if (customerId.length !== 13 && customerId.length !== 10) {\n                logInvalid('customerId', 'Ensure the correct Merchant ID has been entered.');\n            } else {\n                return customerId;\n            }\n        }\n\n        return undefined;\n    },\n    amount: ({ props: { amount } }) => {\n        if (typeof amount !== 'undefined') {\n            const numberAmount = Number(amount);\n\n            if (!validateType(Types.NUMBER, numberAmount)) {\n                logInvalidType('amount', Types.NUMBER, amount);\n            } else if (numberAmount < 0) {\n                logInvalid('amount', 'Ensure value is a positive number.');\n            } else {\n                return numberAmount;\n            }\n        }\n\n        return undefined;\n    },\n    offer: ({ props: { offer } }) => {\n        const offerType = [...Object.values(OFFER), 'NI'];\n        if (typeof offer !== 'undefined') {\n            if (!validateType(Types.STRING, offer)) {\n                logInvalidType('offer', Types.STRING, offer);\n                throw new Error('offer_validation_error');\n            }\n            if (!offerType.includes(offer)) {\n                logInvalid('offer', 'Ensure valid offer type.');\n                throw new Error('offer_validation_error');\n            }\n        }\n        return offer;\n    },\n\n    // TODO: Handle server side locale specific style validation warnings passed down to client.\n    // Likely makes sens to pass down in the onReady callback\n    style: ({ props: { style: styleInput } }) => {\n        if (validateType(Types.OBJECT, styleInput)) {\n            const style = styleInput?.layout ? styleInput : { ...styleInput, layout: 'text' };\n\n            if (validateType(Types.STRING, style.layout)) {\n                return style;\n            }\n            logInvalidType('style.layout', Types.STRING, style.layout);\n\n            if (validateType(Types.STRING, style.preset)) {\n                return {\n                    layout: 'text',\n                    ...style\n                };\n            }\n        } else if (typeof styleInput !== 'undefined') {\n            logInvalidType('style', Types.OBJECT, styleInput);\n        }\n\n        // Get the default settings for a text banner\n        return { layout: 'text' };\n    },\n    currency: ({ props: { currency } }) => {\n        if (typeof currency !== 'undefined') {\n            if (!validateType(Types.STRING, currency)) {\n                logInvalidType('currency', Types.STRING, currency);\n            } else {\n                return currency;\n            }\n        }\n\n        return undefined;\n    },\n    placement: ({ props: { placement } }) => {\n        if (typeof placement !== 'undefined') {\n            const options = ['home', 'category', 'product', 'cart', 'payment', 'product-list'];\n\n            if (!validateType(Types.STRING, placement)) {\n                logInvalidType('placement', Types.STRING, placement);\n            } else if (!arrayIncludes(options, placement)) {\n                logInvalidOption('placement', options, placement);\n            } else {\n                return placement;\n            }\n        }\n\n        return undefined;\n    },\n    buyerCountry: ({ props: { buyerCountry } }) => {\n        if (typeof buyerCountry !== 'undefined') {\n            if (!validateType(Types.STRING, buyerCountry)) {\n                logInvalidType('buyerCountry', Types.STRING, buyerCountry);\n            } else {\n                return buyerCountry;\n            }\n        }\n\n        return undefined;\n    },\n    language: ({ props: { language } }) => {\n        if (typeof language !== 'undefined') {\n            if (!validateType(Types.STRING, language)) {\n                logInvalidType('language', Types.STRING, language);\n            } else {\n                return language;\n            }\n        }\n\n        return undefined;\n    },\n    ignoreCache: ({ props: { ignoreCache } }) => {\n        if (typeof ignoreCache !== 'undefined') {\n            if (!validateType(Types.BOOLEAN, ignoreCache)) {\n                logInvalidType('ignoreCache', Types.BOOLEAN, ignoreCache);\n            } else {\n                return ignoreCache;\n            }\n        }\n\n        return undefined;\n    },\n    channel: ({ props: { channel } }) => {\n        if (typeof channel !== 'undefined') {\n            // Acceptable values include any case-sensitive alphanumeric string with optional underscores.\n            const acceptedValues = /^[A-Z0-9_]+$/;\n            if (!validateType(Types.STRING, channel)) {\n                logInvalidType('channel', Types.STRING, channel);\n            } else if (!acceptedValues.test(channel)) {\n                // Return undefined if supplied channel value is not an accepted value.\n                // We do not surface a warning here as we do not want instances where a channel is used in an incorrect context.\n                return undefined;\n            } else {\n                return channel;\n            }\n        }\n\n        return undefined;\n    },\n    ecToken: ({ props: { ecToken } }) => {\n        if (typeof ecToken !== 'undefined') {\n            if (!validateType(Types.STRING, ecToken)) {\n                logInvalidType('ecToken', Types.STRING, ecToken);\n            } else {\n                return ecToken;\n            }\n        }\n\n        return undefined;\n    },\n    cspNonce: ({ props: { cspNonce } }) => {\n        if (typeof cspNonce !== 'undefined') {\n            if (!validateType(Types.STRING, cspNonce)) {\n                logInvalidType('cspNonce', Types.STRING, cspNonce);\n            } else {\n                return cspNonce;\n            }\n        }\n        return undefined;\n    },\n    merchantConfig: ({ props: { merchantConfig } }) => {\n        if (typeof merchantConfig !== 'undefined') {\n            if (!validateType(Types.STRING, merchantConfig)) {\n                // fail silently since value is supplied by sdk\n                return undefined;\n            }\n            return merchantConfig;\n        }\n\n        return undefined;\n    }\n};\n","/* eslint-disable eslint-comments/disable-enable-pair */\n/* eslint-disable no-param-reassign */\n/** @jsx node */\nimport { destroyElement } from '@krakenjs/belter/src';\nimport { node, dom } from '@krakenjs/jsx-pragmatic/src';\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\nimport { EVENT } from '@krakenjs/zoid/src';\n\nimport { createTitleGenerator, viewportHijack } from '../../../utils';\n\nconst TRANSITION_DELAY = 300;\nconst getTitle = createTitleGenerator();\n\nexport default ({ uid, frame, prerenderFrame, doc, event, state, props: { cspNonce }, context }) => {\n    // We render the modal as a popup when attempting to render the modal inside another IFrame.\n    // In this scenario we can skip creating container elements and transitions since we\n    // cannot overlay across the entire screen\n    if (context === 'popup') return undefined;\n\n    const [hijackViewport, replaceViewport] = viewportHijack();\n\n    const CLASS = {\n        HIDDEN: `${uid}-hide`,\n        MODAL_SHOW: `${uid}-show`,\n        TRANSITION: `${uid}-transition`\n    };\n\n    const handleRender = wrapper => {\n        const overlay = wrapper.querySelector('div');\n\n        const handleShow = () => {\n            state.open = true;\n            state.previousFocus = document.activeElement;\n            wrapper.classList.remove(CLASS.HIDDEN);\n            hijackViewport();\n            // Browser needs to repaint otherwise the transition happens immediately\n            // Firefox requires 2 RAFs due to where they are called in the event loop\n            requestAnimationFrame(() => {\n                requestAnimationFrame(() => {\n                    overlay.classList.add(CLASS.MODAL_SHOW);\n                    if (state.renderedModal && window.document.activeElement !== frame) {\n                        frame.focus();\n                    } else if (window.document.activeElement !== prerenderFrame) {\n                        prerenderFrame.focus();\n                    }\n                });\n            });\n        };\n\n        const handleHide = () => {\n            state.open = false;\n            overlay.classList.remove(CLASS.MODAL_SHOW);\n            replaceViewport();\n            setTimeout(() => {\n                wrapper.classList.add(CLASS.HIDDEN);\n                state.previousFocus.focus();\n            }, TRANSITION_DELAY);\n        };\n\n        const handleEscape = evt => {\n            if (state.open && (evt.key === 'Escape' || evt.key === 'Esc' || evt.charCode === 27)) {\n                handleHide();\n            }\n        };\n\n        const handleTransition = () => {\n            state.renderedModal = true;\n            ZalgoPromise.delay(TRANSITION_DELAY)\n                .then(() => overlay.classList.add(CLASS.TRANSITION))\n                .then(() => ZalgoPromise.delay(TRANSITION_DELAY))\n                .then(() => destroyElement(prerenderFrame))\n                .then(() => {\n                    if (state.open && document.activeElement !== frame) {\n                        frame.focus();\n                    }\n                });\n        };\n\n        // When the show function was called before zoid had a chance to render\n        if (state.open) {\n            handleShow();\n        }\n\n        event.on('modal-show', handleShow);\n        event.on('modal-hide', handleHide);\n        event.on(EVENT.RENDERED, handleTransition);\n        window.addEventListener('keyup', handleEscape);\n    };\n\n    const fullScreen = position =>\n        `position: ${position} !important; top: 0 !important; left: 0 !important; width: 100% !important; height: 100% !important; z-index: 2147483647 !important; border: none !important;`;\n    const modalTitle = getTitle(frame.title);\n    // We apply both styles tag and inline style because some merchants are changing the inline\n    // style values unintentionally with greedy JavaScript and the style tag with !important\n    // helps to protect our desired styles.\n    return (\n        <div id={uid} class={CLASS.HIDDEN} onRender={handleRender}>\n            <style nonce={cspNonce}>\n                {`\n                    #${uid}.${CLASS.HIDDEN} {\n                        visibility: hidden;\n                    }\n\n                    #${uid} > div > iframe {\n                        position: absolute !important;\n                        top: 0 !important;\n                        left: 0 !important;\n                        width: 100% !important;\n                        height: 100% !important;\n                        border: none !important;\n                    }\n\n                    #${uid} > div {\n                        background: rgba(108, 115, 120, 0);\n                        transition: background ${TRANSITION_DELAY}ms linear;\n                        ${fullScreen('fixed')}\n                    }\n\n                    #${uid} > div.${CLASS.MODAL_SHOW} {\n                        background: rgba(108, 115, 120, 0.85);\n                    }\n\n                    #${uid} > div > iframe {\n                        transition: all ${TRANSITION_DELAY}ms;\n                        transform: translateY(5%);\n                        opacity: 0;\n                    }\n\n                    #${uid} > div.${CLASS.MODAL_SHOW} > iframe {\n                        transform: translateY(0);\n                        opacity: 1;\n                    }\n\n                    #${uid} > div > iframe:first-of-type {\n                        opacity: 0;\n                    }\n\n                    #${uid} > div.${CLASS.MODAL_SHOW}.${CLASS.TRANSITION} > iframe:first-of-type {\n                        opacity: 1;\n                        z-index: 2;\n                    }\n\n                    #${uid} > div.${CLASS.TRANSITION} > iframe:last-of-type {\n                        opacity: 0;\n                    }\n                `}\n            </style>\n            <div>\n                <node el={frame} title={modalTitle} />\n                <node el={prerenderFrame} title={`Prerender ${modalTitle}`} />\n            </div>\n        </div>\n    ).render(dom({ doc }));\n};\n","/** @jsx node */\nimport { node, dom } from '@krakenjs/jsx-pragmatic/src';\nimport { Spinner } from '@paypal/common-components';\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\n\nexport default ({ doc, props, event, state }) => {\n    const ERROR_DELAY = 15000;\n    const styles = `\n        @font-face {\n            font-family: 'PayPalSansBig';\n            font-weight: 600;\n            src: url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansBig-Medium.eot);\n            src: url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansBig-Medium.eot?#iefix)\n                    format('embedded-opentype'),\n                url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansBig-Medium.woff)\n                    format('woff'),\n                url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansBig-Medium.svg) format('svg');\n        }\n        \n        @font-face {\n            font-family: 'PayPalSansBig';\n            font-weight: 200;\n            src: url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansBig-Light.eot);\n            src: url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansBig-Light.eot?#iefix)\n                    format('embedded-opentype'),\n                url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansBig-Light.woff)\n                    format('woff'),\n                url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansBig-Light.svg) format('svg');\n        }\n        \n        @font-face {\n            font-family: 'PayPalSansSmall';\n            font-weight: 400;\n            src: url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansSmall-Regular.eot);\n            src: url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansSmall-Regular.eot?#iefix)\n                    format('embedded-opentype'),\n                url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansSmall-Regular.woff)\n                    format('woff'),\n                url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansSmall-Regular.svg)\n                    format('svg');\n        }\n        \n        @font-face {\n            font-family: 'PayPalSansSmall';\n            font-weight: 600;\n            src: url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansSmall-Medium.eot);\n            src: url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansSmall-Medium.eot?#iefix)\n                    format('embedded-opentype'),\n                url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansSmall-Medium.woff)\n                    format('woff'),\n                url(https://www.paypalobjects.com/webstatic/mktg/2014design/font/PP-Sans/PayPalSansSmall-Medium.svg)\n                    format('svg');\n        }\n        html {\n            color: #2d2d2d;\n            font-family: PayPal-Sans, Helvetica, Arial, sans-serif;\n            font-size: 14px;\n            font-weight: 400;\n        }\n        .modal{\n            overflow-y: scroll;\n        }\n        .overlay{\n            position: fixed;\n            left: 0;\n            top: 0;\n            width: 100%; \n            height: 100%;\n        }\n        .modal-content {\n            position: relative;\n            margin: auto;\n            height: 100%;\n            border-top-right-radius: 10px;\n            border-top-left-radius: 10px;\n        }\n        .spinner{\n            position: relative !important;\n        }\n        .close-button > button {\n            background-color: transparent;\n            width: 48px;\n            height: 48px;\n            display: block;\n            padding: 0;\n            border: none;\n            cursor: pointer;\n            position: absolute;\n            z-index: 50;\n            right: 0;\n            margin-right: 2px;\n            margin-top: 2px;\n        }\n\n        .close-button > button > svg {\n            width: 48px;\n            height: 48px;\n        }\n\n        #modal-status{\n            color: white;\n            position: absolute;\n            top: 67%;\n            left: calc( 50% - 10px );\n            margin-left: -60px;\n            display: none;\n            padding: 10px;\n\n        }\n\n        @media (max-width: 639px), (max-height: 539px){\n            .modal{\n                overflow-y: hidden;\n            }\n            .modal-content {\n                height: calc(100% - 84px);\n                \n            }\n        }\n        \n    `;\n    let closeBtn;\n\n    const checkForErrors = element => {\n        ZalgoPromise.delay(ERROR_DELAY).then(() => {\n            const modalStatus = element.querySelector('#modal-status');\n            // if we have a place to put our status message,\n            // and we have not heard the 'zoid-rendered' event for the modal yet\n            if (modalStatus && !state.renderedModal) {\n                // assign variable to state and access in UI\n                modalStatus.style.display = 'block';\n                modalStatus.textContent = 'Error loading Modal';\n                // TODO: should we report this failure to our log endpoint?\n            }\n        });\n    };\n\n    const handleClose = () => {\n        event.trigger('modal-hide');\n    };\n\n    const handleEscape = evt => {\n        if (!state.renderedModal && state.open && (evt.key === 'Escape' || evt.key === 'Esc' || evt.charCode === 27)) {\n            handleClose();\n        }\n    };\n\n    const handleRender = element => {\n        closeBtn = element.querySelector('#prerender-close-btn');\n        // we need to give chrome a moment before we can focus the close button\n        window.requestAnimationFrame(() => {\n            closeBtn?.focus();\n        });\n        ZalgoPromise.delay(ERROR_DELAY).then(() => {\n            return checkForErrors(element);\n        });\n    };\n\n    event.on('modal-show', () => {\n        if (!state.renderedModal) {\n            // we need to give chrome a moment before we can focus the close button\n            window.requestAnimationFrame(() => {\n                window.requestAnimationFrame(() => {\n                    closeBtn?.focus();\n                });\n            });\n        }\n    });\n\n    return (\n        <html lang=\"en\">\n            <head>\n                <meta httpEquiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n                <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n            </head>\n            <style nonce={props.cspNonce}>{styles}</style>\n            {/* \n                disable jsx-a11y/no-static-element-interactions\n                    because we need handleEscape to work regardless of which element has focus,\n                    and Safari currently forbids an iframe from setting focus within its document\n                    until the user interacts with the contents of the iframe \n            */}\n            {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions */}\n            <body onRender={handleRender} onKeyUp={handleEscape}>\n                <div class=\"modal\" aria-errormessage=\"modal-status\">\n                    {/* \n                        disable jsx-a11y/click-events-have-key-events \n                            because although the overlay does not have a keyup listener, the body does \n                        disable jsx-a11y/no-static-element-interactions\n                            because if we give it `role=\"button\"`, then it will require the overlay be \n                            focusable, which is unnecessary given the `#prerender-close-btn`\n                    */}\n                    {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */}\n                    <div class=\"overlay\" onClick={handleClose} aria-keyshortcuts=\"escape\" />\n                    <div class=\"top-overlay\" />\n                    <div class=\"modal-content\">\n                        <div class=\"close-button\">\n                            <button\n                                id=\"prerender-close-btn\"\n                                onClick={handleClose}\n                                type=\"button\"\n                                aria-label=\"Close\"\n                                tabindex=\"0\"\n                            >\n                                <svg\n                                    aria-hidden=\"true\"\n                                    width=\"36\"\n                                    height=\"36\"\n                                    viewBox=\"0 0 36 36\"\n                                    fill=\"none\"\n                                    xmlns=\"http://www.w3.org/2000/svg\"\n                                >\n                                    <path\n                                        d=\"M12 0L0 12\"\n                                        transform=\"translate(12 12)\"\n                                        stroke=\"white\"\n                                        stroke-width=\"2\"\n                                        stroke-linecap=\"round\"\n                                    />\n                                    <path\n                                        d=\"M0 0L12 12\"\n                                        transform=\"translate(12 12)\"\n                                        stroke=\"white\"\n                                        stroke-width=\"2\"\n                                        stroke-linecap=\"round\"\n                                    />\n                                </svg>\n                            </button>\n                        </div>\n                        <span id=\"modal-status\" aria-label=\"modal-status\" aria-live=\"polite\">\n                            Loading Modal\n                        </span>\n                        <Spinner nonce={props.cspNonce} />\n                    </div>\n                </div>\n            </body>\n        </html>\n    ).render(dom({ doc }));\n};\n","import stringIncludes from 'core-js-pure/stable/string/includes';\nimport stringStartsWith from 'core-js-pure/stable/string/starts-with';\nimport { SDK_SETTINGS } from '@paypal/sdk-constants';\nimport { create } from '@krakenjs/zoid/src';\nimport { uniqueID, getCurrentScriptUID } from '@krakenjs/belter/src';\n\nimport {\n    TAG,\n    getDisableSetCookie,\n    getMeta,\n    getEnv,\n    getGlobalUrl,\n    createGlobalVariableGetter,\n    getCurrentTime,\n    getLibraryVersion,\n    getScriptAttributes,\n    logger,\n    nextIndex,\n    getPerformanceMeasure,\n    getSessionID,\n    getOrCreateDeviceID,\n    getStageTag,\n    getFeatures,\n    getNonce,\n    ppDebug,\n    getStandardProductOffer,\n    getDevTouchpoint,\n    getTsCookieFromStorage\n} from '../../../utils';\nimport validate from '../message/validation';\nimport containerTemplate from './containerTemplate';\nimport prerenderTemplate from './prerenderTemplate';\n\nexport default createGlobalVariableGetter('__paypal_credit_modal__', () =>\n    create({\n        tag: TAG.MODAL,\n        url: getGlobalUrl('MODAL'),\n        // eslint-disable-next-line security/detect-unsafe-regex\n        domain: /\\.paypal\\.com(:\\d+)?$/,\n        containerTemplate,\n        prerenderTemplate,\n        // Dimensions used by popup scenario\n        dimensions: {\n            width: '460px',\n            height: '900px'\n        },\n        attributes: {\n            iframe: {\n                title: 'PayPal Modal',\n                scrolling: 'no'\n            }\n        },\n        props: {\n            account: {\n                type: 'string',\n                queryParam: false,\n                required: true,\n                value: validate.account\n            },\n            merchantId: {\n                type: 'string',\n                queryParam: 'merchant_id',\n                required: false,\n                value: validate.merchantId\n            },\n            integrationIdentifier: {\n                type: 'string',\n                queryParam: true,\n                value: ({ props: { refIndex } }) => {\n                    return refIndex ? undefined : 'messagesModal';\n                },\n                required: false\n            },\n            customerId: {\n                type: 'string',\n                queryParam: 'customer_id',\n                required: false,\n                value: validate.customerId\n            },\n            currency: {\n                type: 'string',\n                queryParam: true,\n                required: false,\n                value: validate.currency\n            },\n            amount: {\n                type: 'number',\n                queryParam: true,\n                required: false,\n                value: validate.amount\n            },\n            buyerCountry: {\n                type: 'string',\n                queryParam: 'buyer_country',\n                required: false,\n                value: validate.buyerCountry\n            },\n            language: {\n                type: 'string',\n                queryParam: true,\n                required: false,\n                value: validate.language\n            },\n            offer: {\n                type: 'string',\n                queryParam: 'credit_type',\n                required: false,\n                decorate: ({ value }) => getStandardProductOffer(value)\n            },\n            refId: {\n                type: 'string',\n                queryParam: false,\n                required: false\n            },\n            refIndex: {\n                type: 'string',\n                queryParam: false,\n                required: false\n            },\n            ignoreCache: {\n                type: 'boolean',\n                queryParam: 'ignore_cache',\n                required: false,\n                value: validate.ignoreCache\n            },\n            channel: {\n                type: 'string',\n                queryParam: 'channel',\n                required: false,\n                default: () => 'UPSTREAM',\n                value: validate.channel\n            },\n            ecToken: {\n                type: 'string',\n                queryParam: 'ec_token',\n                required: false,\n                value: validate.ecToken\n            },\n\n            // Callbacks\n            onClick: {\n                type: 'function',\n                queryParam: false,\n                value: ({ props }) => {\n                    const { onClick, onApply } = props;\n\n                    return ({ linkName, src }) => {\n                        const { index, refIndex } = props;\n\n                        logger.track({\n                            index,\n                            refIndex,\n                            et: 'CLICK',\n                            event_type: 'click',\n                            link: linkName,\n                            src: src ?? linkName\n                        });\n\n                        if (typeof onClick === 'function') {\n                            onClick({ linkName });\n                        }\n\n                        if (typeof onApply === 'function' && stringIncludes(linkName, 'Apply Now')) {\n                            onApply();\n                        }\n                    };\n                }\n            },\n            onCalculate: {\n                type: 'function',\n                queryParam: false,\n                value: ({ props }) => {\n                    const { onCalculate } = props;\n\n                    return ({ value }) => {\n                        const { index, refIndex } = props;\n\n                        logger.track({\n                            index,\n                            refIndex,\n                            et: 'CLICK',\n                            event_type: 'click',\n                            link: 'Calculator',\n                            src: 'Calculator',\n                            amount: value\n                        });\n\n                        if (typeof onCalculate === 'function') {\n                            onCalculate({ value });\n                        }\n                    };\n                }\n            },\n            onShow: {\n                type: 'function',\n                queryParam: false,\n                value: ({ props }) => {\n                    const { onShow } = props;\n\n                    return () => {\n                        const { index, refIndex, src = 'show' } = props;\n\n                        logger.track({\n                            index,\n                            refIndex,\n                            et: 'CLIENT_IMPRESSION',\n                            event_type: 'modal-open',\n                            src\n                        });\n\n                        if (typeof onShow === 'function') {\n                            onShow();\n                        }\n                    };\n                }\n            },\n            onClose: {\n                type: 'function',\n                queryParam: false,\n                value: ({ props, event }) => {\n                    const { onClose } = props;\n\n                    return ({ linkName } = {}) => {\n                        // linkName is undefined when modal is closed as a popup.\n                        // TODO: We should probably change from using `onClose` the\n                        // modal only hides itself and keep `onClose` for the zoid event\n                        if (typeof linkName === 'undefined') return;\n\n                        const { index, refIndex } = props;\n\n                        event.trigger('modal-hide');\n\n                        logger.track({\n                            index,\n                            refIndex,\n                            et: 'CLICK',\n                            event_type: 'modal-close',\n                            link: linkName\n                        });\n\n                        if (typeof onClose === 'function') {\n                            onClose({ linkName });\n                        }\n                    };\n                }\n            },\n            onReady: {\n                type: 'function',\n                queryParam: false,\n                value: ({ props, state, event }) => {\n                    const { onReady } = props;\n                    // Fired anytime we fetch new content (e.g. amount change)\n                    return ({ products, meta, ts }) => {\n                        const { index, offer, merchantId, account, refIndex, messageRequestId } = props;\n                        const { renderStart, show, hide } = state;\n                        const { trackingDetails, ppDebugId } = meta;\n                        const partnerClientId = merchantId && account.slice(10); // slice is to remove the characters 'client-id:' from account name\n\n                        ppDebug(`Modal Correlation ID: ${ppDebugId}`);\n\n                        logger.addMetaBuilder(existingMeta => {\n                            // Remove potential existing meta info\n                            // Necessary because beaver-logger will not override an existing meta key if these values change\n                            // eslint-disable-next-line no-param-reassign\n                            delete existingMeta[index];\n\n                            // Need to capture existing attributes under global before destroying\n                            const { global: existingGlobal = {} } = existingMeta;\n                            // eslint-disable-next-line no-param-reassign\n                            delete existingMeta.global;\n\n                            // get ts cookie value\n                            const tsCookie = typeof ts !== 'undefined' ? ts : getTsCookieFromStorage();\n                            return {\n                                global: {\n                                    ...existingGlobal,\n                                    ts: tsCookie,\n                                    // Device ID should be correctly set during message render\n                                    deviceID: getOrCreateDeviceID(),\n                                    sessionID: getSessionID()\n                                },\n                                [index]: {\n                                    type: 'modal',\n                                    messageRequestId,\n                                    account: merchantId || account,\n                                    partnerClientId,\n                                    trackingDetails\n                                }\n                            };\n                        });\n\n                        const firstModalRenderDelay = getPerformanceMeasure('firstModalRenderDelay');\n\n                        logger.info('modal_render', {\n                            index,\n                            refIndex,\n                            duration: getCurrentTime() - renderStart\n                        });\n\n                        logger.track({\n                            index,\n                            refIndex,\n                            et: 'CLIENT_IMPRESSION',\n                            event_type: 'modal-render',\n                            modal: `${products.join('_').toLowerCase()}:${offer ? offer.toLowerCase() : products[0]}`,\n                            // For standalone modal the stats event does not run, so we duplicate some data here\n                            bn_code: getScriptAttributes()[SDK_SETTINGS.PARTNER_ATTRIBUTION_ID],\n                            first_modal_render_delay: Math.round(firstModalRenderDelay).toString(),\n                            render_duration: Math.round(getCurrentTime() - renderStart).toString()\n                        });\n\n                        if (\n                            typeof onReady === 'function' &&\n                            // No need to fire the merchant's onReady if the modal products haven't changed\n                            // which could cause multiple click event handlers to be added\n                            (!state.products || JSON.stringify(products) !== JSON.stringify(state.products))\n                        ) {\n                            onReady({ products, show, hide });\n                        }\n                        // Consumed in modal controller when validating the offer type passed in\n                        // to determine if a modal is able to be displayed or not.\n                        // Primary use-case is a standalone modal\n                        state.products = Array.isArray(products) && products.map(getStandardProductOffer); // eslint-disable-line no-param-reassign\n                        event.trigger('ready');\n                    };\n                }\n            },\n\n            // Computed Props\n            index: {\n                type: 'string',\n                queryParam: false,\n                value: ({ state }) => {\n                    // This function is called multiple times throughout zoid's lifecycle\n                    // so we do not want to call a function with side-effects more than once\n                    if (!state.index) {\n                        state.index = nextIndex().toString(); // eslint-disable-line no-param-reassign\n                    }\n\n                    return state.index;\n                }\n            },\n            payerId: {\n                type: 'string',\n                queryParam: 'payer_id',\n                decorate: ({ props }) => (!stringStartsWith(props.account, 'client-id:') ? props.account : null),\n                default: () => '',\n                required: false\n            },\n            clientId: {\n                type: 'string',\n                queryParam: 'client_id',\n                decorate: ({ props }) =>\n                    stringStartsWith(props.account, 'client-id:') ? props.account.slice(10) : null,\n                default: () => '',\n                required: false\n            },\n            sdkMeta: {\n                type: 'string',\n                queryParam: true,\n                sendToChild: false,\n                required: false,\n                value: getMeta\n            },\n            env: {\n                type: 'string',\n                queryParam: true,\n                value: getEnv\n            },\n            version: {\n                type: 'string',\n                queryParam: true,\n                value: getLibraryVersion\n            },\n            deviceID: {\n                type: 'string',\n                queryParam: true,\n                value: getOrCreateDeviceID\n            },\n            sessionID: {\n                type: 'string',\n                queryParam: true,\n                value: getSessionID\n            },\n            scriptUID: {\n                type: 'string',\n                queryParam: true,\n                value: getCurrentScriptUID\n            },\n            messageRequestId: {\n                type: 'string',\n                queryParam: 'message_request_id',\n                value: uniqueID,\n                decorate: ({ props }) => {\n                    ppDebug(`Modal Message Request ID: ${props.messageRequestId}`);\n                    return props.messageRequestId;\n                }\n            },\n            debug: {\n                type: 'boolean',\n                queryParam: 'pp_debug',\n                required: false,\n                value: () => (/(\\?|&)pp_debug=true(&|$)/.test(window.location.search) ? true : undefined)\n            },\n            stageTag: {\n                type: 'string',\n                queryParam: true,\n                required: false,\n                value: getStageTag\n            },\n            devTouchpoint: {\n                type: 'boolean',\n                queryParam: true,\n                required: false,\n                value: getDevTouchpoint\n            },\n            integrationType: {\n                type: 'string',\n                queryParam: true,\n                required: false,\n                value: () => __MESSAGES__.__TARGET__\n            },\n            cspNonce: {\n                type: 'string',\n                required: false,\n                default: getNonce,\n                value: validate.cspNonce\n            },\n            disableSetCookie: {\n                type: 'boolean',\n                queryParam: true,\n                required: false,\n                value: getDisableSetCookie\n            },\n            features: {\n                type: 'string',\n                queryParam: 'features',\n                required: false,\n                value: getFeatures\n            }\n        }\n    })\n);\n","import arrayFind from 'core-js-pure/stable/array/find';\nimport { ZalgoPromise } from '@krakenjs/zalgo-promise/src';\n\nimport {\n    logger,\n    memoizeOnProps,\n    getCurrentTime,\n    awaitWindowLoad,\n    getInlineOptions,\n    isElement,\n    getGlobalState,\n    objectMerge,\n    getStandardProductOffer,\n    addPerformanceMeasure,\n    PERFORMANCE_MEASURE_KEYS,\n    globalEvent,\n    getTopWindow\n} from '../../../utils';\nimport { getModalComponent } from '../../zoid/modal';\n\nconst SCRIPT_DELAY = 0;\n\nconst memoizedModal = memoizeOnProps(\n    ({\n        account,\n        merchantId,\n        customerId,\n        currency,\n        amount,\n        buyerCountry,\n        language,\n        ignoreCache,\n        offer,\n        onReady,\n        onCalculate,\n        onApply,\n        onShow,\n        onClose,\n        channel,\n        ecToken,\n        cspNonce,\n        integrationIdentifier\n    }) => {\n        addPerformanceMeasure(PERFORMANCE_MEASURE_KEYS.FIRST_MODAL_RENDER_DELAY);\n\n        // Hold onto the full object reference so we can overwite the properties, but save the object reference\n        const zoidComponent = getModalComponent()({\n            account,\n            merchantId,\n            customerId,\n            currency,\n            amount,\n            buyerCountry,\n            language,\n            ignoreCache,\n            offer,\n            onReady,\n            onCalculate,\n            onApply,\n            onShow,\n            onClose,\n            channel,\n            ecToken,\n            cspNonce,\n            integrationIdentifier\n        });\n        // Fired from inside the default onReady callback\n        let renderProm;\n        // eslint-disable-next-line default-param-last\n        const renderModal = (selector = 'body', newProps, options = { intent: 'render' }) => {\n            const context = getTopWindow() === window ? 'iframe' : 'popup';\n\n            if (renderProm && context !== 'popup') {\n                return renderProm.then(() => newProps && zoidComponent.updateProps(newProps));\n            }\n\n            if (renderProm && context === 'popup') {\n                // If the context is popup, the zoid component completely destroys itself\n                // where it can't be reused and must be recreated. We can clone the destroyed\n                // instance to transfer the state and latest props to the new instance\n                Object.assign(zoidComponent, zoidComponent.clone());\n            }\n\n            const modalReady = new ZalgoPromise(resolve => zoidComponent.event.once('ready', resolve));\n\n            zoidComponent.state.renderStart = getCurrentTime();\n\n            const renderDelay =\n                options.intent === 'show'\n                    ? // Render modal immediately if the user has made a clear intent\n                      ZalgoPromise.resolve()\n                    : // Give priority to other merchant scripts waiting for the load event\n                      awaitWindowLoad.then(() => ZalgoPromise.delay(SCRIPT_DELAY));\n\n            renderProm = renderDelay\n                // Give priority to other merchant scripts waiting for the load event\n                .then(() =>\n                    ZalgoPromise.all([\n                        newProps && zoidComponent.updateProps(newProps),\n                        zoidComponent.render(selector, context),\n                        modalReady\n                    ])\n                )\n                .then(() => globalEvent.trigger('modal-render'));\n\n            return renderProm;\n        };\n\n        const showModal = (options = {}) => {\n            const newOptions = isElement(options) ? getInlineOptions(options) : options;\n\n            if (isElement(options)) {\n                newOptions.src =\n                    options.id ??\n                    [...options.classList]\n                        .filter(Boolean)\n                        .reduce((acc, className) => `${acc ?? ''}.${className}`, null) ??\n                    options.constructor?.name ??\n                    'element';\n            }\n\n            renderProm = renderModal('body', newOptions, { intent: 'show' });\n\n            const requestedProduct = getStandardProductOffer(options.offer);\n\n            // TODO: Remove after DE universal modal ramp is complete. Allows both old and new modals to work with DE messages while ramping.\n            const validDEProductValues = ['PAY_LATER_LONG_TERM', 'PAY_LATER_PAY_IN_1', 'PAY_LATER_SHORT_TERM'];\n            // TODO: Remove after DE universal modal ramp is complete\n            const productState = options?.offerCountry === 'DE' ? validDEProductValues : zoidComponent.state.products;\n\n            if (\n                typeof requestedProduct !== 'undefined' &&\n                requestedProduct !== 'NONE' &&\n                Array.isArray(zoidComponent.state.products) &&\n                !arrayFind(productState, supportedProduct => supportedProduct === requestedProduct)\n            ) {\n                logger.warn('invalid_option_value', {\n                    location: 'offer',\n                    description: `Expected one of [\"${zoidComponent.state.products.join('\", \"')}\"] but received \"${\n                        options.offer\n                    }\".`\n                });\n                return ZalgoPromise.resolve();\n            }\n\n            // Tells containerTemplate to show the prerender modal as soon as possible if zoid has not\n            // rendered anything yet and the show/hide events are not hooked up yet\n            zoidComponent.state.open = true;\n            zoidComponent.event.trigger('modal-show');\n\n            return renderProm;\n        };\n\n        const hideModal = () => {\n            renderProm = renderModal('body');\n\n            zoidComponent.event.trigger('modal-hide');\n\n            return renderProm;\n        };\n\n        const updateModal = props => {\n            zoidComponent.updateProps(props);\n        };\n\n        // Expose these functions through the computed onReady callback\n        // for merchant integrations\n        zoidComponent.state.show = showModal;\n        zoidComponent.state.hide = hideModal;\n        // Follow existing zoid interface\n        return {\n            render: renderModal,\n            show: showModal,\n            hide: hideModal,\n            updateProps: updateModal\n        };\n    },\n    ['account', 'merchantId', 'buyerCountry']\n);\n\nexport default options => memoizedModal(objectMerge(getGlobalState().config, options));\n","import { setup, Modal } from './controllers/modal';\nimport { addPerformanceMeasure } from '../utils';\n\nwindow.paypal = window.paypal ?? {};\nwindow.paypal.MessagesModal = Modal;\n\naddPerformanceMeasure('scriptLoadDelay');\nsetup();\n","import {\n    getInlineOptions,\n    getGlobalState,\n    awaitDOMContentLoaded,\n    getAllBySelector,\n    objectMerge,\n    isZoidComponent\n} from '../../../utils';\nimport Modal from './interface';\nimport { getModalComponent } from '../../zoid/modal';\n\nexport default function setup() {\n    // Load the zoid components into memory so that the zoid interface can bootstrap between parent and child\n    getModalComponent();\n\n    const { namespace } = getGlobalState().config;\n\n    // Allow specified global namespace override\n    if (namespace) {\n        window[namespace] = {\n            ...(window[namespace] || {}),\n            MessagesModal: Modal\n        };\n\n        if (window.paypal) {\n            delete window.paypal.MessagesModal;\n\n            if (Object.keys(window.paypal).length === 0) {\n                delete window.paypal;\n            }\n        }\n    }\n\n    // Prevent auto render from firing inside zoid iframe\n    if (!isZoidComponent()) {\n        const handleContentLoaded = () => {\n            // If merchant includes multiple SDK scripts, the 1st script will destroy itself\n            // and its globalState before this runs causing the account to be undefined\n            if (getGlobalState().config.account) {\n                const attachEls = getAllBySelector('[data-pp-messagesmodal]');\n\n                if (attachEls.length > 0) {\n                    const options = objectMerge(getGlobalState().config, getInlineOptions(attachEls[0]));\n                    const modal = Modal(options);\n\n                    attachEls.forEach(el => {\n                        el.setAttribute('tabindex', 0);\n                        el.addEventListener('click', () => modal.show(el));\n                    });\n                }\n            }\n        };\n\n        awaitDOMContentLoaded.then(handleContentLoaded);\n    }\n}\n"],"sourceRoot":""}