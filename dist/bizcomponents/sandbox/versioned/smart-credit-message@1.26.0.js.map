{"version":3,"sources":["webpack://crc/webpack/bootstrap","webpack://crc/./node_modules/core-js-pure/internals/well-known-symbol.js","webpack://crc/./node_modules/core-js-pure/stable/object/entries.js","webpack://crc/./node_modules/core-js-pure/internals/export.js","webpack://crc/./node_modules/core-js-pure/internals/global.js","webpack://crc/./node_modules/core-js-pure/stable/array/find.js","webpack://crc/./node_modules/core-js-pure/internals/fails.js","webpack://crc/./node_modules/core-js-pure/internals/is-object.js","webpack://crc/./node_modules/core-js-pure/internals/has.js","webpack://crc/./node_modules/core-js-pure/stable/array/includes.js","webpack://crc/./node_modules/core-js-pure/internals/descriptors.js","webpack://crc/./node_modules/core-js-pure/internals/to-object.js","webpack://crc/./node_modules/core-js-pure/internals/create-non-enumerable-property.js","webpack://crc/./node_modules/core-js-pure/internals/an-object.js","webpack://crc/./node_modules/core-js-pure/internals/to-length.js","webpack://crc/./node_modules/core-js-pure/stable/array/from.js","webpack://crc/./node_modules/core-js-pure/internals/require-object-coercible.js","webpack://crc/./node_modules/core-js-pure/internals/path.js","webpack://crc/./node_modules/core-js-pure/internals/entry-unbind.js","webpack://crc/./node_modules/core-js-pure/stable/string/starts-with.js","webpack://crc/./node_modules/core-js-pure/internals/create-property-descriptor.js","webpack://crc/./node_modules/core-js-pure/internals/to-indexed-object.js","webpack://crc/./node_modules/core-js-pure/internals/classof-raw.js","webpack://crc/./node_modules/core-js-pure/internals/get-built-in.js","webpack://crc/./node_modules/core-js-pure/internals/is-pure.js","webpack://crc/./node_modules/core-js-pure/internals/function-bind-context.js","webpack://crc/./node_modules/core-js-pure/internals/object-define-property.js","webpack://crc/./node_modules/core-js-pure/internals/to-string.js","webpack://crc/./node_modules/core-js-pure/internals/iterators.js","webpack://crc/./node_modules/core-js-pure/internals/object-property-is-enumerable.js","webpack://crc/./node_modules/core-js-pure/internals/indexed-object.js","webpack://crc/./node_modules/core-js-pure/internals/to-property-key.js","webpack://crc/./node_modules/core-js-pure/internals/is-symbol.js","webpack://crc/./node_modules/core-js-pure/internals/shared-store.js","webpack://crc/./node_modules/core-js-pure/internals/object-keys.js","webpack://crc/./node_modules/core-js-pure/internals/to-integer.js","webpack://crc/./node_modules/core-js-pure/internals/hidden-keys.js","webpack://crc/./node_modules/core-js-pure/internals/add-to-unscopables.js","webpack://crc/./node_modules/core-js-pure/internals/shared-key.js","webpack://crc/./node_modules/core-js-pure/internals/to-string-tag-support.js","webpack://crc/./node_modules/core-js-pure/stable/string/includes.js","webpack://crc/./node_modules/core-js-pure/internals/object-get-own-property-descriptor.js","webpack://crc/./node_modules/core-js-pure/internals/use-symbol-as-uid.js","webpack://crc/./node_modules/core-js-pure/internals/native-symbol.js","webpack://crc/./node_modules/core-js-pure/internals/shared.js","webpack://crc/./node_modules/core-js-pure/internals/uid.js","webpack://crc/./node_modules/core-js-pure/internals/ie8-dom-define.js","webpack://crc/./node_modules/core-js-pure/internals/document-create-element.js","webpack://crc/./node_modules/core-js-pure/internals/a-function.js","webpack://crc/./node_modules/core-js-pure/internals/array-includes.js","webpack://crc/./node_modules/core-js-pure/internals/enum-bug-keys.js","webpack://crc/./node_modules/core-js-pure/internals/array-species-create.js","webpack://crc/./node_modules/core-js-pure/internals/is-array.js","webpack://crc/./node_modules/core-js-pure/internals/not-a-regexp.js","webpack://crc/./node_modules/core-js-pure/internals/correct-is-regexp-logic.js","webpack://crc/./node_modules/core-js-pure/internals/iterators-core.js","webpack://crc/./node_modules/core-js-pure/internals/object-get-prototype-of.js","webpack://crc/./node_modules/core-js-pure/internals/set-to-string-tag.js","webpack://crc/./node_modules/core-js-pure/internals/classof.js","webpack://crc/./node_modules/core-js-pure/stable/object/assign.js","webpack://crc/./node_modules/core-js-pure/stable/array/flat-map.js","webpack://crc/./node_modules/core-js-pure/es/object/entries.js","webpack://crc/./node_modules/core-js-pure/modules/es.object.entries.js","webpack://crc/./node_modules/core-js-pure/internals/to-primitive.js","webpack://crc/./node_modules/core-js-pure/internals/engine-v8-version.js","webpack://crc/./node_modules/core-js-pure/internals/engine-user-agent.js","webpack://crc/./node_modules/core-js-pure/internals/ordinary-to-primitive.js","webpack://crc/./node_modules/core-js-pure/internals/set-global.js","webpack://crc/./node_modules/core-js-pure/internals/is-forced.js","webpack://crc/./node_modules/core-js-pure/internals/object-to-array.js","webpack://crc/./node_modules/core-js-pure/internals/object-keys-internal.js","webpack://crc/./node_modules/core-js-pure/internals/to-absolute-index.js","webpack://crc/./node_modules/core-js-pure/es/array/find.js","webpack://crc/./node_modules/core-js-pure/modules/es.array.find.js","webpack://crc/./node_modules/core-js-pure/internals/array-iteration.js","webpack://crc/./node_modules/core-js-pure/internals/array-species-constructor.js","webpack://crc/./node_modules/core-js-pure/es/array/includes.js","webpack://crc/./node_modules/core-js-pure/modules/es.array.includes.js","webpack://crc/./node_modules/core-js-pure/es/string/includes.js","webpack://crc/./node_modules/core-js-pure/modules/es.string.includes.js","webpack://crc/./node_modules/core-js-pure/internals/is-regexp.js","webpack://crc/./node_modules/core-js-pure/es/object/assign.js","webpack://crc/./node_modules/core-js-pure/modules/es.object.assign.js","webpack://crc/./node_modules/core-js-pure/internals/object-assign.js","webpack://crc/./node_modules/core-js-pure/internals/object-get-own-property-symbols.js","webpack://crc/./node_modules/core-js-pure/es/array/from.js","webpack://crc/./node_modules/core-js-pure/modules/es.string.iterator.js","webpack://crc/./node_modules/core-js-pure/internals/string-multibyte.js","webpack://crc/./node_modules/core-js-pure/internals/internal-state.js","webpack://crc/./node_modules/core-js-pure/internals/native-weak-map.js","webpack://crc/./node_modules/core-js-pure/internals/inspect-source.js","webpack://crc/./node_modules/core-js-pure/internals/define-iterator.js","webpack://crc/./node_modules/core-js-pure/internals/create-iterator-constructor.js","webpack://crc/./node_modules/core-js-pure/internals/correct-prototype-getter.js","webpack://crc/./node_modules/core-js-pure/internals/object-create.js","webpack://crc/./node_modules/core-js-pure/internals/object-define-properties.js","webpack://crc/./node_modules/core-js-pure/internals/html.js","webpack://crc/./node_modules/core-js-pure/internals/object-to-string.js","webpack://crc/./node_modules/core-js-pure/internals/object-set-prototype-of.js","webpack://crc/./node_modules/core-js-pure/internals/a-possible-prototype.js","webpack://crc/./node_modules/core-js-pure/internals/redefine.js","webpack://crc/./node_modules/core-js-pure/modules/es.array.from.js","webpack://crc/./node_modules/core-js-pure/internals/array-from.js","webpack://crc/./node_modules/core-js-pure/internals/call-with-safe-iteration-closing.js","webpack://crc/./node_modules/core-js-pure/internals/iterator-close.js","webpack://crc/./node_modules/core-js-pure/internals/is-array-iterator-method.js","webpack://crc/./node_modules/core-js-pure/internals/create-property.js","webpack://crc/./node_modules/core-js-pure/internals/get-iterator-method.js","webpack://crc/./node_modules/core-js-pure/internals/check-correctness-of-iteration.js","webpack://crc/./node_modules/core-js-pure/es/array/flat-map.js","webpack://crc/./node_modules/core-js-pure/modules/es.array.flat-map.js","webpack://crc/./node_modules/core-js-pure/internals/flatten-into-array.js","webpack://crc/./node_modules/core-js-pure/modules/es.array.unscopables.flat-map.js","webpack://crc/./node_modules/core-js-pure/es/string/starts-with.js","webpack://crc/./node_modules/core-js-pure/modules/es.string.starts-with.js","webpack://crc/./node_modules/grumbler-scripts/node_modules/@babel/runtime/helpers/esm/extends.js","webpack://crc/./node_modules/jsx-pragmatic/src/node.js","webpack://crc/./node_modules/jsx-pragmatic/src/constants.js","webpack://crc/./node_modules/jsx-pragmatic/src/renderers/dom.js","webpack://crc/./node_modules/jsx-pragmatic/src/util.js","webpack://crc/./node_modules/zalgo-promise/src/utils.js","webpack://crc/./node_modules/zalgo-promise/src/exceptions.js","webpack://crc/./node_modules/zalgo-promise/src/flush.js","webpack://crc/./node_modules/zalgo-promise/src/promise.js","webpack://crc/./src/utils/functional.js","webpack://crc/./src/utils/miscellaneous.js","webpack://crc/./node_modules/cross-domain-utils/src/utils.js","webpack://crc/./node_modules/cross-domain-utils/src/constants.js","webpack://crc/./node_modules/cross-domain-safe-weakmap/src/util.js","webpack://crc/./node_modules/cross-domain-safe-weakmap/src/weakmap.js","webpack://crc/./node_modules/belter/src/util.js","webpack://crc/./node_modules/cross-domain-safe-weakmap/src/native.js","webpack://crc/./node_modules/belter/src/dom.js","webpack://crc/./node_modules/belter/src/constants.js","webpack://crc/./node_modules/belter/src/storage.js","webpack://crc/./node_modules/belter/src/http.js","webpack://crc/./node_modules/@paypal/sdk-client/src/global.js","webpack://crc/./node_modules/@paypal/sdk-client/src/config.js","webpack://crc/./node_modules/@paypal/sdk-client/src/script.js","webpack://crc/./node_modules/beaver-logger/src/constants.js","webpack://crc/./node_modules/beaver-logger/src/config.js","webpack://crc/./node_modules/beaver-logger/src/logger.js","webpack://crc/./node_modules/@paypal/sdk-client/src/logger.js","webpack://crc/./node_modules/@paypal/sdk-client/src/domains.js","webpack://crc/./node_modules/@paypal/sdk-client/src/api.js","webpack://crc/./node_modules/@paypal/sdk-client/src/events.js","webpack://crc/./src/utils/sdk.js","webpack://crc/./src/utils/elements.js","webpack://crc/./src/utils/activeTags.js","webpack://crc/./src/components/message/index.js","webpack://crc/./src/components/message/Message.js","webpack://crc/./src/utils/debug.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","hasOwnProperty","p","s","global","require","shared","has","uid","NATIVE_SYMBOL","USE_SYMBOL_AS_UID","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","parent","getOwnPropertyDescriptor","f","isForced","path","createNonEnumerableProperty","wrapConstructor","NativeConstructor","Wrapper","a","b","this","arguments","length","apply","prototype","options","source","USE_NATIVE","VIRTUAL_PROTOTYPE","sourceProperty","targetProperty","nativeProperty","resultProperty","descriptor","TARGET","target","GLOBAL","STATIC","stat","PROTO","proto","nativeSource","targetPrototype","forced","noTargetGet","wrap","Function","sham","real","check","it","Math","globalThis","window","self","exec","error","toObject","hasOwn","fails","requireObjectCoercible","argument","DESCRIPTORS","definePropertyModule","createPropertyDescriptor","isObject","TypeError","String","toInteger","min","undefined","getBuiltIn","bitmap","configurable","writable","IndexedObject","toString","slice","aFunction","variable","namespace","method","fn","that","IE8_DOM_DEFINE","anObject","toPropertyKey","$defineProperty","O","P","Attributes","isSymbol","$propertyIsEnumerable","propertyIsEnumerable","NASHORN_BUG","1","V","classof","split","toPrimitive","$Symbol","setGlobal","store","internalObjectKeys","enumBugKeys","keys","ceil","floor","isNaN","test","wellKnownSymbol","propertyIsEnumerableModule","toIndexedObject","$getOwnPropertyDescriptor","iterator","V8_VERSION","getOwnPropertySymbols","symbol","IS_PURE","push","version","copyright","id","postfix","random","createElement","document","EXISTS","toLength","toAbsoluteIndex","createMethod","IS_INCLUDES","$this","el","fromIndex","index","includes","indexOf","arraySpeciesConstructor","originalArray","Array","isArray","arg","isRegExp","MATCH","METHOD_NAME","regexp","error1","error2","IteratorPrototype","PrototypeOfArrayIteratorPrototype","arrayIterator","getPrototypeOf","ITERATOR","BUGGY_SAFARI_ITERATORS","NEW_ITERATOR_PROTOTYPE","sharedKey","CORRECT_PROTOTYPE_GETTER","IE_PROTO","ObjectPrototype","constructor","TO_STRING_TAG_SUPPORT","TO_STRING_TAG","TAG","SET_METHOD","classofRaw","CORRECT_ARGUMENTS","tag","result","tryGet","callee","entries","$","$entries","ordinaryToPrimitive","TO_PRIMITIVE","input","pref","exoticToPrim","match","userAgent","process","Deno","versions","v8","val","valueOf","replacement","feature","detection","data","normalize","POLYFILL","NATIVE","string","replace","toLowerCase","objectKeys","TO_ENTRIES","values","hiddenKeys","names","max","integer","entryUnbind","$find","find","addToUnscopables","SKIPS_HOLES","callbackfn","arraySpeciesCreate","TYPE","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_REJECT","NO_HOLES","specificCreate","boundFunction","forEach","map","filter","some","every","findIndex","filterReject","SPECIES","C","$includes","notARegExp","correctIsRegExpLogic","searchString","assign","getOwnPropertySymbolsModule","$assign","A","B","chr","join","T","argumentsLength","S","concat","j","from","charAt","InternalStateModule","defineIterator","setInternalState","set","getInternalState","getterFor","iterated","type","point","state","done","CONVERT_TO_STRING","pos","first","second","position","size","charCodeAt","codeAt","NATIVE_WEAK_MAP","objectHas","WeakMap","wmget","wmhas","wmset","metadata","facade","STATE","enforce","inspectSource","functionToString","createIteratorConstructor","setPrototypeOf","setToStringTag","redefine","Iterators","IteratorsCore","returnThis","Iterable","NAME","IteratorConstructor","next","DEFAULT","IS_SET","FORCED","CurrentIteratorPrototype","methods","KEY","getIterationMethod","KIND","defaultIterator","IterablePrototype","INCORRECT_VALUES_NAME","nativeIterator","anyNativeIterator","F","activeXDocument","defineProperties","html","documentCreateElement","EmptyConstructor","scriptTag","content","LT","NullProtoObjectViaActiveX","write","close","temp","parentWindow","NullProtoObject","ActiveXObject","domain","iframeDocument","iframe","style","display","appendChild","src","contentWindow","open","NullProtoObjectViaIFrame","Properties","aPossiblePrototype","setter","CORRECT_SETTER","__proto__","checkCorrectnessOfIteration","iterable","callWithSafeIterationClosing","isArrayIteratorMethod","createProperty","getIteratorMethod","arrayLike","step","mapfn","mapping","iteratorMethod","iteratorClose","ENTRIES","returnMethod","ArrayPrototype","propertyKey","SAFE_CLOSING","called","iteratorWithReturn","SKIP_CLOSING","ITERATION_SUPPORT","flattenIntoArray","flatMap","sourceLen","original","start","depth","mapper","thisArg","element","targetIndex","sourceIndex","mapFn","$startsWith","startsWith","CORRECT_IS_REGEXP_LOGIC","search","_extends","renderChildren","children","renderer","renderedChild","render","subchild","ElementNode","props","onRender","FragmentNode","TextNode","text","ComponentNode","component","renderComponent","child","normalizeChildren","normalizeChild","ADD_CHILDREN","node","firstChild","Error","addEventListener","win","doc","docElement","documentElement","removeChild","dom","opts","domRenderer","createTextNode","createTextElement","prop","setAttribute","tagName","addProps","ELEMENT_PROP","innerHTML","querySelectorAll","script","parentNode","newScript","textContent","replaceChild","fixScripts","addChildren","isPromise","item","Promise","Window","then","err","flushPromise","dispatchedErrors","possiblyUnhandledPromiseHandlers","activeCount","flushActive","promise","resolve","startActive","endActive","ZalgoPromise","handler","resolved","rejected","errorHandled","handlers","dispatching","stack","isAsync","res","reject","dispatch","setTimeout","dispatchPossiblyUnhandledError","asyncReject","chain","firstPromise","secondPromise","onSuccess","onError","promiseResult","catch","finally","onFinally","try","timeout","time","clearTimeout","toPromise","all","promises","count","results","prom","hash","awaitPromises","items","onPossiblyUnhandledException","cancel","splice","context","args","delay","flush","memoize","cache","Map","cacheKey","JSON","stringify","partial","intialArgs","nextArgs","curry","arity","curried","createState","initialState","objectAssign","obj","url","body","readyState","viewport","head","querySelector","__pp_prev_content__","getAttribute","__pp_prev_overflow__","overflow","__pp_prev_msOverflowStyle__","msOverflowStyle","setProperty","IE_WIN_ACCESS_ERROR","isAboutProtocol","location","protocol","canReadFromWindow","getActualDomain","PROTOCOL","getParent","host","getDomain","mockDomain","iframeWindows","iframeFrames","isWindowClosed","allowMock","closed","message","desc","isActuallySameDomain","isSameDomain","mockclosed","top","iframeIndex","collection","safeIndexOf","frame","ownerDocument","contains","isFrameWindowClosed","isWindow","__cross_domain_utils_window_check__","objectIDs","CrossDomainSafeWeakMap","weakmap","freeze","testWeakMap","testKey","hasNativeWeakMap","_cleanupClosedWindows","delete","isSafeToReadWrite","entry","getOrSet","getFunctionName","__name__","displayName","setFunctionName","base64encode","str","btoa","encodeURIComponent","p1","fromCharCode","parseInt","Buffer","uniqueID","chars","Date","toISOString","getGlobal","__GLOBAL__","serializeArgs","subkey","getObjectID","getEmptyObject","memoizeGlobalIndex","memoizeGlobalIndexValidFrom","simpleCache","thisCache","thisNamespace","cacheTime","memoizeIndex","memoizedFunction","cacheResult","now","reset","inlineMemoize","logic","__inline_memoize_cache__","noop","objFilter","Boolean","isDocumentReady","isDocumentInteractive","isBrowser","isLocalStorageEnabled","localStorage","setItem","getItem","removeItem","clear","interval","setInterval","clearInterval","currentScript","getCurrentScript","getStackTrace","stackDetails","scriptLocation","getElementsByTagName","reverse","inferCurrentScript","currentUID","getCurrentScriptUID","ATTRIBUTES","hashedString","total","abs","strHashStr","dataset","getStorage","lifetime","accessedStorage","STORAGE_KEY","newStateID","getState","storage","localStorageEnabled","rawStorage","parse","getID","getSession","session","__session__","created","guid","isStateFresh","getSessionState","getSessionID","headerBuilders","request","headers","json","normalizedHeaders","builtHeaders","headerBuilder","xhr","XMLHttpRequest","responseHeaders","rawHeaders","trim","parseHeaders","getAllResponseHeaders","status","contentType","isJSON","responseBody","responseText","evt","setRequestHeader","ontimeout","send","getPayPalDomain","__PAYPAL_DOMAIN__","getSDKScript","__SDK_HOST__","__PATH__","stringifyError","level","newErr","attributes","attr","AUTO_FLUSH_LEVEL","LOG_LEVEL_PRIORITY","httpTransport","enableSendBeacon","hasHeaders","navigator","sendBeacon","Blob","blob","e","extendIfDefined","getLogger","prefix","logLevel","transport","amplitudeApiKey","flushInterval","events","tracking","payloadBuilders","metaBuilders","trackingBuilders","print","event","payload","console","log","warning","immediateFlush","meta","builder","api_key","event_type","transition_name","event_properties","localPromise","logger","logPayload","timestamp","enqueue","addBuilder","builders","loop","safeInterval","debug","info","warn","track","trackingPayload","addPayloadBuilder","addMetaBuilder","addTrackingBuilder","addHeaderBuilder","setTransport","newTransport","configure","Logger","clientID","basicAuth","__PAYPAL_API_DOMAIN__","Authorization","grant_type","access_token","triggered","emitter","on","eventName","handlerList","cancelled","once","listener","trigger","triggerOnce","getOrCreateStorageID","container","className","getElementsByClassName","elem","insertBefore","HTMLElement","span","appendImage","alt","srcset","logo","Image","dimensions","width","height","svgWrapper","canvas","getTagSize","classList","visibleElement","arrayFind","arrayFrom","defaultView","getWindowFromElement","getComputedStyle","getPropertyValue","toUpperCase","getActiveTags","subHeadline","disclaimer","setupMessage","markup","parentStyles","warnings","xprops","onClick","onReady","onHover","onMarkup","onProps","resize","dimensionsRef","current","amount","currency","buyerCountry","offer","payerId","clientId","merchantId","setProps","metaMessageRequestId","messageRequestId","serverData","setServerData","handleHover","button","background","padding","border","outline","textAlign","align","fontFamily","fontSize","activeTags","deviceID","styles","withCredentials","env","features","stageTag","query","objectEntries","message_request_id","buyer_country","credit_type","payer_id","client_id","merchant_id","reduce","acc","inZoid","debugObj","stringStartsWith","ppDebug","origin","xhttp","onreadystatechange","accumulator","header","stringIncludes","buttonWidth","offsetWidth","buttonHeight","offsetHeight","createMessage"],"mappings":"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","file":"smart-credit-message.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 114);\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","var parent = require('../../es/object/entries');\n\nmodule.exports = parent;\n","'use strict';\nvar global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar isForced = require('../internals/is-forced');\nvar path = require('../internals/path');\nvar bind = require('../internals/function-bind-context');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\n\nvar wrapConstructor = function (NativeConstructor) {\n  var Wrapper = function (a, b, c) {\n    if (this instanceof NativeConstructor) {\n      switch (arguments.length) {\n        case 0: return new NativeConstructor();\n        case 1: return new NativeConstructor(a);\n        case 2: return new NativeConstructor(a, b);\n      } return new NativeConstructor(a, b, c);\n    } return NativeConstructor.apply(this, arguments);\n  };\n  Wrapper.prototype = NativeConstructor.prototype;\n  return Wrapper;\n};\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var PROTO = options.proto;\n\n  var nativeSource = GLOBAL ? global : STATIC ? global[TARGET] : (global[TARGET] || {}).prototype;\n\n  var target = GLOBAL ? path : path[TARGET] || (path[TARGET] = {});\n  var targetPrototype = target.prototype;\n\n  var FORCED, USE_NATIVE, VIRTUAL_PROTOTYPE;\n  var key, sourceProperty, targetProperty, nativeProperty, resultProperty, descriptor;\n\n  for (key in source) {\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contains in native\n    USE_NATIVE = !FORCED && nativeSource && has(nativeSource, key);\n\n    targetProperty = target[key];\n\n    if (USE_NATIVE) if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(nativeSource, key);\n      nativeProperty = descriptor && descriptor.value;\n    } else nativeProperty = nativeSource[key];\n\n    // export native or implementation\n    sourceProperty = (USE_NATIVE && nativeProperty) ? nativeProperty : source[key];\n\n    if (USE_NATIVE && typeof targetProperty === typeof sourceProperty) continue;\n\n    // bind timers to global for call from export context\n    if (options.bind && USE_NATIVE) resultProperty = bind(sourceProperty, global);\n    // wrap global constructors for prevent changs in this version\n    else if (options.wrap && USE_NATIVE) resultProperty = wrapConstructor(sourceProperty);\n    // make static versions for prototype methods\n    else if (PROTO && typeof sourceProperty == 'function') resultProperty = bind(Function.call, sourceProperty);\n    // default case\n    else resultProperty = sourceProperty;\n\n    // add a flag to not completely full polyfills\n    if (options.sham || (sourceProperty && sourceProperty.sham) || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(resultProperty, 'sham', true);\n    }\n\n    target[key] = resultProperty;\n\n    if (PROTO) {\n      VIRTUAL_PROTOTYPE = TARGET + 'Prototype';\n      if (!has(path, VIRTUAL_PROTOTYPE)) {\n        createNonEnumerableProperty(path, VIRTUAL_PROTOTYPE, {});\n      }\n      // export virtual prototype methods\n      path[VIRTUAL_PROTOTYPE][key] = sourceProperty;\n      // export real prototype methods\n      if (options.real && targetPrototype && !targetPrototype[key]) {\n        createNonEnumerableProperty(targetPrototype, key, sourceProperty);\n      }\n    }\n  }\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","var parent = require('../../es/array/find');\n\nmodule.exports = parent;\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var toObject = require('../internals/to-object');\n\nvar hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty.call(toObject(it), key);\n};\n","var parent = require('../../es/array/includes');\n\nmodule.exports = parent;\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var parent = require('../../es/array/from');\n\nmodule.exports = parent;\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","module.exports = {};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn;\n","var parent = require('../../es/string/starts-with');\n\nmodule.exports = parent;\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","module.exports = true;\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var isSymbol = require('../internals/is-symbol');\n\nmodule.exports = function (argument) {\n  if (isSymbol(argument)) throw TypeError('Cannot convert a Symbol value to a string');\n  return String(argument);\n};\n","module.exports = {};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : String(key);\n};\n","var getBuiltIn = require('../internals/get-built-in');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return typeof $Symbol == 'function' && Object(it) instanceof $Symbol;\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.es/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","module.exports = {};\n","module.exports = function () { /* empty */ };\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var parent = require('../../es/string/includes');\n\nmodule.exports = parent;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.16.0',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2021 Denis Pushkarev (zloirock.ru)'\n});\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- requied for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\nvar returnThis = function () { return this; };\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\n/* eslint-disable es/no-array-prototype-keys -- safe */\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = IteratorPrototype == undefined || fails(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype[ITERATOR].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};\n\n// `%IteratorPrototype%[@@iterator]()` method\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator\nif ((!IS_PURE || NEW_ITERATOR_PROTOTYPE) && !has(IteratorPrototype, ITERATOR)) {\n  createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","var has = require('../internals/has');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectPrototype : null;\n};\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar defineProperty = require('../internals/object-define-property').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar toString = require('../internals/object-to-string');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC, SET_METHOD) {\n  if (it) {\n    var target = STATIC ? it : it.prototype;\n    if (!has(target, TO_STRING_TAG)) {\n      defineProperty(target, TO_STRING_TAG, { configurable: true, value: TAG });\n    }\n    if (SET_METHOD && !TO_STRING_TAG_SUPPORT) {\n      createNonEnumerableProperty(target, 'toString', toString);\n    }\n  }\n};\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n};\n","var parent = require('../../es/object/assign');\n\nmodule.exports = parent;\n","var parent = require('../../es/array/flat-map');\n\nmodule.exports = parent;\n","require('../../modules/es.object.entries');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Object.entries;\n","var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","var isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = input[TO_PRIMITIVE];\n  var result;\n  if (exoticToPrim !== undefined) {\n    if (pref === undefined) pref = 'default';\n    result = exoticToPrim.call(input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  version = match[0] < 4 ? 1 : match[0] + match[1];\n} else if (userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = match[1];\n  }\n}\n\nmodule.exports = version && +version;\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var isObject = require('../internals/is-object');\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (pref !== 'string' && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var global = require('../internals/global');\n\nmodule.exports = function (key, value) {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(O, key)) {\n        result.push(TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.es/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.es/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","require('../../modules/es.array.find');\nvar entryUnbind = require('../../internals/entry-unbind');\n\nmodule.exports = entryUnbind('Array', 'find');\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_REJECT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push.call(target, value); // filterReject\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterReject` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterReject: createMethod(7)\n};\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","require('../../modules/es.array.includes');\nvar entryUnbind = require('../../internals/entry-unbind');\n\nmodule.exports = entryUnbind('Array', 'includes');\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","require('../../modules/es.string.includes');\nvar entryUnbind = require('../../internals/entry-unbind');\n\nmodule.exports = entryUnbind('String', 'includes');\n","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.es/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~toString(requireObjectCoercible(this))\n      .indexOf(toString(notARegExp(searchString)), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.es/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","require('../../modules/es.object.assign');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Object.assign;\n","var $ = require('../internals/export');\nvar assign = require('../internals/object-assign');\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\n// eslint-disable-next-line es/no-object-assign -- required for testing\n$({ target: 'Object', stat: true, forced: Object.assign !== assign }, {\n  assign: assign\n});\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\n\n// eslint-disable-next-line es/no-object-assign -- safe\nvar $assign = Object.assign;\n// eslint-disable-next-line es/no-object-defineproperty -- required for testing\nvar defineProperty = Object.defineProperty;\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\nmodule.exports = !$assign || fails(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line es/no-symbol -- safe\n  var symbol = Symbol();\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return $assign({}, A)[symbol] != 7 || objectKeys($assign({}, B)).join('') != alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`\n  var T = toObject(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? objectKeys(S).concat(getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","require('../../modules/es.string.iterator');\nrequire('../../modules/es.array.from');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Array.from;\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar toString = require('../internals/to-string');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: toString(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","var toInteger = require('../internals/to-integer');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.codePointAt` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = toString(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.es/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    if (wmhas.call(store, it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (objectHas(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","'use strict';\nvar $ = require('../internals/export');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {\n          createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array.prototype.{ values, @@iterator }.name in V8 / FF\n  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    INCORRECT_VALUES_NAME = true;\n    defaultIterator = function values() { return nativeIterator.call(this); };\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    createNonEnumerableProperty(IterablePrototype, ITERATOR, defaultIterator);\n  }\n  Iterators[NAME] = defaultIterator;\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  return methods;\n};\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  if (iframe.style) {\n    iframe.style.display = 'none';\n    html.appendChild(iframe);\n    // https://github.com/zloirock/core-js/issues/475\n    iframe.src = String(JS);\n    iframeDocument = iframe.contentWindow.document;\n    iframeDocument.open();\n    iframeDocument.write(scriptTag('document.F=Object'));\n    iframeDocument.close();\n    return iframeDocument.F;\n  }\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = document.domain && activeXDocument ?\n    NullProtoObjectViaActiveX(activeXDocument) : // old IE\n    NullProtoObjectViaIFrame() ||\n    NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classof = require('../internals/classof');\n\n// `Object.prototype.toString` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nmodule.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {\n  return '[object ' + classof(this) + ']';\n};\n","/* eslint-disable no-proto -- safe */\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n    setter.call(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter.call(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it) && it !== null) {\n    throw TypeError(\"Can't set \" + String(it) + ' as a prototype');\n  } return it;\n};\n","var createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (target, key, value, options) {\n  if (options && options.enumerable) target[key] = value;\n  else createNonEnumerableProperty(target, key, value);\n};\n","var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  // eslint-disable-next-line es/no-array-from -- required for testing\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.es/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\n// `Array.from` method implementation\n// https://tc39.es/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var C = typeof this == 'function' ? this : Array;\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined, 2);\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod != undefined && !(C == Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = iteratorMethod.call(O);\n    next = iterator.next;\n    result = new C();\n    for (;!(step = next.call(iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = toLength(O.length);\n    result = new C(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n","var anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator);\n    throw error;\n  }\n};\n","var anObject = require('../internals/an-object');\n\nmodule.exports = function (iterator) {\n  var returnMethod = iterator['return'];\n  if (returnMethod !== undefined) {\n    return anObject(returnMethod.call(iterator)).value;\n  }\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","'use strict';\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","var classof = require('../internals/classof');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line es/no-array-from, no-throw-literal -- required for testing\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n","require('../../modules/es.array.flat-map');\nrequire('../../modules/es.array.unscopables.flat-map');\nvar entryUnbind = require('../../internals/entry-unbind');\n\nmodule.exports = entryUnbind('Array', 'flatMap');\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar aFunction = require('../internals/a-function');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flatMap` method\n// https://tc39.es/ecma262/#sec-array.prototype.flatmap\n$({ target: 'Array', proto: true }, {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A;\n    aFunction(callbackfn);\n    A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return A;\n  }\n});\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flatMap');\n","require('../../modules/es.string.starts-with');\nvar entryUnbind = require('../../internals/entry-unbind');\n\nmodule.exports = entryUnbind('String', 'startsWith');\n","'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\n// eslint-disable-next-line es/no-string-prototype-startswith -- safe\nvar $startsWith = ''.startsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('startsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'startsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.startsWith` method\n// https://tc39.es/ecma262/#sec-string.prototype.startswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = toString(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var index = toLength(min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = toString(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","/* @flow */\n\nimport { NODE_TYPE } from './constants';\n\nexport type NodePropsType = {\n    [string] : any // eslint-disable-line flowtype/no-weak-types\n};\n\nexport type EmptyProps = {||};\n\nexport type NodeRenderer<N, O> = (N) => O;\nexport type NodeRendererFactory<L, N, O> = (L) => NodeRenderer<N, O>;\n\ntype Primitive = string | boolean | number;\ntype NullablePrimitive = Primitive | null | void;\n\nexport type NodeType = ElementNode | TextNode | FragmentNode | ComponentNode<*>; // eslint-disable-line no-use-before-define\nexport type ChildNodeType = ElementNode | TextNode | ComponentNode<*>; // eslint-disable-line no-use-before-define\nexport type ChildType = ChildNodeType | Primitive | $ReadOnlyArray<ChildType>;\nexport type ChildrenType = $ReadOnlyArray<ChildNodeType>;\nexport type NullableChildType = $ReadOnlyArray<ChildType> | ChildNodeType | NullablePrimitive;\nexport type NullableChildrenType = $ReadOnlyArray<NullableChildrenType | ChildNodeType | NullablePrimitive>;\n\nexport type ComponentFunctionType<P> = (P, ChildrenType) => NullableChildType;\n\nexport type CreateElementNode = <P>(string, P, ...NullableChildrenType) => ElementNode; // eslint-disable-line no-undef, no-use-before-define\nexport type CreateComponentNode = <P>(ComponentFunctionType<P>, P, ...NullableChildrenType) => ComponentNode<*>; // eslint-disable-line no-undef, no-use-before-define\nexport type CreateNullComponentNode = <P>(ComponentFunctionType<P>, null, ...NullableChildrenType) => ComponentNode<*>; // eslint-disable-line no-undef, no-use-before-define\n\nexport type CreateNode = CreateNullComponentNode & CreateComponentNode & CreateElementNode;\n\nfunction renderChildren<T>(children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>>, renderer : NodeRenderer<*, *>) : $ReadOnlyArray<T> { // eslint-disable-line no-use-before-define\n    const result = [];\n\n    for (const child of children) {\n        const renderedChild = child.render(renderer);\n\n        if (!renderedChild) {\n            continue;\n        } else if (Array.isArray(renderedChild)) {\n            for (const subchild of renderedChild) {\n                if (subchild) {\n                    result.push(subchild);\n                }\n            }\n        } else {\n            result.push(renderedChild);\n        }\n    }\n\n    return result;\n}\n\nexport class ElementNode {\n    type : (typeof NODE_TYPE.ELEMENT) = NODE_TYPE.ELEMENT\n\n    name : string\n    props : NodePropsType\n    children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>> // eslint-disable-line no-use-before-define\n    onRender : ?<T>(T) => void // eslint-disable-line no-undef\n\n    constructor(name : string, props : NodePropsType, children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>>) { // eslint-disable-line no-use-before-define\n        this.name = name;\n        this.props = props || {};\n        this.children = children;\n\n        const onRender = this.props.onRender;\n        if (typeof onRender === 'function') {\n            this.onRender = onRender;\n            delete props.onRender;\n        }\n    }\n\n    render<T>(renderer : NodeRenderer<*, *>) : T {\n        const el = renderer(this);\n        if (this.onRender) {\n            this.onRender(el);\n        }\n        return el;\n    }\n\n    renderChildren<T>(renderer : NodeRenderer<*, *>) : $ReadOnlyArray<T> {\n        return renderChildren(this.children, renderer);\n    }\n}\n\nexport class FragmentNode {\n    type : (typeof NODE_TYPE.FRAGMENT) = NODE_TYPE.FRAGMENT\n\n    children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>> // eslint-disable-line no-use-before-define\n\n    constructor(children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>>) { // eslint-disable-line no-use-before-define\n        this.children = children;\n    }\n\n    render<T>(renderer : NodeRenderer<*, *>) : $ReadOnlyArray<T> {\n        return renderChildren(this.children, renderer);\n    }\n}\n\nexport class TextNode {\n    type : (typeof NODE_TYPE.TEXT) = NODE_TYPE.TEXT\n\n    text : string\n\n    constructor(text : string) {\n        this.text = text;\n    }\n\n    render<T>(renderer : NodeRenderer<*, *>) : T {\n        return renderer(this);\n    }\n}\n\n// eslint-disable-next-line no-unused-vars\nexport class ComponentNode<P = null> {\n    type : (typeof NODE_TYPE.COMPONENT) = NODE_TYPE.COMPONENT\n\n    component : ComponentFunctionType<NodePropsType>\n    props : NodePropsType\n    children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>>\n\n    constructor(component : ComponentFunctionType<NodePropsType>, props : NodePropsType, children : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>>) {\n        this.component = component;\n        this.props = props || {};\n        this.children = children;\n\n        this.props.children = children;\n    }\n\n    renderComponent(renderer : NodeRenderer<*, *>) : * {\n        const child = normalizeChild(this.component(this.props, this.children)); // eslint-disable-line no-use-before-define\n        if (child) {\n            return child.render(renderer);\n        }\n    }\n\n    render<T>(renderer : NodeRenderer<*, *>) : T {\n        return renderer(this);\n    }\n\n    renderChildren<T>(renderer : NodeRenderer<*, *>) : $ReadOnlyArray<T> {\n        return renderChildren(this.children, renderer);\n    }\n}\n\nfunction normalizeChildren(children : NullableChildrenType) : $ReadOnlyArray<ElementNode | TextNode | ComponentNode<*>> {\n    const result = [];\n\n    for (const child of children) {\n        if (!child) {\n            continue;\n        } else if (typeof child === 'string' || typeof child === 'number') {\n            result.push(new TextNode(child.toString()));\n        } else if (typeof child === 'boolean') {\n            continue;\n        } else if (Array.isArray(child)) {\n            for (const subchild of normalizeChildren(child)) {\n                result.push(subchild);\n            }\n        } else if (child && (child.type === NODE_TYPE.ELEMENT || child.type === NODE_TYPE.TEXT || child.type === NODE_TYPE.COMPONENT)) {\n            result.push(child);\n        } else {\n            throw new TypeError(`Unrecognized node type: ${ typeof child }`);\n        }\n    }\n\n    return result;\n}\n\nfunction normalizeChild(child) : ElementNode | TextNode | ComponentNode<*> | FragmentNode | void {\n    const children = normalizeChildren(Array.isArray(child) ? child : [ child ]);\n\n    if (children.length === 1) {\n        return children[0];\n    } else if (children.length > 1) {\n        return new FragmentNode(children);\n    }\n}\n\nexport const node : CreateNode = <P>(element, props : P, ...children) => {\n    children = normalizeChildren(children);\n\n    if (typeof element === 'string') {\n        // $FlowFixMe\n        return new ElementNode(element, props, children);\n    }\n    \n    if (typeof element === 'function') {\n        // $FlowFixMe\n        return new ComponentNode<*>(element, props, children);\n    }\n\n    throw new TypeError(`Expected jsx element to be a string or a function`);\n};\n\nexport const Fragment : ComponentFunctionType<null> = (props, children) => {\n    return children;\n};\n","/* @flow */\n\nexport const NODE_TYPE = {\n    ELEMENT:   ('element' : 'element'),\n    TEXT:      ('text' : 'text'),\n    COMPONENT: ('component' : 'component'),\n    FRAGMENT:  ('fragment' : 'fragment')\n};\n","/* @flow */\n\nimport { ComponentNode, TextNode, type NodeRenderer, ElementNode } from '../node';\nimport { NODE_TYPE } from '../constants';\nimport { uniqueID } from '../util';\n\ntype DomNodeRenderer = NodeRenderer<ElementNode, HTMLElement>;\ntype DomTextRenderer = NodeRenderer<TextNode, Text>;\ntype DomComponentRenderer = NodeRenderer<ComponentNode<*>, HTMLElement | TextNode | $ReadOnlyArray<HTMLElement | TextNode> | void>;\ntype DomRenderer = DomComponentRenderer & DomNodeRenderer & DomTextRenderer;\n\nconst ELEMENT_TAG = {\n    HTML:    'html',\n    IFRAME:  'iframe',\n    SCRIPT:  'script',\n    DEFAULT: 'default'\n};\n\nconst ELEMENT_PROP = {\n    ID:         'id',\n    INNER_HTML: 'innerHTML',\n    EL:         'el'\n};\n\nfunction fixScripts(el : HTMLElement, doc : Document = window.document) {\n    for (const script of el.querySelectorAll('script')) {\n        const parentNode = script.parentNode;\n\n        if (!parentNode) {\n            continue;\n        }\n\n        const newScript = doc.createElement('script');\n        newScript.text = script.textContent;\n        parentNode.replaceChild(newScript, script);\n    }\n}\n\nfunction createElement(doc : Document, node : ElementNode) : HTMLElement {\n    if (node.props[ELEMENT_PROP.EL]) {\n        return node.props[ELEMENT_PROP.EL];\n    }\n\n    return doc.createElement(node.name);\n}\n\nfunction createTextElement(doc : Document, node : TextNode) : Text {\n    return doc.createTextNode(node.text);\n}\n\nfunction addProps(el : HTMLElement, node) {\n    const props = node.props;\n\n    for (const prop of Object.keys(props)) {\n        const val = props[prop];\n\n        if (val === null || typeof val === 'undefined' || prop === ELEMENT_PROP.EL || prop === ELEMENT_PROP.INNER_HTML) {\n            continue;\n        }\n\n        if (prop.match(/^on[A-Z][a-z]/) && typeof val === 'function') {\n            el.addEventListener(prop.slice(2).toLowerCase(), val);\n        } else if (typeof val === 'string' || typeof val === 'number') {\n            el.setAttribute(prop, val.toString());\n\n        } else if (typeof val === 'boolean') {\n            if (val === true) {\n                el.setAttribute(prop, '');\n            }\n        }\n    }\n\n    if (el.tagName.toLowerCase() === ELEMENT_TAG.IFRAME && !props.id) {\n        el.setAttribute(ELEMENT_PROP.ID, `jsx-iframe-${ uniqueID() }`);\n    }\n}\nconst ADD_CHILDREN : { [string] : (HTMLElement, ElementNode, DomNodeRenderer) => void } = {\n\n    [ ELEMENT_TAG.IFRAME ]: (el, node) => {\n        const firstChild = node.children[0];\n\n        if (node.children.length !== 1 || !(firstChild && firstChild.type === NODE_TYPE.ELEMENT) || firstChild.name !== ELEMENT_TAG.HTML) {\n            throw new Error(`Expected only single html element node as child of ${ ELEMENT_TAG.IFRAME } element`);\n        }\n    \n        el.addEventListener('load', () => {\n\n            // $FlowFixMe\n            const win = el.contentWindow;\n    \n            if (!win) {\n                throw new Error(`Expected frame to have contentWindow`);\n            }\n\n            const doc = win.document;\n            const docElement = doc.documentElement;\n\n            while (docElement.children && docElement.children.length) {\n                docElement.removeChild(docElement.children[0]);\n            }\n\n            // eslint-disable-next-line no-use-before-define\n            const child : HTMLElement = firstChild.render(dom({ doc }));\n        \n            while (child.children.length) {\n                docElement.appendChild(child.children[0]);\n            }\n        });\n    },\n\n    [ ELEMENT_TAG.SCRIPT ]: (el, node) => {\n        const firstChild = node.children[0];\n\n        if (node.children.length !== 1 || !(firstChild && firstChild.type === NODE_TYPE.TEXT)) {\n            throw new Error(`Expected only single text node as child of ${ ELEMENT_TAG.SCRIPT } element`);\n        }\n        \n        // $FlowFixMe\n        el.text = firstChild.text;\n    },\n\n    [ ELEMENT_TAG.DEFAULT ]: (el, node, renderer) => {\n        for (const child of node.renderChildren(renderer)) {\n            el.appendChild(child);\n        }\n    }\n};\n\nfunction addChildren(el : HTMLElement, node : ElementNode, doc : Document, renderer : DomNodeRenderer) {\n    if (node.props.hasOwnProperty(ELEMENT_PROP.INNER_HTML)) {\n\n        if (node.children.length) {\n            throw new Error(`Expected no children to be passed when ${ ELEMENT_PROP.INNER_HTML } prop is set`);\n        }\n\n        const html = node.props[ELEMENT_PROP.INNER_HTML];\n\n        if (typeof html !== 'string') {\n            throw new TypeError(`${ ELEMENT_PROP.INNER_HTML } prop must be string`);\n        }\n\n        if (node.name === ELEMENT_TAG.SCRIPT) {\n            // $FlowFixMe\n            el.text = html;\n        } else {\n            el.innerHTML = html;\n            fixScripts(el, doc);\n        }\n\n    } else {\n        const addChildrenToElement = ADD_CHILDREN[node.name] || ADD_CHILDREN[ELEMENT_TAG.DEFAULT];\n        addChildrenToElement(el, node, renderer);\n    }\n}\n\ntype DomOptions = {|\n    doc? : Document\n|};\n\nconst getDefaultDomOptions = () : DomOptions => {\n    // $FlowFixMe\n    return {};\n};\n\nexport function dom(opts? : DomOptions = getDefaultDomOptions()) : DomRenderer {\n    const { doc = document } = opts;\n    \n    const domRenderer : DomRenderer = (node) => {\n        if (node.type === NODE_TYPE.COMPONENT) {\n            return node.renderComponent(domRenderer);\n        }\n        \n        if (node.type === NODE_TYPE.TEXT) {\n            // $FlowFixMe\n            return createTextElement(doc, node);\n        }\n        \n        if (node.type === NODE_TYPE.ELEMENT) {\n            const el = createElement(doc, node);\n            addProps(el, node);\n            addChildren(el, node, doc, domRenderer);\n            // $FlowFixMe\n            return el;\n        }\n\n        throw new TypeError(`Unhandleable node`);\n    };\n\n    return domRenderer;\n}\n","/* @flow */\n\nconst ALPHA_CHARS = '0123456789abcdef';\n\nexport function uniqueID() : string {\n    return 'xxxxxxxxxx'.replace(/./g, () => ALPHA_CHARS.charAt(Math.floor(Math.random() * ALPHA_CHARS.length)));\n}\n\n// eslint-disable-next-line flowtype/no-weak-types\nexport function isDefined(val : any) : boolean %checks {\n    return (val !== null && typeof val !== 'undefined');\n}\n","/* @flow */\n\nexport function isPromise(item : mixed) : boolean {\n    try {\n        if (!item) {\n            return false;\n        }\n\n        if (typeof Promise !== 'undefined' && item instanceof Promise) {\n            return true;\n        }\n\n        if (typeof window !== 'undefined' && typeof window.Window === 'function' && item instanceof window.Window) {\n            return false;\n        }\n\n        if (typeof window !== 'undefined' && typeof window.constructor === 'function' && item instanceof window.constructor) {\n            return false;\n        }\n\n        const toString = ({}).toString;\n\n        if (toString) {\n            const name = toString.call(item);\n\n            if (name === '[object Window]' || name === '[object global]' || name === '[object DOMWindow]') {\n                return false;\n            }\n        }\n\n        if (typeof item.then === 'function') {\n            return true;\n        }\n    } catch (err) {\n        return false;\n    }\n\n    return false;\n}\n","/* @flow */\n\nimport type { ZalgoPromise } from './promise';\n\nconst dispatchedErrors = [];\nconst possiblyUnhandledPromiseHandlers : Array<(mixed, promise? : ZalgoPromise<mixed>) => void> = [];\n\nexport function dispatchPossiblyUnhandledError<T>(err : mixed, promise : ZalgoPromise<T>) {\n\n    if (dispatchedErrors.indexOf(err) !== -1) {\n        return;\n    }\n\n    dispatchedErrors.push(err);\n\n    setTimeout(() => {\n        if (__DEBUG__) {\n            // $FlowFixMe\n            throw new Error(`${ err.stack || err.toString() }\\n\\nFrom promise:\\n\\n${ promise.stack }`);\n        }\n\n        throw err;\n    }, 1);\n\n    for (let j = 0; j < possiblyUnhandledPromiseHandlers.length; j++) {\n        // $FlowFixMe\n        possiblyUnhandledPromiseHandlers[j](err, promise);\n    }\n}\n\nexport function onPossiblyUnhandledException(handler : (mixed, promise? : ZalgoPromise<mixed>) => void) : {| cancel : () => void |} {\n    possiblyUnhandledPromiseHandlers.push(handler);\n\n    return {\n        cancel() {\n            possiblyUnhandledPromiseHandlers.splice(possiblyUnhandledPromiseHandlers.indexOf(handler), 1);\n        }\n    };\n}\n","/* @flow */\n\nimport type { ZalgoPromise } from './promise';\n\nlet activeCount = 0;\nlet flushPromise;\n\nfunction flushActive() {\n    if (!activeCount && flushPromise) {\n        const promise = flushPromise;\n        flushPromise = null;\n        promise.resolve();\n    }\n}\n\nexport function startActive() {\n    activeCount += 1;\n}\n\nexport function endActive() {\n    activeCount -= 1;\n    flushActive();\n}\n\nexport function awaitActive(Zalgo : Class<ZalgoPromise<*>>) : ZalgoPromise<void> { // eslint-disable-line no-undef\n    const promise = flushPromise = flushPromise || new Zalgo();\n    flushActive();\n    return promise;\n}\n","/* @flow */\n\nimport { isPromise } from './utils';\nimport { onPossiblyUnhandledException, dispatchPossiblyUnhandledError } from './exceptions';\nimport { startActive, endActive, awaitActive } from './flush';\n\nexport class ZalgoPromise<R : mixed> {\n\n    resolved : boolean\n    rejected : boolean\n    errorHandled : boolean\n    value : R\n    error : mixed\n    // eslint-disable-next-line flowtype/no-mutable-array\n    handlers : Array<{|\n        promise : ZalgoPromise<*>,\n        onSuccess : void | (result : R) => mixed,\n        onError : void | (error : mixed) => mixed\n    |}>\n    dispatching : boolean\n    stack : string\n\n    constructor(handler : ?(resolve : (result : R) => void, reject : (error : mixed) => void) => void) {\n\n        this.resolved = false;\n        this.rejected = false;\n        this.errorHandled = false;\n\n        this.handlers = [];\n\n        if (handler) {\n\n            let result;\n            let error;\n            let resolved = false;\n            let rejected = false;\n            let isAsync = false;\n\n            startActive();\n\n            try {\n                handler(res => {\n                    if (isAsync) {\n                        this.resolve(res);\n                    } else {\n                        resolved = true;\n                        result = res;\n                    }\n\n                }, err => {\n                    if (isAsync) {\n                        this.reject(err);\n                    } else {\n                        rejected = true;\n                        error = err;\n                    }\n                });\n\n            } catch (err) {\n                endActive();\n                this.reject(err);\n                return;\n            }\n\n            endActive();\n\n            isAsync = true;\n\n            if (resolved) {\n                // $FlowFixMe\n                this.resolve(result);\n            } else if (rejected) {\n                this.reject(error);\n            }\n        }\n\n        if (__DEBUG__) {\n            try {\n                throw new Error(`ZalgoPromise`);\n            } catch (err) {\n                this.stack = err.stack;\n            }\n        }\n    }\n\n    resolve(result : R) : ZalgoPromise<R> {\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        if (isPromise(result)) {\n            throw new Error('Can not resolve promise with another promise');\n        }\n\n        this.resolved = true;\n        this.value = result;\n        this.dispatch();\n\n        return this;\n    }\n\n    reject(error : mixed) : ZalgoPromise<R> {\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        if (isPromise(error)) {\n            throw new Error('Can not reject promise with another promise');\n        }\n\n        if (!error) {\n            // $FlowFixMe\n            const err = (error && typeof error.toString === 'function' ? error.toString() : Object.prototype.toString.call(error));\n            error = new Error(`Expected reject to be called with Error, got ${ err }`);\n        }\n\n        this.rejected = true;\n        this.error = error;\n\n        if (!this.errorHandled) {\n            setTimeout(() => {\n                if (!this.errorHandled) {\n                    dispatchPossiblyUnhandledError(error, this);\n                }\n            }, 1);\n        }\n\n        this.dispatch();\n\n        return this;\n    }\n\n    asyncReject(error : mixed) : ZalgoPromise<R> {\n        this.errorHandled = true;\n        this.reject(error);\n        return this;\n    }\n    \n    dispatch() {\n\n        const { dispatching, resolved, rejected, handlers } = this;\n\n        if (dispatching) {\n            return;\n        }\n\n        if (!resolved && !rejected) {\n            return;\n        }\n\n        this.dispatching = true;\n        startActive();\n\n        const chain = <T>(firstPromise : ZalgoPromise<T>, secondPromise : ZalgoPromise<T>) => {\n            return firstPromise.then(res => {\n                secondPromise.resolve(res);\n            }, err => {\n                secondPromise.reject(err);\n            });\n        };\n\n        for (let i = 0; i < handlers.length; i++) {\n\n            const { onSuccess, onError, promise } = handlers[i];\n\n            let result;\n\n            if (resolved) {\n\n                try {\n                    result = onSuccess ? onSuccess(this.value) : this.value;\n                } catch (err) {\n                    promise.reject(err);\n                    continue;\n                }\n\n            } else if (rejected) {\n\n                if (!onError) {\n                    promise.reject(this.error);\n                    continue;\n                }\n\n                try {\n                    result = onError(this.error);\n                } catch (err) {\n                    promise.reject(err);\n                    continue;\n                }\n            }\n\n            if (result instanceof ZalgoPromise && (result.resolved || result.rejected)) {\n                const promiseResult : ZalgoPromise<*> = result;\n\n                if (promiseResult.resolved) {\n                    promise.resolve(promiseResult.value);\n                } else {\n                    promise.reject(promiseResult.error);\n                }\n\n                promiseResult.errorHandled = true;\n\n            } else if (isPromise(result)) {\n\n                if (result instanceof ZalgoPromise && (result.resolved || result.rejected)) {\n                    if (result.resolved) {\n                        promise.resolve(result.value);\n                    } else {\n                        promise.reject(result.error);\n                    }\n\n                } else {\n                    // $FlowFixMe\n                    chain(result, promise);\n                }\n\n            } else {\n\n                promise.resolve(result);\n            }\n        }\n\n        handlers.length = 0;\n        this.dispatching = false;\n        endActive();\n    }\n\n    then<X, Y>(onSuccess : void | (result : R) => (ZalgoPromise<X> | Y), onError : void | (error : mixed) => (ZalgoPromise<X> | Y)) : ZalgoPromise<X | Y> {\n\n        if (onSuccess && typeof onSuccess !== 'function' && !onSuccess.call) {\n            throw new Error('Promise.then expected a function for success handler');\n        }\n\n        if (onError && typeof onError !== 'function' && !onError.call) {\n            throw new Error('Promise.then expected a function for error handler');\n        }\n\n        const promise = new ZalgoPromise();\n\n        this.handlers.push({\n            promise,\n            onSuccess,\n            onError\n        });\n\n        this.errorHandled = true;\n\n        this.dispatch();\n\n        return promise;\n    }\n\n    catch<X, Y>(onError : (error : mixed) => ZalgoPromise<X> | Y) : ZalgoPromise<X | Y> {\n        // $FlowFixMe incompatible-call\n        const resultPromise : ZalgoPromise<X | Y> = this.then(undefined, onError);\n        return resultPromise;\n    }\n\n    finally(onFinally : () => mixed) : ZalgoPromise<R> {\n\n        if (onFinally && typeof onFinally !== 'function' && !onFinally.call) {\n            throw new Error('Promise.finally expected a function');\n        }\n\n        return this.then((result) => {\n            return ZalgoPromise.try(onFinally)\n                .then(() => {\n                    return result;\n                });\n        }, (err) => {\n            return ZalgoPromise.try(onFinally)\n                .then(() => {\n                    throw err;\n                });\n        });\n    }\n\n    timeout(time : number, err : ?Error) : ZalgoPromise<R> {\n\n        if (this.resolved || this.rejected) {\n            return this;\n        }\n\n        const timeout = setTimeout(() => {\n\n            if (this.resolved || this.rejected) {\n                return;\n            }\n\n            this.reject(err || new Error(`Promise timed out after ${ time }ms`));\n\n        }, time);\n\n        return this.then(result => {\n            clearTimeout(timeout);\n            return result;\n        });\n    }\n\n    // $FlowFixMe\n    toPromise() : Promise<R> {\n        // $FlowFixMe\n        if (typeof Promise === 'undefined') {\n            throw new TypeError(`Could not find Promise`);\n        }\n        // $FlowFixMe\n        return Promise.resolve(this); // eslint-disable-line compat/compat\n    }\n\n    static resolve<X, Y>(value : ZalgoPromise<X> | Y) : ZalgoPromise<X | Y> {\n\n        if (value instanceof ZalgoPromise) {\n            // $FlowFixMe incompatible-type-arg\n            const result : ZalgoPromise<X | Y> = value;\n            return result;\n        }\n\n        if (isPromise(value)) {\n            // $FlowFixMe\n            return new ZalgoPromise((resolve, reject) => value.then(resolve, reject));\n        }\n\n        return new ZalgoPromise().resolve(value);\n    }\n\n    static reject(error : mixed) : ZalgoPromise<R> {\n        return new ZalgoPromise().reject(error);\n    }\n\n    static asyncReject(error : mixed) : ZalgoPromise<R> {\n        return new ZalgoPromise().asyncReject(error);\n    }\n\n    static all<X : $ReadOnlyArray<mixed>>(promises : X) : ZalgoPromise<$TupleMap<X, <Y>(ZalgoPromise<Y> | Y) => Y>> { // eslint-disable-line no-undef\n\n        const promise = new ZalgoPromise();\n        let count = promises.length;\n        // eslint-disable-next-line no-undef\n        const results = ([] : $TupleMap<X, <Y>(ZalgoPromise<Y> | Y) => Y>).slice();\n\n        if (!count) {\n            promise.resolve(results);\n            return promise;\n        }\n\n        const chain = <T>(i : number, firstPromise : ZalgoPromise<T>, secondPromise : ZalgoPromise<T>) => {\n            return firstPromise.then(res => {\n                results[i] = res;\n                count -= 1;\n                if (count === 0) {\n                    promise.resolve(results);\n                }\n            }, err => {\n                secondPromise.reject(err);\n            });\n        };\n\n        for (let i = 0; i < promises.length; i++) {\n            const prom = promises[i];\n\n            if (prom instanceof ZalgoPromise) {\n                if (prom.resolved) {\n                    results[i] = prom.value;\n                    count -= 1;\n                    continue;\n                }\n            } else if (!isPromise(prom)) {\n                results[i] = prom;\n                count -= 1;\n                continue;\n            }\n\n            chain(i, ZalgoPromise.resolve(prom), promise);\n        }\n\n        if (count === 0) {\n            promise.resolve(results);\n        }\n\n        return promise;\n    }\n\n    static hash<O : Object>(promises : O) : ZalgoPromise<$ObjMap<O, <Y>(ZalgoPromise<Y> | Y) => Y>> { // eslint-disable-line no-undef\n        const result = {};\n        const awaitPromises = [];\n\n        for (const key in promises) {\n            if (promises.hasOwnProperty(key)) {\n                const value = promises[key];\n\n                if (isPromise(value)) {\n                    awaitPromises.push(value.then(res => {\n                        result[key] = res;\n                    }));\n                } else {\n                    result[key] = value;\n                }\n            }\n        }\n        \n        return ZalgoPromise.all(awaitPromises).then(() => result);\n    }\n\n    static map<T, X>(items : $ReadOnlyArray<T>, method : (T) => (ZalgoPromise<X> | X)) : ZalgoPromise<$ReadOnlyArray<X>> {\n        // $FlowFixMe\n        return ZalgoPromise.all(items.map(method));\n    }\n\n    static onPossiblyUnhandledException(handler : (err : mixed) => void) : {| cancel : () => void |} {\n        return onPossiblyUnhandledException(handler);\n    }\n\n    static try<X, Y, C : mixed, A : $ReadOnlyArray<mixed>>(method : (...args : $ReadOnlyArray<mixed>) => (ZalgoPromise<X> | Y), context? : C, args? : A) : ZalgoPromise<X | Y> {\n\n        if (method && typeof method !== 'function' && !method.call) {\n            throw new Error('Promise.try expected a function');\n        }\n\n        let result : ZalgoPromise<X> | Y;\n\n        startActive();\n        \n        try {\n            result = method.apply(context, args || []);\n        } catch (err) {\n            endActive();\n            return ZalgoPromise.reject(err);\n        }\n\n        endActive();\n\n        // $FlowFixMe incompatible-call\n        const resultPromise = ZalgoPromise.resolve(result);\n\n        return resultPromise;\n    }\n\n    static delay(delay : number) : ZalgoPromise<void> {\n        return new ZalgoPromise(resolve => {\n            setTimeout(resolve, delay);\n        });\n    }\n\n    static isPromise(value : mixed) : boolean {\n\n        if (value && value instanceof ZalgoPromise) {\n            return true;\n        }\n\n        return isPromise(value);\n    }\n\n    static flush() : ZalgoPromise<void> {\n        return awaitActive(ZalgoPromise);\n    }\n}\n","/**\n * Memoize a function based on all arguments\n * @param {Function} fn Function to memoize\n * @returns {Function} Memoized function\n */\nexport function memoize(fn) {\n    const cache = new Map();\n\n    return (...args) => {\n        const cacheKey = JSON.stringify(args);\n\n        if (!cache.has(cacheKey)) {\n            cache.set(cacheKey, fn(...args));\n        }\n\n        return cache.get(cacheKey);\n    };\n}\n\n/**\n * Memoize a unary function that takes has a single object parameter\n * @param {Function} fn Function to memoize\n * @param {Array<string>} props Property names to cache against\n * @returns {Function} Memoized function\n */\nexport function memoizeOnProps(fn, props) {\n    const cache = new Map();\n\n    return (options, ignoreCache = false) => {\n        const cacheKey = JSON.stringify(props.map(key => options[key]));\n\n        if (!cache.has(cacheKey) || ignoreCache) {\n            cache.set(cacheKey, fn(options));\n        }\n\n        return cache.get(cacheKey);\n    };\n}\n\n/**\n * Partially apply a function with specified parameters\n * @param {Function} fn Function to partially apply\n * @param  {...any} intialArgs Arguments to partially apply\n * @returns {Function} Partially applied function\n */\nexport function partial(fn, ...intialArgs) {\n    return (...nextArgs) => fn(...intialArgs, ...nextArgs);\n}\n\n/**\n * Curry a function\n * @param {Function} fn Function to curry\n * @param {Number} arity Number of function parameters\n * @returns {Function} Curried function\n */\nexport function curry(fn, arity = fn.length) {\n    return function curried(...args) {\n        if (args.length < arity) {\n            return (...nextArgs) => curried(...args, ...nextArgs);\n        }\n\n        return fn(...args);\n    };\n}\n\n/**\n * Higher order function to run an effectful function\n * and still pass along the arguments for chaining\n * @param {Function} fn Effectful function\n * @returns {Function} Pass through function\n */\nexport function passThrough(fn) {\n    return arg => {\n        const result = fn(arg);\n        return typeof result === 'object' && result.then ? result.then(() => arg) : arg;\n    };\n}\n\n/**\n * Chain function calls together, starting with an initial value\n * @param  {...Function} args Functions\n * @returns {Function} Function that runs initial value through all passed in functions\n */\nexport function pipe(...args) {\n    return initialValue => args.reduce((accumulator, fn) => fn(accumulator), initialValue);\n}\n\n/**\n * Retrieve a single property from an object\n * @param {String} prop Property to retrieve\n * @param {Object} obj Object to get get property from\n * @returns {Any} Object property value\n */\nexport const pluck = curry((prop, obj) => obj[prop]);\n\n/**\n * Create an object and assign the value to the property\n * @param {String} prop Property name\n * @param {Any} value Property value\n * @returns {Object} New object with property and value\n */\nexport const assignToProp = curry((prop, value) => ({ [prop]: value }));\n","/** @jsx node */\nimport arrayFind from 'core-js-pure/stable/array/find';\nimport arrayIncludes from 'core-js-pure/stable/array/includes';\nimport stringIncludes from 'core-js-pure/stable/string/includes';\nimport objectAssign from 'core-js-pure/stable/object/assign';\nimport objectEntries from 'core-js-pure/stable/object/entries';\nimport { node, dom } from 'jsx-pragmatic/src';\nimport { ZalgoPromise } from 'zalgo-promise/src';\n\nimport { partial, memoize } from './functional';\n\n/**\n * Create a state object and pass back a reference and update function\n * @param {Object} initialState Initial object to store in state\n * @returns {[Object, Function]} State object reference and update function\n */\nexport function createState(initialState = {}) {\n    const state = { ...initialState };\n    return [state, partial(objectAssign, state)];\n}\n\nexport function getDataByTag(data, tag) {\n    let selected = arrayFind(data, ([, tags]) => arrayIncludes(tags, tag));\n    if (selected) {\n        return selected[0];\n    }\n\n    if (stringIncludes(tag, '.')) {\n        const [fallbackTag] = tag.split('.', 1);\n        selected = arrayFind(data, ([, tags]) => arrayIncludes(tags, fallbackTag));\n        if (selected) {\n            return selected[0];\n        }\n    }\n\n    selected = arrayFind(data, ([, tags]) => arrayIncludes(tags, 'default'));\n    if (selected) {\n        return selected[0];\n    }\n\n    return '';\n}\n\nexport function request(method, url, { data, headers, withCredentials } = {}) {\n    return new ZalgoPromise((resolve, reject) => {\n        const xhttp = new XMLHttpRequest();\n\n        if (withCredentials) {\n            // Necessary to send cookies with cross-origin requests\n            xhttp.withCredentials = true;\n        }\n\n        xhttp.onreadystatechange = () => {\n            if (xhttp.readyState === 4) {\n                const responseHeaders = xhttp\n                    .getAllResponseHeaders()\n                    .trim() // Remove trailing newline characters\n                    .split('\\n')\n                    .reduce((accumulator, header) => {\n                        const [key, val] = header.trim().split(': ');\n                        return {\n                            ...accumulator,\n                            // IE11 uses capitalized header names\n                            [key.toLowerCase()]: val\n                        };\n                    }, {});\n\n                switch (xhttp.status) {\n                    case 200:\n                        resolve({\n                            headers: responseHeaders,\n                            data:\n                                responseHeaders['content-type'] &&\n                                stringIncludes(responseHeaders['content-type'], 'application/json')\n                                    ? JSON.parse(xhttp.responseText)\n                                    : xhttp.responseText\n                        });\n                        break;\n                    case 204:\n                        resolve({ headers: responseHeaders });\n                        break;\n                    default:\n                        reject(new Error('Request failed'));\n                }\n            }\n        };\n\n        xhttp.open(method, url, true);\n\n        if (headers) {\n            objectEntries(headers).forEach(([header, value]) => {\n                xhttp.setRequestHeader(header, value);\n            });\n        }\n\n        xhttp.send(typeof data === 'object' ? JSON.stringify(data) : data);\n    });\n}\n\nexport function createEvent(name) {\n    if (typeof Event === 'function') {\n        return new Event(name);\n    }\n\n    // IE11 support\n    const event = document.createEvent('Event');\n    event.initEvent(name, true, true);\n\n    return event;\n}\n\nexport const dynamicImport = memoize(url => {\n    return new ZalgoPromise(resolve => {\n        const script = document.createElement('script');\n        script.src = url;\n        script.addEventListener('load', () => {\n            document.body.removeChild(script);\n            resolve();\n        });\n\n        if (document.readyState === 'loading') {\n            window.addEventListener('DOMContentLoaded', () => document.body.appendChild(script));\n        } else {\n            document.body.appendChild(script);\n        }\n    });\n});\n\n// // Date.now() altered on some sites: https://www.hydropool.com\nexport const getCurrentTime = () => new Date().getTime();\n\n// Memoized so that the 2 return functions can be called from different modules\nexport const viewportHijack = memoize(() => {\n    const viewport =\n        document.head.querySelector('meta[name=\"viewport\"]') ||\n        (<meta name=\"viewport\" content=\"\" />).render(dom({ doc: document }));\n\n    // Ensure a viewport exists in the DOM\n    if (!viewport.parentNode) {\n        document.head.appendChild(viewport);\n    }\n\n    return [\n        // We store state on the DOM elements themselves because we do not want multiple SDK scripts\n        // with their own states causing an error preventing elements from being updated as needed\n        () => {\n            if (viewport.__pp_prev_content__) {\n                // Viewport has already been hijacked - do nothing for now\n                // This can happen when multiple messages are clicked before the modal loads\n                return;\n            }\n\n            viewport.__pp_prev_content__ = viewport.getAttribute('content') ?? '';\n            viewport.setAttribute(\n                'content',\n                'width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, minimal-ui, shrink-to-fit=no'\n            );\n\n            document.body.__pp_prev_overflow__ = document.body.style.overflow ?? '';\n            document.body.__pp_prev_msOverflowStyle__ = document.body.style.msOverflowStyle ?? '';\n            document.body.style.setProperty('overflow', 'hidden');\n            document.body.style.setProperty('-ms-overflow-style', 'scrollbar');\n        },\n        () => {\n            viewport.setAttribute('content', viewport.__pp_prev_content__);\n            delete viewport.__pp_prev_content__;\n\n            document.body.style.setProperty('overflow', document.body.__pp_prev_overflow__);\n            document.body.style.setProperty('-ms-overflow-style', document.body.__pp_prev_msOverflowStyle__);\n            delete document.body.__pp_prev_overflow__;\n            delete document.body.__pp_prev_msOverflowStyle__;\n        }\n    ];\n});\n\n// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#improving_scrolling_performance_with_passive_listeners\nexport const getEventListenerPassiveOptionIfSupported = () => {\n    let passiveIfSupported = false;\n\n    try {\n        // Create dummy event listener so that if supported, the object will be crawled\n        // for the passive flag telling us that the option is supported in this browser\n        window.addEventListener(\n            '__test__',\n            null,\n            Object.defineProperty({}, 'passive', {\n                // eslint-disable-next-line getter-return\n                get() {\n                    passiveIfSupported = { passive: true };\n                }\n            })\n        );\n    } catch (err) {} // eslint-disable-line no-empty\n\n    return passiveIfSupported;\n};\n\nexport function getProductForOffer(offer) {\n    if (typeof offer === 'undefined') {\n        return 'NONE';\n    }\n\n    switch (offer.toUpperCase()) {\n        case 'GPL':\n        case 'GPLQ':\n        case 'GPLNQ':\n        case 'GPLNQ_RANGE':\n        case 'PL':\n        case 'PLQ':\n        case 'GPL:EQZ':\n        case 'GPL:GTZ':\n        case 'GPLQ:EQZ':\n        case 'GPLQ:GTZ':\n        case 'GPL:EQZ:NON-DE':\n        case 'GPL:GTZ:NON-DE':\n        case 'GPLQ:EQZ:NON-DE':\n        case 'GPLQ:GTZ:NON-DE':\n            return 'GPL';\n        case 'EZP':\n        case 'EZP:ANY:EQZ':\n        case 'EZP:ANY:GTZ':\n        case 'PALA:MULTI:EQZ':\n        case 'PALA:MULTI:GTZ':\n        case 'PALA:SINGLE:EQZ':\n        case 'PALA:SINGLE:GTZ':\n            return 'EZP';\n        case 'INST':\n        case 'INST:ANY:EQZ':\n        case 'INST:ANY:GTZ':\n        case 'PALAQ:ANY:EQZ':\n        case 'PALAQ:ANY:GTZ':\n            return 'INST';\n        default:\n            return 'NI';\n    }\n}\n","/* @flow */\n/* eslint max-lines: 0 */\n\nimport { isRegex, noop } from './util';\nimport type { CrossDomainWindowType, SameDomainWindowType, DomainMatcher } from './types';\nimport { PROTOCOL, WILDCARD } from './constants';\n\nconst IE_WIN_ACCESS_ERROR = 'Call was rejected by callee.\\r\\n';\n\nexport function isFileProtocol(win : SameDomainWindowType = window) : boolean {\n    return win.location.protocol === PROTOCOL.FILE;\n}\n\nexport function isAboutProtocol(win : SameDomainWindowType = window) : boolean {\n    return win.location.protocol === PROTOCOL.ABOUT;\n}\n\nexport function getParent(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n\n    if (!win) {\n        return;\n    }\n\n    try {\n        if (win.parent && win.parent !== win) {\n            return win.parent;\n        }\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function getOpener(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n\n    if (!win) {\n        return;\n    }\n\n    // Make sure we're not actually an iframe which has had window.open() called on us\n    if (getParent(win)) {\n        return;\n    }\n\n    try {\n        return win.opener;\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function canReadFromWindow(win : CrossDomainWindowType | SameDomainWindowType) : boolean {\n    try {\n        // $FlowFixMe\n        noop(win && win.location && win.location.href);\n        return true;\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function getActualDomain(win? : SameDomainWindowType = window) : string {\n\n    const location = win.location;\n\n    if (!location) {\n        throw new Error(`Can not read window location`);\n    }\n\n    const protocol = location.protocol;\n\n    if (!protocol) {\n        throw new Error(`Can not read window protocol`);\n    }\n\n    if (protocol === PROTOCOL.FILE) {\n        return `${ PROTOCOL.FILE }//`;\n    }\n\n    if (protocol === PROTOCOL.ABOUT) {\n\n        const parent = getParent(win);\n        if (parent && canReadFromWindow(parent)) {\n            // $FlowFixMe\n            return getActualDomain(parent);\n        }\n\n        return `${ PROTOCOL.ABOUT }//`;\n    }\n\n    const host = location.host;\n\n    if (!host) {\n        throw new Error(`Can not read window host`);\n    }\n\n    return `${ protocol }//${ host }`;\n}\n\nexport function getDomain(win? : SameDomainWindowType = window) : string {\n\n    const domain = getActualDomain(win);\n\n    if (domain && win.mockDomain && win.mockDomain.indexOf(PROTOCOL.MOCK) === 0) {\n        return win.mockDomain;\n    }\n\n    return domain;\n}\n\nexport function isBlankDomain(win : CrossDomainWindowType) : boolean {\n    try {\n        // $FlowFixMe\n        if (!win.location.href) {\n            return true;\n        }\n\n        if (win.location.href === 'about:blank') {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function isActuallySameDomain(win : CrossDomainWindowType) : boolean {\n\n    try {\n        if (win === window) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        const desc = Object.getOwnPropertyDescriptor(win, 'location');\n\n        if (desc && desc.enumerable === false) {\n            return false;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        // $FlowFixMe\n        if (isAboutProtocol(win) && canReadFromWindow(win)) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        // $FlowFixMe\n        if (getActualDomain(win) === getActualDomain(window)) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function isSameDomain(win : CrossDomainWindowType | SameDomainWindowType) : boolean {\n\n    if (!isActuallySameDomain(win)) {\n        return false;\n    }\n\n    try {\n\n        if (win === window) {\n            return true;\n        }\n\n        // $FlowFixMe\n        if (isAboutProtocol(win) && canReadFromWindow(win)) {\n            return true;\n        }\n\n        // $FlowFixMe\n        if (getDomain(window) === getDomain(win)) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\n\nexport function assertSameDomain(win : CrossDomainWindowType | SameDomainWindowType) : SameDomainWindowType {\n    if (!isSameDomain(win)) {\n        throw new Error(`Expected window to be same domain`);\n    }\n\n    // $FlowFixMe\n    return win;\n}\n\nexport function getParents(win : CrossDomainWindowType) : $ReadOnlyArray<CrossDomainWindowType> {\n\n    const result = [];\n\n    try {\n\n        while (win.parent !== win) {\n            result.push(win.parent);\n            win = win.parent;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return result;\n}\n\nexport function isAncestorParent(parent : CrossDomainWindowType, child : CrossDomainWindowType) : boolean {\n\n    if (!parent || !child) {\n        return false;\n    }\n\n    const childParent = getParent(child);\n\n    if (childParent) {\n        return childParent === parent;\n    }\n\n    if (getParents(child).indexOf(parent) !== -1) {\n        return true;\n    }\n\n    return false;\n}\n\nexport function getFrames(win : CrossDomainWindowType) : $ReadOnlyArray<CrossDomainWindowType> {\n\n    const result = [];\n\n    let frames;\n\n    try {\n        frames = win.frames;\n    } catch (err) {\n        frames = win;\n    }\n\n    let len;\n\n    try {\n        len = frames.length;\n    } catch (err) {\n        // pass\n    }\n\n    if (len === 0) {\n        return result;\n    }\n\n    if (len) {\n        for (let i = 0; i < len; i++) {\n\n            let frame;\n\n            try {\n                frame = frames[i];\n            } catch (err) {\n                continue;\n            }\n\n            result.push(frame);\n        }\n\n        return result;\n    }\n\n    for (let i = 0; i < 100; i++) {\n        let frame;\n\n        try {\n            frame = frames[i];\n        } catch (err) {\n            return result;\n        }\n\n        if (!frame) {\n            return result;\n        }\n\n        result.push(frame);\n    }\n\n    return result;\n}\n\n\nexport function getAllChildFrames(win : CrossDomainWindowType) : $ReadOnlyArray<CrossDomainWindowType> {\n\n    const result = [];\n\n    for (const frame of getFrames(win)) {\n        result.push(frame);\n\n        for (const childFrame of getAllChildFrames(frame)) {\n            result.push(childFrame);\n        }\n    }\n\n    return result;\n}\n\nexport function getTop(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n\n    try {\n        if (win.top) {\n            return win.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    if (getParent(win) === win) {\n        return win;\n    }\n\n    try {\n        if (isAncestorParent(window, win) && window.top) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (isAncestorParent(win, window) && window.top) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    for (const frame of getAllChildFrames(win)) {\n        try {\n            if (frame.top) {\n                return frame.top;\n            }\n        } catch (err) {\n            // pass\n        }\n\n        if (getParent(frame) === frame) {\n            return frame;\n        }\n    }\n}\n\nexport function getNextOpener(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n    return getOpener(getTop(win) || win);\n}\n\nexport function getUltimateTop(win? : CrossDomainWindowType = window) : CrossDomainWindowType {\n    const opener = getNextOpener(win);\n\n    if (opener) {\n        return getUltimateTop(opener);\n    }\n\n    return top;\n}\n\nexport function getAllFramesInWindow(win : CrossDomainWindowType) : $ReadOnlyArray<CrossDomainWindowType> {\n    const top = getTop(win);\n\n    if (!top) {\n        throw new Error(`Can not determine top window`);\n    }\n\n    let result = [ ...getAllChildFrames(top), top ];\n\n    // Win may be in shadow dom\n    if (result.indexOf(win) === -1) {\n        result = [ ...result, win, ...getAllChildFrames(win) ];\n    }\n\n    return result;\n}\n\nexport function getAllWindows(win? : CrossDomainWindowType = window) : $ReadOnlyArray<CrossDomainWindowType> {\n    const frames = getAllFramesInWindow(win);\n    const opener = getNextOpener(win);\n\n    if (opener) {\n        return [ ...getAllWindows(opener), ...frames ];\n    } else {\n        return frames;\n    }\n}\n\nexport function isTop(win : CrossDomainWindowType) : boolean {\n    return win === getTop(win);\n}\n\nexport function isFrameWindowClosed(frame : HTMLIFrameElement) : boolean {\n\n    if (!frame.contentWindow) {\n        return true;\n    }\n\n    if (!frame.parentNode) {\n        return true;\n    }\n\n    const doc = frame.ownerDocument;\n\n    if (doc && doc.documentElement && !doc.documentElement.contains(frame)) {\n        let parent = frame;\n\n        while (parent.parentNode && parent.parentNode !== parent) {\n            parent = parent.parentNode;\n        }\n\n        // $FlowFixMe\n        if (!parent.host || !doc.documentElement.contains(parent.host)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction safeIndexOf<T>(collection : $ReadOnlyArray<T>, item : T) : number {\n    for (let i = 0; i < collection.length; i++) {\n\n        try {\n            if (collection[i] === item) {\n                return i;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    return -1;\n}\n\nconst iframeWindows = [];\nconst iframeFrames = [];\n\nexport function isWindowClosed(win : CrossDomainWindowType, allowMock : boolean = true) : boolean {\n\n    try {\n        if (win === window) {\n            return false;\n        }\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (!win) {\n            return true;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (win.closed) {\n            return true;\n        }\n\n    } catch (err) {\n\n        // I love you so much IE\n\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return false;\n        }\n\n        return true;\n    }\n\n\n    if (allowMock && isSameDomain(win)) {\n        try {\n            // $FlowFixMe\n            if (win.mockclosed) {\n                return true;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    // Mobile safari\n\n    try {\n        if (!win.parent || !win.top) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    // Yes, this actually happens in IE. win === win errors out when the window\n    // is from an iframe, and the iframe was removed from the page.\n\n    try {\n        noop(win === win); // eslint-disable-line no-self-compare\n    } catch (err) {\n        return true;\n    }\n\n    // IE orphaned frame\n\n    const iframeIndex = safeIndexOf(iframeWindows, win);\n\n    if (iframeIndex !== -1) {\n        const frame = iframeFrames[iframeIndex];\n\n        if (frame && isFrameWindowClosed(frame)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction cleanIframes() {\n    for (let i = 0; i < iframeWindows.length; i++) {\n        let closed = false;\n\n        try {\n            closed = iframeWindows[i].closed;\n        } catch (err) {\n            // pass\n        }\n\n        if (closed) {\n            iframeFrames.splice(i, 1);\n            iframeWindows.splice(i, 1);\n        }\n    }\n}\n\nexport function linkFrameWindow(frame : HTMLIFrameElement) {\n\n    cleanIframes();\n\n    if (frame && frame.contentWindow) {\n        try {\n            iframeWindows.push(frame.contentWindow);\n            iframeFrames.push(frame);\n        } catch (err) {\n            // pass\n        }\n    }\n}\n\nexport function getUserAgent(win : ?SameDomainWindowType) : string {\n    win = win || window;\n    return win.navigator.mockUserAgent || win.navigator.userAgent;\n}\n\n\nexport function getFrameByName(win : CrossDomainWindowType, name : string) : ?CrossDomainWindowType {\n\n    const winFrames = getFrames(win);\n\n    for (const childFrame of winFrames) {\n        try {\n            // $FlowFixMe\n            if (isSameDomain(childFrame) && childFrame.name === name && winFrames.indexOf(childFrame) !== -1) {\n                return childFrame;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    try {\n        // $FlowFixMe\n        if (winFrames.indexOf(win.frames[name]) !== -1) {\n            // $FlowFixMe\n            return win.frames[name];\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (winFrames.indexOf(win[name]) !== -1) {\n            return win[name];\n        }\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function findChildFrameByName(win : CrossDomainWindowType, name : string) : ?CrossDomainWindowType {\n\n    const frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    for (const childFrame of getFrames(win)) {\n        const namedFrame = findChildFrameByName(childFrame, name);\n\n        if (namedFrame) {\n            return namedFrame;\n        }\n    }\n}\n\nexport function findFrameByName(win : CrossDomainWindowType, name : string) : ?CrossDomainWindowType {\n    const frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    const top = getTop(win) || win;\n\n    return findChildFrameByName(top, name);\n}\n\nexport function isParent(win : CrossDomainWindowType, frame : CrossDomainWindowType) : boolean {\n\n    const frameParent = getParent(frame);\n\n    if (frameParent) {\n        return frameParent === win;\n    }\n\n    for (const childFrame of getFrames(win)) {\n        if (childFrame === frame) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function isOpener(parent : CrossDomainWindowType, child : CrossDomainWindowType) : boolean {\n\n    return parent === getOpener(child);\n}\n\nexport function getAncestor(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n    win = win || window;\n\n    const opener = getOpener(win);\n\n    if (opener) {\n        return opener;\n    }\n\n    const parent = getParent(win);\n\n    if (parent) {\n        return parent;\n    }\n}\n\nexport function getAncestors(win : CrossDomainWindowType) : $ReadOnlyArray<CrossDomainWindowType> {\n\n    const results = [];\n\n    let ancestor = win;\n\n    while (ancestor) {\n        ancestor = getAncestor(ancestor);\n        if (ancestor) {\n            results.push(ancestor);\n        }\n    }\n\n    return results;\n}\n\n\nexport function isAncestor(parent : CrossDomainWindowType, child : CrossDomainWindowType) : boolean {\n\n    const actualParent = getAncestor(child);\n\n    if (actualParent) {\n        if (actualParent === parent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    if (child === parent) {\n        return false;\n    }\n\n    if (getTop(child) === child) {\n        return false;\n    }\n\n    for (const frame of getFrames(parent)) {\n        if (frame === child) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function isPopup(win? : CrossDomainWindowType = window) : boolean {\n    return Boolean(getOpener(win));\n}\n\nexport function isIframe(win? : CrossDomainWindowType = window) : boolean {\n    return Boolean(getParent(win));\n}\n\nexport function isFullpage(win? : CrossDomainWindowType = window) : boolean {\n    return Boolean(!isIframe(win) && !isPopup(win));\n}\n\nfunction anyMatch(collection1, collection2) : boolean {\n\n    for (const item1 of collection1) {\n        for (const item2 of collection2) {\n            if (item1 === item2) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n\nexport function getDistanceFromTop(win : CrossDomainWindowType = window) : number {\n    let distance = 0;\n    let parent = win;\n\n    while (parent) {\n        parent = getParent(parent);\n        if (parent) {\n            distance += 1;\n        }\n    }\n\n    return distance;\n}\n\nexport function getNthParent(win : CrossDomainWindowType, n : number = 1) : ?CrossDomainWindowType {\n    let parent = win;\n\n    for (let i = 0; i < n; i++) {\n        if (!parent) {\n            return;\n        }\n\n        parent = getParent(parent);\n    }\n\n    return parent;\n}\n\nexport function getNthParentFromTop(win : CrossDomainWindowType, n : number = 1) : ?CrossDomainWindowType {\n    return getNthParent(win, getDistanceFromTop(win) - n);\n}\n\nexport function isSameTopWindow(win1 : CrossDomainWindowType, win2 : CrossDomainWindowType) : boolean {\n\n    const top1 = getTop(win1) || win1;\n    const top2 = getTop(win2) || win2;\n\n    try {\n        if (top1 && top2) {\n            if (top1 === top2) {\n                return true;\n            }\n\n            return false;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    const allFrames1 = getAllFramesInWindow(win1);\n    const allFrames2 = getAllFramesInWindow(win2);\n\n    if (anyMatch(allFrames1, allFrames2)) {\n        return true;\n    }\n\n    const opener1 = getOpener(top1);\n    const opener2 = getOpener(top2);\n\n    if (opener1 && anyMatch(getAllFramesInWindow(opener1), allFrames2)) {\n        return false;\n    }\n\n    if (opener2 && anyMatch(getAllFramesInWindow(opener2), allFrames1)) {\n        return false;\n    }\n\n    return false;\n}\n\nexport function matchDomain(pattern : DomainMatcher, origin : DomainMatcher) : boolean {\n\n    if (typeof pattern === 'string') {\n\n        if (typeof origin === 'string') {\n            return pattern === WILDCARD || origin === pattern;\n        }\n\n        if (isRegex(origin)) {\n            return false;\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n    }\n\n    if (isRegex(pattern)) {\n\n        if (isRegex(origin)) {\n            return pattern.toString() === origin.toString();\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n\n        // $FlowFixMe\n        return Boolean(origin.match(pattern));\n    }\n\n    if (Array.isArray(pattern)) {\n\n        if (Array.isArray(origin)) {\n            return JSON.stringify(pattern) === JSON.stringify(origin);\n        }\n\n        if (isRegex(origin)) {\n            return false;\n        }\n\n        return pattern.some(subpattern => matchDomain(subpattern, origin));\n    }\n\n    return false;\n}\n\nexport function stringifyDomainPattern(pattern : DomainMatcher) : string {\n    if (Array.isArray(pattern)) {\n        return `(${ pattern.join(' | ') })`;\n    } else if (isRegex(pattern)) {\n        return `RegExp(${ pattern.toString() })`;\n    } else {\n        return pattern.toString();\n    }\n}\n\nexport function getDomainFromUrl(url : string) : string {\n\n    let domain;\n\n    if (url.match(/^(https?|mock|file):\\/\\//)) {\n        domain = url;\n    } else {\n        return getDomain();\n    }\n\n    domain = domain.split('/').slice(0, 3).join('/');\n\n    return domain;\n}\n\nexport function onCloseWindow(win : CrossDomainWindowType, callback : Function, delay : number = 1000, maxtime : number = Infinity) : {| cancel : () => void |} {\n\n    let timeout;\n\n    const check = () => {\n\n        if (isWindowClosed(win)) {\n\n            if (timeout) {\n                clearTimeout(timeout);\n            }\n\n            return callback();\n        }\n\n        if (maxtime <= 0) {\n            clearTimeout(timeout);\n        } else {\n            maxtime -= delay;\n            timeout = setTimeout(check, delay);\n        }\n    };\n\n    check();\n\n    return {\n        cancel() {\n            if (timeout) {\n                clearTimeout(timeout);\n            }\n        }\n    };\n}\n\n// eslint-disable-next-line complexity\nexport function isWindow(obj : Object) : boolean {\n\n    try {\n        if (obj === window) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        // $FlowFixMe method-unbinding\n        if (Object.prototype.toString.call(obj) === '[object Window]') {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (window.Window && obj instanceof window.Window) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (obj && obj.self === obj) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (obj && obj.parent === obj) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (obj && obj.top === obj) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (noop(obj === obj) === '__unlikely_value__') { // eslint-disable-line no-self-compare\n            return false;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (obj && obj.__cross_domain_utils_window_check__ === '__unlikely_value__') {\n            return false;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if ('postMessage' in obj && 'self' in obj && 'location' in obj) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function isBrowser() : boolean {\n    return (typeof window !== 'undefined' && typeof window.location !== 'undefined');\n}\n\nexport function isCurrentDomain(domain : string) : boolean {\n    if (!isBrowser()) {\n        return false;\n    }\n\n    return (getDomain() === domain);\n}\n\nexport function isMockDomain(domain : string) : boolean {\n    return domain.indexOf(PROTOCOL.MOCK) === 0;\n}\n\nexport function normalizeMockUrl(url : string) : string {\n    if (!isMockDomain(getDomainFromUrl(url))) {\n        return url;\n    }\n\n    if (!__TEST__) {\n        throw new Error(`Mock urls not supported out of test mode`);\n    }\n\n    return url.replace(/^mock:\\/\\/[^/]+/, getActualDomain(window));\n}\n\nexport function closeWindow(win : CrossDomainWindowType) {\n    try {\n        win.close();\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function getFrameForWindow(win : CrossDomainWindowType) : ?HTMLElement {\n    if (isSameDomain(win)) {\n        return assertSameDomain(win).frameElement;\n    }\n\n    for (const frame of document.querySelectorAll('iframe')) {\n        if (frame && frame.contentWindow && frame.contentWindow === win) {\n            return frame;\n        }\n    }\n}\n","/* @flow */\n\nexport const PROTOCOL = {\n    MOCK:  ('mock:' : 'mock:'),\n    FILE:  ('file:' : 'file:'),\n    ABOUT: ('about:' : 'about:')\n};\n\nexport const WILDCARD = '*';\n\nexport const WINDOW_TYPE = {\n    IFRAME: ('iframe' : 'iframe'),\n    POPUP:  ('popup' : 'popup')\n};\n","/* @flow */\n\nexport function safeIndexOf<T>(collection : $ReadOnlyArray<T>, item : T) : number {\n    for (let i = 0; i < collection.length; i++) {\n\n        try {\n            if (collection[i] === item) {\n                return i;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    return -1;\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function noop(...args : $ReadOnlyArray<mixed>) {\n    // pass\n}\n","/* @flow */\n\nimport { isWindow, isWindowClosed } from 'cross-domain-utils/src';\n\nimport { hasNativeWeakMap } from './native';\nimport { noop, safeIndexOf } from './util';\n\nexport class CrossDomainSafeWeakMap<K : Object, V : mixed> {\n\n    name : string\n    weakmap : ?WeakMap<K, V>\n    // eslint-disable-next-line flowtype/no-mutable-array\n    keys : Array<K>\n    // eslint-disable-next-line flowtype/no-mutable-array\n    values : Array<V>\n\n    constructor() {\n        // eslint-disable-next-line no-bitwise\n        this.name = `__weakmap_${ Math.random() * 1e9 >>> 0 }__`;\n\n        if (hasNativeWeakMap()) {\n            try {\n                this.weakmap = new WeakMap();\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this.keys  = [];\n        this.values = [];\n    }\n\n    _cleanupClosedWindows() {\n\n        const weakmap = this.weakmap;\n        const keys = this.keys;\n\n        for (let i = 0; i < keys.length; i++) {\n            const value = keys[i];\n\n            if (isWindow(value) && isWindowClosed(value)) {\n\n                if (weakmap) {\n                    try {\n                        weakmap.delete(value);\n                    } catch (err) {\n                        // pass\n                    }\n                }\n\n                keys.splice(i, 1);\n                this.values.splice(i, 1);\n\n                i -= 1;\n            }\n        }\n    }\n\n    isSafeToReadWrite(key : K) : boolean {\n\n        if (isWindow(key)) {\n            return false;\n        }\n\n        try {\n            noop(key && key.self);\n            noop(key && key[this.name]);\n        } catch (err) {\n            return false;\n        }\n\n        return true;\n    }\n\n    set(key : K, value : V) {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                weakmap.set(key, value);\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const name = this.name;\n                const entry = key[name];\n\n                if (entry && entry[0] === key) {\n                    entry[1] = value;\n                } else {\n                    Object.defineProperty(key, name, {\n                        value:    [ key, value ],\n                        writable: true\n                    });\n                }\n\n                return;\n\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const keys = this.keys;\n        const values = this.values;\n        const index = safeIndexOf(keys, key);\n\n        if (index === -1) {\n            keys.push(key);\n            values.push(value);\n        } else {\n            values[index] = value;\n        }\n    }\n\n    get(key : K) : V | void {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                if (weakmap.has(key)) {\n                    return weakmap.get(key);\n                }\n                \n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    return entry[1];\n                }\n\n                return;\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const keys = this.keys;\n        const index = safeIndexOf(keys, key);\n\n        if (index === -1) {\n            return;\n        }\n\n        return this.values[index];\n    }\n\n    delete(key : K) {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                weakmap.delete(key);\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    entry[0] = entry[1] = undefined;\n                }\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const keys = this.keys;\n        const index = safeIndexOf(keys, key);\n\n        if (index !== -1) {\n            keys.splice(index, 1);\n            this.values.splice(index, 1);\n        }\n    }\n\n    has(key : K) : boolean {\n\n        if (!key) {\n            throw new Error(`WeakMap expected key`);\n        }\n\n        const weakmap = this.weakmap;\n\n        if (weakmap) {\n            try {\n                if (weakmap.has(key)) {\n                    return true;\n                }\n            } catch (err) {\n                delete this.weakmap;\n            }\n        }\n\n        if (this.isSafeToReadWrite(key)) {\n            try {\n                const entry = key[this.name];\n\n                if (entry && entry[0] === key) {\n                    return true;\n                }\n\n                return false;\n            } catch (err) {\n                // pass\n            }\n        }\n\n        this._cleanupClosedWindows();\n\n        const index = safeIndexOf(this.keys, key);\n        return index !== -1;\n    }\n\n    getOrSet(key : K, getter : () => V) : V {\n        if (this.has(key)) {\n            // $FlowFixMe\n            return this.get(key);\n        }\n\n        const value = getter();\n        this.set(key, value);\n        return value;\n    }\n}\n","\n/* @flow */\n/* eslint max-lines: 0 */\n\nimport { ZalgoPromise } from 'zalgo-promise/src';\nimport { WeakMap } from 'cross-domain-safe-weakmap/src';\n\nimport type { CancelableType } from './types';\n\nexport function getFunctionName <T : Function>(fn : T) : string {\n    return fn.name || fn.__name__ || fn.displayName || 'anonymous';\n}\n\nexport function setFunctionName <T : Function>(fn : T, name : string) : T {\n    try {\n        delete fn.name;\n        fn.name = name;\n    } catch (err) {\n        // pass\n    }\n\n    fn.__name__ = fn.displayName = name;\n    return fn;\n}\n\nexport function base64encode(str : string) : string {\n    if (typeof btoa === 'function') {\n        return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (m, p1) => {\n            return String.fromCharCode(parseInt(p1, 16));\n        })).replace(/[=]/g, '');\n    }\n\n    if (typeof Buffer !== 'undefined') {\n        return Buffer.from(str, 'utf8').toString('base64').replace(/[=]/g, '');\n    }\n\n    throw new Error(`Can not find window.btoa or Buffer`);\n}\n\nexport function base64decode(str : string) : string {\n    if (typeof atob === 'function') {\n        // $FlowFixMe[method-unbinding]\n        return decodeURIComponent(Array.prototype.map.call(atob(str), c => {\n            // eslint-disable-next-line prefer-template\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        }).join(''));\n    }\n\n    if (typeof Buffer !== 'undefined') {\n        return Buffer.from(str, 'base64').toString('utf8');\n    }\n\n    throw new Error(`Can not find window.atob or Buffer`);\n}\n\nexport function uniqueID() : string {\n\n    const chars = '0123456789abcdef';\n\n    const randomID = 'xxxxxxxxxx'.replace(/./g, () => {\n        return chars.charAt(Math.floor(Math.random() * chars.length));\n    });\n\n    const timeID = base64encode(\n        new Date().toISOString().slice(11, 19).replace('T', '.')\n    ).replace(/[^a-zA-Z0-9]/g, '').toLowerCase();\n\n    return `uid_${ randomID }_${ timeID }`;\n}\n\nexport function getGlobal() : Object {\n    if (typeof window !== 'undefined') {\n        return window;\n    }\n    if (typeof global !== 'undefined') {\n        return global;\n    }\n    if (typeof __GLOBAL__ !== 'undefined') {\n        return __GLOBAL__;\n    }\n    throw new Error(`No global found`);\n}\n\nlet objectIDs;\n\nexport function getObjectID(obj : Object) : string {\n\n    objectIDs = objectIDs || new WeakMap();\n\n    if (obj === null || obj === undefined || (typeof obj !== 'object' && typeof obj !== 'function')) {\n        throw new Error(`Invalid object`);\n    }\n\n    let uid = objectIDs.get(obj);\n\n    if (!uid) {\n        uid = `${ typeof obj }:${ uniqueID() }`;\n        objectIDs.set(obj, uid);\n    }\n\n    return uid;\n}\n\nfunction serializeArgs<T>(args : $ReadOnlyArray<T>) : string {\n    try {\n        // $FlowFixMe[method-unbinding]\n        return JSON.stringify(Array.prototype.slice.call(args), (subkey, val) => {\n            if (typeof val === 'function') {\n                return `memoize[${ getObjectID(val) }]`;\n            }\n            return val;\n        });\n    } catch (err) {\n        throw new Error(`Arguments not serializable -- can not be used to memoize`);\n    }\n}\n\nexport function getEmptyObject() : {||} {\n    // $FlowFixMe\n    return {};\n}\n\ntype MemoizeOptions = {|\n    name? : string,\n    time? : number,\n    thisNamespace? : boolean\n|};\n\nconst getDefaultMemoizeOptions = () : MemoizeOptions => {\n    // $FlowFixMe\n    return {};\n};\n\nexport type Memoized<F> = F & {| reset : () => void |};\n\nlet memoizeGlobalIndex = 0;\nlet memoizeGlobalIndexValidFrom = 0;\n\nexport function memoize<F : Function>(method : F, options? : MemoizeOptions = getDefaultMemoizeOptions()) : Memoized<F> {\n    const { thisNamespace = false, time: cacheTime } = options;\n\n    let simpleCache;\n    let thisCache;\n\n    let memoizeIndex = memoizeGlobalIndex;\n    memoizeGlobalIndex += 1;\n\n    const memoizedFunction = function memoizedFunction(...args) : mixed {\n        if (memoizeIndex < memoizeGlobalIndexValidFrom) {\n            simpleCache = null;\n            thisCache = null;\n            memoizeIndex = memoizeGlobalIndex;\n            memoizeGlobalIndex += 1;\n        }\n\n        let cache;\n\n        if (thisNamespace) {\n            thisCache = thisCache || new WeakMap();\n            cache = thisCache.getOrSet(this, getEmptyObject);\n        } else {\n            cache = simpleCache = simpleCache || {};\n        }\n\n        const cacheKey = serializeArgs(args);\n        let cacheResult = cache[cacheKey];\n\n        if (cacheResult && cacheTime && (Date.now() - cacheResult.time) < cacheTime) {\n            delete cache[cacheKey];\n            cacheResult = null;\n        }\n\n        if (cacheResult) {\n            return cacheResult.value;\n        }\n\n        const time  = Date.now();\n        const value = method.apply(this, arguments);\n\n        cache[cacheKey] = { time, value };\n\n        return value;\n    };\n\n    memoizedFunction.reset = () => {\n        simpleCache = null;\n        thisCache = null;\n    };\n\n    // $FlowFixMe\n    const result : F = memoizedFunction;\n\n    return setFunctionName(result, `${ options.name || getFunctionName(method) }::memoized`);\n}\n\nmemoize.clear = () => {\n    memoizeGlobalIndexValidFrom = memoizeGlobalIndex;\n};\n\nexport function promiseIdentity<T : mixed>(item : ZalgoPromise<T> | T) : ZalgoPromise<T> {\n    // $FlowFixMe\n    return ZalgoPromise.resolve(item);\n}\n\n// eslint-disable-next-line flowtype/no-weak-types\nexport function memoizePromise<R>(method : (...args : $ReadOnlyArray<any>) => ZalgoPromise<R>) : ((...args : $ReadOnlyArray<any>) => ZalgoPromise<R>) {\n    let cache = {};\n\n    // eslint-disable-next-line flowtype/no-weak-types\n    function memoizedPromiseFunction(...args : $ReadOnlyArray<any>) : ZalgoPromise<R> {\n        const key : string = serializeArgs(args);\n\n        if (cache.hasOwnProperty(key)) {\n            return cache[key];\n        }\n\n        cache[key] = ZalgoPromise.try(() => method.apply(this, arguments))\n            .finally(() => {\n                delete cache[key];\n            });\n\n        return cache[key];\n    }\n\n    memoizedPromiseFunction.reset = () => {\n        cache = {};\n    };\n\n    return setFunctionName(memoizedPromiseFunction, `${ getFunctionName(method) }::promiseMemoized`);\n}\n\ntype PromisifyOptions = {|\n    name ? : string\n|};\n\nconst getDefaultPromisifyOptions = () : PromisifyOptions => {\n    // $FlowFixMe\n    return {};\n};\n\n// eslint-disable-next-line flowtype/no-weak-types\nexport function promisify<R>(method : (...args : $ReadOnlyArray<any>) => R, options : PromisifyOptions = getDefaultPromisifyOptions()) : ((...args : $ReadOnlyArray<any>) => ZalgoPromise<R>) {\n    function promisifiedFunction() : ZalgoPromise<R> {\n        return ZalgoPromise.try(method, this, arguments);\n    }\n\n    if (options.name) {\n        promisifiedFunction.displayName = `${ options.name }:promisified`;\n    }\n\n    return setFunctionName(promisifiedFunction, `${ getFunctionName(method) }::promisified`);\n}\n\n// eslint-disable-next-line flowtype/no-weak-types\nexport function inlineMemoize<R>(method : (...args : $ReadOnlyArray<any>) => R, logic : (...args : $ReadOnlyArray<any>) => R, args : $ReadOnlyArray<any> = []) : R {\n    // $FlowFixMe\n    const cache : {| [string] : R |} = method.__inline_memoize_cache__ = method.__inline_memoize_cache__ || {};\n    const key = serializeArgs(args);\n\n    if (cache.hasOwnProperty(key)) {\n        return cache[key];\n    }\n    \n    const result = cache[key] = logic(...args);\n\n    return result;\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function noop(...args : $ReadOnlyArray<mixed>) {\n    // pass\n}\n\nexport function once(method : Function) : Function {\n    let called = false;\n\n    const onceFunction = function() : mixed {\n        if (!called) {\n            called = true;\n            return method.apply(this, arguments);\n        }\n    };\n\n    return setFunctionName(onceFunction, `${ getFunctionName(method) }::once`);\n}\n\nexport function hashStr(str : string) : number {\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n        hash += str[i].charCodeAt(0) * Math.pow((i % 10) + 1, 5);\n    }\n    return Math.floor(Math.pow(Math.sqrt(hash), 5));\n}\n\nexport function strHashStr(str : string) : string {\n    let hash = '';\n\n    for (let i = 0; i < str.length; i++) {\n        let total = (str[i].charCodeAt(0) * i);\n\n        if (str[i + 1]) {\n            total += (str[i + 1].charCodeAt(0) * (i - 1));\n        }\n\n        hash += String.fromCharCode(97 + (Math.abs(total) % 26));\n    }\n\n    return hash;\n}\n\nexport function match(str : string, pattern : RegExp) : ?string {\n    const regmatch = str.match(pattern);\n    if (regmatch) {\n        return regmatch[1];\n    }\n}\n\nexport function awaitKey<T: mixed>(obj : Object, key : string) : ZalgoPromise<T> {\n    return new ZalgoPromise(resolve => {\n\n        let value = obj[key];\n\n        if (value) {\n            return resolve(value);\n        }\n\n        delete obj[key];\n\n        Object.defineProperty(obj, key, {\n\n            configurable: true,\n\n            set(item) {\n                value = item;\n\n                if (value) {\n                    resolve(value);\n                }\n            },\n\n            get() : T {\n                return value;\n            }\n        });\n    });\n}\n\nexport function stringifyError(err : mixed, level : number = 1) : string {\n\n    if (level >= 3) {\n        return 'stringifyError stack overflow';\n    }\n\n    try {\n        if (!err) {\n            // $FlowFixMe[method-unbinding]\n            return `<unknown error: ${ Object.prototype.toString.call(err) }>`;\n        }\n\n        if (typeof err === 'string') {\n            return err;\n        }\n\n        if (err instanceof Error) {\n            const stack = err && err.stack;\n            const message = err && err.message;\n\n            if (stack && message) {\n                if (stack.indexOf(message) !== -1) {\n                    return stack;\n                } else {\n                    return `${ message }\\n${ stack }`;\n                }\n            } else if (stack) {\n                return stack;\n            } else if (message) {\n                return message;\n            }\n        }\n\n        if (err && err.toString && typeof err.toString === 'function') {\n            // $FlowFixMe\n            return err.toString();\n        }\n\n        // $FlowFixMe[method-unbinding]\n        return Object.prototype.toString.call(err);\n\n    } catch (newErr) {\n        return `Error while stringifying error: ${ stringifyError(newErr, level + 1) }`;\n    }\n}\n\nexport function stringifyErrorMessage(err : mixed) : string {\n\n    // $FlowFixMe[method-unbinding]\n    const defaultMessage = `<unknown error: ${ Object.prototype.toString.call(err) }>`;\n\n    if (!err) {\n        return defaultMessage;\n    }\n\n    if (err instanceof Error) {\n        return err.message || defaultMessage;\n    }\n\n    if (typeof err.message === 'string') {\n        return err.message || defaultMessage;\n    }\n\n    return defaultMessage;\n}\n\nexport function stringify(item : mixed) : string {\n    if (typeof item === 'string') {\n        return item;\n    }\n\n    if (item && item.toString && typeof item.toString === 'function') {\n        // $FlowFixMe\n        return item.toString();\n    }\n\n    // $FlowFixMe[method-unbinding]\n    return Object.prototype.toString.call(item);\n}\n\nexport function domainMatches(hostname : string, domain : string) : boolean {\n    hostname = hostname.split('://')[1];\n    const index = hostname.indexOf(domain);\n    return (index !== -1 && hostname.slice(index) === domain);\n}\n\nexport function patchMethod(obj : Object, name : string, handler : Function) {\n    const original = obj[name];\n\n    obj[name] = function patchedMethod() : mixed {\n        return handler({\n            context:      this,\n            // $FlowFixMe[method-unbinding]\n            args:         Array.prototype.slice.call(arguments),\n            original,\n            callOriginal: () => original.apply(this, arguments)\n        });\n    };\n}\n\nexport function extend<T : Object | Function>(obj : T, source : Object) : T {\n    if (!source) {\n        return obj;\n    }\n\n    if (Object.assign) {\n        return Object.assign(obj, source);\n    }\n\n    for (const key in source) {\n        if (source.hasOwnProperty(key)) {\n            obj[key] = source[key];\n        }\n    }\n\n    return obj;\n}\n\nexport function values<T>(obj : { [string] : T }) : $ReadOnlyArray<T> {\n    if (Object.values) {\n        // $FlowFixMe\n        return Object.values(obj);\n    }\n\n    const result : Array<T> = [];\n    for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            // $FlowFixMe[escaped-generic]\n            result.push(obj[key]);\n        }\n    }\n\n    // $FlowFixMe\n    return result;\n}\n\n// eslint-disable-next-line no-undef\nexport const memoizedValues : <T>({ [string] : T }) => $ReadOnlyArray<T> = memoize(values);\n\nexport function perc(pixels : number, percentage : number) : number {\n    return Math.round((pixels * percentage) / 100);\n}\n\nexport function min(...args : $ReadOnlyArray<number>) : number {\n    return Math.min(...args);\n}\n\nexport function max(...args : $ReadOnlyArray<number>) : number {\n    return Math.max(...args);\n}\n\nexport function roundUp(num : number, nearest : number) : number {\n    const remainder = num % nearest;\n    return remainder\n        ? (num - remainder) + nearest\n        : num;\n}\n\nexport function regexMap<T>(str : string, regexp : RegExp, handler : () => T) : $ReadOnlyArray<T> {\n    const results = [];\n\n    // $FlowFixMe\n    str.replace(regexp, function regexMapMatcher(item) {\n        results.push(handler ? handler.apply(null, arguments) : item);\n    });\n\n    // $FlowFixMe\n    return results;\n}\n\nexport function svgToBase64(svg : string) : string {\n    return `data:image/svg+xml;base64,${ base64encode(svg) }`;\n}\n\nexport function objFilter<T, R>(obj : { [string] : T }, filter? : (T, ?string) => mixed = Boolean) : { [string] : R } {\n    const result = {};\n\n    for (const key in obj) {\n        if (!obj.hasOwnProperty(key) || !filter(obj[key], key)) {\n            continue;\n        }\n\n        result[key] = obj[key];\n    }\n\n    return result;\n}\n\nexport function identity <T>(item : T) : T {\n    return item;\n}\n\nexport function regexTokenize(text : string, regexp : RegExp) : $ReadOnlyArray<string> {\n    const result = [];\n    text.replace(regexp, token => {\n        result.push(token);\n        return '';\n    });\n    return result;\n}\n\nexport function promiseDebounce<T>(method : () => ZalgoPromise<T> | T, delay : number = 50) : () => ZalgoPromise<T> {\n\n    let promise;\n    let timeout;\n\n    const promiseDebounced = function() : ZalgoPromise<T> {\n        if (timeout) {\n            clearTimeout(timeout);\n        }\n\n        const localPromise = promise = promise || new ZalgoPromise();\n\n        timeout = setTimeout(() => {\n            promise = null;\n            timeout = null;\n\n            ZalgoPromise.try(method).then(\n                result => { localPromise.resolve(result); },\n                err => { localPromise.reject(err); }\n            );\n        }, delay);\n\n        return localPromise;\n    };\n\n    return setFunctionName(promiseDebounced, `${ getFunctionName(method) }::promiseDebounced`);\n}\n\nexport function safeInterval(method : Function, time : number) : {| cancel : () => void |} {\n\n    let timeout;\n\n    function loop() {\n        timeout = setTimeout(() => {\n            method();\n            loop();\n        }, time);\n    }\n\n    loop();\n\n    return {\n        cancel() {\n            clearTimeout(timeout);\n        }\n    };\n}\n\nexport function isInteger(str : string) : boolean {\n    return Boolean(str.match(/^[0-9]+$/));\n}\n\nexport function isFloat(str : string) : boolean {\n    return Boolean(str.match(/^[0-9]+\\.[0-9]+$/));\n}\n\nexport function serializePrimitive(value : string | number | boolean) : string {\n    return value.toString();\n}\n\nexport function deserializePrimitive(value : string) : string | number | boolean {\n    if (value === 'true') {\n        return true;\n    } else if (value === 'false') {\n        return false;\n    } else if (isInteger(value)) {\n        return parseInt(value, 10);\n    } else if (isFloat(value)) {\n        return parseFloat(value);\n    } else {\n        return value;\n    }\n}\n\nexport function dotify(obj : Object, prefix : string = '', newobj : Object = {}) : { [string] : string } {\n    prefix = prefix ? `${ prefix }.` : prefix;\n    for (const key in obj) {\n        if (!obj.hasOwnProperty(key) || obj[key] === undefined || obj[key] === null || typeof obj[key] === 'function') {\n            continue;\n        } else if (obj[key] && Array.isArray(obj[key]) && obj[key].length && obj[key].every(val => typeof val !== 'object')) {\n            newobj[`${ prefix }${ key }[]`] = obj[key].join(',');\n        } else if (obj[key] && typeof obj[key] === 'object') {\n            newobj = dotify(obj[key], `${ prefix }${ key }`, newobj);\n        } else {\n            newobj[`${ prefix }${ key }`] = serializePrimitive(obj[key]);\n        }\n    }\n    return newobj;\n}\n\nexport function undotify(obj : { [string] : string }) : Object {\n    \n    const result = {};\n\n    for (let key in obj) {\n        if (!obj.hasOwnProperty(key) || typeof obj[key] !== 'string') {\n            continue;\n        }\n\n        let value = obj[key];\n\n        if (key.match(/^.+\\[\\]$/)) {\n            key = key.slice(0, -2);\n            value = value.split(',').map(deserializePrimitive);\n        } else {\n            value = deserializePrimitive(value);\n        }\n\n        let keyResult = result;\n        const parts = key.split('.');\n        for (let i = 0; i < parts.length; i++) {\n            const part = parts[i];\n            const isLast = (i + 1 === parts.length);\n            const isIndex = !isLast && isInteger(parts[i + 1]);\n\n            if (part === 'constructor' || part === 'prototype' || part === '__proto__') {\n                throw new Error(`Disallowed key: ${ part }`);\n            }\n\n            if (isLast) {\n                // $FlowFixMe\n                keyResult[part] = value;\n            } else {\n                // $FlowFixMe\n                keyResult = keyResult[part] = keyResult[part] || (isIndex ? [] : {});\n            }\n        }\n    }\n\n    return result;\n}\n\nexport type EventEmitterType = {|\n    on : (eventName : string, handler : Function) => CancelableType,\n    once : (eventName : string, handler : Function) => CancelableType,\n    trigger : (eventName : string, ...args : $ReadOnlyArray<mixed>) => ZalgoPromise<void>,\n    triggerOnce : (eventName : string, ...args : $ReadOnlyArray<mixed>) => ZalgoPromise<void>,\n    reset : () => void\n|};\n\nexport function eventEmitter() : EventEmitterType {\n    const triggered = {};\n    let handlers = {};\n\n    const emitter = {\n\n        on(eventName : string, handler : Function) : CancelableType {\n            const handlerList = handlers[eventName] = handlers[eventName] || [];\n\n            handlerList.push(handler);\n\n            let cancelled = false;\n\n            return {\n                cancel() {\n                    if (!cancelled) {\n                        cancelled = true;\n                        handlerList.splice(handlerList.indexOf(handler), 1);\n                    }\n\n                }\n            };\n        },\n\n        once(eventName : string, handler : Function) : CancelableType {\n\n            const listener = emitter.on(eventName, () => {\n                listener.cancel();\n                handler();\n            });\n\n            return listener;\n        },\n\n        trigger(eventName : string, ...args : $ReadOnlyArray<mixed>) : ZalgoPromise<void> {\n\n            const handlerList = handlers[eventName];\n            const promises = [];\n\n            if (handlerList) {\n                for (const handler of handlerList) {\n                    promises.push(ZalgoPromise.try(() => handler(...args)));\n                }\n            }\n\n            return ZalgoPromise.all(promises).then(noop);\n        },\n\n        triggerOnce(eventName : string, ...args : $ReadOnlyArray<mixed>) : ZalgoPromise<void> {\n\n            if (triggered[eventName]) {\n                return ZalgoPromise.resolve();\n            }\n\n            triggered[eventName] = true;\n            return emitter.trigger(eventName, ...args);\n        },\n\n        reset() {\n            handlers = {};\n        }\n    };\n\n    return emitter;\n}\n\nexport function camelToDasherize(string : string) : string {\n    return string.replace(/([A-Z])/g, (g) => {\n        return `-${ g.toLowerCase() }`;\n    });\n}\n\nexport function dasherizeToCamel(string : string) : string {\n    return string.replace(/-([a-z])/g, (g) => {\n        return g[1].toUpperCase();\n    });\n}\n\nexport function capitalizeFirstLetter(string : string) : string {\n    return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n}\n\nexport function get(item : Object, path : string, def : mixed) : mixed {\n\n    if (!path) {\n        return def;\n    }\n\n    const pathParts = path.split('.');\n\n    // Loop through each section of our key path\n\n    for (let i = 0; i < pathParts.length; i++) {\n\n        // If we have an object, we can get the key\n        if (typeof item === 'object' && item !== null) {\n            item = item[pathParts[i]];\n\n        // Otherwise, we should return the default (undefined if not provided)\n        } else {\n            return def;\n        }\n    }\n\n    // If our final result is undefined, we should return the default\n\n    return item === undefined ? def : item;\n}\n\nexport function safeTimeout(method : Function, time : number) {\n\n    const interval = safeInterval(() => {\n        time -= 100;\n        if (time <= 0) {\n            interval.cancel();\n            method();\n        }\n    }, 100);\n}\n\nexport function defineLazyProp<T>(obj : Object | $ReadOnlyArray<mixed>, key : string | number, getter : () => T) {\n    if (Array.isArray(obj)) {\n        if (typeof key !== 'number') {\n            throw new TypeError(`Array key must be number`);\n        }\n    } else if (typeof obj === 'object' && obj !== null) {\n        if (typeof key !== 'string') {\n            throw new TypeError(`Object key must be string`);\n        }\n    }\n    \n    Object.defineProperty(obj, key, {\n        configurable: true,\n        enumerable:   true,\n        get:          () => {\n            // $FlowFixMe\n            delete obj[key];\n            const value = getter();\n            // $FlowFixMe\n            obj[key] = value;\n            return value;\n        },\n        set: (value : T) => {\n            // $FlowFixMe\n            delete obj[key];\n            // $FlowFixMe\n            obj[key] = value;\n        }\n    });\n}\n\nexport function arrayFrom<T>(item : Iterable<T>) : $ReadOnlyArray<T> { // eslint-disable-line no-undef\n    // $FlowFixMe[method-unbinding]\n    return Array.prototype.slice.call(item);\n}\n\nexport function isObject(item : mixed) : boolean {\n    return (typeof item === 'object' && item !== null);\n}\n\nexport function isObjectObject(obj : mixed) : boolean {\n    // $FlowFixMe[method-unbinding]\n    return isObject(obj) && Object.prototype.toString.call(obj) === '[object Object]';\n}\n\nexport function isPlainObject(obj : mixed) : boolean {\n    if (!isObjectObject(obj)) {\n        return false;\n    }\n\n    // $FlowFixMe\n    const constructor = obj.constructor;\n\n    if (typeof constructor !== 'function') {\n        return false;\n    }\n\n    const prototype = constructor.prototype;\n\n    if (!isObjectObject(prototype)) {\n        return false;\n    }\n\n    if (!prototype.hasOwnProperty('isPrototypeOf')) {\n        return false;\n    }\n\n    return true;\n}\n\nexport function replaceObject<T : $ReadOnlyArray<mixed> | Object> (item : T, replacer : (mixed, string | number, string) => mixed, fullKey : string = '') : T {\n\n    if (Array.isArray(item)) {\n        const length = item.length;\n        const result : Array<mixed> = [];\n\n        for (let i = 0; i < length; i++) {\n\n            \n            defineLazyProp(result, i, () => {\n                const itemKey = fullKey ? `${ fullKey }.${ i }` : `${ i }`;\n                const el = item[i];\n\n                let child = replacer(el, i, itemKey);\n\n                if (isPlainObject(child) || Array.isArray(child)) {\n                    // $FlowFixMe\n                    child = replaceObject(child, replacer, itemKey);\n                }\n\n                return child;\n            });\n        }\n\n        // $FlowFixMe\n        return result;\n    } else if (isPlainObject(item)) {\n        const result = {};\n\n        for (const key in item) {\n            if (!item.hasOwnProperty(key)) {\n                continue;\n            }\n\n            defineLazyProp(result, key, () => {\n                const itemKey = fullKey ? `${ fullKey }.${ key }` : `${ key }`;\n                // $FlowFixMe\n                const el = item[key];\n\n                let child = replacer(el, key, itemKey);\n\n                if (isPlainObject(child) || Array.isArray(child)) {\n                    // $FlowFixMe\n                    child = replaceObject(child, replacer, itemKey);\n                }\n\n                return child;\n            });\n        }\n\n        // $FlowFixMe\n        return result;\n    } else {\n        throw new Error(`Pass an object or array`);\n    }\n}\n\n\nexport function copyProp(source : Object, target : Object, name : string, def : mixed) {\n    if (source.hasOwnProperty(name)) {\n        const descriptor = Object.getOwnPropertyDescriptor(source, name);\n        // $FlowFixMe\n        Object.defineProperty(target, name, descriptor);\n\n    } else {\n        target[name] = def;\n    }\n}\n\ntype RegexResultType = {|\n    text : string,\n    groups : $ReadOnlyArray<string>,\n    start : number,\n    end : number,\n    length : number,\n    replace : (text : string) => string\n|};\n\nexport function regex(pattern : string | RegExp, string : string, start : number = 0) : ?RegexResultType {\n\n    if (typeof pattern === 'string') {\n        // eslint-disable-next-line security/detect-non-literal-regexp\n        pattern = new RegExp(pattern);\n    }\n\n    const result = string.slice(start).match(pattern);\n\n    if (!result) {\n        return;\n    }\n\n    // $FlowFixMe\n    const index : number = result.index;\n    const regmatch = result[0];\n\n    return {\n        text:   regmatch,\n        groups: result.slice(1),\n        start:  start + index,\n        end:    start + index + regmatch.length,\n        length: regmatch.length,\n\n        replace(text : string) : string {\n\n            if (!regmatch) {\n                return '';\n            }\n\n            return `${ regmatch.slice(0, start + index) }${ text }${ regmatch.slice(index + regmatch.length) }`;\n        }\n    };\n}\n\nexport function regexAll(pattern : string | RegExp, string : string) : $ReadOnlyArray<RegexResultType> {\n\n    const matches = [];\n    let start = 0;\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        const regmatch = regex(pattern, string, start);\n\n        if (!regmatch) {\n            break;\n        }\n\n        matches.push(regmatch);\n        start = match.end;\n    }\n\n    return matches;\n}\n\nexport function isDefined(value : ?mixed) : boolean {\n    return value !== null && value !== undefined;\n}\n\nexport function cycle(method : Function) : ZalgoPromise<void> {\n    return ZalgoPromise.try(method).then(() => cycle(method));\n}\n\nexport function debounce<T>(method : (...args : $ReadOnlyArray<mixed>) => T, time : number = 100) : (...args : $ReadOnlyArray<mixed>) => void {\n\n    let timeout;\n\n    const debounceWrapper = function() {\n        clearTimeout(timeout);\n\n        timeout = setTimeout(() => {\n            return method.apply(this, arguments);\n        }, time);\n    };\n\n    return setFunctionName(debounceWrapper, `${ getFunctionName(method) }::debounced`);\n}\n\nexport function isRegex(item : mixed) : boolean {\n    // $FlowFixMe[method-unbinding]\n    return Object.prototype.toString.call(item) === '[object RegExp]';\n}\n\ntype FunctionProxy<T : Function> = (method : T) => T;\n\n// eslint-disable-next-line flowtype/no-weak-types\nexport const weakMapMemoize : FunctionProxy<*> = <R : mixed>(method : (arg : any) => R) : ((...args : $ReadOnlyArray<any>) => R) => {\n\n    const weakmap = new WeakMap();\n\n    // eslint-disable-next-line flowtype/no-weak-types\n    return function weakmapMemoized(arg : any) : R {\n        return weakmap.getOrSet(arg, () => method.call(this, arg));\n    };\n};\n\ntype FunctionPromiseProxy<R : mixed, T : (...args : $ReadOnlyArray<mixed>) => ZalgoPromise<R>> = (T) => T;\n\n// eslint-disable-next-line flowtype/no-weak-types\nexport const weakMapMemoizePromise : FunctionPromiseProxy<*, *> = <R : mixed>(method : (arg : any) => ZalgoPromise<R>) : ((...args : $ReadOnlyArray<any>) => ZalgoPromise<R>) => {\n\n    const weakmap = new WeakMap();\n\n    // eslint-disable-next-line flowtype/no-weak-types\n    return function weakmapMemoizedPromise(arg : any) : ZalgoPromise<R> {\n        return weakmap.getOrSet(arg, () =>\n            method.call(this, arg).finally(() => {\n                weakmap.delete(arg);\n            }));\n    };\n};\n\nexport function getOrSet<O : Object, T : mixed>(obj : O, key : string, getter : () => T) : T {\n    if (obj.hasOwnProperty(key)) {\n        return obj[key];\n    }\n\n    const val = getter();\n    obj[key] = val;\n    return val;\n}\n\nexport type CleanupType = {|\n    set : <T : mixed>(string, T) => T, // eslint-disable-line no-undef\n    register : (Function) => void,\n    all : (err? : mixed) => ZalgoPromise<void>\n|};\n\nexport function cleanup(obj : Object) : CleanupType {\n\n    const tasks = [];\n    let cleaned = false;\n    let cleanErr;\n\n    const cleaner = {\n        set<T : mixed>(name : string, item : T) : T {\n            if (!cleaned) {\n                obj[name] = item;\n                cleaner.register(() => {\n                    delete obj[name];\n                });\n            }\n            return item;\n        },\n\n        register(method : Function) {\n            if (cleaned) {\n                method(cleanErr);\n            } else {\n                tasks.push(once(() => method(cleanErr)));\n            }\n        },\n\n        all(err? : mixed) : ZalgoPromise<void> {\n            cleanErr = err;\n\n            const results = [];\n            cleaned = true;\n\n            while (tasks.length) {\n                const task = tasks.shift();\n                results.push(task());\n            }\n\n            return ZalgoPromise.all(results).then(noop);\n        }\n    };\n\n    return cleaner;\n}\n\nexport function tryCatch<T>(fn : () => T) : {| result : T, error : void |} | {| result : void, error : mixed |} {\n    let result;\n    let error;\n\n    try {\n        result = fn();\n    } catch (err) {\n        error = err;\n    }\n    \n    // $FlowFixMe\n    return { result, error };\n}\n\n// eslint-disable-next-line flowtype/no-mutable-array\nexport function removeFromArray<X, T : Array<X>>(arr : T, item : X) {\n    const index = arr.indexOf(item);\n    if (index !== -1) {\n        arr.splice(index, 1);\n    }\n}\n\nexport function assertExists<T>(name : string, thing : void | null | T) : T {\n    if (thing === null || typeof thing === 'undefined') {\n        throw new Error(`Expected ${ name } to be present`);\n    }\n                            \n    return thing;\n}\n\nexport function unique(arr : $ReadOnlyArray<string>) : $ReadOnlyArray<string> {\n    const result = {};\n    for (const item of arr) {\n        result[item] = true;\n    }\n    return Object.keys(result);\n}\n\nexport const constHas = <X : (string | boolean | number), T : { [string] : X }>(constant : T, value : X) : boolean => {\n    return memoizedValues(constant).indexOf(value) !== -1;\n};\n\nexport function dedupeErrors<T>(handler : (mixed) => T) : (mixed) => (T | void) {\n    const seenErrors = [];\n    const seenStringifiedErrors = {};\n\n    return (err) => {\n        if (seenErrors.indexOf(err) !== -1) {\n            return;\n        }\n\n        seenErrors.push(err);\n\n        const stringifiedError = stringifyError(err);\n        if (seenStringifiedErrors[stringifiedError]) {\n            return;\n        }\n\n        seenStringifiedErrors[stringifiedError] = true;\n        return handler(err);\n    };\n}\n\nexport class ExtendableError extends Error {\n    constructor(message : string) {\n        super(message);\n        // eslint-disable-next-line unicorn/custom-error-definition\n        this.name = this.constructor.name;\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            this.stack = (new Error(message)).stack;\n        }\n    }\n}\n  \n","/* @flow */\n\nexport function hasNativeWeakMap() : boolean {\n\n    if (typeof WeakMap === 'undefined') {\n        return false;\n    }\n\n    if (typeof Object.freeze === 'undefined') {\n        return false;\n    }\n\n    try {\n\n        const testWeakMap = new WeakMap();\n        const testKey = {};\n        const testValue = '__testvalue__';\n\n        Object.freeze(testKey);\n\n        testWeakMap.set(testKey, testValue);\n\n        if (testWeakMap.get(testKey) === testValue) {\n            return true;\n        }\n\n        return false;\n\n    } catch (err) {\n\n        return false;\n    }\n}\n","/* @flow */\n/* eslint max-lines: off */\nimport { ZalgoPromise } from 'zalgo-promise/src';\nimport { linkFrameWindow, isWindowClosed, assertSameDomain,\n    type SameDomainWindowType, type CrossDomainWindowType } from 'cross-domain-utils/src';\nimport { WeakMap } from 'cross-domain-safe-weakmap/src';\n\nimport { inlineMemoize, memoize, noop, stringify, capitalizeFirstLetter,\n    once, extend, safeInterval, uniqueID, arrayFrom, ExtendableError, strHashStr } from './util';\nimport { isDevice } from './device';\nimport { KEY_CODES, ATTRIBUTES, UID_HASH_LENGTH } from './constants';\nimport type { CancelableType } from './types';\n\ntype ElementRefType = string | HTMLElement;\n\nexport function getBody() : HTMLBodyElement {\n    // eslint-disable-next-line compat/compat\n    const body = document.body;\n\n    if (!body) {\n        throw new Error(`Body element not found`);\n    }\n\n    return body;\n}\n\nexport function isDocumentReady() : boolean {\n    // eslint-disable-next-line compat/compat\n    return Boolean(document.body) && (document.readyState === 'complete');\n}\n\nexport function isDocumentInteractive() : boolean {\n    // eslint-disable-next-line compat/compat\n    return Boolean(document.body) && (document.readyState === 'interactive');\n}\n\nexport function urlEncode(str : string) : string {\n    return encodeURIComponent(str);\n}\n\nexport function waitForWindowReady() : ZalgoPromise<void> {\n    return inlineMemoize(waitForWindowReady, () : ZalgoPromise<void> => {\n        return new ZalgoPromise(resolve => {\n            if (isDocumentReady()) {\n                resolve();\n            }\n\n            window.addEventListener('load', () => resolve());\n        });\n    });\n}\n\ntype WaitForDocumentReady = () => ZalgoPromise<void>;\n\nexport const waitForDocumentReady : WaitForDocumentReady = memoize(() => {\n    return new ZalgoPromise(resolve => {\n\n        if (isDocumentReady() || isDocumentInteractive()) {\n            return resolve();\n        }\n\n        const interval = setInterval(() => {\n            if (isDocumentReady() || isDocumentInteractive()) {\n                clearInterval(interval);\n                return resolve();\n            }\n        }, 10);\n    });\n});\n\nexport function waitForDocumentBody() : ZalgoPromise<HTMLBodyElement> {\n    return ZalgoPromise.try(() => {\n        if (document.body) {\n            return document.body;\n        }\n\n        return waitForDocumentReady().then(() => {\n            if (document.body) {\n                return document.body;\n            }\n\n            throw new Error('Document ready but document.body not present');\n        });\n    });\n}\n\nexport function parseQuery(queryString : string) : Object {\n    return inlineMemoize(parseQuery, () : Object => {\n        const params = {};\n\n        if (!queryString) {\n            return params;\n        }\n\n        if (queryString.indexOf('=') === -1) {\n            return params;\n        }\n\n        for (let pair of queryString.split('&')) {\n            pair = pair.split('=');\n\n            if (pair[0] && pair[1]) {\n                params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n            }\n        }\n\n        return params;\n    }, [ queryString ]);\n}\n\n\nexport function getQueryParam(name : string) : string {\n    return parseQuery(window.location.search.slice(1))[name];\n}\n\nexport function urlWillRedirectPage(url : string) : boolean {\n\n    if (url.indexOf('#') === -1) {\n        return true;\n    }\n\n    if (url.indexOf('#') === 0) {\n        return false;\n    }\n\n    if (url.split('#')[0] === window.location.href.split('#')[0]) {\n        return false;\n    }\n\n    return true;\n}\n\nexport type Query = {\n    [ string ] : boolean | string\n};\n\nexport function formatQuery(obj : Query = {}) : string {\n\n    return Object.keys(obj).filter(key => {\n        return typeof obj[key] === 'string' || typeof obj[key] === 'boolean';\n    }).map(key => {\n        const val = obj[key];\n\n        if (typeof val !== 'string' && typeof val !== 'boolean') {\n            throw new TypeError(`Invalid type for query`);\n        }\n\n        return `${ urlEncode(key) }=${ urlEncode(val.toString()) }`;\n    }).join('&');\n}\n\nexport function extendQuery(originalQuery : string, props : Query = {}) : string {\n\n    if (!props || !Object.keys(props).length) {\n        return originalQuery;\n    }\n\n    return formatQuery({\n        ...parseQuery(originalQuery),\n        ...props\n    });\n}\n\nexport function extendUrl(url : string, options : {| query? : Query, hash? : Query |}) : string {\n\n    const query = options.query || {};\n    const hash = options.hash || {};\n\n    let originalUrl;\n    let originalQuery;\n    let originalHash;\n\n    [ originalUrl, originalHash ] = url.split('#');\n    [ originalUrl, originalQuery ] = originalUrl.split('?');\n\n    const queryString = extendQuery(originalQuery, query);\n    const hashString = extendQuery(originalHash, hash);\n\n    if (queryString) {\n        originalUrl = `${ originalUrl }?${ queryString }`;\n    }\n\n    if (hashString) {\n        originalUrl = `${ originalUrl }#${ hashString }`;\n    }\n\n    return originalUrl;\n}\n\nexport function redirect(url : string, win : CrossDomainWindowType = window) : ZalgoPromise<void> {\n    return new ZalgoPromise(resolve => {\n        win.location = url;\n        if (!urlWillRedirectPage(url)) {\n            resolve();\n        }\n    });\n}\n\nexport function hasMetaViewPort() : boolean {\n    const meta = document.querySelector('meta[name=viewport]');\n\n    if (isDevice() && window.screen.width < 660 && !meta) {\n        return false;\n    }\n\n    return true;\n}\n\nexport function isElementVisible(el : HTMLElement) : boolean {\n    return Boolean(el.offsetWidth || el.offsetHeight || el.getClientRects().length);\n}\n\nexport function getPerformance() : ?Performance {\n    return inlineMemoize(getPerformance, () : ?Performance => {\n        const performance = window.performance;\n\n        if (\n            performance &&\n            performance.now &&\n            performance.timing &&\n            performance.timing.connectEnd &&\n            performance.timing.navigationStart &&\n            (Math.abs(performance.now() - Date.now()) > 1000) &&\n            (performance.now() - (performance.timing.connectEnd - performance.timing.navigationStart)) > 0\n        ) {\n            return performance;\n        }\n    });\n}\n\nexport function enablePerformance() : boolean {\n    return Boolean(getPerformance());\n}\n\nexport function getPageRenderTime() : ZalgoPromise<?number> {\n    return waitForDocumentReady().then(() => {\n        const performance = getPerformance();\n\n        if (!performance) {\n            return;\n        }\n\n        const timing = performance.timing;\n\n        if (timing.connectEnd && timing.domInteractive) {\n            return timing.domInteractive - timing.connectEnd;\n        }\n    });\n}\n\nexport function htmlEncode(html : string = '') : string {\n    return html.toString()\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#39;')\n        .replace(/\\//g, '&#x2F;');\n}\n\nexport function isBrowser() : boolean {\n    return (typeof window !== 'undefined') && window.location !== undefined;\n}\n\nexport function querySelectorAll(selector : string, doc : HTMLElement = window.document) : $ReadOnlyArray<HTMLElement> {\n    // $FlowFixMe[method-unbinding]\n    return Array.prototype.slice.call(doc.querySelectorAll(selector));\n}\n\nexport function onClick(element : HTMLElement, handler : (Event) => void) {\n    element.addEventListener('touchstart', noop);\n    element.addEventListener('click', handler);\n    element.addEventListener('keypress', (event : Event) => {\n        // $FlowFixMe\n        if (event.keyCode === KEY_CODES.ENTER || event.keyCode === KEY_CODES.SPACE) { // eslint-disable-line unicorn/prefer-event-key\n            return handler(event);\n        }\n    });\n}\n\nexport function getScript({ host = window.location.host, path, reverse = false } : {| host? : string, path : string, reverse? : boolean |}) : ?HTMLScriptElement {\n    return inlineMemoize(getScript, () : ?HTMLScriptElement => {\n\n        const url = `${ host }${ path }`;\n        // $FlowFixMe[method-unbinding]\n        const scripts = Array.prototype.slice.call(document.getElementsByTagName('script'));\n\n        if (reverse) {\n            scripts.reverse();\n        }\n\n        for (const script of scripts) {\n            if (!script.src) {\n                continue;\n            }\n\n            const src = script.src.replace(/^https?:\\/\\//, '').split('?')[0];\n\n            if (src === url) {\n                return script;\n            }\n        }\n    }, [ path ]);\n}\n\nexport function isLocalStorageEnabled() : boolean {\n    return inlineMemoize(isLocalStorageEnabled, () => {\n        try {\n            if (typeof window === 'undefined') {\n                return false;\n            }\n\n            if (window.localStorage) {\n                const value = Math.random().toString();\n                window.localStorage.setItem('__test__localStorage__', value);\n                const result = window.localStorage.getItem('__test__localStorage__');\n                window.localStorage.removeItem('__test__localStorage__');\n                if (value === result) {\n                    return true;\n                }\n            }\n        } catch (err) {\n            // pass\n        }\n        return false;\n    });\n}\n\nexport function getBrowserLocales() : $ReadOnlyArray<{| country? : string, lang : string |}> {\n    const nav = window.navigator;\n\n    const locales = nav.languages\n        ? [ ...nav.languages ]\n        : [];\n\n    if (nav.language) {\n        locales.push(nav.language);\n    }\n\n    if (nav.userLanguage) {\n        locales.push(nav.userLanguage);\n    }\n\n    return locales.map(locale => {\n\n        if (locale && locale.match(/^[a-z]{2}[-_][A-Z]{2}$/)) {\n            const [ lang, country ] = locale.split(/[-_]/);\n            return { country, lang };\n        }\n\n        if (locale && locale.match(/^[a-z]{2}$/)) {\n            return { lang: locale };\n        }\n\n        return null;\n\n    }).filter(Boolean);\n}\n\n\nexport function appendChild(container : HTMLElement, child : HTMLElement | Text) {\n    container.appendChild(child);\n}\n\nexport function isElement(element : mixed) : boolean {\n\n    if (element instanceof window.Element) {\n        return true;\n    }\n\n    if (element !== null && typeof element === 'object' && element.nodeType === 1 && typeof element.style === 'object' && typeof element.ownerDocument === 'object') {\n        return true;\n    }\n\n    return false;\n}\n\nexport function getElementSafe(id : ElementRefType, doc : Document | HTMLElement = document) : ?HTMLElement {\n\n    if (isElement(id)) {\n        // $FlowFixMe\n        return id;\n    }\n\n    if (typeof id === 'string') {\n        return doc.querySelector(id);\n    }\n}\n\nexport function getElement(id : ElementRefType, doc : Document | HTMLElement = document) : HTMLElement {\n\n    const element = getElementSafe(id, doc);\n\n    if (element) {\n        return element;\n    }\n\n    throw new Error(`Can not find element: ${ stringify(id) }`);\n}\n\nexport function elementReady(id : ElementRefType) : ZalgoPromise<HTMLElement> {\n    return new ZalgoPromise((resolve, reject) => {\n\n        const name = stringify(id);\n        let el = getElementSafe(id);\n\n        if (el) {\n            return resolve(el);\n        }\n\n        if (isDocumentReady()) {\n            return reject(new Error(`Document is ready and element ${ name } does not exist`));\n        }\n\n        const interval = setInterval(() => {\n\n            el = getElementSafe(id);\n\n            if (el) {\n                resolve(el);\n                clearInterval(interval);\n                return;\n            }\n\n            if (isDocumentReady()) {\n                clearInterval(interval);\n                return reject(new Error(`Document is ready and element ${ name } does not exist`));\n            }\n        }, 10);\n    });\n}\n\n// eslint-disable-next-line unicorn/custom-error-definition\nexport class PopupOpenError extends ExtendableError {}\n\ntype PopupOptions = {|\n    name? : string,\n    width? : number,\n    height? : number,\n    top? : number,\n    left? : number,\n    status? : 0 | 1,\n    resizable? : 0 | 1,\n    toolbar? : 0 | 1,\n    menubar? : 0 | 1,\n    scrollbars? : 0 | 1\n|};\n\nexport function popup(url : string, options? : PopupOptions) : CrossDomainWindowType {\n\n    // $FlowFixMe\n    options = options || {};\n\n    const { width, height } = options;\n\n    let top = 0;\n    let left = 0;\n\n    if (width) {\n        if (window.outerWidth) {\n            left = Math.round((window.outerWidth - width) / 2) + window.screenX;\n        } else if (window.screen.width) {\n            left = Math.round((window.screen.width - width) / 2);\n        }\n    }\n\n    if (height) {\n        if (window.outerHeight) {\n            top = Math.round((window.outerHeight - height) / 2) + window.screenY;\n        } else if (window.screen.height) {\n            top = Math.round((window.screen.height - height) / 2);\n        }\n    }\n\n    if (width && height) {\n        // $FlowFixMe\n        options = {\n            top,\n            left,\n            width,\n            height,\n            status:     1,\n            toolbar:    0,\n            menubar:    0,\n            resizable:  1,\n            scrollbars: 1,\n            ...options\n        };\n    }\n\n    const name = options.name || '';\n    delete options.name;\n\n    // eslint-disable-next-line array-callback-return\n    const params = Object.keys(options).map(key => {\n        // $FlowFixMe\n        if (options[key] !== null && options[key] !== undefined) {\n            return `${ key }=${ stringify(options[key]) }`;\n        }\n    }).filter(Boolean).join(',');\n\n    let win;\n\n    try {\n        win = window.open(url, name, params);\n    } catch (err) {\n        throw new PopupOpenError(`Can not open popup window - ${ err.stack || err.message }`);\n    }\n\n    if (isWindowClosed(win)) {\n        const err = new PopupOpenError(`Can not open popup window - blocked`);\n        throw err;\n    }\n\n    window.addEventListener('unload', () => win.close());\n\n    return win;\n}\n\n\nexport function writeToWindow(win : SameDomainWindowType, html : string) {\n    try {\n        win.document.open();\n        win.document.write(html);\n        win.document.close();\n    } catch (err) {\n        try {\n            win.location = `javascript: document.open(); document.write(${ JSON.stringify(html) }); document.close();`;\n        } catch (err2) {\n            // pass\n        }\n    }\n}\n\nexport function writeElementToWindow(win : SameDomainWindowType, el : HTMLElement) {\n\n    const tag = el.tagName.toLowerCase();\n\n    if (tag !== 'html') {\n        throw new Error(`Expected element to be html, got ${ tag }`);\n    }\n\n    const documentElement = win.document.documentElement;\n\n    for (const child of arrayFrom(documentElement.children)) {\n        documentElement.removeChild(child);\n    }\n\n    for (const child of arrayFrom(el.children)) {\n        documentElement.appendChild(child);\n    }\n}\n\nexport function setStyle(el : HTMLElement, styleText : string, doc : Document = window.document) {\n    // $FlowFixMe\n    if (el.styleSheet) {\n        // $FlowFixMe\n        el.styleSheet.cssText = styleText;\n    } else {\n        el.appendChild(doc.createTextNode(styleText));\n    }\n}\n\nexport type ElementOptionsType = {|\n    style? : { [ string ] : string },\n    id? : string,\n    class? : ?$ReadOnlyArray<string>,\n    attributes? : { [ string ] : string },\n    styleSheet? : ?string,\n    html? : ?string\n|};\n\nlet awaitFrameLoadPromises : WeakMap<HTMLIFrameElement, ZalgoPromise<HTMLIFrameElement>>;\n\nexport function awaitFrameLoad(frame : HTMLIFrameElement) : ZalgoPromise<HTMLIFrameElement> {\n    awaitFrameLoadPromises = awaitFrameLoadPromises || new WeakMap();\n\n    if (awaitFrameLoadPromises.has(frame)) {\n        const promise = awaitFrameLoadPromises.get(frame);\n        if (promise) {\n            return promise;\n        }\n    }\n\n    const promise = new ZalgoPromise((resolve, reject) => {\n        frame.addEventListener('load', () => {\n            linkFrameWindow(frame);\n            resolve(frame);\n        });\n\n        frame.addEventListener('error', (err : Event) => {\n            if (frame.contentWindow) {\n                resolve(frame);\n            } else {\n                reject(err);\n            }\n        });\n    });\n\n    awaitFrameLoadPromises.set(frame, promise);\n\n    return promise;\n}\n\nexport function awaitFrameWindow(frame : HTMLIFrameElement) : ZalgoPromise<CrossDomainWindowType> {\n    return awaitFrameLoad(frame).then(loadedFrame => {\n\n        if (!loadedFrame.contentWindow) {\n            throw new Error(`Could not find window in iframe`);\n        }\n\n        return loadedFrame.contentWindow;\n    });\n}\n\nconst getDefaultCreateElementOptions = () : ElementOptionsType => {\n    // $FlowFixMe\n    return {};\n};\n\nexport function createElement(tag : string = 'div', options : ElementOptionsType = getDefaultCreateElementOptions(), container : ?HTMLElement) : HTMLElement {\n\n    tag = tag.toLowerCase();\n    const element = document.createElement(tag);\n\n    if (options.style) {\n        extend(element.style, options.style);\n    }\n\n    if (options.class) {\n        element.className = options.class.join(' ');\n    }\n\n    if (options.id) {\n        element.setAttribute('id', options.id);\n    }\n\n    if (options.attributes) {\n        for (const key of Object.keys(options.attributes)) {\n            element.setAttribute(key, options.attributes[key]);\n        }\n    }\n\n    if (options.styleSheet) {\n        setStyle(element, options.styleSheet);\n    }\n\n    if (container) {\n        appendChild(container, element);\n    }\n\n    if (options.html) {\n        if (tag === 'iframe') {\n            // $FlowFixMe\n            if (!container || !element.contentWindow) {\n                throw new Error(`Iframe html can not be written unless container provided and iframe in DOM`);\n            }\n\n            // $FlowFixMe\n            writeToWindow(element.contentWindow, options.html);\n\n        } else {\n            element.innerHTML = options.html;\n        }\n    }\n\n    return element;\n}\n\ntype StringMap = {|\n    [ string ] : string\n|};\n\nexport type IframeElementOptionsType = {|\n    style? : StringMap,\n    class? : ?$ReadOnlyArray<string>,\n    attributes? : StringMap,\n    styleSheet? : ?string,\n    html? : ?string,\n    url? : ?string\n|};\n\nconst getDefaultIframeOptions = () : IframeElementOptionsType => {\n    // $FlowFixMe\n    return {};\n};\n\nconst getDefaultStringMap = () : StringMap => {\n    // $FlowFixMe\n    return {};\n};\n\nexport function iframe(options : IframeElementOptionsType = getDefaultIframeOptions(), container : ?HTMLElement) : HTMLIFrameElement {\n\n    const attributes = options.attributes || getDefaultStringMap();\n    const style = options.style || getDefaultStringMap();\n\n    // $FlowFixMe\n    const newAttributes = {\n        allowTransparency: 'true',\n        ...attributes\n    };\n\n    // $FlowFixMe\n    const newStyle = {\n        backgroundColor: 'transparent',\n        border:          'none',\n        ...style\n    };\n\n    const frame = createElement('iframe', {\n        attributes: newAttributes,\n        style:      newStyle,\n        html:       options.html,\n        class:      options.class\n    });\n\n    const isIE = window.navigator.userAgent.match(/MSIE|Edge/i);\n\n    if (!frame.hasAttribute('id')) {\n        frame.setAttribute('id', uniqueID());\n    }\n\n    // $FlowFixMe\n    awaitFrameLoad(frame);\n\n    if (container) {\n        const el = getElement(container);\n        el.appendChild(frame);\n    }\n\n    if (options.url || isIE) {\n        frame.setAttribute('src', options.url || 'about:blank');\n    }\n\n    // $FlowFixMe\n    return frame;\n}\n\nexport function addEventListener(obj : HTMLElement, event : string, handler : (event : Event) => void) : CancelableType {\n    obj.addEventListener(event, handler);\n    return {\n        cancel() {\n            obj.removeEventListener(event, handler);\n        }\n    };\n}\n\nexport function bindEvents(element : HTMLElement, eventNames : $ReadOnlyArray<string>, handler : (event : Event) => void) : CancelableType {\n\n    handler = once(handler);\n\n    for (const eventName of eventNames) {\n        element.addEventListener(eventName, handler);\n    }\n\n    return {\n        cancel: once(() => {\n            for (const eventName of eventNames) {\n                element.removeEventListener(eventName, handler);\n            }\n        })\n    };\n}\n\nconst VENDOR_PREFIXES = [ 'webkit', 'moz', 'ms', 'o' ];\n\nexport function setVendorCSS(element : HTMLElement, name : string, value : string) {\n\n    // $FlowFixMe\n    element.style[name] = value;\n\n    const capitalizedName = capitalizeFirstLetter(name);\n\n    for (const prefix of VENDOR_PREFIXES) {\n        // $FlowFixMe\n        element.style[`${ prefix }${ capitalizedName }`] = value;\n    }\n}\n\nconst ANIMATION_START_EVENTS = [ 'animationstart', 'webkitAnimationStart', 'oAnimationStart', 'MSAnimationStart' ];\nconst ANIMATION_END_EVENTS   = [ 'animationend', 'webkitAnimationEnd', 'oAnimationEnd', 'MSAnimationEnd' ];\n\nexport function animate(element : ElementRefType, name : string, clean : (Function) => void, timeout : number = 1000) : ZalgoPromise<void> {\n    return new ZalgoPromise((resolve, reject) => {\n\n        const el = getElement(element);\n\n        if (!el) {\n            return resolve();\n        }\n\n        let hasStarted = false;\n\n        // eslint-disable-next-line prefer-const\n        let startTimeout;\n        let endTimeout;\n        // eslint-disable-next-line prefer-const\n        let startEvent;\n        // eslint-disable-next-line prefer-const\n        let endEvent;\n\n        function cleanUp() {\n            clearTimeout(startTimeout);\n            clearTimeout(endTimeout);\n            startEvent.cancel();\n            endEvent.cancel();\n        }\n\n        startEvent = bindEvents(el, ANIMATION_START_EVENTS, event => {\n\n            // $FlowFixMe\n            if (event.target !== el || event.animationName !== name) {\n                return;\n            }\n\n            clearTimeout(startTimeout);\n\n            event.stopPropagation();\n\n            startEvent.cancel();\n            hasStarted = true;\n\n            endTimeout = setTimeout(() => {\n                cleanUp();\n                resolve();\n            }, timeout);\n        });\n\n        endEvent = bindEvents(el, ANIMATION_END_EVENTS, event => {\n\n            // $FlowFixMe\n            if (event.target !== el || event.animationName !== name) {\n                return;\n            }\n\n            cleanUp();\n\n            // $FlowFixMe\n            if (typeof event.animationName === 'string' && event.animationName !== name) {\n                return reject(`Expected animation name to be ${ name }, found ${ event.animationName }`);\n            }\n\n            return resolve();\n        });\n\n        setVendorCSS(el, 'animationName', name);\n\n        startTimeout = setTimeout(() => {\n            if (!hasStarted) {\n                cleanUp();\n                return resolve();\n            }\n        }, 200);\n\n        if (clean) {\n            clean(cleanUp);\n        }\n    });\n}\n\nexport function makeElementVisible(element : HTMLElement) {\n    element.style.setProperty('visibility', '');\n}\n\nexport function makeElementInvisible(element : HTMLElement) {\n    element.style.setProperty('visibility', 'hidden', 'important');\n}\n\n\nexport function showElement(element : HTMLElement) {\n    element.style.setProperty('display', '');\n}\n\nexport function hideElement(element : HTMLElement) {\n    element.style.setProperty('display', 'none', 'important');\n}\n\nexport function destroyElement(element : HTMLElement) {\n    if (element && element.parentNode) {\n        element.parentNode.removeChild(element);\n    }\n}\n\nexport function showAndAnimate(element : HTMLElement, name : string, clean : (Function) => void) : ZalgoPromise<void> {\n    const animation = animate(element, name, clean);\n    showElement(element);\n    return animation;\n}\n\nexport function animateAndHide(element : HTMLElement, name : string, clean : (Function) => void) : ZalgoPromise<void> {\n    return animate(element, name, clean).then(() => {\n        hideElement(element);\n    });\n}\n\nexport function addClass(element : HTMLElement, name : string) {\n    element.classList.add(name);\n}\n\nexport function removeClass(element : HTMLElement, name : string) {\n    element.classList.remove(name);\n}\n\nexport function isElementClosed(el : HTMLElement) : boolean {\n    if (!el || !el.parentNode || !el.ownerDocument || !el.ownerDocument.documentElement || !el.ownerDocument.documentElement.contains(el)) {\n        return true;\n    }\n    return false;\n}\n\nexport function watchElementForClose(element : HTMLElement, handler : () => mixed) : CancelableType {\n    handler = once(handler);\n\n    let cancelled = false;\n    const mutationObservers = [];\n    // eslint-disable-next-line prefer-const\n    let interval;\n    // eslint-disable-next-line prefer-const\n    let sacrificialFrame;\n    let sacrificialFrameWin;\n\n    const cancel = () => {\n        cancelled = true;\n        for (const observer of mutationObservers) {\n            observer.disconnect();\n        }\n        if (interval) {\n            interval.cancel();\n        }\n        if (sacrificialFrameWin) {\n            // eslint-disable-next-line no-use-before-define\n            sacrificialFrameWin.removeEventListener('unload', elementClosed);\n        }\n        if (sacrificialFrame) {\n            destroyElement(sacrificialFrame);\n        }\n    };\n\n    const elementClosed = () => {\n        if (!cancelled) {\n            handler();\n            cancel();\n        }\n    };\n\n    if (isElementClosed(element)) {\n        elementClosed();\n        return { cancel };\n    }\n\n    // Strategy 1: Mutation observer\n\n    if (window.MutationObserver) {\n        let mutationElement = element.parentElement;\n        while (mutationElement) {\n            const mutationObserver = new window.MutationObserver(() => {\n                if (isElementClosed(element)) {\n                    elementClosed();\n                }\n            });\n\n            mutationObserver.observe(mutationElement, { childList: true });\n            mutationObservers.push(mutationObserver);\n            mutationElement = mutationElement.parentElement;\n        }\n    }\n\n    // Strategy 2: Sacrificial iframe\n\n    sacrificialFrame = document.createElement('iframe');\n    sacrificialFrame.setAttribute('name', `__detect_close_${ uniqueID() }__`);\n    sacrificialFrame.style.display = 'none';\n    awaitFrameWindow(sacrificialFrame).then(frameWin => {\n        sacrificialFrameWin = assertSameDomain(frameWin);\n        sacrificialFrameWin.addEventListener('unload', elementClosed);\n    });\n    element.appendChild(sacrificialFrame);\n\n    // Strategy 3: Poller\n\n    const check = () => {\n        if (isElementClosed(element)) {\n            elementClosed();\n        }\n    };\n    interval = safeInterval(check, 1000);\n\n    return { cancel };\n}\n\nexport function fixScripts(el : HTMLElement, doc : Document = window.document) {\n    for (const script of querySelectorAll('script', el)) {\n        const parentNode = script.parentNode;\n\n        if (!parentNode) {\n            continue;\n        }\n\n        const newScript = doc.createElement('script');\n        newScript.text = script.textContent;\n        parentNode.replaceChild(newScript, script);\n    }\n}\n\ntype OnResizeOptions = {|\n    width? : boolean,\n    height? : boolean,\n    interval? : number,\n    win? : SameDomainWindowType\n|};\n\nexport function onResize(el : HTMLElement, handler : ({| width : number, height : number |}) => void, { width = true, height = true, interval = 100, win = window } : OnResizeOptions = {}) : {| cancel : () => void |} {\n    let currentWidth = el.offsetWidth;\n    let currentHeight = el.offsetHeight;\n    let canceled = false;\n\n    handler({ width: currentWidth, height: currentHeight });\n\n    const check = () => {\n        if (canceled || !isElementVisible(el)) {\n            return;\n        }\n\n        const newWidth = el.offsetWidth;\n        const newHeight = el.offsetHeight;\n\n        if ((width && newWidth !== currentWidth) || (height && newHeight !== currentHeight)) {\n            handler({ width: newWidth, height: newHeight });\n        }\n\n        currentWidth = newWidth;\n        currentHeight = newHeight;\n    };\n\n    let observer;\n    let timeout;\n\n    win.addEventListener('resize', check);\n\n    if (typeof win.ResizeObserver !== 'undefined') {\n        observer = new win.ResizeObserver(check);\n        observer.observe(el);\n        timeout = safeInterval(check, interval * 10);\n\n    } else if (typeof win.MutationObserver !== 'undefined') {\n        observer = new win.MutationObserver(check);\n        observer.observe(el, {\n            attributes:    true,\n            childList:     true,\n            subtree:       true,\n            characterData: false\n        });\n        timeout = safeInterval(check, interval * 10);\n    } else {\n        timeout = safeInterval(check, interval);\n    }\n\n    return {\n        cancel: () => {\n            canceled = true;\n            observer.disconnect();\n            window.removeEventListener('resize', check);\n            timeout.cancel();\n        }\n    };\n}\n\nexport function getResourceLoadTime(url : string) : ?number {\n    const performance = getPerformance();\n\n    if (!performance) {\n        return;\n    }\n\n    // $FlowFixMe[method-unbinding]\n    if (typeof performance.getEntries !== 'function') {\n        return;\n    }\n\n    const entries = performance.getEntries();\n\n    for (let i = 0; i < entries.length; i++) {\n        const entry = entries[i];\n\n        if (entry && entry.name && entry.name.indexOf(url) === 0 && typeof entry.duration === 'number') {\n            return Math.floor(entry.duration);\n        }\n    }\n}\n\nexport function isShadowElement(element : Node) : boolean {\n    while (element.parentNode) {\n        element = element.parentNode;\n    }\n\n    return element.toString() === '[object ShadowRoot]';\n}\n\nexport function getShadowRoot(element : Node) : ?Node {\n    while (element.parentNode) {\n        element = element.parentNode;\n    }\n\n    if (isShadowElement(element)) {\n        return element;\n    }\n}\n\nexport function getShadowHost(element : Node) : ?HTMLElement {\n    const shadowRoot = getShadowRoot(element);\n\n    // $FlowFixMe\n    if (shadowRoot && shadowRoot.host) {\n        // $FlowFixMe\n        return shadowRoot.host;\n    }\n}\n\n\nexport function insertShadowSlot(element : HTMLElement) : HTMLElement {\n    const shadowHost = getShadowHost(element);\n\n    if (!shadowHost) {\n        throw new Error(`Element is not in shadow dom`);\n    }\n\n    const slotName = `shadow-slot-${ uniqueID() }`;\n    const slot = document.createElement('slot');\n    slot.setAttribute('name', slotName);\n    element.appendChild(slot);\n\n    const slotProvider = document.createElement('div');\n    slotProvider.setAttribute('slot', slotName);\n    shadowHost.appendChild(slotProvider);\n\n    if (isShadowElement(shadowHost)) {\n        return insertShadowSlot(slotProvider);\n    }\n\n    return slotProvider;\n}\n\nexport function preventClickFocus(el : HTMLElement) {\n    const onFocus = (event : Event) => {\n        el.removeEventListener('focus', onFocus);\n        event.preventDefault();\n        el.blur();\n        return false;\n    };\n\n    el.addEventListener('mousedown', () => {\n        el.addEventListener('focus', onFocus);\n        setTimeout(() => {\n            el.removeEventListener('focus', onFocus);\n        }, 1);\n    });\n}\n\nexport function getStackTrace() : string {\n    try {\n        throw new Error('_');\n    }\n    catch (err) {\n        return err.stack || '';\n    }\n}\n\nfunction inferCurrentScript() : ?HTMLScriptElement {\n    try {\n        const stack = getStackTrace();\n        const stackDetails = (/.*at [^(]*\\((.*):(.+):(.+)\\)$/ig).exec(stack);\n        const scriptLocation = stackDetails && stackDetails[1];\n\n        if (!scriptLocation) {\n            return;\n        }\n\n        // $FlowFixMe[method-unbinding]\n        for (const script of Array.prototype.slice.call(document.getElementsByTagName('script')).reverse()) {\n            if (script.src && script.src === scriptLocation) {\n                return script;\n            }\n        }\n\n    } catch (err) {\n        // pass\n    }\n}\n\n// eslint-disable-next-line compat/compat\nlet currentScript = typeof document !== 'undefined' ? document.currentScript : null;\n\ntype GetCurrentScript = () => HTMLScriptElement;\n\nexport const getCurrentScript : GetCurrentScript = memoize(() => {\n    if (currentScript) {\n        return currentScript;\n    }\n\n    currentScript = inferCurrentScript();\n\n    if (currentScript) {\n        return currentScript;\n    }\n\n    throw new Error('Can not determine current script');\n});\n\nconst currentUID = uniqueID();\n\ntype GetCurrentScriptUID = () => string;\n\nexport const getCurrentScriptUID : GetCurrentScriptUID = memoize(() => {\n    let script;\n\n    try {\n        script = getCurrentScript();\n    } catch (err) {\n        return currentUID;\n    }\n\n    let uid = script.getAttribute(ATTRIBUTES.UID);\n\n    if (uid && typeof uid === 'string') {\n        return uid;\n    }\n\n    uid = script.getAttribute(`${ ATTRIBUTES.UID }-auto`);\n\n    if (uid && typeof uid === 'string') {\n        return uid;\n    }\n\n    if (script.src) {\n\n        const { src, dataset } = script;\n        const stringToHash = JSON.stringify({ src, dataset });\n        const hashedString = strHashStr(stringToHash);\n        const hashResult = hashedString.slice(hashedString.length - UID_HASH_LENGTH);\n\n        uid = `uid_${ hashResult }`;\n    } else {\n        uid = uniqueID();\n    }\n\n    script.setAttribute(`${ ATTRIBUTES.UID }-auto`, uid);\n\n    return uid;\n});\n\ntype SubmitFormOptions = {|\n    url : string,\n    target : string,\n    body? : {| [string] : string | boolean |},\n    method? : string\n|};\n\nexport function submitForm({ url, target, body, method = 'post' } : SubmitFormOptions) {\n    const form = document.createElement('form');\n    form.setAttribute('target', target);\n    form.setAttribute('method', method);\n    form.setAttribute('action', url);\n    form.style.display = 'none';\n\n    if (body) {\n        for (const key of Object.keys(body)) {\n            const input = document.createElement('input');\n            input.setAttribute('name', key);\n            input.setAttribute('value', body[key]?.toString());\n            form.appendChild(input);\n        }\n    }\n\n    getBody().appendChild(form);\n    form.submit();\n    getBody().removeChild(form);\n}\n","/* @flow */\n\nexport const KEY_CODES = {\n    ENTER: 13,\n    SPACE: 32\n};\n\nexport const ATTRIBUTES = {\n    UID: 'data-uid'\n};\n\nexport const UID_HASH_LENGTH = 30;\n","/* @flow */\n\nimport { uniqueID, getGlobal, inlineMemoize } from './util';\nimport { isLocalStorageEnabled } from './dom';\n\ntype Getter<T> = <T>(handler : (Object) => T) => T;\n\nexport type Storage = {|\n    getState : Getter<*>,\n    getID : () => string,\n    isStateFresh : () => boolean,\n    getSessionState : Getter<*>,\n    getSessionID : () => string\n|};\n\nconst DEFAULT_SESSION_STORAGE = 20 * 60 * 1000;\n\nexport function getStorage({ name, lifetime = DEFAULT_SESSION_STORAGE } : {| name : string, lifetime? : number |}) : Storage {\n    return inlineMemoize(getStorage, () => {\n        const STORAGE_KEY = `__${ name }_storage__`;\n        const newStateID = uniqueID();\n\n        let accessedStorage;\n\n        function getState<T>(handler : (storage : Object) => T) : T {\n\n            const localStorageEnabled = isLocalStorageEnabled();\n            let storage;\n\n            if (accessedStorage) {\n                storage = accessedStorage;\n            }\n\n            if (!storage && localStorageEnabled) {\n                const rawStorage = window.localStorage.getItem(STORAGE_KEY);\n\n                if (rawStorage) {\n                    storage = JSON.parse(rawStorage);\n                }\n            }\n\n            if (!storage) {\n                storage = getGlobal()[STORAGE_KEY];\n            }\n\n            if (!storage) {\n                storage = {\n                    id: newStateID\n                };\n            }\n\n            if (!storage.id) {\n                storage.id = newStateID;\n            }\n\n            accessedStorage = storage;\n\n            const result = handler(storage);\n\n            if (localStorageEnabled) {\n                window.localStorage.setItem(STORAGE_KEY, JSON.stringify(storage));\n            } else {\n                getGlobal()[STORAGE_KEY] = storage;\n            }\n\n            accessedStorage = null;\n\n            return result;\n        }\n\n        function getID() : string {\n            return getState(storage => storage.id);\n        }\n\n        function isStateFresh() : boolean {\n            return getID() === newStateID;\n        }\n\n        function getSession<T>(handler : (state : Object) => T) : T {\n            return getState(storage => {\n\n                let session = storage.__session__;\n                const now = Date.now();\n\n                if (session && ((now - session.created) > lifetime)) {\n                    session = null;\n                }\n\n                if (!session) {\n                    session = {\n                        guid:    uniqueID(),\n                        created: now\n                    };\n                }\n\n                storage.__session__ = session;\n\n                return handler(session);\n            });\n        }\n\n        function getSessionState<T>(handler : (state : Object) => T) : T {\n            return getSession(session => {\n                session.state = session.state || {};\n                return handler(session.state);\n            });\n        }\n\n        function getSessionID() : string {\n            return getSession(session => session.guid);\n        }\n\n        return {\n            getState,\n            getID,\n            isStateFresh,\n            getSessionState,\n            getSessionID\n        };\n    }, [ { name, lifetime } ]);\n}\n","/* @flow */\n\nimport { ZalgoPromise } from 'zalgo-promise/src';\nimport { type SameDomainWindowType } from 'cross-domain-utils/src';\n\ntype RequestOptionsType = {|\n    url : string,\n    method? : string,\n    headers? : { [key : string] : string },\n    json? : $ReadOnlyArray<mixed> | Object,\n    data? : { [key : string] : string },\n    body? : string,\n    win? : SameDomainWindowType,\n    timeout? : number\n|};\n\ntype ResponseType = {|\n    status : number,\n    headers : { [string] : string },\n    body : Object\n|};\n\nconst HEADERS = {\n    CONTENT_TYPE: 'content-type',\n    ACCEPT:       'accept'\n};\n\nconst headerBuilders = [];\n\nfunction parseHeaders(rawHeaders : string = '') : { [string] : string } {\n    const result = {};\n    for (const line of rawHeaders.trim().split('\\n')) {\n        const [ key, ...values ] = line.split(':');\n        result[key.toLowerCase()] = values.join(':').trim();\n    }\n    return result;\n}\n\nexport function request({ url, method = 'get', headers = {}, json, data, body, win = window, timeout = 0 } : RequestOptionsType) : ZalgoPromise<ResponseType> {\n    return new ZalgoPromise((resolve, reject) => {\n\n        if ((json && data) || (json && body) || (data && json)) {\n            throw new Error(`Only options.json or options.data or options.body should be passed`);\n        }\n\n        const normalizedHeaders = {};\n\n        for (const key of Object.keys(headers)) {\n            normalizedHeaders[key.toLowerCase()] = headers[key];\n        }\n\n        if (json) {\n            normalizedHeaders[HEADERS.CONTENT_TYPE] = normalizedHeaders[HEADERS.CONTENT_TYPE] || 'application/json';\n        } else if (data || body) {\n            normalizedHeaders[HEADERS.CONTENT_TYPE] = normalizedHeaders[HEADERS.CONTENT_TYPE] || 'application/x-www-form-urlencoded; charset=utf-8';\n        }\n\n        normalizedHeaders[HEADERS.ACCEPT] = normalizedHeaders[HEADERS.ACCEPT] || 'application/json';\n\n        for (const headerBuilder of headerBuilders) {\n            const builtHeaders = headerBuilder();\n\n            for (const key of Object.keys(builtHeaders)) {\n                normalizedHeaders[key.toLowerCase()] = builtHeaders[key];\n            }\n        }\n\n        const xhr = new win.XMLHttpRequest();\n\n        xhr.addEventListener('load', function xhrLoad() : void {\n\n            const responseHeaders = parseHeaders(this.getAllResponseHeaders());\n\n            if (!this.status) {\n                return reject(new Error(`Request to ${ method.toLowerCase() } ${ url } failed: no response status code.`));\n            }\n            \n            const contentType = responseHeaders['content-type'];\n            const isJSON = contentType && (contentType.indexOf('application/json') === 0 || contentType.indexOf('text/json') === 0);\n            let responseBody = this.responseText;\n\n            try {\n                responseBody = JSON.parse(responseBody);\n            } catch (err) {\n                if (isJSON) {\n                    return reject(new Error(`Invalid json: ${ this.responseText }.`));\n                }\n            }\n\n            const res = {\n                status:  this.status,\n                headers: responseHeaders,\n                body:    responseBody\n            };\n\n            return resolve(res);\n\n        }, false);\n\n        xhr.addEventListener('error', (evt) => {\n            reject(new Error(`Request to ${ method.toLowerCase() } ${ url } failed: ${ evt.toString() }.`));\n        }, false);\n\n        xhr.open(method, url, true);\n\n        for (const key in normalizedHeaders) {\n            if (normalizedHeaders.hasOwnProperty(key)) {\n                xhr.setRequestHeader(key, normalizedHeaders[key]);\n            }\n        }\n\n        if (json) {\n            body = JSON.stringify(json);\n        } else if (data) {\n            body = Object.keys(data).map(key => {\n                return `${ encodeURIComponent(key) }=${ data ? encodeURIComponent(data[key]) : '' }`;\n            }).join('&');\n        }\n\n        xhr.timeout = timeout;\n        xhr.ontimeout = function xhrTimeout() {\n            reject(new Error(`Request to ${ method.toLowerCase() } ${ url } has timed out`));\n        };\n\n        xhr.send(body);\n    });\n}\n\nexport function addHeaderBuilder(method : () => { [string] : string }) {\n    headerBuilders.push(method);\n}\n","/* @flow */\n\nimport { ENV, PROTOCOL, COMPONENTS, PLATFORM, type FundingEligibilityType } from '@paypal/sdk-constants/src';\nimport { isDevice } from 'belter/src';\n\nexport function getSDKHost() : string {\n    return __SDK_HOST__;\n}\n\nexport function getProtocol() : $Values<typeof PROTOCOL> {\n    return (typeof __PROTOCOL__ !== 'undefined') ? __PROTOCOL__ : PROTOCOL.HTTPS;\n}\n\nexport function getHost() : string {\n    return __HOST__;\n}\n\nexport function getHostName() : string {\n    return __HOSTNAME__;\n}\n\nexport function getPort() : number {\n    return __PORT__;\n}\n\nexport function getPath() : string {\n    return __PATH__;\n}\n\nexport function getEnv() : $Values<typeof ENV> {\n    return __ENV__;\n}\n\nexport function getPayPalDomain() : string {\n    return __PAYPAL_DOMAIN__;\n}\n\nexport function getPayPalAPIDomain() : string {\n    return __PAYPAL_API_DOMAIN__;\n}\n\nexport function getDefaultServiceStageHost() : ?string {\n    if (typeof __SERVICE_STAGE_HOST__ !== 'undefined' && __SERVICE_STAGE_HOST__ !== null) {\n        return __SERVICE_STAGE_HOST__;\n    }\n}\n\nexport function getDefaultStageHost() : ?string {\n    if (typeof __STAGE_HOST__ !== 'undefined' && __STAGE_HOST__ !== null) {\n        return __STAGE_HOST__;\n    }\n}\n\nexport function getDefaultAPIStageHost() : ?string {\n    const serviceStageHost = getDefaultServiceStageHost();\n    const stageHost = getDefaultStageHost();\n\n    if (serviceStageHost) {\n        return serviceStageHost;\n    } else if (stageHost) {\n        return stageHost;\n    }\n}\n\nexport function getStageHost() : ?string {\n    return getDefaultStageHost();\n}\n\nexport function getAPIStageHost() : ?string {\n    const defaultAPIStageHost = getDefaultAPIStageHost();\n\n    if (defaultAPIStageHost) {\n        return defaultAPIStageHost.replace('www.', 'api.');\n    }\n}\n\nexport function getVersion() : string {\n    return __VERSION__;\n}\n\nexport function getCorrelationID() : string {\n    return __CORRELATION_ID__;\n}\n\nexport function getDefaultNamespace() : string {\n    return __NAMESPACE__;\n}\n\nexport function getDebug() : boolean {\n    return __DEBUG__;\n}\n\nexport function getComponents() : $ReadOnlyArray<$Values<typeof COMPONENTS>> {\n    return __COMPONENTS__;\n}\n\nexport function getFundingEligibility() : FundingEligibilityType {\n    return __FUNDING_ELIGIBILITY__;\n}\n\nexport function getPlatform() : $Values<typeof PLATFORM> {\n    return isDevice() ? PLATFORM.MOBILE : PLATFORM.DESKTOP;\n}\n","/* @flow */\n\nexport const SUPPORTED_BROWSERS = {\n    msie:           '11',\n    firefox:        '30',\n    chrome:         '27',\n    safari:         '7',\n    opera:          '16',\n    msedge:         '12',\n    samsungBrowser: '2.1',\n    silk:           '59.3',\n    ucbrowser:      '10.0.0.488',\n    vivaldi:        '1.91'\n};\n\nconst SANDBOX_ALIAS = 'AZDxjDScFpQtjWTOUtWKbyN_bDt4OgqaF4eYXlewfBP4-8aqX3PiV8e1GWU6liB2CUXlkA59kJXE7M6R';\n\nexport const CLIENT_ID_ALIAS = {\n    sandbox:    SANDBOX_ALIAS,\n    sb:         SANDBOX_ALIAS,\n    test:       SANDBOX_ALIAS\n};\n\nexport const URI = {\n    LOGGER: `/xoplatform/logger/api/logger`,\n    AUTH:   `/v1/oauth2/token`,\n    ORDER:  `/v2/checkout/orders`\n};\n","/* @flow */\n\nimport { getCurrentScriptUID, ATTRIBUTES, parseQuery, getBrowserLocales, base64decode,\n    values, getCurrentScript, memoize, stringifyError, getScript } from 'belter/src';\nimport { COUNTRY, SDK_SETTINGS, SDK_QUERY_KEYS, INTENT, COMMIT, VAULT, CURRENCY,\n    FUNDING, CARD, COUNTRY_LANGS, DEFAULT_INTENT, DEFAULT_CURRENCY, DEFAULT_VAULT,\n    QUERY_BOOL, LANG, type LocaleType, DEFAULT_SALE_COMMIT, DEFAULT_NONSALE_COMMIT,\n    PAGE_TYPES } from '@paypal/sdk-constants/src';\n\nimport { getPath, getDefaultNamespace, getSDKHost } from './global';\nimport { CLIENT_ID_ALIAS } from './config';\n\ntype GetSDKScript = () => HTMLScriptElement;\n\nexport const getSDKScript : GetSDKScript = memoize(() => {\n    if (__TEST__) {\n        const script = getScript({ host: getSDKHost(), path: getPath(), reverse: true });\n        if (!script) {\n            throw new Error(`Can not find SDK test script`);\n        }\n        return script;\n    }\n\n    try {\n        return getCurrentScript();\n    } catch (err) {\n        throw new Error(`PayPal Payments SDK script not found on page! Expected to find <script src=\"https://${ getSDKHost() }${  getPath() }\">\\n\\n${ stringifyError(err) }`);\n    }\n});\n\ntype GetSDKAttributes = () => { [string] : string };\n\nexport const getSDKAttributes : GetSDKAttributes = memoize(() => {\n    const sdkScript = getSDKScript();\n    const result = {};\n    for (const attr of sdkScript.attributes) {\n        if (attr.name.indexOf('data-') === 0) {\n            result[attr.name] = attr.value;\n        }\n    }\n    result[ATTRIBUTES.UID] = getCurrentScriptUID();\n    return result;\n});\n\nexport function getSDKAttribute<T : string | void>(name : $Values<typeof SDK_SETTINGS>, def : T) : T {\n    // $FlowFixMe\n    return getSDKAttributes()[name] || def;\n}\n\nexport function getSDKQueryParams() : { [string] : string } {\n    const script = getSDKScript();\n    return parseQuery(script.src.split('?')[1] || '');\n}\n\ntype GetSDKQueryParam =\n    // eslint-disable-next-line no-undef\n    (<T : string>($Values<typeof SDK_QUERY_KEYS>) => T | void) &\n    // eslint-disable-next-line no-undef\n    (<T : string>($Values<typeof SDK_QUERY_KEYS>, T) => T);\n\nexport const getSDKQueryParam : GetSDKQueryParam = <T>(name : string, def : T) => {\n    // $FlowFixMe\n    return getSDKQueryParams()[name] || def;\n};\n\nexport function getScriptUrl() : string {\n    const src = getSDKScript().getAttribute('src');\n    if (!src) {\n        throw new Error(`Can not find src for sdk script`);\n    }\n    return src;\n}\n\nexport function getSDKQueryParamBool<T : boolean>(name : $Values<typeof SDK_QUERY_KEYS>, def? : T) : T {\n    // $FlowFixMe\n    return getSDKQueryParam(name, def ? def.toString() : QUERY_BOOL.FALSE) === QUERY_BOOL.TRUE;\n}\n\nexport function getClientID() : string {\n    const clientID = getSDKQueryParam(SDK_QUERY_KEYS.CLIENT_ID);\n\n    if (!clientID) {\n        throw new Error(`Expected ${ SDK_QUERY_KEYS.CLIENT_ID } parameter in sdk url`);\n    }\n\n    if (CLIENT_ID_ALIAS[clientID]) {\n        return CLIENT_ID_ALIAS[clientID];\n    }\n\n    return clientID;\n}\n\nexport function getMerchantID() : $ReadOnlyArray<string> {\n    const merchantIDString = getSDKQueryParam(SDK_QUERY_KEYS.MERCHANT_ID);\n\n    if (merchantIDString === '*') {\n        // get multiple merchant ids or emails from data-merchant-id\n        const merchantIDAttribute = getSDKAttribute(SDK_SETTINGS.MERCHANT_ID);\n\n        if (!merchantIDAttribute) {\n            throw new Error(`Must pass ${ SDK_SETTINGS.MERCHANT_ID } when ${ SDK_QUERY_KEYS.MERCHANT_ID }=* passed in url`);\n        }\n\n        const merchantID = merchantIDAttribute.split(',');\n\n        if (merchantID.length <= 1) {\n            throw new Error(`Must pass multiple merchant ids to ${ SDK_SETTINGS.MERCHANT_ID }. If passing a single id, pass ${ SDK_QUERY_KEYS.MERCHANT_ID }=XYZ in url`);\n        }\n\n        // check duplicates\n        const hasDuplicate = merchantID.some((val, i) => merchantID && merchantID.indexOf(val) !== i);\n\n        if (hasDuplicate) {\n            throw new Error(`Duplicates ${ SDK_SETTINGS.MERCHANT_ID }. Must pass unique merchant ids to ${ SDK_SETTINGS.MERCHANT_ID }.`);\n        }\n        return merchantID;\n    }\n\n    if (merchantIDString) {\n        return merchantIDString.split(',');\n    }\n\n    return [];\n}\n\nexport function getIntent() : $Values<typeof INTENT> {\n    return getSDKQueryParam(SDK_QUERY_KEYS.INTENT, DEFAULT_INTENT);\n}\n\nexport function getCommit() : $Values<typeof COMMIT> {\n    return getSDKQueryParamBool(SDK_QUERY_KEYS.COMMIT, getIntent() === INTENT.CAPTURE ? DEFAULT_SALE_COMMIT : DEFAULT_NONSALE_COMMIT);\n}\n\nexport function getVault() : $Values<typeof VAULT> {\n    return getSDKQueryParamBool(SDK_QUERY_KEYS.VAULT, DEFAULT_VAULT);\n}\n\nexport function getCurrency() : $Values<typeof CURRENCY> {\n    return getSDKQueryParam(SDK_QUERY_KEYS.CURRENCY, DEFAULT_CURRENCY);\n}\n\nexport function getEnableFunding() : $ReadOnlyArray<?$Values<typeof FUNDING>> {\n    const funding = getSDKQueryParam(SDK_QUERY_KEYS.ENABLE_FUNDING);\n    if (funding) {\n        return funding.split(',');\n    }\n    return [];\n}\n\nexport function getDisableFunding() : $ReadOnlyArray<?$Values<typeof FUNDING>> {\n    const funding = getSDKQueryParam(SDK_QUERY_KEYS.DISABLE_FUNDING);\n    if (funding) {\n        return funding.split(',');\n    }\n    return [];\n}\n\nexport function getDisableCard() : $ReadOnlyArray<?$Values<typeof CARD>> {\n    const funding = getSDKQueryParam(SDK_QUERY_KEYS.DISABLE_CARD);\n    if (funding) {\n        return funding.split(',');\n    }\n    return [];\n}\n\nexport function getBuyerCountry() : ?$Values<typeof COUNTRY> {\n    return getSDKQueryParam(SDK_QUERY_KEYS.BUYER_COUNTRY);\n}\n\nexport function getNamespace() : string {\n    return getSDKAttribute(SDK_SETTINGS.NAMESPACE) || getDefaultNamespace();\n}\n\nexport function getClientToken() : ?string {\n    return getSDKAttribute(SDK_SETTINGS.CLIENT_TOKEN);\n}\n\nexport function getAmount() : ?string {\n    const amount = getSDKAttribute(SDK_SETTINGS.AMOUNT);\n    if (amount && !amount.match(/^\\d+\\.\\d\\d$/)) {\n        throw new Error(`Invalid amount: ${ amount }`);\n    }\n    return amount;\n}\n\nexport function getUserIDToken() : ?string {\n    return getSDKAttribute(SDK_SETTINGS.USER_ID_TOKEN);\n}\n\nexport function getClientAccessToken() : ?string {\n    const clientToken = getClientToken();\n\n    if (clientToken) {\n        return JSON.parse(base64decode(clientToken)).paypal.accessToken;\n    }\n}\n\nexport function getPartnerAttributionID() : ?string {\n    return getSDKAttribute(SDK_SETTINGS.PARTNER_ATTRIBUTION_ID);\n}\n\nexport function getPageType() : ?string {\n    const pageType = getSDKAttribute(SDK_SETTINGS.PAGE_TYPE, '');\n    const validPageType = values(PAGE_TYPES).indexOf(pageType.toLowerCase()) !== -1;\n\n    if (!validPageType && pageType.length) {\n        throw new Error(`Invalid page type, '${ pageType }'`);\n    }\n    return pageType.toLowerCase();\n}\n\nexport function getLocale() : LocaleType {\n    const locale = getSDKQueryParam(SDK_QUERY_KEYS.LOCALE);\n\n    if (locale) {\n        const [ lang, country ] = locale.split('_');\n        return { lang, country };\n    }\n\n    for (let { country, lang } of getBrowserLocales()) {\n        country = country && COUNTRY[country];\n        lang = lang && LANG[lang.toUpperCase()];\n\n        if (country && lang && COUNTRY_LANGS[country] && COUNTRY_LANGS[country].indexOf(lang) !== -1) {\n            return { country, lang };\n        } else if (lang) {\n            // We infer country from language if there is only one possible country match\n            const possibleCountries = Object.keys(COUNTRY_LANGS).filter(c => COUNTRY_LANGS[c].some(l => l === lang));\n            \n            if (possibleCountries.length === 1) {\n                const possibleCountry = possibleCountries[0];\n                return { country: possibleCountry, lang };\n            }\n        }\n    }\n\n    for (const { country } of getBrowserLocales()) {\n        if (COUNTRY_LANGS.hasOwnProperty(country)) {\n            // $FlowFixMe\n            return { country, lang: COUNTRY_LANGS[country][0] };\n        }\n    }\n\n    return {\n        lang:    LANG.EN,\n        country: COUNTRY.US\n    };\n}\n\nexport function getCSPNonce() : string {\n    return getSDKAttribute(SDK_SETTINGS.CSP_NONCE) || '';\n}\n\nexport function getEnableThreeDomainSecure() : boolean {\n    return getSDKAttributes().hasOwnProperty(SDK_SETTINGS.ENABLE_3DS);\n}\n\nexport function getSDKIntegrationSource() : ?string {\n    return getSDKAttribute(SDK_SETTINGS.SDK_INTEGRATION_SOURCE);\n}\n\nexport function getUserExperienceFlow() : ?string {\n    return getSDKAttribute(SDK_SETTINGS.USER_EXPERIENCE_FLOW);\n}\n\n// whether in zoid window\nexport function isChildWindow() : boolean {\n    return Boolean(window.xprops);\n}\n\nexport function getUserAccessToken() : ?string {\n    // pass\n}\n\nexport function getUserAuthCode() : ?string {\n    // pass\n}\n\n// Remove\nexport function getCountry() : $Values<typeof COUNTRY> {\n    return getLocale().country;\n}\n\n// Remove\nexport function getLang() : $Values<typeof LANG> {\n    return getLocale().lang;\n}\n","/* @flow */\n\nexport const LOG_LEVEL = {\n    DEBUG: ('debug' : 'debug'),\n    INFO:  ('info' : 'info'),\n    WARN:  ('warn' : 'warn'),\n    ERROR: ('error' : 'error')\n};\n\nexport const PROTOCOL = {\n    FILE: 'file:'\n};\n","/* @flow */\n\nimport { LOG_LEVEL } from './constants';\n\nexport const AUTO_FLUSH_LEVEL = [ LOG_LEVEL.WARN, LOG_LEVEL.ERROR ];\n\nexport const LOG_LEVEL_PRIORITY = [ LOG_LEVEL.ERROR, LOG_LEVEL.WARN, LOG_LEVEL.INFO, LOG_LEVEL.DEBUG ];\n\nexport const FLUSH_INTERVAL = 60 * 1000;\n\nexport const DEFAULT_LOG_LEVEL : $Values<typeof LOG_LEVEL> = __DEBUG__ ? LOG_LEVEL.DEBUG : LOG_LEVEL.WARN;\n\nexport const AMPLITUDE_URL = 'https://api2.amplitude.com/2/httpapi';\n","/* @flow */\n\nimport { ZalgoPromise } from 'zalgo-promise/src';\nimport { request, isBrowser, promiseDebounce, noop, safeInterval, objFilter } from 'belter/src';\n\nimport { DEFAULT_LOG_LEVEL, LOG_LEVEL_PRIORITY, AUTO_FLUSH_LEVEL, FLUSH_INTERVAL, AMPLITUDE_URL } from './config';\nimport { LOG_LEVEL, PROTOCOL } from './constants';\n\ntype TransportOptions = {|\n    url : string,\n    method : string,\n    headers : { [string] : string },\n    json : Object,\n    enableSendBeacon? : boolean\n|};\n\ntype Payload = { [string] : string | boolean };\ntype Transport = (TransportOptions) => ZalgoPromise<void>;\n\ntype LoggerOptions = {|\n    url? : string,\n    prefix? : string,\n    logLevel? : $Values<typeof LOG_LEVEL>,\n    transport? : Transport,\n    flushInterval? : number,\n    enableSendBeacon? : boolean,\n    amplitudeApiKey? : string\n|};\n\ntype ClientPayload = { [string] : ?string | ?boolean };\ntype Log = (name : string, payload? : ClientPayload) => LoggerType; // eslint-disable-line no-use-before-define\ntype Track = (payload : ClientPayload) => LoggerType; // eslint-disable-line no-use-before-define\n\ntype Builder = (Payload) => ClientPayload;\ntype AddBuilder = (Builder) => LoggerType; // eslint-disable-line no-use-before-define\n\nexport type LoggerType = {|\n    debug : Log,\n    info : Log,\n    warn : Log,\n    error : Log,\n\n    track : Track,\n\n    flush : () => ZalgoPromise<void>,\n    immediateFlush : () => ZalgoPromise<void>,\n\n    addPayloadBuilder : AddBuilder,\n    addMetaBuilder : AddBuilder,\n    addTrackingBuilder : AddBuilder,\n    addHeaderBuilder : AddBuilder,\n\n    setTransport : (Transport) => LoggerType,\n    configure : (LoggerOptions) => LoggerType\n|};\n\nfunction httpTransport({ url, method, headers, json, enableSendBeacon = false } : TransportOptions) : ZalgoPromise<void> {\n    return ZalgoPromise.try(() => {\n        const hasHeaders = headers && Object.keys(headers).length;\n        if (window && window.navigator.sendBeacon && !hasHeaders && enableSendBeacon && window.Blob) {\n            try {\n                const blob = new Blob([ JSON.stringify(json) ], { type: 'application/json' });\n                return window.navigator.sendBeacon(url, blob);\n            } catch (e) {\n                // pass\n            }\n        }\n\n        return request({ url, method, headers, json });\n    }).then(noop);\n}\n\nfunction extendIfDefined(target : { [string] : string | boolean }, source : { [string] : ?string | ?boolean }) {\n    for (const key in source) {\n        if (source.hasOwnProperty(key) && source[key] && !target[key]) {\n            target[key] = source[key];\n        }\n    }\n}\n\nexport function Logger({ url, prefix, logLevel = DEFAULT_LOG_LEVEL, transport = httpTransport, amplitudeApiKey, flushInterval = FLUSH_INTERVAL, enableSendBeacon = false } : LoggerOptions) : LoggerType {\n\n    let events : Array<{| level : $Values<typeof LOG_LEVEL>, event : string, payload : Payload |}> = [];\n    let tracking : Array<Payload> = [];\n\n    const payloadBuilders : Array<Builder> = [];\n    const metaBuilders : Array<Builder> = [];\n    const trackingBuilders : Array<Builder> = [];\n    const headerBuilders : Array<Builder> = [];\n\n    function print(level : $Values<typeof LOG_LEVEL>, event : string, payload : Payload) {\n\n        if (!isBrowser() || !window.console || !window.console.log) {\n            return;\n        }\n\n        if (LOG_LEVEL_PRIORITY.indexOf(level) > LOG_LEVEL_PRIORITY.indexOf(logLevel)) {\n            return;\n        }\n\n        const args = [ event ];\n\n        args.push(payload);\n\n        if (payload.error || payload.warning) {\n            args.push('\\n\\n', payload.error || payload.warning);\n        }\n\n        try {\n            if (window.console[level] && window.console[level].apply) {\n                window.console[level].apply(window.console, args);\n            } else if (window.console.log && window.console.log.apply) {\n                window.console.log.apply(window.console, args);\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    function immediateFlush() : ZalgoPromise<void> {\n        return ZalgoPromise.try(() => {\n            if (!isBrowser() || window.location.protocol === PROTOCOL.FILE) {\n                return;\n            }\n\n            if (!events.length && !tracking.length) {\n                return;\n            }\n\n            const meta = {};\n            for (const builder of metaBuilders) {\n                extendIfDefined(meta, builder(meta));\n            }\n\n            const headers = {};\n            for (const builder of headerBuilders) {\n                extendIfDefined(headers, builder(headers));\n            }\n\n            let res;\n\n            if (url) {\n                res = transport({\n                    method: 'POST',\n                    url,\n                    headers,\n                    json:   {\n                        events,\n                        meta,\n                        tracking\n                    },\n                    enableSendBeacon\n                }).catch(noop);\n            }\n\n            if (amplitudeApiKey) {\n                transport({\n                    method:  'POST',\n                    url:     AMPLITUDE_URL,\n                    headers: {\n                        'content-type': 'application/json'\n                    },\n                    json: {\n                        api_key: amplitudeApiKey,\n                        events:  tracking.map((payload : Payload) => {\n                            // $FlowFixMe\n                            return {\n                                event_type:       payload.transition_name || 'event',\n                                event_properties: payload,\n                                ...payload\n                            };\n                        })\n                    }\n                }).catch(noop);\n            }\n\n            events = [];\n            tracking = [];\n\n            return ZalgoPromise.resolve(res).then(noop);\n        });\n    }\n\n    const flush = promiseDebounce(immediateFlush);\n\n    function enqueue(level : $Values<typeof LOG_LEVEL>, event : string, payload : Payload) {\n\n        events.push({\n            level,\n            event,\n            payload\n        });\n\n        if (AUTO_FLUSH_LEVEL.indexOf(level) !== -1) {\n            flush();\n        }\n    }\n\n    function log(level : $Values<typeof LOG_LEVEL>, event : string, payload = {}) : LoggerType {\n\n        if (!isBrowser()) {\n            return logger; // eslint-disable-line no-use-before-define\n        }\n\n        if (prefix) {\n            event = `${ prefix }_${ event }`;\n        }\n\n        const logPayload : Payload = {\n            ...objFilter(payload),\n            timestamp: Date.now().toString()\n        };\n\n        for (const builder of payloadBuilders) {\n            extendIfDefined(logPayload, builder(logPayload));\n        }\n\n        enqueue(level, event, logPayload);\n        print(level, event, logPayload);\n\n        return logger; // eslint-disable-line no-use-before-define\n    }\n\n    function addBuilder(builders, builder) : LoggerType {\n        builders.push(builder);\n        return logger; // eslint-disable-line no-use-before-define\n    }\n\n    function addPayloadBuilder(builder) : LoggerType {\n        return addBuilder(payloadBuilders, builder);\n    }\n\n    function addMetaBuilder(builder) : LoggerType {\n        return addBuilder(metaBuilders, builder);\n    }\n\n    function addTrackingBuilder(builder) : LoggerType {\n        return addBuilder(trackingBuilders, builder);\n    }\n\n    function addHeaderBuilder(builder) : LoggerType {\n        return addBuilder(headerBuilders, builder);\n    }\n\n    function debug(event, payload) : LoggerType {\n        return log(LOG_LEVEL.DEBUG, event, payload);\n    }\n\n    function info(event, payload) : LoggerType {\n        return log(LOG_LEVEL.INFO, event, payload);\n    }\n\n    function warn(event, payload) : LoggerType {\n        return log(LOG_LEVEL.WARN, event, payload);\n    }\n\n    function error(event, payload) : LoggerType {\n        return log(LOG_LEVEL.ERROR, event, payload);\n    }\n\n    function track(payload = {}) : LoggerType {\n        if (!isBrowser()) {\n            return logger; // eslint-disable-line no-use-before-define\n        }\n\n        const trackingPayload : Payload = objFilter(payload);\n\n        for (const builder of trackingBuilders) {\n            extendIfDefined(trackingPayload, builder(trackingPayload));\n        }\n\n        print(LOG_LEVEL.DEBUG, 'track', trackingPayload);\n        tracking.push(trackingPayload);\n\n        return logger; // eslint-disable-line no-use-before-define\n    }\n\n    function setTransport(newTransport : Transport) : LoggerType {\n        transport = newTransport;\n        return logger; // eslint-disable-line no-use-before-define\n    }\n\n    function configure(opts : LoggerOptions) : LoggerType {\n        if (opts.url) {\n            url = opts.url;\n        }\n\n        if (opts.prefix) {\n            prefix = opts.prefix;\n        }\n\n        if (opts.logLevel) {\n            logLevel = opts.logLevel;\n        }\n\n        if (opts.transport) {\n            transport = opts.transport;\n        }\n\n        if (opts.amplitudeApiKey) {\n            amplitudeApiKey = opts.amplitudeApiKey;\n        }\n\n        if (opts.flushInterval) {\n            flushInterval = opts.flushInterval;\n        }\n\n        if (opts.enableSendBeacon) {\n            enableSendBeacon = opts.enableSendBeacon;\n        }\n\n        return logger; // eslint-disable-line no-use-before-define\n    }\n\n    if (isBrowser()) {\n        safeInterval(flush, flushInterval);\n    }\n\n    if (typeof window === 'object') {\n        window.addEventListener('beforeunload', () => {\n            immediateFlush();\n        });\n\n        window.addEventListener('unload', () => {\n            immediateFlush();\n        });\n    }\n\n    const logger = {\n        debug,\n        info,\n        warn,\n        error,\n        track,\n        flush,\n        immediateFlush,\n        addPayloadBuilder,\n        addMetaBuilder,\n        addTrackingBuilder,\n        addHeaderBuilder,\n        setTransport,\n        configure\n    };\n\n    return logger;\n}\n","/* @flow */\n\nimport { Logger, type LoggerType } from 'beaver-logger/src';\nimport { memoize } from 'belter/src';\n\nimport { getPayPalLoggerUrl } from './domains';\n\ntype GetLogger = () => LoggerType;\n\nexport const getLogger : GetLogger = memoize(() => {\n    return Logger({\n        url: getPayPalLoggerUrl()\n    });\n});\n","/* @flow */\n\nimport { ENV } from '@paypal/sdk-constants/src';\nimport { getDomain, getActualDomain, isCurrentDomain } from 'cross-domain-utils/src';\n\nimport { getProtocol, getStageHost, getPayPalDomain, getPayPalAPIDomain } from './global';\nimport { URI } from './config';\n\nexport function getPayPalLoggerDomain() : string {\n    if (__ENV__ === ENV.LOCAL) {\n        const stageHost = getStageHost();\n\n        if (!stageHost) {\n            throw new Error(`No stage host found`);\n        }\n\n        return `${ getProtocol() }://${ stageHost }`;\n    }\n\n    return getPayPalDomain();\n}\n\nexport function buildPayPalUrl(path : string = '') : string {\n    return (__TEST__ && __WEB__)\n        ? `${ getActualDomain() }${ path }`\n        : `${ getPayPalDomain() }${ path }`;\n}\n\nexport function buildPayPalAPIUrl(path : string = '') : string {\n    const paypalAPIDomain = isCurrentDomain(getPayPalDomain())\n        ? getPayPalDomain()\n        : getPayPalAPIDomain();\n\n    return (__TEST__ && __WEB__)\n        ? `${ getActualDomain() }${ path }`\n        : `${ paypalAPIDomain }${ path }`;\n}\n\nexport function getPayPalLoggerUrl() : string {\n    return buildPayPalUrl(URI.LOGGER);\n}\n\nexport function getAuthAPIUrl() : string {\n    return buildPayPalAPIUrl(URI.AUTH);\n}\n\nexport function getOrderAPIUrl() : string {\n    return buildPayPalAPIUrl(URI.ORDER);\n}\n\nexport function getPayPalDomainRegex() : RegExp {\n    if (__ENV__ === ENV.LOCAL) {\n        return /.*loca.*/;\n    }\n    // eslint-disable-next-line security/detect-unsafe-regex\n    return /\\.paypal\\.com(:\\d+)?$/;\n}\n\nexport function isPayPalDomain() : boolean {\n    return Boolean(getDomain().match(getPayPalDomainRegex()));\n}\n","/* @flow */\n\nimport { ZalgoPromise } from 'zalgo-promise/src';\nimport { memoize, request, base64encode } from 'belter/src';\nimport { FPTI_KEY, SDK_QUERY_KEYS, UNKNOWN } from '@paypal/sdk-constants/src';\n\nimport { getOrderAPIUrl, getAuthAPIUrl } from './domains';\nimport { getLogger } from './logger';\nimport { getIntent, getCurrency, getPartnerAttributionID, getMerchantID } from './script';\nimport { FPTI_CONTEXT_TYPE, FPTI_TRANSITION } from './constants';\n\ntype ApplicationContext = {||};\n\nexport type OrderCreateRequest = {|\n    intent? : 'CAPTURE' | 'AUTHORIZE',\n    application_context? : ApplicationContext,\n    purchase_units : $ReadOnlyArray<{|\n        amount : {|\n            currency_code : string,\n            value : string\n        |},\n        payee? : {|\n            merchant_id? : string,\n            email_address? : string\n        |}\n    |}>\n|};\n\nexport type OrderCaptureResponse = {||};\nexport type OrderGetResponse = {||};\nexport type OrderAuthorizeResponse = {||};\n\ntype CreateAccessToken = (string) => ZalgoPromise<string>;\n\nexport const createAccessToken : CreateAccessToken = memoize(clientID => {\n    getLogger().info(`rest_api_create_access_token`);\n\n    const basicAuth = base64encode(`${ clientID }:`);\n\n    return request({\n\n        method:  `post`,\n        url:     getAuthAPIUrl(),\n        headers: {\n            Authorization: `Basic ${ basicAuth }`\n        },\n        data: {\n            grant_type: `client_credentials`\n        }\n\n    }).then(({ body }) => {\n\n        if (body && body.error === 'invalid_client') {\n            throw new Error(`Auth Api invalid client id: ${ clientID }:\\n\\n${ JSON.stringify(body, null, 4) }`);\n        }\n\n        if (!body || !body.access_token) {\n            throw new Error(`Auth Api response error:\\n\\n${ JSON.stringify(body, null, 4) }`);\n        }\n\n        return body.access_token;\n    });\n});\n\ntype OrderCreateOptions = {|\n    fptiState? : string\n|};\n\nconst getDefaultApplicationContext = () : ApplicationContext => {\n    // $FlowFixMe\n    return {};\n};\n\nexport function createOrder(clientID : string, order : OrderCreateRequest, { fptiState = '' } : OrderCreateOptions = {}) : ZalgoPromise<string> {\n    getLogger().info(`rest_api_create_order_token`);\n\n    if (!clientID) {\n        throw new Error(`Client ID not passed`);\n    }\n\n    if (!order) {\n        throw new Error(`Expected order details to be passed`);\n    }\n\n    const currency = getCurrency();\n    const intent = getIntent();\n    const merchantID = getMerchantID();\n\n    order = { ...order };\n\n    if (order.intent && order.intent.toLowerCase() !== intent) {\n        throw new Error(`Unexpected intent: ${ order.intent } passed to order.create. Please ensure you are passing /sdk/js?${ SDK_QUERY_KEYS.INTENT }=${ order.intent.toLowerCase() } in the paypal script tag.`);\n    }\n\n    // $FlowFixMe\n    order = { ...order, intent: intent.toUpperCase() };\n\n    order.purchase_units = order.purchase_units.map(unit => {\n        if (unit.amount.currency_code && unit.amount.currency_code !== currency) {\n            throw new Error(`Unexpected currency: ${ unit.amount.currency_code } passed to order.create. Please ensure you are passing /sdk/js?${ SDK_QUERY_KEYS.CURRENCY }=${ unit.amount.currency_code } in the paypal script tag.`);\n        }\n        const payee = unit.payee;\n\n        if (payee) {\n            if (!merchantID) {\n                throw new Error(`Pass ${ SDK_QUERY_KEYS.MERCHANT_ID }=XYZ in the paypal script tag. Pass ${ SDK_QUERY_KEYS.MERCHANT_ID }=${ UNKNOWN } if you do not have access to the merchant id`);\n            }\n        }\n\n        return { ...unit, payee, amount: { ...unit.amount, currency_code: currency } };\n    });\n\n    order.application_context = order.application_context || getDefaultApplicationContext();\n\n    return createAccessToken(clientID).then((accessToken) : ZalgoPromise<Object> => {\n\n        const headers : Object = {\n            'Authorization':                 `Bearer ${ accessToken }`,\n            'PayPal-Partner-Attribution-Id': getPartnerAttributionID()\n        };\n\n        return request({\n            method: `post`,\n            url:    getOrderAPIUrl(),\n            headers,\n            json:   order\n        });\n\n    }).then(({ body }) : string => {\n\n        if (!body || !body.id) {\n            throw new Error(`Order Api response error:\\n\\n${ JSON.stringify(body, null, 4) }`);\n        }\n\n        getLogger().track({\n            [FPTI_KEY.STATE]:        fptiState,\n            [FPTI_KEY.TRANSITION]:   FPTI_TRANSITION.CREATE_ORDER,\n            [FPTI_KEY.CONTEXT_TYPE]: FPTI_CONTEXT_TYPE.ORDER_ID,\n            [FPTI_KEY.TOKEN]:        body.id,\n            [FPTI_KEY.CONTEXT_ID]:   body.id\n        });\n\n        return body.id;\n    });\n}\n","/* @flow */\n\nimport { memoize, eventEmitter, type EventEmitterType } from 'belter/src';\n\nexport const getEventEmitter : () => EventEmitterType = memoize(eventEmitter);\n","/* eslint-disable eslint-comments/disable-enable-pair, no-else-return */\nimport stringStartsWith from 'core-js-pure/stable/string/starts-with';\nimport arrayFrom from 'core-js-pure/stable/array/from';\n\nimport { SDK_QUERY_KEYS, SDK_SETTINGS } from '@paypal/sdk-constants/src';\n\nimport {\n    getClientID,\n    getMerchantID,\n    getSDKScript,\n    getEnv as getSDKEnv,\n    getSDKMeta,\n    getSDKAttributes,\n    getSDKQueryParam,\n    getNamespace as getSDKNamespace,\n    getSessionID as getSDKSessionID,\n    getStorageID as getSDKStorageID,\n    getPayPalDomain as getSDKPayPalDomain\n} from '@paypal/sdk-client/src';\n\nimport { isLocalStorageEnabled, getStorage } from 'belter/src';\n\nimport 'core-js-pure/stable/object/entries';\n\n// SDK helper functions with standalone build polyfills\nexport function getEnv() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKEnv();\n    } else {\n        return __ENV__;\n    }\n}\n\nexport function getAccount() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        // TODO: Should we pass both up if they exist so that nodeweb can create a partner context?\n        return getMerchantID()[0] || `client-id:${getClientID()}`;\n    } else {\n        return undefined;\n    }\n}\n\n// Partner accounts should always integrate using client id so no need to prefix it with 'client-id:'\nexport function getPartnerAccount() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getMerchantID()[0] && `client-id:${getClientID()}`;\n    } else {\n        return undefined;\n    }\n}\n\nconst { currentScript } = typeof document !== 'undefined' ? document : {};\nexport function getScript() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKScript();\n    } else {\n        return (\n            currentScript ||\n            document.querySelector('script[src$=\"messaging.js\"]') ||\n            document.querySelector('script[src$=\"merchant.js\"]')\n        );\n    }\n}\n\nexport function getCurrency() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        // Returns 'currency' query param without default to USD\n        return getSDKQueryParam(SDK_QUERY_KEYS.CURRENCY);\n    } else {\n        return undefined;\n    }\n}\n\nexport function getMeta() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKMeta();\n    } else {\n        return undefined;\n    }\n}\n\nexport function getScriptAttributes() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKAttributes();\n    } else {\n        return {};\n    }\n}\n\nexport function getNamespace() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKNamespace();\n    } else {\n        return getScript()?.getAttribute('data-pp-namespace') || 'paypal';\n    }\n}\n\nexport function getLibraryVersion() {\n    return __MESSAGES__.__VERSION__;\n}\n\nexport function isZoidComponent() {\n    return stringStartsWith(window.name, '__zoid__');\n}\n\n// Use SDK methods when available, otherwise manually fetch storage via belter\n// see: https://github.com/paypal/paypal-sdk-client/blob/master/src/session.js\nexport function getSessionID() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKSessionID();\n    } else {\n        return getStorage({ name: getNamespace() }).getSessionID();\n    }\n}\n\n// Retrieves storageID. NOTE: Creates new ID if not already in local storage.\nexport function getOrCreateStorageID() {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKStorageID();\n    } else {\n        return getStorage({ name: getNamespace() }).getID();\n    }\n}\n\nexport function isStorageFresh() {\n    return getStorage({ name: getNamespace() }).isStateFresh();\n}\n\n// Retrieve namespaced localStorage directly\nfunction getRawStorage() {\n    return isLocalStorageEnabled()\n        ? JSON.parse(window.localStorage?.getItem(`__${getNamespace()}_storage__`) ?? '{}')\n        : {};\n}\n\nexport function writeStorageID(storageID) {\n    if (isLocalStorageEnabled()) {\n        try {\n            /* eslint-disable no-unused-expressions, flowtype/no-unused-expressions */\n            window.localStorage?.setItem(\n                `__${getNamespace()}_storage__`,\n                JSON.stringify({\n                    ...getRawStorage(),\n                    id: storageID\n                })\n            );\n        } catch (e) {\n            // Handle Errors\n        }\n    }\n}\n\n// Check if the current script is in the process of being destroyed since\n// the MutationObservers can fire before the SDK destroy lifecycle hook\nexport const isScriptBeingDestroyed = () => {\n    if (__MESSAGES__.__TARGET__ === 'SDK') {\n        const currentSdkScript = getScript();\n        // URL API not supported in IE11, but anchor tags have parsed href properties\n        const location = document.createElement('a');\n        location.href = currentSdkScript.src;\n\n        // Ensure that there are currently no other SDK scripts that might be in the process of destroying this script\n        return arrayFrom(document.querySelectorAll(`script[src*=\"${location.host}/sdk/js\"]`)).some(\n            script =>\n                script !== currentSdkScript &&\n                script.getAttribute(SDK_SETTINGS.NAMESPACE) === currentSdkScript.getAttribute(SDK_SETTINGS.NAMESPACE)\n        );\n    } else {\n        return false;\n    }\n};\n\nexport function getPayPalDomain() {\n    if (__MESSAGES__.__TEST_ENV__) {\n        return __MESSAGES__.__TEST_ENV__;\n    } else if (__MESSAGES__.__TARGET__ === 'SDK') {\n        return getSDKPayPalDomain();\n    } else {\n        return __MESSAGES__.__DOMAIN__[`__${getEnv().toUpperCase()}__`];\n    }\n}\n\nexport function getStageTag() {\n    if (__MESSAGES__.__STAGE_TAG__) {\n        if (__MESSAGES__.__STAGE_TAG__ === 'local') {\n            return window.location.origin;\n        } else {\n            return __MESSAGES__.__STAGE_TAG__;\n        }\n    } else {\n        return undefined;\n    }\n}\n\nexport function getFeatures() {\n    if (__MESSAGES__.__FEATURES__) {\n        return __MESSAGES__.__FEATURES__;\n    } else {\n        return undefined;\n    }\n}\n","import arrayFind from 'core-js-pure/stable/array/find';\nimport arrayFrom from 'core-js-pure/stable/array/from';\nimport arrayFlatMap from 'core-js-pure/stable/array/flat-map';\nimport arrayIncludes from 'core-js-pure/stable/array/includes';\nimport stringStartsWith from 'core-js-pure/stable/string/starts-with';\nimport { ZalgoPromise } from 'zalgo-promise/src';\n\nimport { curry } from './functional';\nimport { objectMerge, flattenedToObject } from './objects';\nimport { ppDebug } from './debug';\n\nexport const getWindowFromElement = node => node?.ownerDocument?.defaultView;\n\nexport const getTopWindow = () => {\n    try {\n        // Try to access body which will throw an error if cross domain\n        return window.top.document.body && window.top;\n    } catch (err) {\n        return undefined;\n    }\n};\n\n/**\n * Check if object is an HTMLElement instance\n * @param {HTMLElement} el Element to check\n * @returns {Boolean} Is an HTMLElement\n */\nexport function isElement(el) {\n    return typeof HTMLElement === 'object'\n        ? el instanceof HTMLElement\n        : el && typeof el === 'object' && el !== null && el.nodeType === 1 && typeof el.nodeName === 'string';\n}\n\n/**\n * Return options object from valid container data attributes\n * @param {HTMLElement} container Container element with data attributes\n * @returns {Object} Options object\n */\nexport function getInlineOptions(container) {\n    // Allows for data attributes dependent on camel casing to function properly.\n    const attributeNameOverride = {\n        buyercountry: 'buyerCountry',\n        merchantid: 'merchantId',\n        fontfamily: 'fontFamily',\n        fontsource: 'fontSource',\n        onclick: 'onClick',\n        onapply: 'onApply',\n        onrender: 'onRender',\n        'style-text-fontfamily': 'style-text-fontFamily',\n        'style-text-fontsource': 'style-text-fontSource'\n    };\n\n    const inlineEventHandlers = ['onclick', 'onapply', 'onrender'];\n\n    const getOptionValue = (name, value) => {\n        if (stringStartsWith(value, '[')) {\n            try {\n                return flattenedToObject(name, JSON.parse(value.replace(/'/g, '\"')));\n            } catch (err) {} // eslint-disable-line no-empty\n        }\n        return flattenedToObject(name, value);\n    };\n\n    const dataOptions = arrayFrom(container.attributes)\n        .filter(({ nodeName }) => stringStartsWith(nodeName, 'data-pp-'))\n        .reduce((accumulator, { nodeName, nodeValue }) => {\n            if (nodeValue) {\n                const attributeName = nodeName.replace('data-pp-', '');\n                const value = arrayIncludes(inlineEventHandlers, attributeName)\n                    ? // eslint-disable-next-line no-new-func\n                      new Function(nodeValue)\n                    : nodeValue;\n\n                return objectMerge(\n                    accumulator,\n                    getOptionValue(attributeNameOverride[attributeName] ?? attributeName, value)\n                );\n            }\n\n            return accumulator;\n        }, {});\n\n    if (\n        !container.firstElementChild ||\n        container.firstElementChild.tagName !== 'SCRIPT' ||\n        container.firstElementChild.getAttribute('type') !== 'text/template'\n    ) {\n        return dataOptions;\n    }\n\n    // For custom banners with inline markup\n    const markup = container.firstElementChild.textContent.trim();\n    container.removeChild(container.firstElementChild);\n\n    return objectMerge(dataOptions, { style: { markup } });\n}\n\n/**\n * Search for the first element of specified class name\n * @param {HTMLElement} container Container to search for element\n * @param {String} className Base element class name without prefix\n * @returns {HTMLElement} Matched element\n */\nexport const getElement = curry(\n    (prefix, container, className) => container.getElementsByClassName(`${prefix}__${className}`)[0]\n);\n\n/**\n * Create a new style element and prepend it to the container\n * @param {HTMLElement} container Container element to prepend new style\n * @param {String} text Text content of the style element\n * @returns {void}\n */\nexport const prependStyle = curry((container, text) => {\n    const elem = document.createElement('style');\n    elem.textContent = text;\n    container.insertBefore(elem, container.firstChild);\n});\n\n/**\n * Append text data into the container element\n * @param {HTMLElement} container Container element to append text\n * @param {any} obj Various inputs representing text to be appended\n * @returns {void}\n */\nexport const appendText = curry((container, obj) => {\n    if (Array.isArray(obj)) {\n        obj.forEach(elem => container.appendChild(elem));\n    } else if (obj instanceof HTMLElement) {\n        container.appendChild(obj);\n    } else if (typeof obj === 'string') {\n        const span = document.createElement('span');\n        span.innerHTML = obj;\n        container.appendChild(span);\n    } else if (obj === false) {\n        container.parentNode.removeChild(container);\n    }\n});\n\n/**\n * Append text data into the container element\n * @param {HTMLElement} container Container element to append text\n * @param {any} obj Various inputs representing text to be appended\n * @returns {void}\n */\nexport const prependText = curry((container, obj) => {\n    if (Array.isArray(obj)) {\n        [...obj].reverse().forEach(elem => container.insertBefore(elem, container.firstChild));\n    } else if (obj instanceof HTMLElement) {\n        container.insertBefore(obj, container.firstChild);\n    } else if (typeof obj === 'string') {\n        const span = document.createElement('span');\n        span.innerHTML = obj;\n        container.insertBefore(span, container.firstChild);\n    } else if (obj === false) {\n        container.parentNode.removeChild(container);\n    }\n});\n\n/**\n * Append a new image into the container element\n * @param {HTMLElement} container Container element to append image\n * @param {String} url Image src attribute\n * @param {String} alt Image alt attribute\n * @param {String} srcset Image srcset attribute\n * @returns {void}\n */\nexport const appendImage = curry((container, url, alt = 'PayPal Credit', srcset = '') => {\n    if (Array.isArray(url)) {\n        url.forEach(logo => appendImage(container, logo, alt));\n    } else if (typeof url === 'string') {\n        const logo = new Image();\n        logo.alt = alt;\n        logo.className = 'message__logo';\n        logo.src = url;\n\n        if (srcset) {\n            logo.srcset = srcset;\n        }\n\n        container.appendChild(logo);\n    } else if (typeof url === 'object') {\n        const {\n            src,\n            dimensions: [width, height]\n        } = url;\n\n        const logo = new Image();\n        logo.src = src;\n        logo.alt = alt;\n\n        const svgWrapper = document.createElement('div');\n        svgWrapper.className = 'message__logo message__logo--svg';\n\n        const canvas = document.createElement('canvas');\n        canvas.height = height;\n        canvas.width = width;\n\n        svgWrapper.appendChild(logo);\n        svgWrapper.appendChild(canvas);\n        container.appendChild(svgWrapper);\n    } else {\n        container.parentNode.removeChild(container);\n    }\n}, 2); // Need to manually set curry arity because of default parameters and transpiling\n\n/**\n * Ensure element is ready to be worked with. Necessary since\n * creating an iframe is asynchronous\n * @param {HTMLElement} element HTML Element\n * @returns {Promise<void>} Promise resolves when element is ready\n */\nexport const waitForElementReady = element =>\n    new ZalgoPromise(resolve => {\n        if (element.tagName === 'IFRAME' && element.contentWindow.document.readyState !== 'complete') {\n            element.addEventListener('load', resolve);\n        } else {\n            resolve();\n        }\n    });\n\n/**\n * Check if an element is within the current viewport\n * @param {HTMLElement} container DOM element\n * @returns {boolean} Visible or not visible\n */\nexport function isInViewport(container) {\n    const containerRect = container.getBoundingClientRect();\n    const containerWindow = getWindowFromElement(container);\n\n    const bannerY = (containerRect.top + containerRect.bottom) / 2;\n    const bannerX = (containerRect.left + containerRect.right) / 2;\n\n    if (bannerY > containerWindow.innerHeight || bannerY < 0) {\n        return false;\n    }\n    if (bannerX > containerWindow.innerWidth || bannerX < 0) {\n        return false;\n    }\n\n    return true;\n}\n\n/**\n * Check if an element is visually hidden on a page\n * @param {HTMLElement} container DOM element\n * @returns {boolean} Hidden or not hidden\n */\nexport function isHidden(container) {\n    const containerWindow = getWindowFromElement(container);\n\n    if (typeof containerWindow.getComputedStyle === 'function') {\n        const containerStyles = containerWindow.getComputedStyle(container);\n        if (\n            containerStyles.getPropertyValue('display') === 'none' ||\n            containerStyles.getPropertyValue('visibility') === 'hidden' ||\n            containerStyles.getPropertyValue('clip') !== 'auto'\n        )\n            return true;\n    }\n\n    const containerRect = container.getBoundingClientRect();\n    if (\n        containerRect.left > containerWindow.document.body.scrollWidth ||\n        containerRect.right < 0 ||\n        containerRect.top > containerWindow.document.body.scrollHeight ||\n        containerRect.bottom < 0\n    )\n        return true;\n\n    return container.offsetWidth === 0 || container.offsetHeight === 0;\n}\n\nexport function getAllBySelector(selector) {\n    if (typeof selector === 'string') {\n        return arrayFrom(document.querySelectorAll(selector));\n    }\n\n    if (isElement(selector)) {\n        return [selector];\n    }\n\n    if (Array.isArray(selector) && selector.every(isElement)) {\n        return arrayFlatMap(selector, getAllBySelector);\n    }\n\n    return [];\n}\n\n/**\n * Check if an element is completely within the bounds of another element\n * @param {HTMLElement} parentEl Parent element.\n * @param {HTMLElement} childEl Element to check if inside of parent.\n * @returns {boolean}\n */\nexport const elementContains = (parentEl, childEl) => {\n    if (\n        (parentEl?.nodeType !== Node.ELEMENT_NODE && !(parentEl instanceof Window)) ||\n        childEl?.nodeType !== Node.ELEMENT_NODE\n    ) {\n        return false;\n    }\n\n    const parentBounds =\n        parentEl instanceof Window\n            ? {\n                  top: 0,\n                  left: 0,\n                  bottom: parentEl.innerHeight,\n                  right: parentEl.innerWidth\n              }\n            : parentEl.getBoundingClientRect();\n    const childBounds = childEl.getBoundingClientRect();\n\n    return (\n        parentBounds.top <= childBounds.top &&\n        parentBounds.bottom >= childBounds.bottom &&\n        parentBounds.left <= childBounds.left &&\n        parentBounds.right >= childBounds.right\n    );\n};\n\n/**\n * Check if an element is completely outside the bounds of another element\n * @param {HTMLElement} parentEl Parent element.\n * @param {HTMLElement} childEl Element to check if outside of parent.\n * @returns {boolean}\n */\n\nexport const elementOutside = (parentEl, childEl) => {\n    if (\n        (parentEl?.nodeType !== Node.ELEMENT_NODE && !(parentEl instanceof Window)) ||\n        childEl?.nodeType !== Node.ELEMENT_NODE\n    ) {\n        return false;\n    }\n\n    const parentBounds =\n        parentEl instanceof Window\n            ? {\n                  top: 0,\n                  left: 0,\n                  bottom: parentEl.innerHeight,\n                  right: parentEl.innerWidth\n              }\n            : parentEl.getBoundingClientRect();\n    const childBounds = childEl.getBoundingClientRect();\n\n    return (\n        childBounds.left >= parentBounds.right ||\n        childBounds.right <= parentBounds.left ||\n        childBounds.bottom <= parentBounds.top ||\n        childBounds.top >= parentBounds.bottom\n    );\n};\n\n/**\n * Get the computed page root element that serves as the best wrapping element\n * that encompasses the entire content on the page without overflowing content\n * @param {HTMLElement} baseElement Element from which to create a path to determine the root\n * @returns {HTMLElement}\n */\nexport const getRoot = baseElement => {\n    const elementWindow = getWindowFromElement(baseElement);\n\n    const domPath = [];\n    {\n        let el = baseElement;\n        // Loop up the DOM tree to the root html node\n        while (el?.parentNode.nodeType === Node.ELEMENT_NODE) {\n            // Skip elements that are collapsed due to various CSS rules\n            // which causes an issue with determining the root element\n            if (el.parentNode.offsetHeight !== 0) {\n                domPath.push(el.parentNode);\n            }\n            el = el.parentNode;\n        }\n    }\n\n    const computedRoot = arrayFind(domPath.reverse(), (el, index, elements) => {\n        // We are searching for the element that contains the page scrolling.\n        // Some merchant sites will use height 100% on elements such as html and body\n        // that cause the intersection observer to hide elements below the fold.\n        const height = el.offsetHeight;\n\n        // window.innerHeight has a variable value on mobile based on the URL bar so\n        // we are looking for the element that is larger than the window\n        // TODO: This could potentially provide a false positive if a merchant is using height 100vh\n        if (height > elementWindow.innerHeight) {\n            return true;\n        }\n\n        // Use array index instead of parentNode be default because collapsed\n        // elements may have been filtered out and should not be used for calculations\n        const parent = elements[index - 1] ?? el.parentNode; // First element should be <html> and will have a parent of document\n        const child = elements[index + 1];\n\n        // Ensure that the selected root is the larger of the parent\n        // and contains the child otherwise there may not be a proper page wrapper\n        // e.g. https://www.acwholesalers.com\n        if (child && child.offsetHeight < height && elementContains(parent, el)) {\n            return true;\n        }\n\n        return false;\n    });\n\n    // If the root element is entirely within the viewport then return undefined\n    // so that the viewport is used as the root. This helps with position fixed\n    // containers that may have content outside of the root element.\n    const root = elementContains(elementWindow, computedRoot) ? undefined : computedRoot;\n\n    ppDebug('Root:', { debugObj: root || 'undefined. Viewport is used as the root.' });\n\n    return root;\n};\n","import arrayFind from 'core-js-pure/stable/array/find';\nimport arrayFrom from 'core-js-pure/stable/array/from';\n\nimport { getWindowFromElement } from './elements';\n\n// Map class name of visible element to size tag.\nconst toTagSize = classList => {\n    const sizes = ['xsmall', 'small', 'medium', 'large', 'xlarge'];\n\n    // Match on first tag contained in classList, ignoring other values.\n    const tag = arrayFind(sizes, size => classList.contains(`tag--${size}`)) || 'NONE';\n\n    return tag.toUpperCase();\n};\n\nconst getTagSize = node => {\n    // Provide NONE as value for section in payload if not shown\n    if (!node) {\n        return 'NONE';\n    }\n\n    const visibleElement = arrayFind(\n        arrayFrom(node.children),\n        element =>\n            getWindowFromElement(node)\n                .getComputedStyle(element)\n                .getPropertyValue('display') !== 'none'\n    );\n\n    if (!visibleElement) {\n        return 'NONE';\n    }\n\n    // Get the tag size of the element shown\n    return toTagSize(visibleElement.classList);\n};\n\nexport function getActiveTags(container) {\n    if (!container) {\n        return `headline:NONE::subheadline:NONE::disclaimer:NONE`;\n    }\n\n    const [headline, subHeadline, disclaimer] = [\n        container.querySelector('.message__headline'),\n        container.querySelector('.message__subheadline'),\n        container.querySelector('.message__disclaimer')\n    ];\n\n    return `headline:${getTagSize(headline)}::subheadline:${getTagSize(subHeadline)}::disclaimer:${getTagSize(\n        disclaimer\n    )}`;\n}\n","import createMessage from './Message';\n\nexport function setupMessage({ markup, meta, parentStyles, warnings }) {\n    const message = createMessage({ markup, meta, parentStyles, warnings });\n    document.body.appendChild(message);\n}\n","import objectEntries from 'core-js-pure/stable/object/entries';\nimport { request, getActiveTags, ppDebug, getOrCreateStorageID, createState } from '../../utils';\n\nconst Message = function({ markup, meta, parentStyles, warnings }) {\n    const { onClick, onReady, onHover, onMarkup, onProps, resize } = window.xprops;\n    const dimensionsRef = { current: { width: 0, height: 0 } };\n\n    const [props, setProps] = createState({\n        amount: window.xprops.amount ?? null,\n        currency: window.xprops.currency ?? null,\n        buyerCountry: window.xprops.buyerCountry ?? null,\n        style: JSON.stringify(window.xprops.style),\n        offer: window.xprops.offer ?? null,\n        payerId: window.xprops.payerId ?? null,\n        clientId: window.xprops.clientId ?? null,\n        merchantId: window.xprops.merchantId ?? null\n    });\n\n    const [serverData, setServerData] = createState({\n        metaMessageRequestId: meta.messageRequestId ?? null,\n        parentStyles,\n        warnings,\n        markup\n    });\n\n    const handleClick = () => {\n        if (typeof onClick === 'function') {\n            onClick({ meta });\n        }\n    };\n\n    const handleHover = () => {\n        if (typeof onHover === 'function') {\n            onHover({ meta });\n        }\n    };\n\n    // if there is a button reuse that instead of making a new one\n    const button = document.createElement('button');\n\n    button.setAttribute('type', 'button');\n    button.setAttribute('aria-label', 'PayPal Pay Later Message');\n\n    button.addEventListener('click', handleClick);\n    button.addEventListener('mouseover', handleHover);\n    button.addEventListener('focus', handleHover);\n\n    button.style.display = 'block';\n    button.style.background = 'transparent';\n    button.style.padding = 0;\n    button.style.border = 'none';\n    button.style.outline = 'none';\n    button.style.textAlign = window.xprops.style?.text?.align || 'left';\n    button.style.fontFamily = 'inherit';\n    button.style.fontSize = 'inherit';\n    button.innerHTML = markup;\n\n    onReady({\n        meta,\n        activeTags: getActiveTags(button),\n        // Utility will create iframe deviceID if it doesn't exist.\n        deviceID: getOrCreateStorageID()\n    });\n\n    onMarkup({ meta, styles: parentStyles, warnings });\n\n    if (typeof onProps === 'function') {\n        onProps(xprops => {\n            const shouldRerender = Object.keys(props).some(key =>\n                typeof props[key] !== 'object'\n                    ? props[key] !== xprops[key]\n                    : JSON.stringify(props[key]) !== JSON.stringify(xprops[key])\n            );\n\n            if (shouldRerender) {\n                const {\n                    amount,\n                    currency,\n                    buyerCountry,\n                    offer,\n                    payerId,\n                    clientId,\n                    merchantId,\n                    version,\n                    env,\n                    features,\n                    stageTag,\n                    style\n                } = xprops;\n\n                setProps({\n                    amount,\n                    currency,\n                    buyerCountry,\n                    style: JSON.stringify(style),\n                    offer,\n                    payerId,\n                    clientId,\n                    merchantId\n                });\n\n                const query = objectEntries({\n                    message_request_id: meta.messageRequestId,\n                    amount,\n                    currency,\n                    buyer_country: buyerCountry,\n                    style,\n                    credit_type: offer,\n                    payer_id: payerId,\n                    client_id: clientId,\n                    merchant_id: merchantId,\n                    features,\n                    version,\n                    env,\n                    stageTag\n                })\n                    .filter(([, val]) => Boolean(val))\n                    .reduce(\n                        (acc, [key, val]) =>\n                            `${acc}&${key}=${encodeURIComponent(typeof val === 'object' ? JSON.stringify(val) : val)}`,\n                        ''\n                    )\n                    .slice(1);\n\n                ppDebug('Updating message with new props...', { inZoid: true });\n\n                request('GET', `${window.location.origin}/credit-presentment/renderMessage?${query}`).then(\n                    ({ data }) => {\n                        button.innerHTML = data.markup ?? markup;\n                        const buttonWidth = button.offsetWidth;\n                        const buttonHeight = button.offsetHeight;\n                        // Zoid will not fire a resize event if the markup has the same dimensions meaning the render event\n                        // in the overflow observer will not fire. This forces the resize event to fire for every render\n                        // so that the render complete logs will always fire\n                        if (\n                            dimensionsRef.current.width === buttonWidth &&\n                            dimensionsRef.current.height === buttonHeight\n                        ) {\n                            // resizes the iframe\n                            resize({ width: buttonWidth, height: buttonHeight });\n                        } else {\n                            dimensionsRef.current = { width: buttonWidth, height: buttonHeight };\n                        }\n\n                        if (typeof onReady === 'function') {\n                            if (\n                                serverData.metaMessageRequestId !==\n                                (data.meta.messageRequestId ?? meta.messageRequestId)\n                            ) {\n                                onReady({\n                                    meta: data.meta ?? meta,\n                                    activeTags: getActiveTags(button),\n                                    // Utility will create iframe deviceID if it doesn't exist.\n                                    deviceID: getOrCreateStorageID()\n                                });\n                            }\n                        }\n\n                        if (typeof onMarkup === 'function') {\n                            if (\n                                serverData.parentStyles !== (data.parentStyles ?? parentStyles) ||\n                                serverData.warnings !== (data.warnings ?? warnings) ||\n                                serverData.markup !== (data.markup ?? markup)\n                            ) {\n                                // resizes the parent message div\n                                onMarkup({\n                                    meta: data.meta ?? meta,\n                                    styles: data.parentStyles ?? parentStyles,\n                                    warnings: data.warnings ?? warnings\n                                });\n                            }\n                        }\n\n                        setServerData({\n                            metaMessageRequestId: data.meta.messageRequestId ?? meta.messageRequestId,\n                            parentStyles: data.parentStyles ?? parentStyles,\n                            warnings: data.warnings ?? warnings,\n                            markup: data.markup ?? markup\n                        });\n                    }\n                );\n            }\n        });\n    }\n\n    return button;\n};\n\nexport default Message;\n","import { isZoidComponent } from './sdk';\n/**\n * Messaging debug log. When the query param \"pp_debug\" is used on a page with a message and set to \"true\", a series of logs will appear\n * within the browser's developer tools console.\n * @param {string} message - The name of the parameter you are logging out. Also often times includes the parameter to be logged\n * within a template string.\n * @param {object} debugObj - Optional argument used in cases where the property you wish to log is an object. i.e.\n * an HTML element. ppDebug('Script:', { debugObj: script }).\n * @param {boolean} inZoid - Optional argument. Set inZoid to true if you wish to log inside of the iframe. i.e. ppDebug('Sample message', {inZoid: true}). Not using this\n * argument defaults inZoid to false.\n */\nexport function ppDebug(message, { inZoid, debugObj } = {}) {\n    if (/(\\?|&)pp_debug=true(&|$)/.test(window.location.search) && !!inZoid === isZoidComponent()) {\n        // eslint-disable-next-line no-console\n        console.warn('PayPal Messages Debug:', message, debugObj ?? '');\n    }\n}\n"],"sourceRoot":""}